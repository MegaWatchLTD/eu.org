/*

 Video.js 7.8.4 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>

 slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 Copyright (c) 2014 David Bj?rklund
 Available under the MIT license
 <https://github.com/kesla/parse-headers/blob/master/LICENCE>

 Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 2021 mister-ben <git@misterben.me>
 @license MIT
 Programatically add the following
 @name m3u8-parser @version 4.4.0 @license Apache-2.0  @name mpd-parser @version 0.10.0 @license Apache-2.0  2020 Brightcove, Inc
 @license Apache-2.0
 @name videojs-seek-buttons @version 1.6.0 @license Apache-2.0  @silvermine/videojs-quality-selector 2021-04-17 56e32b3-dirty  @name videojs-landscape-fullscreen @version 1.6.1 @license ISC */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(r){var C=0;return function(){return C<r.length?{done:!1,value:r[C++]}:{done:!0}}};$jscomp.arrayIterator=function(r){return{next:$jscomp.arrayIteratorImpl(r)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(r,C,W){if(r==Array.prototype||r==Object.prototype)return r;r[C]=W.value;return r};$jscomp.getGlobal=function(r){r=["object"==typeof globalThis&&globalThis,r,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var C=0;C<r.length;++C){var W=r[C];if(W&&W.Math==Math)return W}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(r,C){var W=$jscomp.propertyToPolyfillSymbol[C];if(null==W)return r[C];W=r[W];return void 0!==W?W:r[C]};
$jscomp.polyfill=function(r,C,W,y){C&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(r,C,W,y):$jscomp.polyfillUnisolated(r,C,W,y))};$jscomp.polyfillUnisolated=function(r,C,W,y){W=$jscomp.global;r=r.split(".");for(y=0;y<r.length-1;y++){var J=r[y];if(!(J in W))return;W=W[J]}r=r[r.length-1];y=W[r];C=C(y);C!=y&&null!=C&&$jscomp.defineProperty(W,r,{configurable:!0,writable:!0,value:C})};
$jscomp.polyfillIsolated=function(r,C,W,y){var J=r.split(".");r=1===J.length;y=J[0];y=!r&&y in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var S=0;S<J.length-1;S++){var w=J[S];if(!(w in y))return;y=y[w]}J=J[J.length-1];W=$jscomp.IS_SYMBOL_NATIVE&&"es6"===W?y[J]:null;C=C(W);null!=C&&(r?$jscomp.defineProperty($jscomp.polyfills,J,{configurable:!0,writable:!0,value:C}):C!==W&&($jscomp.propertyToPolyfillSymbol[J]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(J):$jscomp.POLYFILL_PREFIX+J,J=
$jscomp.propertyToPolyfillSymbol[J],$jscomp.defineProperty(y,J,{configurable:!0,writable:!0,value:C})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(r){if(r)return r;var C=function(J,S){this.$jscomp$symbol$id_=J;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:S})};C.prototype.toString=function(){return this.$jscomp$symbol$id_};var W=0,y=function(J){if(this instanceof y)throw new TypeError("Symbol is not a constructor");return new C("jscomp_symbol_"+(J||"")+"_"+W++,J)};return y},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(r){if(r)return r;r=Symbol("Symbol.iterator");for(var C="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),W=0;W<C.length;W++){var y=$jscomp.global[C[W]];"function"===typeof y&&"function"!=typeof y.prototype[r]&&$jscomp.defineProperty(y.prototype,r,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return r},"es6",
"es3");$jscomp.iteratorPrototype=function(r){r={next:r};r[Symbol.iterator]=function(){return this};return r};$jscomp.makeIterator=function(r){var C="undefined"!=typeof Symbol&&Symbol.iterator&&r[Symbol.iterator];return C?C.call(r):$jscomp.arrayIterator(r)};$jscomp.arrayFromIterator=function(r){for(var C,W=[];!(C=r.next()).done;)W.push(C.value);return W};$jscomp.arrayFromIterable=function(r){return r instanceof Array?r:$jscomp.arrayFromIterator($jscomp.makeIterator(r))};
$jscomp.underscoreProtoCanBeSet=function(){var r={a:!0},C={};try{return C.__proto__=r,C.a}catch(W){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(r,C){r.__proto__=C;if(r.__proto__!==C)throw new TypeError(r+" is not extensible");return r}:null;$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(r){if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(r){this.yieldResult=r};
$jscomp.generator.Context.prototype.throw_=function(r){this.abruptCompletion_={exception:r,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(r){this.abruptCompletion_={return:r};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(r){this.abruptCompletion_={jumpTo:r};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(r,C){this.nextAddress=C;return{value:r}};
$jscomp.generator.Context.prototype.yieldAll=function(r,C){r=$jscomp.makeIterator(r);var W=r.next();$jscomp.generator.ensureIteratorResultIsObject_(W);if(W.done)this.yieldResult=W.value,this.nextAddress=C;else return this.yieldAllIterator_=r,this.yield(W.value,C)};$jscomp.generator.Context.prototype.jumpTo=function(r){this.nextAddress=r};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(r,C){this.catchAddress_=r;void 0!=C&&(this.finallyAddress_=C)};$jscomp.generator.Context.prototype.setFinallyBlock=function(r){this.catchAddress_=0;this.finallyAddress_=r||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(r,C){this.nextAddress=r;this.catchAddress_=C||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(r){this.catchAddress_=r||0;r=this.abruptCompletion_.exception;this.abruptCompletion_=null;return r};$jscomp.generator.Context.prototype.enterFinallyBlock=function(r,C,W){W?this.finallyContexts_[W]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=r||0;this.finallyAddress_=C||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(r,C){C=this.finallyContexts_.splice(C||0)[0];if(C=this.abruptCompletion_=this.abruptCompletion_||C){if(C.isException)return this.jumpToErrorHandler_();void 0!=C.jumpTo&&this.finallyAddress_<C.jumpTo?(this.nextAddress=C.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=r};$jscomp.generator.Context.prototype.forIn=function(r){return new $jscomp.generator.Context.PropertyIterator(r)};
$jscomp.generator.Context.PropertyIterator=function(r){this.object_=r;this.properties_=[];for(var C in r)this.properties_.push(C);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var r=this.properties_.pop();if(r in this.object_)return r}return null};$jscomp.generator.Engine_=function(r){this.context_=new $jscomp.generator.Context;this.program_=r};
$jscomp.generator.Engine_.prototype.next_=function(r){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,r,this.context_.next_);this.context_.next_(r);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(r){this.context_.start_();var C=this.context_.yieldAllIterator_;if(C)return this.yieldAllStep_("return"in C?C["return"]:function(W){return{value:W,done:!0}},r,this.context_.return);this.context_.return(r);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(r){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],r,this.context_.next_);this.context_.throw_(r);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(r,C,W){try{var y=r.call(this.context_.yieldAllIterator_,C);$jscomp.generator.ensureIteratorResultIsObject_(y);if(!y.done)return this.context_.stop_(),y;var J=y.value}catch(S){return this.context_.yieldAllIterator_=null,this.context_.throw_(S),this.nextStep_()}this.context_.yieldAllIterator_=null;W.call(this.context_,J);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var r=this.program_(this.context_);if(r)return this.context_.stop_(),{value:r.value,done:!1}}catch(C){this.context_.yieldResult=void 0,this.context_.throw_(C)}this.context_.stop_();if(this.context_.abruptCompletion_){r=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(r.isException)throw r.exception;return{value:r.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(r){this.next=function(C){return r.next_(C)};this.throw=function(C){return r.throw_(C)};this.return=function(C){return r.return_(C)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(r,C){C=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(C));$jscomp.setPrototypeOf&&r.prototype&&$jscomp.setPrototypeOf(C,r.prototype);return C};
$jscomp.asyncExecutePromiseGenerator=function(r){function C(y){return r.next(y)}function W(y){return r.throw(y)}return new Promise(function(y,J){function S(w){w.done?y(w.value):Promise.resolve(w.value).then(C,W).then(S,J)}S(r.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(r){return $jscomp.asyncExecutePromiseGenerator(r())};$jscomp.asyncExecutePromiseGeneratorProgram=function(r){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(r)))};
$jscomp.polyfill("Promise",function(r){function C(){this.batch_=null}function W(w){return w instanceof J?w:new J(function(A,z){A(w)})}if(r&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return r;C.prototype.asyncExecute=function(w){if(null==this.batch_){this.batch_=[];var A=this;this.asyncExecuteFunction(function(){A.executeBatch_()})}this.batch_.push(w)};
var y=$jscomp.global.setTimeout;C.prototype.asyncExecuteFunction=function(w){y(w,0)};C.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var w=this.batch_;this.batch_=[];for(var A=0;A<w.length;++A){var z=w[A];w[A]=null;try{z()}catch(E){this.asyncThrow_(E)}}}this.batch_=null};C.prototype.asyncThrow_=function(w){this.asyncExecuteFunction(function(){throw w;})};var J=function(w){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var A=this.createResolveAndReject_();
try{w(A.resolve,A.reject)}catch(z){A.reject(z)}};J.prototype.createResolveAndReject_=function(){function w(E){return function(H){z||(z=!0,E.call(A,H))}}var A=this,z=!1;return{resolve:w(this.resolveTo_),reject:w(this.reject_)}};J.prototype.resolveTo_=function(w){if(w===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(w instanceof J)this.settleSameAsPromise_(w);else{a:switch(typeof w){case "object":var A=null!=w;break a;case "function":A=!0;break a;default:A=!1}A?this.resolveToNonPromiseObj_(w):
this.fulfill_(w)}};J.prototype.resolveToNonPromiseObj_=function(w){var A=void 0;try{A=w.then}catch(z){this.reject_(z);return}"function"==typeof A?this.settleSameAsThenable_(A,w):this.fulfill_(w)};J.prototype.reject_=function(w){this.settle_(2,w)};J.prototype.fulfill_=function(w){this.settle_(1,w)};J.prototype.settle_=function(w,A){if(0!=this.state_)throw Error("Cannot settle("+w+", "+A+"): Promise already settled in state"+this.state_);this.state_=w;this.result_=A;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};J.prototype.scheduleUnhandledRejectionCheck_=function(){var w=this;y(function(){if(w.notifyUnhandledRejection_()){var A=$jscomp.global.console;"undefined"!==typeof A&&A.error(w.result_)}},1)};J.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var w=$jscomp.global.CustomEvent,A=$jscomp.global.Event,z=$jscomp.global.dispatchEvent;if("undefined"===typeof z)return!0;"function"===typeof w?w=new w("unhandledrejection",{cancelable:!0}):
"function"===typeof A?w=new A("unhandledrejection",{cancelable:!0}):(w=$jscomp.global.document.createEvent("CustomEvent"),w.initCustomEvent("unhandledrejection",!1,!0,w));w.promise=this;w.reason=this.result_;return z(w)};J.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var w=0;w<this.onSettledCallbacks_.length;++w)S.asyncExecute(this.onSettledCallbacks_[w]);this.onSettledCallbacks_=null}};var S=new C;J.prototype.settleSameAsPromise_=function(w){var A=this.createResolveAndReject_();
w.callWhenSettled_(A.resolve,A.reject)};J.prototype.settleSameAsThenable_=function(w,A){var z=this.createResolveAndReject_();try{w.call(A,z.resolve,z.reject)}catch(E){z.reject(E)}};J.prototype.then=function(w,A){function z(T,L){return"function"==typeof T?function(sa){try{E(T(sa))}catch(X){H(X)}}:L}var E,H,U=new J(function(T,L){E=T;H=L});this.callWhenSettled_(z(w,E),z(A,H));return U};J.prototype.catch=function(w){return this.then(void 0,w)};J.prototype.callWhenSettled_=function(w,A){function z(){switch(E.state_){case 1:w(E.result_);
break;case 2:A(E.result_);break;default:throw Error("Unexpected state: "+E.state_);}}var E=this;null==this.onSettledCallbacks_?S.asyncExecute(z):this.onSettledCallbacks_.push(z);this.isRejectionHandled_=!0};J.resolve=W;J.reject=function(w){return new J(function(A,z){z(w)})};J.race=function(w){return new J(function(A,z){for(var E=$jscomp.makeIterator(w),H=E.next();!H.done;H=E.next())W(H.value).callWhenSettled_(A,z)})};J.all=function(w){var A=$jscomp.makeIterator(w),z=A.next();return z.done?W([]):new J(function(E,
H){function U(sa){return function(X){T[sa]=X;L--;0==L&&E(T)}}var T=[],L=0;do T.push(void 0),L++,W(z.value).callWhenSettled_(U(T.length-1),H),z=A.next();while(!z.done)})};return J},"es6","es3");$jscomp.polyfill("Object.is",function(r){return r?r:function(C,W){return C===W?0!==C||1/C===1/W:C!==C&&W!==W}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(r){return r?r:function(C,W){var y=this;y instanceof String&&(y=String(y));var J=y.length;W=W||0;for(0>W&&(W=Math.max(W+J,0));W<J;W++){var S=y[W];if(S===C||Object.is(S,C))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(r,C,W){if(null==r)throw new TypeError("The 'this' value for String.prototype."+W+" must not be null or undefined");if(C instanceof RegExp)throw new TypeError("First argument to String.prototype."+W+" must not be a regular expression");return r+""};$jscomp.polyfill("String.prototype.includes",function(r){return r?r:function(C,W){return-1!==$jscomp.checkStringArgs(this,C,"includes").indexOf(C,W||0)}},"es6","es3");
$jscomp.owns=function(r,C){return Object.prototype.hasOwnProperty.call(r,C)};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(r,C){for(var W=1;W<arguments.length;W++){var y=arguments[W];if(y)for(var J in y)$jscomp.owns(y,J)&&(r[J]=y[J])}return r};$jscomp.polyfill("Object.assign",function(r){return r||$jscomp.assign},"es6","es3");
$jscomp.iteratorFromArray=function(r,C){r instanceof String&&(r+="");var W=0,y=!1,J={next:function(){if(!y&&W<r.length){var S=W++;return{value:C(S,r[S]),done:!1}}y=!0;return{done:!0,value:void 0}}};J[Symbol.iterator]=function(){return J};return J};$jscomp.polyfill("Array.prototype.keys",function(r){return r?r:function(){return $jscomp.iteratorFromArray(this,function(C){return C})}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var r={},C=Object.create(new $jscomp.global.Proxy(r,{get:function(W,y,J){return W==r&&"q"==y&&J==C}}));return!0===C.q}catch(W){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(r){function C(){if(!r||!Object.seal)return!1;try{var E=Object.seal({}),H=Object.seal({}),U=new r([[E,2],[H,3]]);if(2!=U.get(E)||3!=U.get(H))return!1;U.delete(E);U.set(H,4);return!U.has(E)&&4==U.get(H)}catch(T){return!1}}function W(){}function y(E){var H=typeof E;return"object"===H&&null!==E||"function"===H}function J(E){if(!$jscomp.owns(E,w)){var H=new W;$jscomp.defineProperty(E,w,{value:H})}}function S(E){if(!$jscomp.ISOLATE_POLYFILLS){var H=Object[E];H&&(Object[E]=
function(U){if(U instanceof W)return U;Object.isExtensible(U)&&J(U);return H(U)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(r&&$jscomp.ES6_CONFORMANCE)return r}else if(C())return r;var w="$jscomp_hidden_"+Math.random();S("freeze");S("preventExtensions");S("seal");var A=0,z=function(E){this.id_=(A+=Math.random()+1).toString();if(E){E=$jscomp.makeIterator(E);for(var H;!(H=E.next()).done;)H=H.value,this.set(H[0],H[1])}};z.prototype.set=function(E,H){if(!y(E))throw Error("Invalid WeakMap key");
J(E);if(!$jscomp.owns(E,w))throw Error("WeakMap key fail: "+E);E[w][this.id_]=H;return this};z.prototype.get=function(E){return y(E)&&$jscomp.owns(E,w)?E[w][this.id_]:void 0};z.prototype.has=function(E){return y(E)&&$jscomp.owns(E,w)&&$jscomp.owns(E[w],this.id_)};z.prototype.delete=function(E){return y(E)&&$jscomp.owns(E,w)&&$jscomp.owns(E[w],this.id_)?delete E[w][this.id_]:!1};return z},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(r){function C(){if($jscomp.ASSUME_NO_NATIVE_MAP||!r||"function"!=typeof r||!r.prototype.entries||"function"!=typeof Object.seal)return!1;try{var z=Object.seal({x:4}),E=new r($jscomp.makeIterator([[z,"s"]]));if("s"!=E.get(z)||1!=E.size||E.get({x:4})||E.set({x:4},"t")!=E||2!=E.size)return!1;var H=E.entries(),U=H.next();if(U.done||U.value[0]!=z||"s"!=U.value[1])return!1;U=H.next();return U.done||4!=U.value[0].x||"t"!=U.value[1]||!H.next().done?!1:!0}catch(T){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(r&&$jscomp.ES6_CONFORMANCE)return r}else if(C())return r;var W=new WeakMap,y=function(z){this.data_={};this.head_=w();this.size=0;if(z){z=$jscomp.makeIterator(z);for(var E;!(E=z.next()).done;)E=E.value,this.set(E[0],E[1])}};y.prototype.set=function(z,E){z=0===z?0:z;var H=J(this,z);H.list||(H.list=this.data_[H.id]=[]);H.entry?H.entry.value=E:(H.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:z,value:E},H.list.push(H.entry),
this.head_.previous.next=H.entry,this.head_.previous=H.entry,this.size++);return this};y.prototype.delete=function(z){z=J(this,z);return z.entry&&z.list?(z.list.splice(z.index,1),z.list.length||delete this.data_[z.id],z.entry.previous.next=z.entry.next,z.entry.next.previous=z.entry.previous,z.entry.head=null,this.size--,!0):!1};y.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=w();this.size=0};y.prototype.has=function(z){return!!J(this,z).entry};y.prototype.get=function(z){return(z=
J(this,z).entry)&&z.value};y.prototype.entries=function(){return S(this,function(z){return[z.key,z.value]})};y.prototype.keys=function(){return S(this,function(z){return z.key})};y.prototype.values=function(){return S(this,function(z){return z.value})};y.prototype.forEach=function(z,E){for(var H=this.entries(),U;!(U=H.next()).done;)U=U.value,z.call(E,U[1],U[0],this)};y.prototype[Symbol.iterator]=y.prototype.entries;var J=function(z,E){var H=E&&typeof E;"object"==H||"function"==H?W.has(E)?H=W.get(E):
(H=""+ ++A,W.set(E,H)):H="p_"+E;var U=z.data_[H];if(U&&$jscomp.owns(z.data_,H))for(z=0;z<U.length;z++){var T=U[z];if(E!==E&&T.key!==T.key||E===T.key)return{id:H,list:U,index:z,entry:T}}return{id:H,list:U,index:-1,entry:void 0}},S=function(z,E){var H=z.head_;return $jscomp.iteratorPrototype(function(){if(H){for(;H.head!=z.head_;)H=H.previous;for(;H.next!=H.head;)return H=H.next,{done:!1,value:E(H)};H=null}return{done:!0,value:void 0}})},w=function(){var z={};return z.previous=z.next=z.head=z},A=0;
return y},"es6","es3");
$jscomp.polyfill("Set",function(r){function C(){if($jscomp.ASSUME_NO_NATIVE_SET||!r||"function"!=typeof r||!r.prototype.entries||"function"!=typeof Object.seal)return!1;try{var y=Object.seal({x:4}),J=new r($jscomp.makeIterator([y]));if(!J.has(y)||1!=J.size||J.add(y)!=J||1!=J.size||J.add({x:4})!=J||2!=J.size)return!1;var S=J.entries(),w=S.next();if(w.done||w.value[0]!=y||w.value[1]!=y)return!1;w=S.next();return w.done||w.value[0]==y||4!=w.value[0].x||w.value[1]!=w.value[0]?!1:S.next().done}catch(A){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(r&&$jscomp.ES6_CONFORMANCE)return r}else if(C())return r;var W=function(y){this.map_=new Map;if(y){y=$jscomp.makeIterator(y);for(var J;!(J=y.next()).done;)this.add(J.value)}this.size=this.map_.size};W.prototype.add=function(y){y=0===y?0:y;this.map_.set(y,y);this.size=this.map_.size;return this};W.prototype.delete=function(y){y=this.map_.delete(y);this.size=this.map_.size;return y};W.prototype.clear=function(){this.map_.clear();this.size=0};W.prototype.has=
function(y){return this.map_.has(y)};W.prototype.entries=function(){return this.map_.entries()};W.prototype.values=function(){return this.map_.values()};W.prototype.keys=W.prototype.values;W.prototype[Symbol.iterator]=W.prototype.values;W.prototype.forEach=function(y,J){var S=this;this.map_.forEach(function(w){return y.call(J,w,w,S)})};return W},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(r){return r?r:function(C,W,y){var J=this.length||0;0>W&&(W=Math.max(0,J+W));if(null==y||y>J)y=J;y=Number(y);0>y&&(y=Math.max(0,J+y));for(W=Number(W||0);W<y;W++)this[W]=C;return this}},"es6","es3");$jscomp.typedArrayFill=function(r){return r?r:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Array.prototype.values",function(r){return r?r:function(){return $jscomp.iteratorFromArray(this,function(C,W){return W})}},"es8","es3");$jscomp.polyfill("Object.setPrototypeOf",function(r){return r||$jscomp.setPrototypeOf},"es6","es5");$jscomp.polyfill("Reflect",function(r){return r?r:{}},"es6","es3");
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(r){var C=function(){};C.prototype=r;return new C};
$jscomp.getConstructImplementation=function(){function r(){function W(){}new W;Reflect.construct(W,[],function(){});return new W instanceof W}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(r())return Reflect.construct;var C=Reflect.construct;return function(W,y,J){W=C(W,y);J&&Reflect.setPrototypeOf(W,J.prototype);return W}}return function(W,y,J){void 0===J&&(J=W);J=$jscomp.objectCreate(J.prototype||Object.prototype);return Function.prototype.apply.call(W,J,y)||
J}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.polyfill("Reflect.construct",function(r){return $jscomp.construct},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(r){return r?r:function(){return $jscomp.iteratorFromArray(this,function(C,W){return[C,W]})}},"es6","es3");$jscomp.findInternal=function(r,C,W){r instanceof String&&(r=String(r));for(var y=r.length,J=0;J<y;J++){var S=r[J];if(C.call(W,S,J,r))return{i:J,v:S}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.findIndex",function(r){return r?r:function(C,W){return $jscomp.findInternal(this,C,W).i}},"es6","es3");$jscomp.polyfill("Array.prototype.find",function(r){return r?r:function(C,W){return $jscomp.findInternal(this,C,W).v}},"es6","es3");
function getPlayerControlBarSettings(){var r="playToggle volumePanel CurrentTimeDisplay CurrentTimeDisplay TimeDivider DurationDisplay CustomControlSpacer qualitySelector fullscreenToggle progressControl".split(" "),C="volumePanel CurrentTimeDisplay TimeDivider DurationDisplay CustomControlSpacer qualitySelector fullscreenToggle progressControl".split(" ");return 768<=window.screen.width?r:C}
function getPlayerOptions(r,C,W){return{textTrackSettings:!0,persistTextTrackSettings:!0,preload:!0,playbackTitle:W,poster:C,inactivityTimeout:4E3,responsive:!0,autoplay:!1,techOrder:["chromecast","html5"],chromecast:{preloadTextTracks:!1,requestBackdropFn:function(){return C},requestPosterFn:function(){return r},requestTitleFn:function(){return W},requestSubtitleFn:function(){return"Playing on "+window.location.host}},controlBar:{volumePanel:{inline:!1},children:getPlayerControlBarSettings()},plugins:{mobileUi:{},
landscapeFullscreen:{fullscreen:{enterOnRotate:!1,alwaysInLandscapeMode:!1,iOS:!1}},seekButtons:{forward:768<=window.screen.width?10:0,back:768<=window.screen.width?10:0},chromecast:{addButtonToControlBar:!0,buttonPositionIndex:window.videojs.browser.IS_IOS||window.videojs.browser.IS_ANDROID?5:7},airplayButton:{},hotkeys:{volumeStep:.1,seekStep:10,enableVolumeScroll:!1,enableModifiersForNumbers:!1}},html5:{preloadTextTracks:!1}}}
function MoviesView(){function r(w){window.videoJS=videojs("video_player",getPlayerOptions(window.movie_storage.movie_poster,window.movie_storage.backdrop_huge,window.movie_storage.title+" ("+window.movie_storage.year+")"),function(){this.addClass("plyr-skin");this.aspectRatio("16:9");vjsCreateSubtitlesButton(this);addControlBarOverlay(this);vjsCreatePlaybackTitleComponent(this);this.on("fullscreenchange",function(){playerFullscreenChangeHandler(this.isFullscreen())}.bind(this));this.on("error",handlePlayerErrorMessage);
this.on("clickHandleTrackUpload",SubtitleUploadHandle);this.updatePlaybackTitle(this.options().playbackTitle);var A=[];"undefined"!==typeof w["360p"]&&A.push({src:w["360p"],label:"360p",type:"application/vnd.apple.mpegurl",withCredentials:!1,selected:"undefined"===typeof w["480p"]});if("undefined"!==typeof w["480p"]){var z="mp4"===w["480p"].substr(-3)?"video/mp4":"application/vnd.apple.mpegurl";A.push({src:w["480p"],label:"480p",type:z,withCredentials:!1,selected:!0})}"undefined"!==typeof w["720p"]&&
(w["720p"].substr(-3),A.push({src:w["720p"],type:"application/vnd.apple.mpegurl",label:"HD",withCredentials:!1,selected:"undefined"===typeof w["480p"]&&"undefined"===typeof w["360p"]}));"undefined"!==typeof w["1080p"]&&"limited"===Yii2App.playbackStatus&&add1080pButton(this);"undefined"!==typeof w["1080p"]&&"unlimited"===Yii2App.playbackStatus&&(w["1080p"].substr(-3),A.push({src:w["1080p"],label:"FullHD",type:"application/x-mpegURL",withCredentials:!1,selected:"undefined"===typeof w["480p"]&&"undefined"===
typeof w["360p"]&&typeof w["720p"]}));vjsLoadDefaultSubtitleStyle(this);this.src(A);J();document.querySelector("#PlayerZone .player__wrapper").style.display="block";document.querySelector("#PlayerZone .placeholder__wrapper").classList.add("hidden");null!==window.logger.log&&5<window.logger.getCurrentTime()&&(window.videoJS.bigPlayButton.hide(),renderContinueDialog(window.logger.getDuration(),window.logger.getCurrentTime()));var E=!1;window.videoJS.on("playing",function(){E||(window.logger.startLogging(),
reportClickPlayEvent(),E=!0)})})}function C(){return new Promise(function(w,A){var z=new HttpClient,E="/api/v1/security/movie-access?id_movie="+window.movie_storage.id_movie+"&token=1&sk=&step=1";null!==GetCookie("_cid")&&(E+="&v99=true");z.get(E,function(H){w(JSON.parse(H))},function(H){A(H)})})}var W=new HttpClient,y=function(w,A,z){var E="/manifests/movies/json/"+window.movie_storage.id_movie+"/"+w.expires+"/"+w.accessToken+"/master.m3u8";"undefined"!==typeof A&&null!==A&&(E="/manifests/movies/json/"+
A+"/"+window.movie_storage.id_movie+"/"+w.expires+"/"+w.accessToken+"/master.m3u8");W.get(E,z)},J=function(){var w,A,z,E,H,U,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:w=new HttpClient;A=!1;for(E=0;E<window.movie_storage.text_tracks.length;E++)if(isOpenSub(window.movie_storage.text_tracks[E].file)){z=window.movie_storage.text_tracks[E].file;break}L.setCatchFinallyBlocks(2);if("undefined"===typeof z){L.jumpTo(4);break}return L.yield(w.getAsync(z),
5);case 5:H=L.yieldResult,H.includes("maximum download count")||(A=!0);case 4:L.leaveTryBlock(3);break;case 2:U=L.enterCatchBlock(),console.error(U);case 3:for(E=0;E<window.movie_storage.text_tracks.length;E++)T=window.movie_storage.text_tracks[E],isOpenSub(T.file)&&!1===A||window.videoJS.addRemoteTextTrack({src:isOpenSub(T.file)?T.file:window.location.protocol+"//"+window.location.host+T.file,kind:"subtitles",label:T.language},!0);videoJS.textTracks().trigger("_OpensubFinishedAddingTextTracks");
L.jumpToEnd()}})},S=function(){return new Promise(function(w,A){var z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){z=new HttpClient;E="/api/v1/security/movie-access?id_movie="+window.movie_storage.id_movie+"&token=&step=2";z.get(E,function(U){w(JSON.parse(U))},function(U){A(U)});H.jumpToEnd()})})};$(document).ready(function(){var w,A,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:return $("#similar-movies").owlCarousel({dots:!0,
responsiveClass:!0,nav:!0,navText:["",""],responsive:{0:{items:2,nav:!0,slideBy:2,margin:0},480:{items:2,slideBy:2,margin:0,nav:!0},768:{slideBy:4,margin:0,items:4},1024:{slideBy:5,margin:0,items:5}}}),window.logger=new ProgressLogger("lookmovie.mv_"+window.movie_storage.id_movie),H.setCatchFinallyBlocks(2),H.yield(C(),4);case 4:w=H.yieldResult;if(!0===w.success)return window.movie_storage.text_tracks=w.data.subtitles,window._StorageProtection=w.data,y(window._StorageProtection,null,function(U){window.QualityLevels=
JSON.parse(U);r(window.QualityLevels)}),H.return(!0);H.leaveTryBlock(3);break;case 2:A=H.enterCatchBlock(),console.log(A);case 3:return H.setCatchFinallyBlocks(5),H.yield(S(),7);case 7:z=H.yieldResult;if(!0===z.success)return window._StorageProtection=z.data,SetCookie("sk",z.data.sk,Yii2App.HOTLINK_SK_DURATION),y(window._StorageProtection,null,function(U){window.QualityLevels=JSON.parse(U);r(window.QualityLevels)}),H.return(!0);H.leaveTryBlock(0);break;case 5:E=H.enterCatchBlock(),alert(E+". Please Refresh page and try again."),
H.jumpToEnd()}})})}
function ShowsView(){function r(){return new Promise(function(w,A){var z=new HttpClient,E="/api/v1/security/show-access?slug="+window.show_storage.slug+"&token=&sk="+GetCookie("sk")+"&step=1";null!==GetCookie("_cid")&&(E+="&v99=true");z.get(E,function(H){w(JSON.parse(H))},function(H){A(H)})})}function C(){var w=new HttpClient;this.subtitles=[];J(function(T){H(function(){U(T,!1)})});window.addEventListener("ChangedEpisodeHash",function(){location.hash.match(/#S\d+-E\d+-\d+/gi)&&(y(location.hash),E())});
var A=function(){window.subtitles.forEach(function(T){window.videoJS.addRemoteTextTrack({src:isOpenSub(T.file)?T.file:window.location.protocol+"//"+window.location.host+T.file,kind:"subtitles",label:T.language},!0)});window.videoJS.textTracks().trigger("_OpensubFinishedAddingTextTracks")},z=function(){window.UploadIndex=1;if("undefined"!==typeof window.videoJS.chromecastSessionManager){var T=window.videoJS.chromecastSessionManager.getCastContext();"CONNECTED"===T.getCastState()&&T.endCurrentSession(!0)}J(function(L){H(function(){window.videoJS.dispose();
setTimeout(function(){U(L,!0)},100)})})},E=function(){window.videoJS.pause();document.querySelector(".player__wrapper").style.display="none";document.querySelector(".placeholder__wrapper").style.display="block";H(function(){z()})},H=function(T){window.currentEpisodeID&&w.get("//"+location.host+"/api/v1/shows/episode-subtitles/?id_episode="+window.currentEpisodeID,function(L){window.subtitles=JSON.parse(L);T()})},U=function(T,L){var sa=document.querySelector(".continue-wrapper");"undefined"!==typeof sa&&
null!==sa&&(sa.style.display="none");sa=document.createElement("video");sa.classList.add("video-js");sa.classList.add("vjs-lookmovie");sa.classList.add("vjs-default-skin");sa.classList.add("vjs-fluid");sa.setAttribute("webkit-playsinline","true");sa.setAttribute("controls","");sa.setAttribute("playsinline","true");sa.setAttribute("x-webkit-airplay","allow");sa.setAttribute("id","video_player");document.querySelector("#player-container").appendChild(sa);window.videoJS=videojs("video_player",getPlayerOptions(window.show_storage.poster_medium,
window.show_storage.backdrop_huge,window.show_storage.title+" ("+window.show_storage.year+")"),function(){this.addClass("plyr-skin");this.aspectRatio("16:9");vjsCreateSubtitlesButton(this);addControlBarOverlay(this);vjsCreatePlaybackTitleComponent(this);vjsLoadDefaultSubtitleStyle(this);window.currentEpisodeIndex+1<window.show_storage.total_episodes&&this.upnext({timeout:6E3,headText:"NEXT EPISODE",cancelText:"Cancel",getTitle:function(){var ia=window.show_storage.seasons[window.currentEpisodeIndex+
1];return"S"+ia.season+"E"+ia.episode+" "+ia.title},next:function(){window.dispatchEvent(new Event("switch-next-episode"))}});this.updatePlaybackTitle("S"+show_storage.seasons[window.currentEpisodeIndex].season+"E"+show_storage.seasons[window.currentEpisodeIndex].episode+" "+show_storage.seasons[window.currentEpisodeIndex].title);this.on("clickHandleTrackUpload",SubtitleUploadHandle);this.on("error",handlePlayerErrorMessage);L&&window.videoJS.play();document.querySelector(".player__wrapper").style.display=
"block";document.querySelector(".placeholder__wrapper").style.display="none";var X=[];"undefined"!==typeof T.playlists["360"]&&X.push({src:T.playlists["360"],label:"360p",type:"application/vnd.apple.mpegurl",withCredentials:!1,selected:"undefined"===typeof T.playlists["480"]});"undefined"!==typeof T.playlists["480"]&&X.push({src:T.playlists["480"],label:"480p",type:"application/vnd.apple.mpegurl",withCredentials:!1,selected:!0});"undefined"!==typeof T.playlists["720"]&&X.push({src:T.playlists["720"],
type:"application/vnd.apple.mpegurl",label:"HD",withCredentials:!1,selected:"undefined"===typeof T.playlists["480"]&&"undefined"===typeof T.playlists["360"]});"undefined"!==typeof T.playlists["1080"]&&"limited"===Yii2App.playbackStatus&&add1080pButton(this);"undefined"!==typeof T.playlists["1080"]&&"unlimited"===Yii2App.playbackStatus&&X.push({src:T.playlists["1080"],label:"FullHD",type:"application/vnd.apple.mpegurl",withCredentials:!1,selected:"undefined"===typeof T.playlists["480"]&&"undefined"===
typeof T.playlists["360"]&&typeof T.playlists["720"]});this.src(X);A();null!==window.logger.log&&5<window.logger.getCurrentTime()&&(window.videoJS.bigPlayButton.hide(),renderContinueDialog(window.logger.getDuration(),window.logger.getCurrentTime()));var ra=!1;window.videoJS.on("playing",function(){ra||(window.logger.startLogging(),reportClickPlayEvent(),ra=!0,"undefined"!==typeof FakePlay&&null!==FakePlay&&(FakePlay.style.display="none"))});window.videoJS.on("subsUploader",function(){SubtitleUploadHandle()})})}}
var W=function(){return new Promise(function(w,A){var z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){z=new HttpClient;E="/api/v1/security/show-access?slug="+window.show_storage.slug+"&token=&step=2";z.get(E,function(U){w(JSON.parse(U))},function(U){A(U)});H.jumpToEnd()})})},y=function(w){w=w.substr(1).split("-");"undefined"!==typeof w["0"]&&"undefined"!==typeof w["1"]&&(window.currentSeason=w["0"].substr(1),window.currentEpisode=w["1"].substr(1),window.currentEpisodeID=w["2"],
"undefined"!==typeof window.logger&&null!==window.logger&&(window.logger.dispose(),window.logger=null),window.logger=new ProgressLogger("ep_"+window.currentEpisodeID))},J=function(w){(new HttpClient).get("/manifests/shows/json/"+window.access.token+"/"+window.access.expires+"/"+window.currentEpisodeID+"/master.m3u8",function(A){A=JSON.parse(A);w({isMaster:!1,playlists:A});var z={},E;for(E in A)A.hasOwnProperty(E)&&(z[E+"p"]=A[E]);window.QualityLevels=z})},S=function(){window.VueEpisodesSwitcher=new Vue({el:"#episodes-switcher",
name:"EpisodesSwitcher",data:{currentSeason:12,currentEpisode:1,seasons:[],isOpenSeasons:!1,isOpenEpisodes:!1},computed:{seasonEpisodes:function(){return this.seasons[this.currentSeason].episodes}},methods:{isValidHash:function(w){return w.match(/#S\d+-E\d+-\d+/gi)?!0:!1},setFromHash:function(w){w=w.substr(1).split("-");"undefined"!==typeof w["0"]&&"undefined"!==typeof w["1"]&&(this.currentSeason=w["0"].substr(1),this.currentEpisode=w["1"].substr(1),window.currentEpisodeIndex=this.seasons[this.currentSeason].episodes[this.currentEpisode].index)},
updateHash:function(){if(window.history&&window.history.pushState){var w=location.href;w="undefined"!==typeof location.hash&&location.hash&&this.isValidHash(location.hash)?w.replace(location.hash,"#S"+this.currentSeason+"-E"+this.currentEpisode+"-"+this.seasons[this.currentSeason].episodes[this.currentEpisode].id_episode):w+"#S"+this.currentSeason+"-E"+this.currentEpisode+"-"+this.seasons[this.currentSeason].episodes[this.currentEpisode].id_episode;history.replaceState(null,null,w);w=document.createEvent("Event");
w.initEvent("ChangedEpisodeHash",!0,!0);window.dispatchEvent(w)}else location.replace("#S"+this.currentSeason+"-E"+this.currentEpisode+"-"+this.seasons[this.currentSeason].episodes[this.currentEpisode].id_episode),w=document.createEvent("Event"),w.initEvent("ChangedEpisodeHash",!0,!0),window.dispatchEvent(w);window.currentEpisodeID=this.seasons[this.currentSeason].episodes[this.currentEpisode].id_episode;window.currentEpisodeIndex=this.seasons[this.currentSeason].episodes[this.currentEpisode].index},
updateComponent:function(){"undefined"!==typeof location.hash&&""!==location.hash&&this.isValidHash(location.hash)?this.setFromHash(location.hash):this.setLatest()},updateSeason:function(w){this.currentSeason=w;this.setLatestEpisode(w);this.updateHash()},updateEpisode:function(w){this.currentEpisode=w;this.updateHash()},setLatestEpisode:function(){var w=1,A;for(A in this.seasons[this.currentSeason].episodes)this.seasons[this.currentSeason].episodes.hasOwnProperty(A)&&(w=A);this.currentEpisode=w},
setLatest:function(w){w="undefined"===typeof w?1:w;var A=1;if(1===w)for(var z in this.seasons)this.seasons.hasOwnProperty(z)&&(w=z);for(var E in this.seasons[w].episodes)this.seasons[w].episodes.hasOwnProperty(E)&&(A=E);window.currentEpisodeIndex=this.seasons[w].episodes[A].index;this.currentEpisode=A;this.currentSeason=w;this.updateHash()}},created:function(){this.seasons=JSON.parse(window.seasons)},mounted:function(){var w=this;window.addEventListener("switch-next-episode",function(){w.currentSeason=
window.show_storage.seasons[window.currentEpisodeIndex+1].season;w.currentEpisode=window.show_storage.seasons[window.currentEpisodeIndex+1].episode;w.updateHash()});document.querySelector(".episodes-controls-wrapper").classList.remove("zero-opacity");this.updateComponent()}})};location.hash.match(/#S\d+-E\d+-\d+/gi)&&y(location.hash);window.addEventListener("ChangedEpisodeHash",function(){y(location.hash)});$(document).ready(function(){var w,A,z,E;return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){switch(H.nextAddress){case 1:return S(),
H.setCatchFinallyBlocks(2),H.yield(r(),4);case 4:w=H.yieldResult;if(!0===w.success)return window.access={token:w.data.accessToken,expires:w.data.expires},C(),H.return(!0);H.leaveTryBlock(3);break;case 2:A=H.enterCatchBlock(),console.log(A);case 3:return H.setCatchFinallyBlocks(5),H.yield(W(),7);case 7:z=H.yieldResult;if(!0===z.success)return window.access={token:z.data.accessToken,expires:z.data.expires},C(),SetCookie("sk",z.data.sk,Yii2App.HOTLINK_SK_DURATION),H.return(!0);H.leaveTryBlock(0);break;
case 5:E=H.enterCatchBlock(),console.log(E),H.jumpToEnd()}})})}
function ProgressLogger(r,C){C="undefined"===typeof C?2E3:C;var W=function(){var S=null;try{S=JSON.parse(localStorage.getItem(this.key))}catch(w){}"object"===typeof S&&null!==S&&(this.log=S)}.bind(this),y=null;this.key=r;this.log=null;var J=function(){this.log={currentTime:window.videoJS.currentTime(),duration:window.videoJS.duration()};localStorage.setItem(this.key,JSON.stringify(this.log))}.bind(this);this.getCurrentTime=function(){return this.log.currentTime}.bind(this);this.getDuration=function(){return this.log.duration}.bind(this);
this.updateKey=function(S){this.key=S};this.stopLogging=function(){null!==y&&clearInterval(y)};this.dispose=function(){this.stopLogging()}.bind(this);this.startLogging=function(){null!==y&&clearInterval(y);y=setInterval(function(){J()},C)};W()}
function SubtitleUploadHandle(){window.UploadIndex="undefined"===typeof window.UploadIndex?1:window.UploadIndex;var r=function(){for(var C=0;C<window.videoJS.tech_.textTracks_.length;C++)window.videoJS.tech_.textTracks_[C].mode="disabled"};(function(){for(var C=document.querySelector("#SubtitlesDropzone");C.firstChild;)C.removeChild(C.firstChild);var W=document.createElement("input");W.type="file";C.appendChild(W);W.onchange=function(){var y=new XMLHttpRequest,J=new FormData;J.append("srt",W.files[0]);
y.open("POST",window.location.protocol+"//"+window.Yii2App.apiDomain+"/v1/subtitles/srt-to-vtt");y.send(J);y.onreadystatechange=function(){if(4===y.readyState){var S=new Blob([y.response],{type:"text/vtt"});S=URL.createObjectURL(S);var w=window.videoJS.addRemoteTextTrack({src:S,label:"Custom "+window.UploadIndex},!1);r();setTimeout(function(){w.track.mode="showing"},50);window.UploadIndex++}}};W.click()})()}
function renderContinueDialog(r,C){var W=this;this.duration=r;this.currentTime=C;this.DrawProgress=function(){var y=(100/this.duration*this.currentTime).toFixed(0);document.querySelector(".continue-wrapper .progress-bar").style.width=y+"%"};this.UpdateTimeDisplay=function(){document.querySelector(".continue__time-display--wrapper .duration").innerHTML=toHHMMSS(this.duration);document.querySelector(".continue__time-display--wrapper .currentTime").innerHTML=toHHMMSS(this.currentTime)}.bind(this);ShowContinueDialog=
function(){document.querySelector(".continue-wrapper").style.display="block"};HideContinueDialog=function(){document.querySelector(".continue-wrapper").style.display="none"};this.BindListeners=function(){document.querySelector("button.continue__button--from_begin").onclick=function(){HideContinueDialog();window.videoJS.play()};document.querySelector("button.continue__button").onclick=function(){HideContinueDialog();window.videoJS.paused()&&window.videoJS.play();var y=!0;window.videoJS.on("playing",
function(){!0===y&&(window.videoJS.currentTime(W.currentTime),y=!1)})}};this.DrawProgress();this.UpdateTimeDisplay();this.BindListeners();ShowContinueDialog()}function addControlBarOverlay(r){var C=new (videojs.getComponent("Component"))("controlBarOverlay");C.addClass("vjs-control-bar-overlay");r.addChild(C)}
function episodeNextCard(r,C){C=C||{};C.title="undefined"!==typeof C.title?"":C.title;C.timeout="undefined"!==typeof C.timeout?10:C.timeout;C.threshold="undefined"!==typeof C.threshold?10:C.threshold;C.backdrop="undefined"!==typeof C.backdrop?"":C.backdrop;C=new (videojs.getComponent("Component"))("vjsNextCardComponent",{el:videojs.dom.createEl("div",{type:"vjs-next-card"},{class:"vjs-next-card"})});r.addChild(C)}
function vjsCreatePlaybackTitleComponent(r){var C=new (videojs.getComponent("Component"))("vjsTitleComponent",{el:videojs.dom.createEl("div",{type:"vjs-title"},{class:"vjs-title"})});r.addChild(C);r.updatePlaybackTitle=function(W){"undefined"!==typeof C&&null!==C&&(C.contentEl().innerHTML=W)}}
function add1080pButton(r){r.on("playing",function(){null!==document.querySelector(".only-prem-1080p")&&$(".only-prem-1080p").remove()});$(document).on("click",".only-prem-1080p__continue-watching",function(C){C.preventDefault();r.play()});r.on("playerSourcesChanged",function(){var C=$('<li class="vjs-menu-item" id="user-limited-notify-button">FullHD</li>');C.on("click",function(){null===document.querySelector(".only-prem-1080p")&&(window.videojs.browser.IS_IOS||window.videojs.browser.IS_ANDROID?
$(".vjs-lookmovie").append(get1080pMessageMobile()):$(".vjs-lookmovie").append(get1080pMessage()));r.pause();$(".vjs-quality-selector").removeClass("vjs-hover")});$(".vjs-settings-quality-menu .vjs-menu-content").append(C)})}
function get1080pMessage(){return'<div class="only-prem-1080p"><p><b>1080p</b> is available for Premium Members only</p><br><p><br>While we are doing everything to provide the best FREE <br>streaming experience it still comes with high server bandwidth costs.</p><br><p>To reduce costs, some features will be available for Paid Members only.</p><br><div class="only-prem-1080p__buttons"><a class="only-prem-1080p__button only-prem-1080p__continue-watching" href="#vjs-continue-watching">Continue Watching</a><a class="only-prem-1080p__button only-prem-1080p__check-premium" href="/premium.html" target="_blank">Become Premium</a></div></div>'}
function get1080pMessageMobile(){return'<div class="only-prem-1080p"><p><b>1080p</b> is available for Premium Members</p><br><div class="only-prem-1080p__buttons"><a class="only-prem-1080p__button only-prem-1080p__continue-watching" href="#vjs-continue-watching">Continue Watching</a><a class="only-prem-1080p__button only-prem-1080p__check-premium" href="/premium.html" target="_blank">Become Premium</a></div></div>'}
function setVideoJsBreakpoints(r){r.breakpoints({tiny:30,xsmall:320,small:450,medium:992,large:1440,xlarge:Infinity})}function vjsLoadDefaultSubtitleStyle(r){return!1}
function vjsCreateSubtitlesButton(r){var C=videojs.getComponent("Component"),W=videojs.getComponent("Button");this.enableTextTrack=function(w,A){var z=this,E,H,U,T,L,sa,X,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){switch(ia.nextAddress){case 1:E=r.remoteTextTrackEls();H=r.textTracks();for(U=0;H.length>U;U++)H[U].mode="disabled";"undefined"!==typeof r.notifyEl&&!1===r.notifyEl.isDisposed()&&r.notifyEl.dispose();if("undefined"===typeof H[w])return ia.return(!1);r.notifyEl=vjsInsertInTextTrackDisplay(r,
"Loading: "+A);if(!isOpenSub(E[w].src)){ia.jumpTo(2);break}return ia.yield(makeAJAXCall("GET",E[w].src,"arraybuffer",{}),3);case 3:return T=ia.yieldResult,L=getAllUrlParams(E[w].src),sa=JSON,X=sa.parse,ia.yield(z.uploadDownloadedTrack(T,L),4);case 4:ra=X.call(sa,ia.yieldResult);if(!ra.success)return ia.return(!1);window.videojs.browser.IS_IOS||/apple/i.test(navigator.vendor)?E[w].src=ra.url:H[w].src=ra.url;case 2:H[w].mode="showing","undefined"!==typeof r.notifyEl&&!1===r.notifyEl.isDisposed()&&r.notifyEl.dispose(),
ia.jumpToEnd()}})};this.uploadDownloadedTrack=function(w,A){var z=new FormData;w=new Blob([w]);z.append("file",w);z.append("subtitle",JSON.stringify(A));var E;"undefined"!==typeof window.movie_storage&&"movie"===window.movie_storage.type?E=window.location.protocol+"//"+window.Yii2App.apiDomain+"/v1/subtitles/upload-movie-opensub?id_movie="+window.movie_storage.id_movie:"undefined"!==typeof window.show_storage&&"show"===window.show_storage.type&&(E=window.location.protocol+"//"+window.Yii2App.apiDomain+
"/v1/subtitles/upload-episode-opensub?id_episode="+window.currentEpisodeID);return makeAJAXCall("POST",E,null,z)};this.closePlayerNotification=function(){"undefined"!==typeof r.notifyEl&&!1===r.notifyEl.isDisposed()&&r.notifyEl.dispose()};this.disableSubtitles=function(w){w=r.remoteTextTracks();for(var A=0;w.length>A;A++)w[A].mode="disabled";this.closePlayerNotification()};this._createSubtitleOffComponent=function(){var w=this,A=new C("subtitleOffContainer");A.addClass("vjs-subtitle-off");A.addClass("showing");
A.addChild(new W("subtitlesOffButton",{el:function(z,E){var H=document.createElement("button");H.innerHTML=z;H.classList.add.apply(H.classList,$jscomp.arrayFromIterable(E));return H}("Off",[]),clickHandler:function(z){w.disableSubtitles();A.trigger("closeMenuClicked");A.addClass("showing")}}));return A};this._createHeadingComponent=function(){var w=function(z,E){var H=document.createElement("button");H.innerHTML=z;H.classList.add("vjs-heading-button");H.classList.add.apply(H.classList,$jscomp.arrayFromIterable(E));
return H},A=new C("headingContainer");A.addClass("vjs-settings-heading");A.addChild(new W("uploadButton",{el:w("Upload",[]),clickHandler:function(z){A.trigger("closeMenuClicked");SubtitleUploadHandle()}}));A.addChild(new W("settingsButton",{el:w("Settings",[]),clickHandler:function(z){A.trigger("closeMenuClicked");r.getChild("textTrackSettings").open()}}));A.addChild(new W("settingsButton",{el:w('<span class="vjs-icon-placeholder vjs-icon-close"></span>',["heading-close-button"]),clickHandler:function(z){A.trigger("closeMenuClicked")}}));
return A};this._createSubtitlesListComponent=function(w){var A=document.createElement("div");A.classList.add("vjs-subtitles-list");var z=new C("listComponent",{el:A}),E=r.textTracks();A.toggleChildren=function(U){for(var T=U.classList.contains("open"),L=0;L<A.children.length;L++)A.children[L].classList.remove("open");T?U.classList.remove("open"):U.classList.add("open")};var H=function(){A.innerHTML="";var U=r.remoteTextTrackEls();r.textTracks();for(var T={},L=0;L<U.length;L++)"subtitles"===U[L].kind&&
("undefined"===typeof T[U[L].label]&&(T[U[L].label]=[]),T[U[L].label].push({label:U[L].label,isOpenSub:isOpenSub(U[L].src),mode:U[L].mode,index:L}));U={};for(var sa in T){U.$jscomp$loop$prop$key$29=sa;if(T.hasOwnProperty(U.$jscomp$loop$prop$key$29)){var X=document.createElement("button");U.$jscomp$loop$prop$menuContainer$28=document.createElement("div");L=document.createElement("ul");X.classList.add("vjs-subtitles-language-toggle");X.innerHTML='<span class="vjs-subtitles-language-title">'+U.$jscomp$loop$prop$key$29+
'</span> <span class="toggle-plus">+</span> <span class="toggle-minus">-</span>';U.$jscomp$loop$prop$menuContainer$28.classList.add("vjs-subtitles-item");U.$jscomp$loop$prop$menuContainer$28.appendChild(X);U.$jscomp$loop$prop$menuContainer$28.appendChild(L);U.$jscomp$loop$prop$menuContainer$28.addEventListener("click",function(ia){return function(Ca){Ca.stopPropagation();A.toggleChildren(ia.$jscomp$loop$prop$menuContainer$28)}}(U));L.classList.add("vjs-subtitles-language-items");for(X={$jscomp$loop$prop$i$6$31:0};X.$jscomp$loop$prop$i$6$31<
T[U.$jscomp$loop$prop$key$29].length;X={$jscomp$loop$prop$i$6$31:X.$jscomp$loop$prop$i$6$31},X.$jscomp$loop$prop$i$6$31++){var ra=document.createElement("li");ra.classList.add("vjs-subtitles-language-item");ra.innerHTML="<span>"+U.$jscomp$loop$prop$key$29+" "+(X.$jscomp$loop$prop$i$6$31+1)+"</span>";ra.addEventListener("click",function(ia,Ca){return function(Ka){$(Ka.target).parent().addClass("active-child");Ka.stopPropagation();this.enableTextTrack(T[ia.$jscomp$loop$prop$key$29][Ca.$jscomp$loop$prop$i$6$31].index,
ia.$jscomp$loop$prop$key$29+" "+(Ca.$jscomp$loop$prop$i$6$31+1)+'<svg class="nf-spinner" viewBox="0 0 50 50"><circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle></svg>');w.hide()}}(U,X).bind(this));"showing"===T[U.$jscomp$loop$prop$key$29][X.$jscomp$loop$prop$i$6$31].mode&&(U.$jscomp$loop$prop$menuContainer$28.classList.add("open"),ra.classList.add("showing"),document.getElementsByClassName("vjs-subtitle-off ")[0].classList.remove("showing"));L.appendChild(ra)}A.appendChild(U.$jscomp$loop$prop$menuContainer$28)}U=
{$jscomp$loop$prop$menuContainer$28:U.$jscomp$loop$prop$menuContainer$28,$jscomp$loop$prop$key$29:U.$jscomp$loop$prop$key$29}}};E.on("change",function(){H()});E.on("_OpensubFinishedAddingTextTracks",function(){H()});return z};this._buildVjsMenuSwitcher=function(){var w=this._createHeadingComponent(),A=new C("bodyContainer");A.el_.className="vjs-settings-body";var z=this._createSubtitleOffComponent();w.on("closeMenuClicked",function(){E.hide()});z.on("closeMenuClicked",function(){E.hide()});var E=
new C;E.el_.className="vjs-menu vjs-settings-menu vjs-hidden";E.show=function(){this.removeClass("vjs-hidden")};E.toggle=function(H){this.hasClass("vjs-hidden")?this.show():this.hide()};E.hide=function(){this.addClass("vjs-hidden")};E.addChild(w);A.addChild(z);A.addChild(this._createSubtitlesListComponent(E));E.addChild(A);return E};var y=new C("customSubsButton"),J=this._buildVjsMenuSwitcher(),S=new W(r,{clickHandler:function(w){J.toggle(S)}});S.el_.className="vjs-subtitles-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button";
y.addClass("vjs-menu-button");y.addClass("vjs-button");y.addClass("vjs-control");y.addChild(S);r.controlBar.addChild(y,{},r.controlBar.children().length-3);540>window.innerWidth?r.addChild(J):r.controlBar.addChild(J)}
(function(r,C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C(require("global/window"),require("global/document")):"function"===typeof define&&define.amd?define(["global/window","global/document"],C):(r=r||self,r.videojs=C(r.window,r.document))})(this,function(r,C){function W(m){var f="info",c=function(){for(var a=arguments.length,e=Array(a),h=0;h<a;h++)e[h]=arguments[h];b("log",f,e)};var b=Vj(m,c);c.createLogger=function(a){return W(m+": "+a)};c.levels={all:"debug|log|warn|error",
off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:f};c.level=function(a){if("string"===typeof a){if(!c.levels.hasOwnProperty(a))throw Error('"'+a+'" in not a valid log level');f=a}return f};c.history=function(){return Nb?[].concat(Nb):[]};c.history.filter=function(a){return(Nb||[]).filter(function(e){return(new RegExp(".*"+a+".*")).test(e[0])})};c.history.clear=function(){Nb&&(Nb.length=0)};c.history.disable=function(){null!==Nb&&(Nb.length=0,Nb=null)};
c.history.enable=function(){null===Nb&&(Nb=[])};c.error=function(){for(var a=arguments.length,e=Array(a),h=0;h<a;h++)e[h]=arguments[h];return b("error",f,e)};c.warn=function(){for(var a=arguments.length,e=Array(a),h=0;h<a;h++)e[h]=arguments[h];return b("warn",f,e)};c.debug=function(){for(var a=arguments.length,e=Array(a),h=0;h<a;h++)e[h]=arguments[h];return b("debug",f,e)};return c}function y(m,f){return f={exports:{}},m(f,f.exports),f.exports}function J(m,f){Bg(m).forEach(function(c){return f(m[c],
c)})}function S(m,f,c){void 0===c&&(c=0);return Bg(m).reduce(function(b,a){return f(b,m[a],a)},c)}function w(m){for(var f=arguments.length,c=Array(1<f?f-1:0),b=1;b<f;b++)c[b-1]=arguments[b];if(Object.assign)return Rd.apply(void 0,[m].concat(c));c.forEach(function(a){a&&J(a,function(e,h){m[h]=e})});return m}function A(m){return!!m&&"object"===typeof m}function z(m){return A(m)&&"[object Object]"===Wj.call(m)&&m.constructor===Object}function E(m,f){return m&&f?"function"===typeof r.getComputedStyle?
(m=r.getComputedStyle(m))?m.getPropertyValue(f)||m[f]:"":"":""}function H(m){if(0<=m.indexOf(" "))throw Error("class has illegal whitespace characters");}function U(){return C===r.document}function T(m){return A(m)&&1===m.nodeType}function L(){try{return r.parent!==r.self}catch(m){return!0}}function sa(m){return function(f,c){if("string"!==typeof f||!f.trim())return C[m](null);"string"===typeof c&&c.trim()&&(c=C.querySelector(c));c=T(c)?c:C;return c[m]&&c[m](f)}}function X(m,f,c,b){void 0===m&&(m=
"div");void 0===f&&(f={});void 0===c&&(c={});var a=C.createElement(m);Object.getOwnPropertyNames(f).forEach(function(e){var h=f[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(ab.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+(e+" to "+h+".")),a.setAttribute(e,h)):"textContent"===e?ra(a,h):a[e]!==h&&(a[e]=h)});Object.getOwnPropertyNames(c).forEach(function(e){a.setAttribute(e,
c[e])});b&&Fb(a,b);return a}function ra(m,f){"undefined"===typeof m.textContent?m.innerText=f:m.textContent=f;return m}function ia(m,f){f.firstChild?f.insertBefore(m,f.firstChild):f.appendChild(m)}function Ca(m,f){H(f);return m.classList?m.classList.contains(f):(new RegExp("(^|\\s)"+f+"($|\\s)")).test(m.className)}function Ka(m,f){m.classList?m.classList.add(f):Ca(m,f)||(m.className=(m.className+" "+f).trim());return m}function F(m,f){m.classList?m.classList.remove(f):(H(f),m.className=m.className.split(/\s+/).filter(function(c){return c!==
f}).join(" "));return m}function ha(m,f,c){var b=Ca(m,f);"function"===typeof c&&(c=c(m,f));"boolean"!==typeof c&&(c=!b);if(c!==b)return c?Ka(m,f):F(m,f),m}function pa(m,f){Object.getOwnPropertyNames(f).forEach(function(c){var b=f[c];null===b||"undefined"===typeof b||!1===b?m.removeAttribute(c):m.setAttribute(c,!0===b?"":b)})}function ea(m){var f={};if(m&&m.attributes&&0<m.attributes.length)for(var c=m.attributes,b=c.length-1;0<=b;b--){var a=c[b].name,e=c[b].value;if("boolean"===typeof m[a]||-1!==
",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+a+","))e=null!==e?!0:!1;f[a]=e}return f}function Ha(){C.body.focus();C.onselectstart=function(){return!1}}function Ta(){C.onselectstart=function(){return!0}}function za(m){if(m&&m.getBoundingClientRect&&m.parentNode){var f=m.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(b){void 0!==f[b]&&(c[b]=f[b])});c.height||(c.height=parseFloat(E(m,"height")));c.width||(c.width=parseFloat(E(m,
"width")));return c}}function na(m){var f;m.getBoundingClientRect&&m.parentNode&&(f=m.getBoundingClientRect());if(!f)return{left:0,top:0};m=C.documentElement;var c=C.body;return{left:Math.round(f.left+(r.pageXOffset||c.scrollLeft)-(m.clientLeft||c.clientLeft||0)),top:Math.round(f.top+(r.pageYOffset||c.scrollTop)-(m.clientTop||c.clientTop||0))}}function Oa(m,f){var c={},b=na(m),a=m.offsetWidth;m=m.offsetHeight;var e=b.top;b=b.left;var h=f.pageY,l=f.pageX;f.changedTouches&&(l=f.changedTouches[0].pageX,
h=f.changedTouches[0].pageY);c.y=Math.max(0,Math.min(1,(e-h+m)/m));c.x=Math.max(0,Math.min(1,(l-b)/a));return c}function gb(m){return A(m)&&3===m.nodeType}function fb(m){for(;m.firstChild;)m.removeChild(m.firstChild);return m}function Gb(m){"function"===typeof m&&(m=m());return(Array.isArray(m)?m:[m]).map(function(f){"function"===typeof f&&(f=f());if(T(f)||gb(f))return f;if("string"===typeof f&&/\S/.test(f))return C.createTextNode(f)}).filter(function(f){return f})}function Fb(m,f){Gb(f).forEach(function(c){return m.appendChild(c)});
return m}function $b(m,f){return Fb(fb(m),f)}function Ub(m){return void 0===m.button&&void 0===m.buttons||0===m.button&&void 0===m.buttons||"mouseup"===m.type&&0===m.button&&0===m.buttons?!0:0!==m.button||1!==m.buttons?!1:!0}function yc(m,f){f&&(Ke=f);r.setTimeout(Xj,m)}function M(){Cg=!0;r.removeEventListener("load",M)}function Gc(m,f){if(Hb.has(m)){var c=Hb.get(m);0===c.handlers[f].length&&(delete c.handlers[f],m.removeEventListener?m.removeEventListener(f,c.dispatcher,!1):m.detachEvent&&m.detachEvent("on"+
f,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&(delete c.handlers,delete c.dispatcher,delete c.disabled);if(0===Object.getOwnPropertyNames(c).length)Hb["delete"](m)}}function Hc(m,f,c,b){c.forEach(function(a){m(f,a,b)})}function Ab(m){function f(){return!0}function c(){return!1}if(m.fixed_)return m;if(!m||!m.isPropagationStopped){var b=m||r.event;m={};for(var a in b)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&
b.preventDefault||(m[a]=b[a]));m.target||(m.target=m.srcElement||C);m.relatedTarget||(m.relatedTarget=m.fromElement===m.target?m.toElement:m.fromElement);m.preventDefault=function(){b.preventDefault&&b.preventDefault();m.returnValue=!1;b.returnValue=!1;m.defaultPrevented=!0};m.defaultPrevented=!1;m.stopPropagation=function(){b.stopPropagation&&b.stopPropagation();m.cancelBubble=!0;b.cancelBubble=!0;m.isPropagationStopped=f};m.isPropagationStopped=c;m.stopImmediatePropagation=function(){b.stopImmediatePropagation&&
b.stopImmediatePropagation();m.isImmediatePropagationStopped=f;m.stopPropagation()};m.isImmediatePropagationStopped=c;if(null!==m.clientX&&void 0!==m.clientX){a=C.documentElement;var e=C.body;m.pageX=m.clientX+(a&&a.scrollLeft||e&&e.scrollLeft||0)-(a&&a.clientLeft||e&&e.clientLeft||0);m.pageY=m.clientY+(a&&a.scrollTop||e&&e.scrollTop||0)-(a&&a.clientTop||e&&e.clientTop||0)}m.which=m.charCode||m.keyCode;null!==m.button&&void 0!==m.button&&(m.button=m.button&1?0:m.button&4?1:m.button&2?2:0)}m.fixed_=
!0;return m}function tb(m,f,c){if(Array.isArray(f))return Hc(tb,m,f,c);Hb.has(m)||Hb.set(m,{});var b=Hb.get(m);b.handlers||(b.handlers={});b.handlers[f]||(b.handlers[f]=[]);c.guid||(c.guid=zc++);b.handlers[f].push(c);b.dispatcher||(b.disabled=!1,b.dispatcher=function(a,e){if(!b.disabled){a=Ab(a);var h=b.handlers[a.type];if(h){h=h.slice(0);for(var l=0,g=h.length;l<g&&!a.isImmediatePropagationStopped();l++)try{h[l].call(m,a,e)}catch(n){ab.error(n)}}}});1===b.handlers[f].length&&(m.addEventListener?
(c=!1,Yj()&&-1<Zj.indexOf(f)&&(c={passive:!0}),m.addEventListener(f,b.dispatcher,c)):m.attachEvent&&m.attachEvent("on"+f,b.dispatcher))}function B(m,f,c){if(Hb.has(m)){var b=Hb.get(m);if(b.handlers){if(Array.isArray(f))return Hc(B,m,f,c);if(void 0===f)for(var a in b.handlers)Object.prototype.hasOwnProperty.call(b.handlers||{},a)&&(f=m,c=a,b.handlers[c]=[],Gc(f,c));else if(a=b.handlers[f]){if(!c)b.handlers[f]=[];else if(c.guid)for(b=0;b<a.length;b++)a[b].guid===c.guid&&a.splice(b--,1);Gc(m,f)}}}}function K(m,
f,c){var b=Hb.has(m)?Hb.get(m):{},a=m.parentNode||m.ownerDocument;"string"===typeof f?f={type:f,target:m}:f.target||(f.target=m);f=Ab(f);b.dispatcher&&b.dispatcher.call(m,f,c);if(a&&!f.isPropagationStopped()&&!0===f.bubbles)K.call(null,a,f,c);else if(!a&&!f.defaultPrevented&&f.target&&f.target[f.type]&&(Hb.has(f.target)||Hb.set(f.target,{}),m=Hb.get(f.target),f.target[f.type])){m.disabled=!0;if("function"===typeof f.target[f.type])f.target[f.type]();m.disabled=!1}return!f.defaultPrevented}function R(m,
f,c){if(Array.isArray(f))return Hc(R,m,f,c);var b=function e(){B(m,f,e);c.apply(this,arguments)};b.guid=c.guid=c.guid||zc++;tb(m,f,b)}function fa(m,f,c){var b=function e(){B(m,f,e);c.apply(this,arguments)};b.guid=c.guid=c.guid||zc++;tb(m,f,b)}function ka(m,f){void 0===f&&(f={});if(f=f.eventBusKey){if(!m[f].nodeName)throw Error('The eventBusKey "'+f+'" does not refer to an element.');m.eventBusEl_=m[f]}else m.eventBusEl_=X("span",{className:"vjs-event-bus"});w(m,ak);m.eventedCallbacks&&m.eventedCallbacks.forEach(function(c){c()});
m.on("dispose",function(){m.off();r.setTimeout(function(){m.eventBusEl_=null},0)});return m}function qa(m,f){w(m,bk);m.state=w({},m.state,f);if("function"===typeof m.handleStateChanged&&Ic(m))m.on("statechanged",m.handleStateChanged);return m}function xa(){for(var m={},f=arguments.length,c=Array(f),b=0;b<f;b++)c[b]=arguments[b];c.forEach(function(a){a&&J(a,function(e,h){z(e)?(z(m[h])||(m[h]={}),m[h]=xa(m[h],e)):m[h]=e})});return m}function Ra(m,f,c,b){var a=c.length-1;if("number"!==typeof b||0>b||
b>a)throw Error("Failed to execute '"+m+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+a+").");return c[b][f]}function cb(m){return void 0===m||0===m.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:m.length,start:Ra.bind(null,"start",0,m),end:Ra.bind(null,"end",1,m)}}function Xa(m,f){return Array.isArray(m)?cb(m):void 0===m||void 0===f?cb():cb([[m,f]])}function x(m,
f){var c=0;if(!f)return 0;m&&m.length||(m=Xa(0,0));for(var b=0;b<m.length;b++){var a=m.start(b);var e=m.end(b);e>f&&(e=f);c+=e-a}return c/f}function G(m){if(m instanceof G)return m;"number"===typeof m?this.code=m:"string"===typeof m?this.message=m:A(m)&&("number"===typeof m.code&&(this.code=m.code),w(this,m));this.message||(this.message=G.defaultMessages[this.code]||"")}function Q(m){return void 0!==m&&null!==m&&"function"===typeof m.then}function ba(m){Q(m)&&m.then(null,function(f){})}function ja(m){for(var f in m)if(m.hasOwnProperty(f))return!1;
return!0}function ma(m,f,c){var b=m,a=ck.call(f);"[object Function]"===a||"function"===typeof f&&"[object RegExp]"!==a||"undefined"!==typeof window&&(f===window.setTimeout||f===window.alert||f===window.confirm||f===window.prompt)?(c=f,"string"===typeof m&&(b={uri:m})):b=Rd({},f,{uri:m});b.callback=c;return b}function Ia(m,f,c){f=ma(m,f,c);return La(f)}function La(m){function f(D){clearTimeout(q);D instanceof Error||(D=Error(""+(D||"Unknown XMLHttpRequest Error")));D.statusCode=0;var N=t;b||(b=!0,
m.callback(D,N,void 0))}function c(){if(!h){clearTimeout(q);var D=m.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var N=t,Y=null;if(0!==D){if(a.response)N=a.response;else if(!(N=a.responseText))a:{try{if("document"===a.responseType){N=a.responseXML;break a}var oa=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!oa){N=a.responseXML;break a}}catch(ta){}N=null}if(p)try{N=JSON.parse(N)}catch(ta){}N={body:N,statusCode:D,method:g,headers:{},url:l,
rawRequest:a};a.getAllResponseHeaders&&(N.headers=dk(a.getAllResponseHeaders()))}else Y=Error("Internal XMLHttpRequest Error");D=N.body;b||(b=!0,m.callback(Y,N,D))}}if("undefined"===typeof m.callback)throw Error("callback argument missing");var b=!1,a=m.xhr||null;a||(a=m.cors||m.useXDR?new Ia.XDomainRequest:new Ia.XMLHttpRequest);var e,h,l=a.url=m.uri||m.url,g=a.method=m.method||"GET",n=m.body||m.data,d=a.headers=m.headers||{},k=!!m.sync,p=!1,q,t={body:void 0,headers:{},statusCode:0,method:g,url:l,
rawRequest:a};"json"in m&&!1!==m.json&&(p=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==g&&"HEAD"!==g&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),n=JSON.stringify(!0===m.json?n:m.json)));a.onreadystatechange=function(){4===a.readyState&&setTimeout(c,0)};a.onload=c;a.onerror=f;a.onprogress=function(){};a.onabort=function(){h=!0};a.ontimeout=f;a.open(g,l,!k,m.username,m.password);k||(a.withCredentials=!!m.withCredentials);!k&&0<m.timeout&&(q=setTimeout(function(){if(!h){h=
!0;a.abort("timeout");var D=Error("XMLHttpRequest timeout");D.code="ETIMEDOUT";f(D)}},m.timeout));if(a.setRequestHeader)for(e in d)d.hasOwnProperty(e)&&a.setRequestHeader(e,d[e]);else if(m.headers&&!ja(m.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in m&&(a.responseType=m.responseType);"beforeSend"in m&&"function"===typeof m.beforeSend&&m.beforeSend(a);a.send(n||null);return a}function Za(){}function bb(m,f){this.name="ParsingError";this.code=m.code;this.message=
f||m.message}function lb(m){m=m.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!m)return null;if(m[3]){var f=m[3].replace(":","");return 3600*(m[1]|0)+60*(m[2]|0)+(f|0)+(m[4]|0)/1E3}return 59<m[1]?3600*(m[1]|0)+60*(m[2]|0)+(m[4]|0)/1E3:60*(m[1]|0)+(m[2]|0)+(m[4]|0)/1E3}function ac(){this.values=Le(null)}function pd(m,f,c,b){m=b?m.split(b):[m];for(var a in m)"string"===typeof m[a]&&(b=m[a].split(c),2===b.length&&f(b[0],b[1]))}function ek(m,f,c){function b(){var h=lb(m);if(null===h)throw new bb(bb.Errors.BadTimeStamp,
"Malformed timestamp: "+e);m=m.replace(/^[^\sa-zA-Z-]+/,"");return h}function a(){m=m.replace(/^\s+/,"")}var e=m;a();f.startTime=b();a();if("--\x3e"!==m.substr(0,3))throw new bb(bb.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+e);m=m.substr(3);a();f.endTime=b();a();(function(h,l){var g=new ac;pd(h,function(n,d){switch(n){case "region":for(var k=c.length-1;0<=k;k--)if(c[k].id===d){g.set(n,c[k].region);break}break;case "vertical":g.alt(n,d,["rl","lr"]);break;
case "line":d=d.split(",");k=d[0];g.integer(n,k);g.percent(n,k)?g.set("snapToLines",!1):null;g.alt(n,k,["auto"]);2===d.length&&g.alt("lineAlign",d[1],["start","center","end"]);break;case "position":d=d.split(",");g.percent(n,d[0]);2===d.length&&g.alt("positionAlign",d[1],["start","center","end"]);break;case "size":g.percent(n,d);break;case "align":g.alt(n,d,["start","center","end","left","right"])}},/:/,/\s/);l.region=g.get("region",null);l.vertical=g.get("vertical","");try{l.line=g.get("line","auto")}catch(n){}l.lineAlign=
g.get("lineAlign","start");l.snapToLines=g.get("snapToLines",!0);l.size=g.get("size",100);try{l.align=g.get("align","center")}catch(n){l.align=g.get("align","middle")}try{l.position=g.get("position","auto")}catch(n){l.position=g.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=g.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)})(m,f)}function Dg(m,f){function c(){if(!f)return null;var k=f.match(/^([^<]*)(<[^>]*>?)?/);
k=k[1]?k[1]:k[2];f=f.substr(k.length);return k}function b(k){Me.innerHTML=k;k=Me.textContent;Me.textContent="";return k}function a(k,p){var q=fk[k];if(!q)return null;q=m.document.createElement(q);(k=gk[k])&&p&&(q[k]=p.trim());return q}for(var e=m.document.createElement("div"),h=e,l,g=[];null!==(l=c());)if("<"===l[0])if("/"===l[1])g.length&&g[g.length-1]===l.substr(2).replace(">","")&&(g.pop(),h=h.parentNode);else{var n=lb(l.substr(1,l.length-2));if(n){var d=m.document.createProcessingInstruction("timestamp",
n);h.appendChild(d)}else if(l=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(d=a(l[1],l[3]))||Eg[d.localName]&&Eg[d.localName]!==h.localName||(l[2]&&(n=l[2].split("."),n.forEach(function(k){var p=/^bg_/.test(k);k=p?k.slice(3):k;Fg.hasOwnProperty(k)&&(d.style[p?"background-color":"color"]=Fg[k])}),d.className=n.join(" ")),g.push(l[1]),h.appendChild(d),h=d)}else h.appendChild(m.document.createTextNode(b(l)));return e}function hk(m){for(var f=0;f<Gg.length;f++){var c=Gg[f];if(m>=c[0]&&
m<=c[1])return!0}return!1}function ik(m){function f(h,l){for(var g=l.childNodes.length-1;0<=g;g--)h.push(l.childNodes[g])}function c(h){if(!h||!h.length)return null;var l=h.pop(),g=l.textContent||l.innerText;if(g)return(l=g.match(/^.*(\n|\r)/))?(h.length=0,l[0]):g;if("ruby"===l.tagName)return c(h);if(l.childNodes)return f(h,l),c(h)}var b=[],a="";if(!m||!m.childNodes)return"ltr";for(f(b,m);a=c(b);)for(var e=0;e<a.length;e++)if(m=a.charCodeAt(e),hk(m))return"rtl";return"ltr"}function Ne(){}function Sd(m,
f,c){this.cue=f;this.cueDiv=Dg(m,f.text);var b={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===f.vertical?"horizontal-tb":"lr"===f.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(b,this.cueDiv);this.div=m.document.createElement("div");b={direction:ik(this.cueDiv),writingMode:""===f.vertical?"horizontal-tb":"lr"===f.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",
textAlign:"middle"===f.align?"center":f.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(b);this.div.appendChild(this.cueDiv);m=0;switch(f.positionAlign){case "start":m=f.position;break;case "center":m=f.position-f.size/2;break;case "end":m=f.position-f.size}""===f.vertical?this.applyStyles({left:this.formatStyle(m,"%"),width:this.formatStyle(f.size,"%")}):this.applyStyles({top:this.formatStyle(m,"%"),height:this.formatStyle(f.size,"%")});this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,
"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function Ib(m){if(m.div){var f=m.div.offsetHeight;var c=m.div.offsetWidth;var b=m.div.offsetTop;var a=(a=m.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();m=m.div.getBoundingClientRect();var e=a?Math.max(a[0]&&a[0].height||0,m.height/a.length):0}this.left=m.left;this.right=m.right;this.top=
m.top||b;this.height=m.height||f;this.bottom=m.bottom||b+(m.height||f);this.width=m.width||c;this.lineHeight=void 0!==e?e:m.lineHeight}function Tc(){}function Oe(m){return"string"!==typeof m?!1:jk[m.toLowerCase()]?m.toLowerCase():!1}function Hg(m,f,c){this.hasBeenReset=!1;var b="",a=!1,e=m,h=f,l=c,g=null,n="",d=!0,k="auto",p="start",q="auto",t="auto",D=100,N="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return b},set:function(Y){b=""+Y}},pauseOnExit:{enumerable:!0,get:function(){return a},
set:function(Y){a=!!Y}},startTime:{enumerable:!0,get:function(){return e},set:function(Y){if("number"!==typeof Y)throw new TypeError("Start time must be set to a number.");e=Y;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return h},set:function(Y){if("number"!==typeof Y)throw new TypeError("End time must be set to a number.");h=Y;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(Y){l=""+Y;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return g},
set:function(Y){g=Y;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return n},set:function(Y){Y="string"!==typeof Y?!1:kk[Y.toLowerCase()]?Y.toLowerCase():!1;if(!1===Y)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");n=Y;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(Y){d=!!Y;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return k},set:function(Y){if("number"!==typeof Y&&"auto"!==Y)throw new SyntaxError("Line: an invalid number or illegal string was specified.");
k=Y;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(Y){(Y=Oe(Y))?(p=Y,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return q},set:function(Y){if(0>Y||100<Y)throw Error("Position must be between 0 and 100.");q=Y;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return t},set:function(Y){(Y=Oe(Y))?(t=Y,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},
size:{enumerable:!0,get:function(){return D},set:function(Y){if(0>Y||100<Y)throw Error("Size must be between 0 and 100.");D=Y;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return N},set:function(Y){Y=Oe(Y);if(!Y)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");N=Y;this.hasBeenReset=!0}}});this.displayState=void 0}function qd(m){return"number"===typeof m&&0<=m&&100>=m}function lk(m,f,c){m.setTimeout(function(){return Jc(f,Kc[f.type],c,m)},1)}function mk(m,
f){m.forEach(function(c){return c.setTech&&c.setTech(f)})}function Ig(m,f,c,b){void 0===b&&(b=null);var a="call"+ob(c);a=m.reduce(Pe(a),b);f=(b=a===Td)?null:f[c](a);for(a=m.length-1;0<=a;a--){var e=m[a];if(e[c])e[c](b,f)}return f}function Pe(m){return function(f,c){return f===Td?Td:c[m]?c[m](f):f}}function nk(m,f){var c=Qe[m.id()],b=null;if(void 0===c||null===c)return b=f(m),Qe[m.id()]=[[f,b]],b;for(var a=0;a<c.length;a++){var e=c[a];e[0]===f&&(b=e[1])}null===b&&(b=f(m),c.push([f,b]));return b}function Jc(m,
f,c,b,a,e){void 0===m&&(m={});void 0===f&&(f=[]);void 0===a&&(a=[]);void 0===e&&(e=!1);var h=f[0],l=f.slice(1);if("string"===typeof h)Jc(m,Kc[h],c,b,a,e);else if(h){var g=nk(b,h);if(!g.setSource)return a.push(g),Jc(m,l,c,b,a,e);g.setSource(w({},m),function(n,d){if(n)return Jc(m,l,c,b,a,e);a.push(g);Jc(d,m.type===d.type?l:Kc[d.type],c,b,a,e)})}else l.length?Jc(m,l,c,b,a,e):e?c(m,a):Jc(m,Kc["*"],c,b,a,!0)}function Jg(m){if(!m.type){var f=Ud(m.src);f&&(m.type=f)}return m}function Re(m,f){if(4===m.length)m=
m[1]+m[1]+m[2]+m[2]+m[3]+m[3];else if(7===m.length)m=m.slice(1);else throw Error("Invalid color code provided, "+m+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(m.slice(0,2),16)+","+parseInt(m.slice(2,4),16)+","+parseInt(m.slice(4,6),16)+","+f+")"}function Uc(m,f){void 0===f&&(f=m);return Se(m,f)}function Kg(m,f){f&&(m=f(m));if(m&&"none"!==m)return m}function la(m,f,c){var b=la.getPlayer(m);if(b)return f&&ab.warn('Player "'+m+'" is already initialised. Options will not be applied.'),
c&&b.ready(c),b;var a="string"===typeof m?Ac("#"+Lg(m)):m;if(!T(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");a.ownerDocument.defaultView&&a.ownerDocument.body.contains(a)||ab.warn("The element supplied is not included in the DOM");f=f||{};la.hooks("beforesetup").forEach(function(e){e=e(a,xa(f));!A(e)||Array.isArray(e)?ab.error("please return an object in beforesetup hooks"):f=xa(f,e)});b=new (Ea.getComponent("Player"))(a,f,c);la.hooks("setup").forEach(function(e){return e(b)});
return b}function Te(){Te=Object.assign||function(m){for(var f=1;f<arguments.length;f++){var c=arguments[f],b;for(b in c)Object.prototype.hasOwnProperty.call(c,b)&&(m[b]=c[b])}return m};return Te.apply(this,arguments)}function Ue(m,f){m.prototype=Object.create(f.prototype);m.prototype.constructor=m;m.__proto__=f}function ok(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function Mg(m){return m&&"object"===typeof m&&"default"in m?m["default"]:
m}function Ng(){}function pk(m,f,c,b,a){function e(Fa){var Ua=Fa.slice(1,-1);if(Ua in c)return c[Ua];if("#"===Ua.charAt(0))return Fa=parseInt(Ua.substr(1).replace("x","0x")),65535<Fa?(Fa-=65536,Fa=String.fromCharCode(55296+(Fa>>10),56320+(Fa&1023))):Fa=String.fromCharCode(Fa),Fa;a.error("entity not found:"+Fa);return Fa}function h(Fa){if(Fa>q){var Ua=m.substring(q,Fa).replace(/&#?\w+;/g,e);k&&l(q);b.characters(Ua,0,Fa-q);q=Fa}}function l(Fa,Ua){for(;Fa>=n&&(Ua=d.exec(m));)g=Ua.index,n=g+Ua[0].length,
k.lineNumber++;k.columnNumber=Fa-g+1}var g=0,n=0,d=/.*(?:\r\n?|\n)|.*$/g,k=b.locator;f=[{currentNSMap:f}];for(var p={},q=0;;){try{var t=m.indexOf("<",q);if(0>t){if(!m.substr(q).match(/^\s*$/)){var D=b.doc,N=D.createTextNode(m.substr(q));D.appendChild(N);b.currentElement=N}break}t>q&&h(t);switch(m.charAt(t+1)){case "/":var Y=m.indexOf(">",t+3),oa=m.substring(t+2,Y),ta=f.pop();0>Y?(oa=m.substring(t+2).replace(/[\s<].*/,""),a.error("end tag name: "+oa+" is not complete:"+ta.tagName),Y=t+1+oa.length):
oa.match(/\s</)&&(oa=oa.replace(/[\s<].*/,""),a.error("end tag name: "+oa+" maybe not complete"),Y=t+1+oa.length);var Ba=ta.localNSMap,Da=ta.tagName==oa;if(Da||ta.tagName&&ta.tagName.toLowerCase()==oa.toLowerCase()){b.endElement(ta.uri,ta.localName,oa);if(Ba)for(var va in Ba)b.endPrefixMapping(va);Da||a.fatalError("end tag name: "+oa+" is not match the current start tagName:"+ta.tagName)}else f.push(ta);Y++;break;case "?":k&&l(t);Y=qk(m,t,b);break;case "!":k&&l(t);Y=rk(m,t,b,a);break;default:k&&l(t);
var Aa=new Og,Pa=f[f.length-1].currentNSMap;Y=sk(m,t,Aa,Pa,e,a);var Ma=Aa.length;!Aa.closed&&tk(m,Y,Aa.tagName,p)&&(Aa.closed=!0,c.nbsp||a.warning("unclosed xml attribute"));if(k&&Ma){for(var eb=Pg(k,{}),jb=0;jb<Ma;jb++){var Va=Aa[jb];l(Va.offset);Va.locator=Pg(k,{})}b.locator=eb;Qg(Aa,b,Pa)&&f.push(Aa);b.locator=k}else Qg(Aa,b,Pa)&&f.push(Aa);"http://www.w3.org/1999/xhtml"!==Aa.uri||Aa.closed?Y++:Y=uk(m,Y,Aa.tagName,e,b)}}catch(Fa){a.error("element parse error: "+Fa),Y=-1}Y>q?q=Y:h(Math.max(t,q)+
1)}}function Pg(m,f){f.lineNumber=m.lineNumber;f.columnNumber=m.columnNumber;return f}function sk(m,f,c,b,a,e){for(var h,l,g=++f,n=0;;){var d=m.charAt(g);switch(d){case "=":if(1===n)h=m.slice(f,g),n=3;else if(2===n)n=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===n||1===n)if(1===n&&(e.warning('attribute value must after "="'),h=m.slice(f,g)),f=g+1,g=m.indexOf(d,f),0<g)l=m.slice(f,g).replace(/&#?\w+;/g,a),c.add(h,l,f-1),n=5;else throw Error("attribute value no end '"+
d+"' match");else if(4==n)l=m.slice(f,g).replace(/&#?\w+;/g,a),c.add(h,l,f),e.warning('attribute "'+h+'" missed start quot('+d+")!!"),f=g+1,n=5;else throw Error('attribute value must after "="');break;case "/":switch(n){case 0:c.setTagName(m.slice(f,g));case 5:case 6:case 7:n=7,c.closed=!0;case 4:case 1:case 2:break;default:throw Error("attribute invalid close char('/')");}break;case "":return e.error("unexpected end of input"),0==n&&c.setTagName(m.slice(f,g)),g;case ">":switch(n){case 0:c.setTagName(m.slice(f,
g));case 5:case 6:case 7:break;case 4:case 1:l=m.slice(f,g),"/"===l.slice(-1)&&(c.closed=!0,l=l.slice(0,-1));case 2:2===n&&(l=h);4==n?(e.warning('attribute "'+l+'" missed quot(")!!'),c.add(h,l.replace(/&#?\w+;/g,a),f)):("http://www.w3.org/1999/xhtml"===b[""]&&l.match(/^(?:disabled|checked|selected)$/i)||e.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),c.add(l,l,f));break;case 3:throw Error("attribute value missed!!");}return g;case "\u0080":d=" ";default:if(" ">=d)switch(n){case 0:c.setTagName(m.slice(f,
g));n=6;break;case 1:h=m.slice(f,g);n=2;break;case 4:l=m.slice(f,g).replace(/&#?\w+;/g,a),e.warning('attribute "'+l+'" missed quot(")!!'),c.add(h,l,f);case 5:n=6}else switch(n){case 2:"http://www.w3.org/1999/xhtml"===b[""]&&h.match(/^(?:disabled|checked|selected)$/i)||e.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!');c.add(h,h,f);f=g;n=1;break;case 5:e.warning('attribute space is required"'+h+'"!!');case 6:n=1;f=g;break;case 3:n=4;f=g;break;case 7:throw Error("elements closed character '/' and '>' must be connected to");
}}g++}}function Qg(m,f,c){for(var b=m.tagName,a=null,e=m.length;e--;){var h=m[e],l=h.qName,g=h.value,n=l.indexOf(":");if(0<n){var d=h.prefix=l.slice(0,n);n=l.slice(n+1);d="xmlns"===d&&n}else n=l,d="xmlns"===l&&"";h.localName=n;if(!1!==d){if(null==a){a={};n=void 0;l=c;var k=c={};for(n in l)k[n]=l[n]}c[d]=a[d]=g;h.uri="http://www.w3.org/2000/xmlns/";f.startPrefixMapping(d,g)}}for(e=m.length;e--;)if(h=m[e],d=h.prefix)"xml"===d&&(h.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==d&&(h.uri=c[d||
""]);n=b.indexOf(":");0<n?(d=m.prefix=b.slice(0,n),n=m.localName=b.slice(n+1)):(d=null,n=m.localName=b);e=m.uri=c[d||""];f.startElement(e,n,b,m);if(m.closed){if(f.endElement(e,n,b),a)for(d in a)f.endPrefixMapping(d)}else return m.currentNSMap=c,m.localNSMap=a,!0}function uk(m,f,c,b,a){if(/^(?:script|textarea)$/i.test(c)){var e=m.indexOf("</"+c+">",f);m=m.substring(f+1,e);if(/[&<]/.test(m)){if(/^script$/i.test(c))return a.characters(m,0,m.length),e;m=m.replace(/&#?\w+;/g,b);a.characters(m,0,m.length);
return e}}return f+1}function tk(m,f,c,b){var a=b[c];null==a&&(a=m.lastIndexOf("</"+c+">"),a<f&&(a=m.lastIndexOf("</"+c)),b[c]=a);return a<f}function rk(m,f,c,b){switch(m.charAt(f+2)){case "-":if("-"===m.charAt(f+3)){var a=m.indexOf("--\x3e",f+4);if(a>f)return c.comment(m,f+4,a-f-4),a+3;b.error("Unclosed comment")}break;default:if("CDATA["==m.substr(f+3,6))return a=m.indexOf("]]\x3e",f+9),c.startCDATA(),c.characters(m,f+9,a-f-9),c.endCDATA(),a+3;a:{b=[];a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
a.lastIndex=f;for(a.exec(m);f=a.exec(m);)if(b.push(f),f[1]){a=b;break a}a=void 0}var e=a.length;if(1<e&&/!doctype/i.test(a[0][0]))return m=a[1][0],f=3<e&&/^public$/i.test(a[2][0])&&a[3][0],b=4<e&&a[4][0],a=a[e-1],c.startDTD(m,f&&f.replace(/^(['"])(.*?)\1$/,"$2"),b&&b.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),a.index+a[0].length}return-1}function qk(m,f,c){var b=m.indexOf("?>",f);return b&&(m=m.substring(f,b).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(c.processingInstruction(m[1],m[2]),b+2):-1}function Og(m){}
function Vd(m,f){m.__proto__=f;return m}function rd(m,f){for(var c in m)f[c]=m[c]}function Ob(m,f){var c=m.prototype;if(Object.create){var b=Object.create(f.prototype);c.__proto__=b}c instanceof f||(b=function(){},b.prototype=f.prototype,b=new b,rd(c,b),m.prototype=c=b);c.constructor!=m&&("function"!=typeof m&&console.error("unknow Class:"+m),c.constructor=m)}function Vc(m,f){if(f instanceof Error)var c=f;else c=this,Error.call(this,ub[m]),this.message=ub[m],Error.captureStackTrace&&Error.captureStackTrace(this,
Vc);c.code=m;f&&(this.message=this.message+": "+f);return c}function Bc(){}function sd(m,f){this._node=m;this._refresh=f;Ve(this)}function Ve(m){var f=m._node._inc||m._node.ownerDocument._inc;if(m._inc!=f){var c=m._refresh(m._node);Rg(m,"length",c.length);rd(c,m);m._inc=f}}function Wd(){}function Sg(m,f){for(var c=m.length;c--;)if(m[c]===f)return c}function Tg(m,f,c,b){b?f[Sg(f,b)]=c:f[f.length++]=c;m&&(c.ownerElement=m,f=m.ownerDocument)&&(b&&Ug(f,m,b),f&&f._inc++,"http://www.w3.org/2000/xmlns/"==
c.namespaceURI&&(m._nsMap[c.prefix?c.localName:""]=c.value))}function Vg(m,f,c){var b=Sg(f,c);if(0<=b){for(var a=f.length-1;b<a;)f[b]=f[++b];f.length=a;m&&(f=m.ownerDocument)&&(Ug(f,m,c),c.ownerElement=null)}else throw Vc(vk,Error(m.tagName+"@"+c));}function Wg(m){this._features={};if(m)for(var f in m)this._features=m[f]}function Jb(){}function Xg(m){return"<"==m&&"&lt;"||">"==m&&"&gt;"||"&"==m&&"&amp;"||'"'==m&&"&quot;"||"&#"+m.charCodeAt()+";"}function Xd(m,f){if(f(m))return!0;if(m=m.firstChild){do if(Xd(m,
f))return!0;while(m=m.nextSibling)}}function td(){}function Ug(m,f,c,b){m&&m._inc++;"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&delete f._nsMap[c.prefix?c.localName:""]}function We(m,f,c){if(m&&m._inc)if(m._inc++,m=f.childNodes,c)m[m.length++]=c;else{f=f.firstChild;for(c=0;f;)m[c++]=f,f=f.nextSibling;m.length=c}}function Yg(m,f){var c=f.previousSibling,b=f.nextSibling;c?c.nextSibling=b:m.firstChild=b;b?b.previousSibling=c:m.lastChild=c;We(m.ownerDocument,m);return f}function Zg(m,f,c){var b=
f.parentNode;b&&b.removeChild(f);if(f.nodeType===qc){b=f.firstChild;if(null==b)return f;var a=f.lastChild}else b=a=f;var e=c?c.previousSibling:m.lastChild;b.previousSibling=e;a.nextSibling=c;e?e.nextSibling=b:m.firstChild=b;null==c?m.lastChild=a:c.previousSibling=a;do b.parentNode=m;while(b!==a&&(b=b.nextSibling));We(m.ownerDocument||m,m);f.nodeType==qc&&(f.firstChild=f.lastChild=null);return f}function Wc(){this._nsMap={}}function Yd(){}function ud(){}function Xe(){}function Ye(){}function Ze(){}
function $e(){}function $g(){}function ah(){}function af(){}function Zd(){}function bf(){}function bh(){}function ch(m,f){var c=[],b=9==this.nodeType?this.documentElement:this,a=b.prefix,e=b.namespaceURI;if(e&&null==a&&(a=b.lookupPrefix(e),null==a))var h=[{namespace:e,prefix:null}];Xc(this,c,m,f,h);return c.join("")}function dh(m,f,c){f=m.prefix||"";m=m.namespaceURI;if(!f&&!m||"xml"===f&&"http://www.w3.org/XML/1998/namespace"===m||"http://www.w3.org/2000/xmlns/"==m)return!1;for(var b=c.length;b--;){var a=
c[b];if(a.prefix==f)return a.namespace!=m}return!0}function Xc(m,f,c,b,a){if(b)if(m=b(m)){if("string"==typeof m){f.push(m);return}}else return;switch(m.nodeType){case lc:a||(a=[]);var e=m.attributes,h=e.length,l=m.firstChild,g=m.tagName;c="http://www.w3.org/1999/xhtml"===m.namespaceURI||c;f.push("<",g);for(var n=0;n<h;n++){var d=e.item(n);"xmlns"==d.prefix?a.push({prefix:d.localName,namespace:d.value}):"xmlns"==d.nodeName&&a.push({prefix:"",namespace:d.value})}for(n=0;n<h;n++){d=e.item(n);if(dh(d,
c,a)){var k=d.prefix||"",p=d.namespaceURI;f.push(k?" xmlns:"+k:" xmlns",'="',p,'"');a.push({prefix:k,namespace:p})}Xc(d,f,c,b,a)}dh(m,c,a)&&(k=m.prefix||"",p=m.namespaceURI,f.push(k?" xmlns:"+k:" xmlns",'="',p,'"'),a.push({prefix:k,namespace:p}));if(l||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(g)){f.push(">");if(c&&/^script$/i.test(g))for(;l;)l.data?f.push(l.data):Xc(l,f,c,b,a),l=l.nextSibling;else for(;l;)Xc(l,f,c,b,a),l=l.nextSibling;f.push("</",g,">")}else f.push("/>");break;case eh:case qc:for(l=
m.firstChild;l;)Xc(l,f,c,b,a),l=l.nextSibling;break;case Yc:return f.push(" ",m.name,'="',m.value.replace(/[<&"]/g,Xg),'"');case $d:return f.push(m.data.replace(/[<&]/g,Xg));case fh:return f.push("<![CDATA[",m.data,"]]\x3e");case gh:return f.push("\x3c!--",m.data,"--\x3e");case hh:c=m.publicId;b=m.systemId;f.push("<!DOCTYPE ",m.name);c?(f.push(' PUBLIC "',c),b&&"."!=b&&f.push('" "',b),f.push('">')):b&&"."!=b?f.push(' SYSTEM "',b,'">'):((m=m.internalSubset)&&f.push(" [",m,"]"),f.push(">"));break;case ih:return f.push("<?",
m.target," ",m.data,"?>");case jh:return f.push("&",m.nodeName,";");default:f.push("??",m.nodeName)}}function kh(m,f,c){switch(f.nodeType){case lc:var b=f.cloneNode(!1);b.ownerDocument=m;case qc:break;case Yc:c=!0}b||(b=f.cloneNode(!1));b.ownerDocument=m;b.parentNode=null;if(c)for(f=f.firstChild;f;)b.appendChild(kh(m,f,c)),f=f.nextSibling;return b}function cf(m,f,c){var b=new f.constructor;for(e in f){var a=f[e];"object"!=typeof a&&a!=b[e]&&(b[e]=a)}f.childNodes&&(b.childNodes=new Bc);b.ownerDocument=
m;switch(b.nodeType){case lc:var e=f.attributes;var h=b.attributes=new Wd;a=e.length;h._ownerElement=b;for(h=0;h<a;h++)b.setAttributeNode(cf(m,e.item(h),!0));break;case Yc:c=!0}if(c)for(f=f.firstChild;f;)b.appendChild(cf(m,f,c)),f=f.nextSibling;return b}function Rg(m,f,c){m[f]=c}function lh(m,f){return function(c){var b=this;if(f){if(Zc&&!c)return c=f.toString().replace(/^function.+?{/,"").slice(0,-1),c=mh(c),this[df]=new Zc(c),wk(this[df],c),this[df];var a={postMessage:function(e){b.onmessage&&setTimeout(function(){b.onmessage({data:e,
target:a})})}};f.call(a);this.postMessage=function(e){setTimeout(function(){a.onmessage({data:e,target:b})})};this.isThisThread=!0}else return new Zc(m)}}function mh(m){try{return $c.createObjectURL(new Blob([m],{type:"application/javascript"}))}catch(c){var f=new xk;f.append(m);return $c.createObjectURL(f.getBlob(type))}}function wk(m,f){if(m&&f){var c=m.terminate;m.objURL=f;m.terminate=function(){m.objURL&&$c.revokeObjectURL(m.objURL);c.call(m)}}}function ad(){}r=r&&Object.prototype.hasOwnProperty.call(r,
"default")?r["default"]:r;C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C["default"]:C;var Nb=[],Vj=function(m,f){return function(c,b,a){b=f.levels[b];var e=new RegExp("^("+b+")$");"log"!==c&&a.unshift(c.toUpperCase()+":");a.unshift(m+":");if(Nb){Nb.push([].concat(a));var h=Nb.length-1E3;Nb.splice(0,0<h?h:0)}if(r.console&&((h=r.console[c])||"debug"!==c||(h=r.console.info||r.console.log),h&&b&&e.test(c)))h[Array.isArray(a)?"apply":"call"](r.console,a)}},ab=W("VIDEOJS"),nh=ab.createLogger,
Rd=y(function(m){function f(){m.exports=f=Object.assign||function(c){for(var b=1;b<arguments.length;b++){var a=arguments[b],e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e])}return c};return f.apply(this,arguments)}m.exports=f}),Wj=Object.prototype.toString,Bg=function(m){return A(m)?Object.keys(m):[]},Ac=sa("querySelector"),oh=sa("querySelectorAll"),ph=Object.freeze({__proto__:null,isReal:U,isEl:T,isInFrame:L,createEl:X,textContent:ra,prependTo:ia,hasClass:Ca,addClass:Ka,removeClass:F,
toggleClass:ha,setAttributes:pa,getAttributes:ea,getAttribute:function(m,f){return m.getAttribute(f)},setAttribute:function(m,f,c){m.setAttribute(f,c)},removeAttribute:function(m,f){m.removeAttribute(f)},blockTextSelection:Ha,unblockTextSelection:Ta,getBoundingClientRect:za,findPosition:na,getPointerPosition:Oa,isTextNode:gb,emptyEl:fb,normalizeContent:Gb,appendContent:Fb,insertContent:$b,isSingleLeftClick:Ub,$:Ac,$$:oh}),Cg=!1,Ke,Xj=function(){if(U()&&!1!==Ke.options.autoSetup){var m=Array.prototype.slice.call(C.getElementsByTagName("video")),
f=Array.prototype.slice.call(C.getElementsByTagName("audio")),c=Array.prototype.slice.call(C.getElementsByTagName("video-js"));if((m=m.concat(f,c))&&0<m.length)for(f=0,c=m.length;f<c;f++){var b=m[f];if(b&&b.getAttribute)void 0===b.player&&null!==b.getAttribute("data-setup")&&Ke(b);else{yc(1);break}}else Cg||yc(1)}};U()&&("complete"===C.readyState?M():r.addEventListener("load",M));var qh=function(m){var f=C.createElement("style");f.className=m;return f},rh=function(m,f){m.styleSheet?m.styleSheet.cssText=
f:m.textContent=f},zc=3,sh;r.WeakMap||(sh=function(){function m(){this.vdata="vdata"+Math.floor(r.performance&&r.performance.now()||Date.now());this.data={}}var f=m.prototype;f.set=function(c,b){var a=c[this.vdata]||zc++;c[this.vdata]||(c[this.vdata]=a);this.data[a]=b;return this};f.get=function(c){var b=c[this.vdata];if(b)return this.data[b];ab("We have no data for this element",c)};f.has=function(c){return c[this.vdata]in this.data};f["delete"]=function(c){var b=c[this.vdata];b&&(delete this.data[b],
delete c[this.vdata])};return m}());var Hb=r.WeakMap?new WeakMap:new sh,ae,Yj=function(){if("boolean"!==typeof ae){ae=!1;try{var m=Object.defineProperty({},"passive",{get:function(){ae=!0}});r.addEventListener("test",null,m);r.removeEventListener("test",null,m)}catch(f){}}return ae},Zj=["touchstart","touchmove"],yk=Object.freeze({__proto__:null,fixEvent:Ab,on:tb,off:B,trigger:K,one:R,any:fa}),$a=function(m,f,c){f.guid||(f.guid=zc++);m=f.bind(m);m.guid=c?c+"_"+f.guid:f.guid;return m},Lc=function(m,
f){var c=r.performance.now();return function(){var b=r.performance.now();b-c>=f&&(m.apply(void 0,arguments),c=b)}},zk=function(m,f,c,b){void 0===b&&(b=r);var a,e=function(){var h=this,l=arguments,g=function(){g=a=null;c||m.apply(h,l)};!a&&c&&m.apply(h,l);b.clearTimeout(a);a=b.setTimeout(g,f)};e.cancel=function(){b.clearTimeout(a);a=null};return e},vb=function(){};vb.prototype.allowedEvents_={};vb.prototype.on=function(m,f){var c=this.addEventListener;this.addEventListener=function(){};tb(this,m,f);
this.addEventListener=c};vb.prototype.addEventListener=vb.prototype.on;vb.prototype.off=function(m,f){B(this,m,f)};vb.prototype.removeEventListener=vb.prototype.off;vb.prototype.one=function(m,f){var c=this.addEventListener;this.addEventListener=function(){};R(this,m,f);this.addEventListener=c};vb.prototype.any=function(m,f){var c=this.addEventListener;this.addEventListener=function(){};fa(this,m,f);this.addEventListener=c};vb.prototype.trigger=function(m){var f=m.type||m;"string"===typeof m&&(m=
{type:f});m=Ab(m);if(this.allowedEvents_[f]&&this["on"+f])this["on"+f](m);K(this,m)};vb.prototype.dispatchEvent=vb.prototype.trigger;var vd;vb.prototype.queueTrigger=function(m){var f=this;vd||(vd=new Map);var c=m.type||m,b=vd.get(this);b||(b=new Map,vd.set(this,b));var a=b.get(c);b["delete"](c);r.clearTimeout(a);a=r.setTimeout(function(){0===b.size&&(b=null,vd["delete"](f));f.trigger(m)},0);b.set(c,a)};var Ic=function(m){return m instanceof vb||!!m.eventBusEl_&&["on","one","off","trigger"].every(function(f){return"function"===
typeof m[f]})},Ak=function(m,f){Ic(m)?f():(m.eventedCallbacks||(m.eventedCallbacks=[]),m.eventedCallbacks.push(f))},th=function(m){return"string"===typeof m&&/\S/.test(m)||Array.isArray(m)&&!!m.length},ef=function(m){if(!m.nodeName&&!Ic(m))throw Error("Invalid target; must be a DOM node or evented object.");},uh=function(m){if(!th(m))throw Error("Invalid event type; must be a non-empty string or array.");},vh=function(m){if("function"!==typeof m)throw Error("Invalid listener; must be a function.");
},ff=function(m,f){var c=3>f.length||f[0]===m||f[0]===m.eventBusEl_;if(c){var b=m.eventBusEl_;3<=f.length&&f.shift();var a=f[0];f=f[1]}else b=f[0],a=f[1],f=f[2];ef(b);uh(a);vh(f);f=$a(m,f);return{isTargetingSelf:c,target:b,type:a,listener:f}},Mc=function(m,f,c,b){ef(m);if(m.nodeName)yk[f](m,c,b);else m[f](c,b)},ak={on:function(){for(var m=this,f=arguments.length,c=Array(f),b=0;b<f;b++)c[b]=arguments[b];f=ff(this,c);c=f.isTargetingSelf;var a=f.target,e=f.type,h=f.listener;Mc(a,"on",e,h);if(!c){var l=
function(){return m.off(a,e,h)};l.guid=h.guid;f=function(){return m.off("dispose",l)};f.guid=h.guid;Mc(this,"on","dispose",l);Mc(a,"on","dispose",f)}},one:function(){for(var m=this,f=arguments.length,c=Array(f),b=0;b<f;b++)c[b]=arguments[b];f=ff(this,c);var a=f.target,e=f.type,h=f.listener;f.isTargetingSelf?Mc(a,"one",e,h):(f=function g(){m.off(a,e,g);for(var n=arguments.length,d=Array(n),k=0;k<n;k++)d[k]=arguments[k];h.apply(null,d)},f.guid=h.guid,Mc(a,"one",e,f))},any:function(){for(var m=this,
f=arguments.length,c=Array(f),b=0;b<f;b++)c[b]=arguments[b];f=ff(this,c);var a=f.target,e=f.type,h=f.listener;f.isTargetingSelf?Mc(a,"any",e,h):(f=function g(){m.off(a,e,g);for(var n=arguments.length,d=Array(n),k=0;k<n;k++)d[k]=arguments[k];h.apply(null,d)},f.guid=h.guid,Mc(a,"any",e,f))},off:function(m,f,c){!m||th(m)?B(this.eventBusEl_,m,f):(ef(m),uh(f),vh(c),c=$a(this,c),this.off("dispose",c),m.nodeName?(B(m,f,c),B(m,"dispose",c)):Ic(m)&&(m.off(f,c),m.off("dispose",c)))},trigger:function(m,f){return K(this.eventBusEl_,
m,f)}},bk={state:{},setState:function(m){var f=this;"function"===typeof m&&(m=m());var c;J(m,function(b,a){f.state[a]!==b&&(c=c||{},c[a]={from:f.state[a],to:b});f.state[a]=b});c&&Ic(this)&&this.trigger({changes:c,type:"statechanged"});return c}},be=function(m){return"string"!==typeof m?m:m.replace(/./,function(f){return f.toLowerCase()})},ob=function(m){return"string"!==typeof m?m:m.replace(/./,function(f){return f.toUpperCase()})},Bk=function(m,f){return ob(m)===ob(f)},Ea=function(){function m(c,
b,a){this.player_=!c&&this.play?c=this:c;this.isDisposed_=!1;this.parentComponent_=null;this.options_=xa({},this.options_);b=this.options_=xa(this.options_,b);this.id_=b.id||b.el&&b.el.id;this.id_||(this.id_=(c&&c.id&&c.id()||"no_player")+"_component_"+zc++);this.name_=b.name||null;b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl());!1!==b.evented&&ka(this,{eventBusKey:this.el_?"el_":null});qa(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_=
{};var e;r.Set||(e=function(){function h(){this.set_={}}var l=h.prototype;l.has=function(g){return g in this.set_};l["delete"]=function(g){var n=this.has(g);delete this.set_[g];return n};l.add=function(g){this.set_[g]=1;return this};l.forEach=function(g,n){for(var d in this.set_)g.call(n,d,d,this)};return h}());this.setTimeoutIds_=r.Set?new Set:new e;this.setIntervalIds_=r.Set?new Set:new e;this.rafIds_=r.Set?new Set:new e;this.clearingTimersOnDispose_=!1;!1!==b.initChildren&&this.initChildren();
this.ready(a);!1!==b.reportTouchActivity&&this.enableTouchActivity()}var f=m.prototype;f.dispose=function(){if(!this.isDisposed_){this.trigger({type:"dispose",bubbles:!1});this.isDisposed_=!0;if(this.children_)for(var c=this.children_.length-1;0<=c;c--)this.children_[c].dispose&&this.children_[c].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;if(this.el_){this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_);if(Hb.has(this.el_))Hb["delete"](this.el_);
this.el_=null}this.player_=null}};f.isDisposed=function(){return!!this.isDisposed_};f.player=function(){return this.player_};f.options=function(c){return c?this.options_=xa(this.options_,c):this.options_};f.el=function(){return this.el_};f.createEl=function(c,b,a){return X(c,b,a)};f.localize=function(c,b,a){void 0===a&&(a=c);var e=this.player_.language&&this.player_.language(),h=this.player_.languages&&this.player_.languages(),l=h&&h[e];e=e&&e.split("-")[0];h=h&&h[e];l&&l[c]?a=l[c]:h&&h[c]&&(a=h[c]);
b&&(a=a.replace(/\{(\d+)\}/g,function(g,n){var d=n=b[n-1];"undefined"===typeof n&&(d=g);return d}));return a};f.contentEl=function(){return this.contentEl_||this.el_};f.id=function(){return this.id_};f.name=function(){return this.name_};f.children=function(){return this.children_};f.getChildById=function(c){return this.childIndex_[c]};f.getChild=function(c){if(c)return this.childNameIndex_[c]};f.getDescendant=function(){for(var c=arguments.length,b=Array(c),a=0;a<c;a++)b[a]=arguments[a];b=b.reduce(function(e,
h){return e.concat(h)},[]);c=this;for(a=0;a<b.length;a++)if(c=c.getChild(b[a]),!c||!c.getChild)return;return c};f.addChild=function(c,b,a){void 0===b&&(b={});void 0===a&&(a=this.children_.length);if("string"===typeof c){var e=ob(c);c=b.componentClass||e;b.name=e;var h=m.getComponent(c);if(!h)throw Error("Component "+c+" does not exist");if("function"!==typeof h)return null;b=new h(this.player_||this,b)}else b=c;b.parentComponent_&&b.parentComponent_.removeChild(b);this.children_.splice(a,0,b);b.parentComponent_=
this;"function"===typeof b.id&&(this.childIndex_[b.id()]=b);if(e=e||b.name&&ob(b.name()))this.childNameIndex_[e]=b,this.childNameIndex_[be(e)]=b;"function"===typeof b.el&&b.el()&&(e=null,this.children_[a+1]&&(this.children_[a+1].el_?e=this.children_[a+1].el_:T(this.children_[a+1])&&(e=this.children_[a+1])),this.contentEl().insertBefore(b.el(),e));return b};f.removeChild=function(c){"string"===typeof c&&(c=this.getChild(c));if(c&&this.children_){for(var b=!1,a=this.children_.length-1;0<=a;a--)if(this.children_[a]===
c){b=!0;this.children_.splice(a,1);break}b&&(c.parentComponent_=null,this.childIndex_[c.id()]=null,this.childNameIndex_[ob(c.name())]=null,this.childNameIndex_[be(c.name())]=null,(b=c.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(c.el()))}};f.initChildren=function(){var c=this,b=this.options_.children;if(b){var a=this.options_,e=m.getComponent("Tech");var h=Array.isArray(b)?b:Object.keys(b);h.concat(Object.keys(this.options_).filter(function(l){return!h.some(function(g){return"string"===
typeof g?l===g:l===g.name})})).map(function(l){if("string"===typeof l){var g=l;l=b[g]||c.options_[g]||{}}else g=l.name;return{name:g,opts:l}}).filter(function(l){return(l=m.getComponent(l.opts.componentClass||ob(l.name)))&&!e.isTech(l)}).forEach(function(l){var g=l.name;l=l.opts;void 0!==a[g]&&(l=a[g]);!1!==l&&(!0===l&&(l={}),l.playerOptions=c.options_.playerOptions,(l=c.addChild(g,l))&&(c[g]=l))})}};f.buildCSSClass=function(){return""};f.ready=function(c,b){void 0===b&&(b=!1);c&&(this.isReady_?b?
c.call(this):this.setTimeout(c,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(c)))};f.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var c=this.readyQueue_;this.readyQueue_=[];c&&0<c.length&&c.forEach(function(b){b.call(this)},this);this.trigger("ready")},1)};f.$=function(c,b){return Ac(c,b||this.contentEl())};f.$$=function(c,b){return oh(c,b||this.contentEl())};f.hasClass=function(c){return Ca(this.el_,c)};f.addClass=function(c){Ka(this.el_,c)};f.removeClass=
function(c){F(this.el_,c)};f.toggleClass=function(c,b){ha(this.el_,c,b)};f.show=function(){this.removeClass("vjs-hidden")};f.hide=function(){this.addClass("vjs-hidden")};f.lockShowing=function(){this.addClass("vjs-lock-showing")};f.unlockShowing=function(){this.removeClass("vjs-lock-showing")};f.getAttribute=function(c){return this.el_.getAttribute(c)};f.setAttribute=function(c,b){this.el_.setAttribute(c,b)};f.removeAttribute=function(c){this.el_.removeAttribute(c)};f.width=function(c,b){return this.dimension("width",
c,b)};f.height=function(c,b){return this.dimension("height",c,b)};f.dimensions=function(c,b){this.width(c,!0);this.height(b)};f.dimension=function(c,b,a){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[c]=b:this.el_.style[c]="auto"===b?"":b+"px";a||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[c];a=b.indexOf("px");return-1!==a?parseInt(b.slice(0,a),10):parseInt(this.el_["offset"+ob(c)],10)}};f.currentDimension=
function(c){if("width"!==c&&"height"!==c)throw Error("currentDimension only accepts width or height value");var b=E(this.el_,c);b=parseFloat(b);if(0===b||isNaN(b))c="offset"+ob(c),b=this.el_[c];return b};f.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};f.currentWidth=function(){return this.currentDimension("width")};f.currentHeight=function(){return this.currentDimension("height")};f.focus=function(){this.el_.focus()};f.blur=function(){this.el_.blur()};
f.handleKeyDown=function(c){this.player_&&(c.stopPropagation(),this.player_.handleKeyDown(c))};f.handleKeyPress=function(c){this.handleKeyDown(c)};f.emitTapEvents=function(){var c=0,b=null,a;this.on("touchstart",function(h){1===h.touches.length&&(b={pageX:h.touches[0].pageX,pageY:h.touches[0].pageY},c=r.performance.now(),a=!0)});this.on("touchmove",function(h){if(1<h.touches.length)a=!1;else if(b){var l=h.touches[0].pageX-b.pageX;h=h.touches[0].pageY-b.pageY;10<Math.sqrt(l*l+h*h)&&(a=!1)}});var e=
function(){a=!1};this.on("touchleave",e);this.on("touchcancel",e);this.on("touchend",function(h){b=null;!0===a&&200>r.performance.now()-c&&(h.preventDefault(),this.trigger("tap"))})};f.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var c=$a(this.player(),this.player().reportUserActivity),b;this.on("touchstart",function(){c();this.clearInterval(b);b=this.setInterval(c,250)});var a=function(e){c();this.clearInterval(b)};this.on("touchmove",c);this.on("touchend",a);
this.on("touchcancel",a)}};f.setTimeout=function(c,b){var a=this;c=$a(this,c);this.clearTimersOnDispose_();var e=r.setTimeout(function(){if(a.setTimeoutIds_.has(e))a.setTimeoutIds_["delete"](e);c()},b);this.setTimeoutIds_.add(e);return e};f.clearTimeout=function(c){this.setTimeoutIds_.has(c)&&(this.setTimeoutIds_["delete"](c),r.clearTimeout(c));return c};f.setInterval=function(c,b){c=$a(this,c);this.clearTimersOnDispose_();c=r.setInterval(c,b);this.setIntervalIds_.add(c);return c};f.clearInterval=
function(c){this.setIntervalIds_.has(c)&&(this.setIntervalIds_["delete"](c),r.clearInterval(c));return c};f.requestAnimationFrame=function(c){var b=this;if(!this.supportsRaf_)return this.setTimeout(c,1E3/60);this.clearTimersOnDispose_();c=$a(this,c);var a=r.requestAnimationFrame(function(){if(b.rafIds_.has(a))b.rafIds_["delete"](a);c()});this.rafIds_.add(a);return a};f.cancelAnimationFrame=function(c){if(!this.supportsRaf_)return this.clearTimeout(c);this.rafIds_.has(c)&&(this.rafIds_["delete"](c),
r.cancelAnimationFrame(c));return c};f.clearTimersOnDispose_=function(){var c=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(b){c[b[0]].forEach(c[b[1]],c)});c.clearingTimersOnDispose_=!1}))};m.registerComponent=function(c,b){if("string"!==typeof c||!c)throw Error('Illegal component name, "'+c+'"; must be a non-empty string.');
var a=m.getComponent("Tech");a=a&&a.isTech(b);var e=m===b||m.prototype.isPrototypeOf(b.prototype);if(a||!e)throw Error('Illegal component, "'+c+'"; '+(a?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");c=ob(c);m.components_||(m.components_={});a=m.getComponent("Player");if("Player"===c&&a&&a.players){var h=a.players;a=Object.keys(h);if(h&&0<a.length&&a.map(function(l){return h[l]}).every(Boolean))throw Error("Can not register Player component after player has been created.");
}m.components_[c]=b;return m.components_[be(c)]=b};m.getComponent=function(c){if(c&&m.components_)return m.components_[c]};return m}();Ea.prototype.supportsRaf_="function"===typeof r.requestAnimationFrame&&"function"===typeof r.cancelAnimationFrame;Ea.registerComponent("Component",Ea);var Ya=function(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m};y(function(m){function f(c){"@babel/helpers - typeof";m.exports="function"===typeof Symbol&&
"symbol"===typeof Symbol.iterator?f=function(b){return typeof b}:f=function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return f(c)}m.exports=f});y(function(m){function f(c){m.exports=f=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return f(c)}m.exports=f});var Na=function(m,f){m.prototype=Object.create(f.prototype);m.prototype.constructor=m;m.__proto__=f},wb=r.navigator&&r.navigator.userAgent||
"",wh=/AppleWebKit\/([\d.]+)/i.exec(wb),Ck=wh?parseFloat(wh.pop()):null,xh=/iPod/i.test(wb),Dk=function(){var m=wb.match(/OS (\d+)_/i);return m&&m[1]?m[1]:null}(),Cc=/Android/i.test(wb),gf=function(){var m=wb.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!m)return null;var f=m[1]&&parseFloat(m[1]),c=m[2]&&parseFloat(m[2]);return f&&c?parseFloat(m[1]+"."+m[2]):f?f:null}(),yh=Cc&&5>gf&&537>Ck,zh=/Firefox/i.test(wb),wd=/Edg/i.test(wb),rc=!wd&&(/Chrome/i.test(wb)||/CriOS/i.test(wb)),Ah=function(){var m=
wb.match(/(Chrome|CriOS)\/(\d+)/);return m&&m[2]?parseFloat(m[2]):null}(),xd=function(){var m=/MSIE\s(\d+)\.\d/.exec(wb);m=m&&parseFloat(m[1]);!m&&/Trident\/7.0/i.test(wb)&&/rv:11.0/.test(wb)&&(m=11);return m}(),hf=/Safari/i.test(wb)&&!rc&&!Cc&&!wd,Bh=/Windows/i.test(wb),bd=U()&&("ontouchstart"in r||r.navigator.maxTouchPoints||r.DocumentTouch&&r.document instanceof r.DocumentTouch),jf=/iPad/i.test(wb)||hf&&bd&&!/iPhone/i.test(wb),kf=/iPhone/i.test(wb)&&!jf,hc=kf||jf||xh,lf=(hf||hc)&&!rc,Ek=Object.freeze({__proto__:null,
IS_IPOD:xh,IOS_VERSION:Dk,IS_ANDROID:Cc,ANDROID_VERSION:gf,IS_NATIVE_ANDROID:yh,IS_FIREFOX:zh,IS_EDGE:wd,IS_CHROME:rc,CHROME_VERSION:Ah,IE_VERSION:xd,IS_SAFARI:hf,IS_WINDOWS:Bh,TOUCH_ENABLED:bd,IS_IPAD:jf,IS_IPHONE:kf,IS_IOS:hc,IS_ANY_SAFARI:lf}),mf={prefixed:!0},ce=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror -moz-full-screen".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError -ms-fullscreen".split(" ")],Ch=ce[0],de=0;for(;de<ce.length;de++)if(ce[de][1]in C){var ee=ce[de];break}if(ee){for(var fe=0;fe<ee.length;fe++)mf[Ch[fe]]=ee[fe];mf.prefixed=ee[0]!==Ch[0]}G.prototype.code=0;G.prototype.message="";G.prototype.status=
null;G.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");G.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",
5:"The media is encrypted and we do not have the keys to decrypt it."};for(var cd=0;cd<G.errorTypes.length;cd++)G[G.errorTypes[cd]]=cd,G.prototype[G.errorTypes[cd]]=cd;var nf=function(m){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(f,c,b){m[c]&&(f[c]=m[c]);return f},{cues:m.cues&&Array.prototype.map.call(m.cues,function(f){return{startTime:f.startTime,endTime:f.endTime,text:f.text,id:f.id}})})},Dh={textTracksToJson:function(m){var f=m.$$("track"),
c=Array.prototype.map.call(f,function(b){return b.track});return Array.prototype.map.call(f,function(b){var a=nf(b.track);b.src&&(a.src=b.src);return a}).concat(Array.prototype.filter.call(m.textTracks(),function(b){return-1===c.indexOf(b)}).map(nf))},jsonToTextTracks:function(m,f){m.forEach(function(c){var b=f.addRemoteTextTrack(c).track;!c.src&&c.cues&&c.cues.forEach(function(a){return b.addCue(a)})});return f.textTracks()},trackToJson_:nf},Wa=y(function(m,f){function c(l){if(l&&"object"===typeof l){var g=
l.which||l.keyCode||l.charCode;g&&(l=g)}if("number"===typeof l)return e[l];l=String(l);if((g=b[l.toLowerCase()])||(g=a[l.toLowerCase()]))return g;if(1===l.length)return l.charCodeAt(0)}c.isEventKey=function(l,g){if(l&&"object"===typeof l){l=l.which||l.keyCode||l.charCode;if(null===l||void 0===l)return!1;if("string"===typeof g){var n=b[g.toLowerCase()];if(n||(n=a[g.toLowerCase()]))return n===l}else if("number"===typeof g)return g===l;return!1}};f=m.exports=c;var b=f.code=f.codes={backspace:8,tab:9,
enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=f.aliases={windows:91,"\u21e7":16,"\u2325":18,
"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(m=97;123>m;m++)b[String.fromCharCode(m)]=m-32;for(m=48;58>m;m++)b[m-48]=m;for(m=1;13>m;m++)b["f"+m]=m+111;for(m=0;10>m;m++)b["numpad "+m]=m+96;var e=f.names=f.title={};for(m in b)e[b[m]]=m;for(var h in a)b[h]=a[h]}),dd=function(m){function f(b,a){b=m.call(this,b,a)||this;b.opened_=b.hasBeenOpened_=b.hasBeenFilled_=!1;b.closeable(!b.options_.uncloseable);
b.content(b.options_.content);b.contentEl_=X("div",{className:"vjs-modal-dialog-content"},{role:"document"});b.descEl_=X("p",{className:"vjs-modal-dialog-description vjs-control-text",id:b.el().getAttribute("aria-describedby")});ra(b.descEl_,b.description());b.el_.appendChild(b.descEl_);b.el_.appendChild(b.contentEl_);return b}Na(f,m);var c=f.prototype;c.createEl=function(){return m.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description",
"aria-hidden":"true","aria-label":this.label(),role:"dialog"})};c.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;m.prototype.dispose.call(this)};c.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+m.prototype.buildCSSClass.call(this)};c.label=function(){return this.localize(this.options_.label||"Modal Window")};c.description=function(){var b=this.options_.description||this.localize("This is a modal window.");this.closeable()&&(b+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));
return b};c.open=function(){if(!this.opened_){var b=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!b.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&b.pause();this.on("keydown",this.handleKeyDown);this.hadControls_=b.controls();b.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};c.opened=
function(b){if("boolean"===typeof b)this[b?"open":"close"]();return this.opened_};c.close=function(){if(this.opened_){var b=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&b.play();this.off("keydown",this.handleKeyDown);this.hadControls_&&b.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};c.closeable=function(b){if("boolean"===
typeof b){b=this.closeable_=!!b;var a=this.getChild("closeButton");if(b&&!a){var e=this.contentEl_;this.contentEl_=this.el_;a=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=e;this.on(a,"close",this.close)}!b&&a&&(this.off(a,"close",this.close),this.removeChild(a),a.dispose())}return this.closeable_};c.fill=function(){this.fillWith(this.content())};c.fillWith=function(b){var a=this.contentEl(),e=a.parentNode,h=a.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=
!0;e.removeChild(a);this.empty();$b(a,b);this.trigger("modalfill");h?e.insertBefore(a,h):e.appendChild(a);(b=this.getChild("closeButton"))&&e.appendChild(b.el_)};c.empty=function(){this.trigger("beforemodalempty");fb(this.contentEl());this.trigger("modalempty")};c.content=function(b){"undefined"!==typeof b&&(this.content_=b);return this.content_};c.conditionalFocus_=function(){var b=C.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null;if(a.contains(b)||a===b)this.previouslyActiveEl_=b,
this.focus()};c.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)};c.handleKeyDown=function(b){b.stopPropagation();if(Wa.isEventKey(b,"Escape")&&this.closeable())b.preventDefault(),this.close();else if(Wa.isEventKey(b,"Tab")){for(var a=this.focusableEls_(),e=this.el_.querySelector(":focus"),h,l=0;l<a.length;l++)if(e===a[l]){h=l;break}C.activeElement===this.el_&&(h=0);b.shiftKey&&0===h?(a[a.length-1].focus(),b.preventDefault()):b.shiftKey||
h!==a.length-1||(a[0].focus(),b.preventDefault())}};c.focusableEls_=function(){var b=this.el_.querySelectorAll("*");return Array.prototype.filter.call(b,function(a){return(a instanceof r.HTMLAnchorElement||a instanceof r.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof r.HTMLInputElement||a instanceof r.HTMLSelectElement||a instanceof r.HTMLTextAreaElement||a instanceof r.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof r.HTMLIFrameElement||a instanceof r.HTMLObjectElement||a instanceof
r.HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})};return f}(Ea);dd.prototype.options_={pauseOnOpen:!0,temporary:!0};Ea.registerComponent("ModalDialog",dd);var ed=function(m){function f(b){void 0===b&&(b=[]);var a=m.call(this)||this;a.tracks_=[];Object.defineProperty(Ya(a),"length",{get:function(){return this.tracks_.length}});for(var e=0;e<b.length;e++)a.addTrack(b[e]);return a}Na(f,m);var c=f.prototype;c.addTrack=function(b){var a=
this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}});-1===this.tracks_.indexOf(b)&&(this.tracks_.push(b),this.trigger({track:b,type:"addtrack",target:this}))};c.removeTrack=function(b){for(var a,e=0,h=this.length;e<h;e++)if(this[e]===b){a=this[e];a.off&&a.off();this.tracks_.splice(e,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})};c.getTrackById=function(b){for(var a=null,e=0,h=this.length;e<h;e++){var l=this[e];if(l.id===b){a=
l;break}}return a};return f}(vb);ed.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Fk in ed.prototype.allowedEvents_)ed.prototype["on"+Fk]=null;var of=function(m,f){for(var c=0;c<m.length;c++)Object.keys(m[c]).length&&f.id!==m[c].id&&(m[c].enabled=!1)},Gk=function(m){function f(b){void 0===b&&(b=[]);for(var a=b.length-1;0<=a;a--)if(b[a].enabled){of(b,b[a]);break}b=m.call(this,b)||this;b.changing_=!1;return b}Na(f,m);var c=f.prototype;c.addTrack=function(b){var a=
this;b.enabled&&of(this,b);m.prototype.addTrack.call(this,b);b.addEventListener&&(b.enabledChange_=function(){a.changing_||(a.changing_=!0,of(a,b),a.changing_=!1,a.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))};c.removeTrack=function(b){m.prototype.removeTrack.call(this,b);b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),b.enabledChange_=null)};return f}(ed),pf=function(m,f){for(var c=0;c<m.length;c++)Object.keys(m[c]).length&&
f.id!==m[c].id&&(m[c].selected=!1)},Hk=function(m){function f(b){void 0===b&&(b=[]);for(var a=b.length-1;0<=a;a--)if(b[a].selected){pf(b,b[a]);break}b=m.call(this,b)||this;b.changing_=!1;Object.defineProperty(Ya(b),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}});return b}Na(f,m);var c=f.prototype;c.addTrack=function(b){var a=this;b.selected&&pf(this,b);m.prototype.addTrack.call(this,b);b.addEventListener&&(b.selectedChange_=function(){a.changing_||
(a.changing_=!0,pf(a,b),a.changing_=!1,a.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))};c.removeTrack=function(b){m.prototype.removeTrack.call(this,b);b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)};return f}(ed),Eh=function(m){function f(){return m.apply(this,arguments)||this}Na(f,m);var c=f.prototype;c.addTrack=function(b){var a=this;m.prototype.addTrack.call(this,b);this.queueChange_||(this.queueChange_=
function(){return a.queueTrigger("change")});this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")});b.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(b.kind)&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)};c.removeTrack=function(b){m.prototype.removeTrack.call(this,b);b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),
this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))};return f}(ed),Ik=function(){function m(c){void 0===c&&(c=[]);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,a=c.length;b<a;b++)this.addTrackElement_(c[b])}var f=m.prototype;f.addTrackElement_=function(c){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}});
-1===this.trackElements_.indexOf(c)&&this.trackElements_.push(c)};f.getTrackElementByTrack_=function(c){for(var b,a=0,e=this.trackElements_.length;a<e;a++)if(c===this.trackElements_[a].track){b=this.trackElements_[a];break}return b};f.removeTrackElement_=function(c){for(var b=0,a=this.trackElements_.length;b<a;b++)if(c===this.trackElements_[b]){this.trackElements_[b].track&&"function"===typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off();"function"===typeof this.trackElements_[b].off&&
this.trackElements_[b].off();this.trackElements_.splice(b,1);break}};return m}(),Fh=function(){function m(c){m.prototype.setCues_.call(this,c);Object.defineProperty(this,"length",{get:function(){return this.length_}})}var f=m.prototype;f.setCues_=function(c){var b=this.length||0,a=0,e=c.length;this.cues_=c;this.length_=c.length;c=function(h){""+h in this||Object.defineProperty(this,""+h,{get:function(){return this.cues_[h]}})};if(b<e)for(a=b;a<e;a++)c.call(this,a)};f.getCueById=function(c){for(var b=
null,a=0,e=this.length;a<e;a++){var h=this[a];if(h.id===c){b=h;break}}return b};return m}(),Jk={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Kk={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Lk={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Gh={disabled:"disabled",hidden:"hidden",
showing:"showing"},qf=function(m){function f(c){void 0===c&&(c={});var b=m.call(this)||this;var a={id:c.id||"vjs_track_"+zc++,kind:c.kind||"",label:c.label||"",language:c.language||""};c=function(h){Object.defineProperty(Ya(b),h,{get:function(){return a[h]},set:function(){}})};for(var e in a)c(e);return b}Na(f,m);return f}(vb),rf=function(m){var f="protocol hostname port pathname search hash host".split(" "),c=C.createElement("a");c.href=m;var b=""===c.host&&"file:"!==c.protocol;if(b){var a=C.createElement("div");
a.innerHTML='<a href="'+m+'"></a>';c=a.firstChild;a.setAttribute("style","display:none; position:absolute;");C.body.appendChild(a)}m={};for(var e=0;e<f.length;e++)m[f[e]]=c[f[e]];"http:"===m.protocol&&(m.host=m.host.replace(/:80$/,""));"https:"===m.protocol&&(m.host=m.host.replace(/:443$/,""));m.protocol||(m.protocol=r.location.protocol);b&&C.body.removeChild(a);return m},Hh=function(m){if(!m.match(/^https?:\/\//)){var f=C.createElement("div");f.innerHTML='<a href="'+m+'">x</a>';m=f.firstChild.href}return m},
sf=function(m){return"string"===typeof m&&(m=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(m))?m.pop().toLowerCase():""},ge=function(m,f){void 0===f&&(f=r.location);m=rf(m);return(":"===m.protocol?f.protocol:m.protocol)+m.host!==f.protocol+f.host},Mk=Object.freeze({__proto__:null,parseUrl:rf,getAbsoluteURL:Hh,getFileExtension:sf,isCrossOrigin:ge}),ck=Object.prototype.toString,dk=function(m){var f={};if(!m)return f;m.trim().split("\n").forEach(function(c){var b=c.indexOf(":"),
a=c.slice(0,b).trim().toLowerCase();c=c.slice(b+1).trim();"undefined"===typeof f[a]?f[a]=c:Array.isArray(f[a])?f[a].push(c):f[a]=[f[a],c]});return f};Ia.XMLHttpRequest=r.XMLHttpRequest||Za;Ia.XDomainRequest="withCredentials"in new Ia.XMLHttpRequest?Ia.XMLHttpRequest:r.XDomainRequest;(function(m,f){for(var c=0;c<m.length;c++)f(m[c])})("get put post patch head delete".split(" "),function(m){Ia["delete"===m?"del":m]=function(f,c,b){c=ma(f,c,b);c.method=m.toUpperCase();return La(c)}});Ia["default"]=Ia;
var Ih=function(m,f){var c=new r.WebVTT.Parser(r,r.vttjs,r.WebVTT.StringDecoder()),b=[];c.oncue=function(a){f.addCue(a)};c.onparsingerror=function(a){b.push(a)};c.onflush=function(){f.trigger({type:"loadeddata",target:f})};c.parse(m);0<b.length&&(r.console&&r.console.groupCollapsed&&r.console.groupCollapsed("Text Track parsing errors for "+f.src),b.forEach(function(a){return ab.error(a)}),r.console&&r.console.groupEnd&&r.console.groupEnd());c.flush()},Jh=function(m,f){var c={uri:m};if(m=ge(m))c.cors=
m;Ia(c,$a(this,function(b,a,e){if(b)return ab.error(b,a);f.loaded_=!0;"function"!==typeof r.WebVTT?f.tech_&&f.tech_.any(["vttjsloaded","vttjserror"],function(h){if("vttjserror"===h.type)ab.error("vttjs failed to load, stopping trying to process "+f.src);else return Ih(e,f)}):Ih(e,f)}))},yd=function(m){function f(b){void 0===b&&(b={});if(!b.tech)throw Error("A tech was not provided.");b=xa(b,{kind:Lk[b.kind]||"subtitles",language:b.language||b.srclang||""});var a=Gh[b.mode]||"disabled",e=b["default"];
if("metadata"===b.kind||"chapters"===b.kind)a="hidden";var h=m.call(this,b)||this;h.tech_=b.tech;h.cues_=[];h.activeCues_=[];h.preload_=!1!==h.tech_.preloadTextTracks;var l=new Fh(h.cues_),g=new Fh(h.activeCues_),n=!1,d=$a(Ya(h),function(){this.activeCues=this.activeCues;n&&(this.trigger("cuechange"),n=!1)});"disabled"!==a&&h.tech_.ready(function(){h.tech_.on("timeupdate",d)},!0);Object.defineProperties(Ya(h),{"default":{get:function(){return e},set:function(){}},mode:{get:function(){return a},set:function(k){var p=
this;Gh[k]&&(a=k,this.preload_||"disabled"===a||0!==this.cues.length||Jh(this.src,this),"disabled"!==a?this.tech_.ready(function(){p.tech_.on("timeupdate",d)},!0):this.tech_.off("timeupdate",d),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return g;for(var k=this.tech_.currentTime(),p=[],q=0,t=this.cues.length;q<t;q++){var D=this.cues[q];D.startTime<=k&&D.endTime>=k?p.push(D):
D.startTime===D.endTime&&D.startTime<=k&&D.startTime+.5>=k&&p.push(D)}n=!1;if(p.length!==this.activeCues_.length)n=!0;else for(k=0;k<p.length;k++)-1===this.activeCues_.indexOf(p[k])&&(n=!0);this.activeCues_=p;g.setCues_(this.activeCues_);return g},set:function(){}}});b.src?(h.src=b.src,h.preload_||(h.loaded_=!0),(h.preload_||e||"subtitles"!==b.kind&&"captions"!==b.kind)&&Jh(h.src,Ya(h))):h.loaded_=!0;return h}Na(f,m);var c=f.prototype;c.addCue=function(b){var a=b;if(r.vttjs&&!(b instanceof r.vttjs.VTTCue)){a=
new r.vttjs.VTTCue(b.startTime,b.endTime,b.text);for(var e in b)e in a||(a[e]=b[e]);a.id=b.id;a.originalCue_=b}b=this.tech_.textTracks();for(e=0;e<b.length;e++)b[e]!==this&&b[e].removeCue(a);this.cues_.push(a);this.cues.setCues_(this.cues_)};c.removeCue=function(b){for(var a=this.cues_.length;a--;){var e=this.cues_[a];if(e===b||e.originalCue_&&e.originalCue_===b){this.cues_.splice(a,1);this.cues.setCues_(this.cues_);break}}};return f}(qf);yd.prototype.allowedEvents_={cuechange:"cuechange"};var Kh=
function(m){function f(c){void 0===c&&(c={});var b=xa(c,{kind:Kk[c.kind]||""});c=m.call(this,b)||this;var a=!1;Object.defineProperty(Ya(c),"enabled",{get:function(){return a},set:function(e){"boolean"===typeof e&&e!==a&&(a=e,this.trigger("enabledchange"))}});b.enabled&&(c.enabled=b.enabled);c.loaded_=!0;return c}Na(f,m);return f}(qf),Lh=function(m){function f(c){void 0===c&&(c={});var b=xa(c,{kind:Jk[c.kind]||""});c=m.call(this,b)||this;var a=!1;Object.defineProperty(Ya(c),"selected",{get:function(){return a},
set:function(e){"boolean"===typeof e&&e!==a&&(a=e,this.trigger("selectedchange"))}});b.selected&&(c.selected=b.selected);return c}Na(f,m);return f}(qf),fd=function(m){function f(c){void 0===c&&(c={});var b=m.call(this)||this;var a=new yd(c);b.kind=a.kind;b.src=a.src;b.srclang=a.language;b.label=a.label;b["default"]=a["default"];Object.defineProperties(Ya(b),{readyState:{get:function(){return e}},track:{get:function(){return a}}});var e=0;a.addEventListener("loadeddata",function(){e=2;b.trigger({type:"load",
target:Ya(b)})});return b}Na(f,m);return f}(vb);fd.prototype.allowedEvents_={load:"load"};fd.NONE=0;fd.LOADING=1;fd.LOADED=2;fd.ERROR=3;var bc={audio:{ListClass:Gk,TrackClass:Kh,capitalName:"Audio"},video:{ListClass:Hk,TrackClass:Lh,capitalName:"Video"},text:{ListClass:Eh,TrackClass:yd,capitalName:"Text"}};Object.keys(bc).forEach(function(m){bc[m].getterName=m+"Tracks";bc[m].privateName=m+"Tracks_"});var gd={remoteText:{ListClass:Eh,TrackClass:yd,capitalName:"RemoteText",getterName:"remoteTextTracks",
privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Ik,TrackClass:fd,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Kb=Rd({},bc,gd);gd.names=Object.keys(gd);bc.names=Object.keys(bc);Kb.names=[].concat(gd.names).concat(bc.names);var Le=Object.create||function(){function m(){}return function(f){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");m.prototype=f;return new m}}();bb.prototype=Le(Error.prototype);
bb.prototype.constructor=bb;bb.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};ac.prototype={set:function(m,f){this.get(m)||""===f||(this.values[m]=f)},get:function(m,f,c){return c?this.has(m)?this.values[m]:f[c]:this.has(m)?this.values[m]:f},has:function(m){return m in this.values},alt:function(m,f,c){for(var b=0;b<c.length;++b)if(f===c[b]){this.set(m,f);break}},integer:function(m,f){/^-?\d+$/.test(f)&&this.set(m,parseInt(f,
10))},percent:function(m,f){return f.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(f=parseFloat(f),0<=f&&100>=f)?(this.set(m,f),!0):!1}};var Me=C.createElement("textarea"),fk={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Fg={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},gk={v:"title",lang:"lang"},Eg={rt:"ruby"},Gg=[[1470,1470],[1472,
1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],
[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],
[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Ne.prototype.applyStyles=function(m,f){f=f||this.div;
for(var c in m)m.hasOwnProperty(c)&&(f.style[c]=m[c])};Ne.prototype.formatStyle=function(m,f){return 0===m?0:m+f};Sd.prototype=Le(Ne.prototype);Sd.prototype.constructor=Sd;Ib.prototype.move=function(m,f){f=void 0!==f?f:this.lineHeight;switch(m){case "+x":this.left+=f;this.right+=f;break;case "-x":this.left-=f;this.right-=f;break;case "+y":this.top+=f;this.bottom+=f;break;case "-y":this.top-=f,this.bottom-=f}};Ib.prototype.overlaps=function(m){return this.left<m.right&&this.right>m.left&&this.top<
m.bottom&&this.bottom>m.top};Ib.prototype.overlapsAny=function(m){for(var f=0;f<m.length;f++)if(this.overlaps(m[f]))return!0;return!1};Ib.prototype.within=function(m){return this.top>=m.top&&this.bottom<=m.bottom&&this.left>=m.left&&this.right<=m.right};Ib.prototype.overlapsOppositeAxis=function(m,f){switch(f){case "+x":return this.left<m.left;case "-x":return this.right>m.right;case "+y":return this.top<m.top;case "-y":return this.bottom>m.bottom}};Ib.prototype.intersectPercentage=function(m){return Math.max(0,
Math.min(this.right,m.right)-Math.max(this.left,m.left))*Math.max(0,Math.min(this.bottom,m.bottom)-Math.max(this.top,m.top))/(this.height*this.width)};Ib.prototype.toCSSCompatValues=function(m){return{top:this.top-m.top,bottom:m.bottom-this.bottom,left:this.left-m.left,right:m.right-this.right,height:this.height,width:this.width}};Ib.getSimpleBoxPosition=function(m){var f=m.div?m.div.offsetHeight:m.tagName?m.offsetHeight:0,c=m.div?m.div.offsetWidth:m.tagName?m.offsetWidth:0,b=m.div?m.div.offsetTop:
m.tagName?m.offsetTop:0;m=m.div?m.div.getBoundingClientRect():m.tagName?m.getBoundingClientRect():m;return{left:m.left,right:m.right,top:m.top||b,height:m.height||f,bottom:m.bottom||b+(m.height||f),width:m.width||c}};Tc.StringDecoder=function(){return{decode:function(m){if(!m)return"";if("string"!==typeof m)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(m))}}};Tc.convertCueToDOMTree=function(m,f){return m&&f?Dg(m,f):null};Tc.processCues=function(m,f,c){if(!m||
!f||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var b=m.document.createElement("div");b.style.position="absolute";b.style.left="0";b.style.right="0";b.style.top="0";b.style.bottom="0";b.style.margin="1.5%";c.appendChild(b);if(function(l){for(var g=0;g<l.length;g++)if(l[g].hasBeenReset||!l[g].displayState)return!0;return!1}(f)){var a=[],e=Ib.getSimpleBoxPosition(b),h={font:Math.round(5*e.height)/100+"px sans-serif"};(function(){for(var l,g,n=0;n<f.length;n++){g=f[n];l=new Sd(m,g,
h);b.appendChild(l.div);var d=void 0,k=void 0,p=l,q=e,t=a,D=new Ib(p),N=p.cue;if("number"===typeof N.line&&(N.snapToLines||0<=N.line&&100>=N.line))var Y=N.line;else if(N.track&&N.track.textTrackList&&N.track.textTrackList.mediaElement){Y=N.track;for(var oa=Y.textTrackList,ta=0,Ba=0;Ba<oa.length&&oa[Ba]!==Y;Ba++)"showing"===oa[Ba].mode&&ta++;Y=-1*++ta}else Y=-1;oa=[];if(N.snapToLines){switch(N.vertical){case "":oa=["+y","-y"];k="height";break;case "rl":oa=["+x","-x"];k="width";break;case "lr":oa=["-x",
"+x"],k="width"}ta=D.lineHeight;Ba=ta*Math.round(Y);k=q[k]+ta;var Da=oa[0];Math.abs(Ba)>k&&(Ba=(0>Ba?-1:1)*Math.ceil(k/ta)*ta);0>Y&&(Ba+=""===N.vertical?q.height:q.width,oa=oa.reverse());D.move(Da,Ba)}else{D=D.lineHeight/q.height*100;switch(N.lineAlign){case "center":Y-=D/2;break;case "end":Y-=D}switch(N.vertical){case "":p.applyStyles({top:p.formatStyle(Y,"%")});break;case "rl":p.applyStyles({left:p.formatStyle(Y,"%")});break;case "lr":p.applyStyles({right:p.formatStyle(Y,"%")})}oa=["+y","-x","+x",
"-y"];D=new Ib(p)}a:{N=D;D=oa;k=new Ib(N);Y=1;for(oa=0;oa<D.length;oa++){for(;N.overlapsOppositeAxis(q,D[oa])||N.within(q)&&N.overlapsAny(t);)N.move(D[oa]);if(N.within(q)){d=N;break a}ta=N.intersectPercentage(q);Y>ta&&(d=new Ib(N),Y=ta);N=new Ib(k)}d=d||k}p.move(d.toCSSCompatValues(q));g.displayState=l.div;a.push(Ib.getSimpleBoxPosition(l))}})()}else for(c=0;c<f.length;c++)b.appendChild(f[c].displayState)};Tc.Parser=function(m,f,c){c||(c=f,f={});f||(f={});this.window=m;this.vttjs=f;this.state="INITIAL";
this.buffer="";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};Tc.Parser.prototype={reportOrThrowError:function(m){if(m instanceof bb)this.onparsingerror&&this.onparsingerror(m);else throw m;},parse:function(m){function f(){for(var n=e.buffer,d=0;d<n.length&&"\r"!==n[d]&&"\n"!==n[d];)++d;var k=n.substr(0,d);"\r"===n[d]&&++d;"\n"===n[d]&&++d;e.buffer=n.substr(d);return k}function c(n){var d=new ac;pd(n,function(k,p){switch(k){case "id":d.set(k,p);break;case "width":d.percent(k,p);break;
case "lines":d.integer(k,p);break;case "regionanchor":case "viewportanchor":p=p.split(",");if(2!==p.length)break;var q=new ac;q.percent("x",p[0]);q.percent("y",p[1]);if(!q.has("x")||!q.has("y"))break;d.set(k+"X",q.get("x"));d.set(k+"Y",q.get("y"));break;case "scroll":d.alt(k,p,["up"])}},/=/,/\s/);d.has("id")&&(n=new (e.vttjs.VTTRegion||e.window.VTTRegion),n.width=d.get("width",100),n.lines=d.get("lines",3),n.regionAnchorX=d.get("regionanchorX",0),n.regionAnchorY=d.get("regionanchorY",100),n.viewportAnchorX=
d.get("viewportanchorX",0),n.viewportAnchorY=d.get("viewportanchorY",100),n.scroll=d.get("scroll",""),e.onregion&&e.onregion(n),e.regionList.push({id:d.get("id"),region:n}))}function b(n){var d=new ac;pd(n,function(k,p){switch(k){case "MPEGT":d.integer(k+"S",p);break;case "LOCA":d.set(k+"L",lb(p))}},/[^\d]:/,/,/);e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function a(n){n.match(/X-TIMESTAMP-MAP/)?pd(n,function(d,k){switch(d){case "X-TIMESTAMP-MAP":b(k)}},/=/):
pd(n,function(d,k){switch(d){case "Region":c(k)}},/:/)}var e=this;m&&(e.buffer+=e.decoder.decode(m,{stream:!0}));try{if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var h=f();var l=h.match(/^WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new bb(bb.Errors.BadSignature);e.state="HEADER"}for(m=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;m?m=!1:h=f();switch(e.state){case "HEADER":/:/.test(h)?a(h):h||(e.state="ID");continue;case "NOTE":h||(e.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(h)){e.state=
"NOTE";break}if(!h)continue;e.cue=new (e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch(n){e.cue.align="middle"}e.state="CUE";if(-1===h.indexOf("--\x3e")){e.cue.id=h;continue}case "CUE":try{ek(h,e.cue,e.regionList)}catch(n){e.reportOrThrowError(n);e.cue=null;e.state="BADCUE";continue}e.state="CUETEXT";continue;case "CUETEXT":var g=-1!==h.indexOf("--\x3e");if(!h||g&&(m=!0)){e.oncue&&e.oncue(e.cue);e.cue=null;e.state="ID";continue}e.cue.text&&(e.cue.text+="\n");e.cue.text+=h.replace(/\u2028/g,
"\n").replace(/u2029/g,"\n");continue;case "BADCUE":h||(e.state="ID")}}}catch(n){e.reportOrThrowError(n);if("CUETEXT"===e.state&&e.cue&&e.oncue)e.oncue(e.cue);e.cue=null;e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new bb(bb.Errors.BadSignature);}catch(m){this.reportOrThrowError(m)}this.onflush&&this.onflush();return this}};var kk=
{"":1,lr:1,rl:1},jk={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Hg.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Nk={"":!0,up:!0},Ok=function(){var m=100,f=3,c=0,b=100,a=0,e=100,h="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return m},set:function(l){if(!qd(l))throw Error("Width must be between 0 and 100.");m=l}},lines:{enumerable:!0,get:function(){return f},set:function(l){if("number"!==typeof l)throw new TypeError("Lines must be set to a number.");
f=l}},regionAnchorY:{enumerable:!0,get:function(){return b},set:function(l){if(!qd(l))throw Error("RegionAnchorX must be between 0 and 100.");b=l}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(l){if(!qd(l))throw Error("RegionAnchorY must be between 0 and 100.");c=l}},viewportAnchorY:{enumerable:!0,get:function(){return e},set:function(l){if(!qd(l))throw Error("ViewportAnchorY must be between 0 and 100.");e=l}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(l){if(!qd(l))throw Error("ViewportAnchorX must be between 0 and 100.");
a=l}},scroll:{enumerable:!0,get:function(){return h},set:function(l){l="string"!==typeof l?!1:Nk[l.toLowerCase()]?l.toLowerCase():!1;!1===l?console.warn("Scroll: an invalid or illegal string was specified."):h=l}}})},Mh=y(function(m){m=m.exports={WebVTT:Tc,VTTCue:Hg,VTTRegion:Ok};r.vttjs=m;r.WebVTT=m.WebVTT;var f=m.VTTCue,c=m.VTTRegion,b=r.VTTCue,a=r.VTTRegion;m.shim=function(){r.VTTCue=f;r.VTTRegion=c};m.restore=function(){r.VTTCue=b;r.VTTRegion=a};r.VTTCue||m.shim()}),kb=function(m){function f(b,
a){void 0===b&&(b={});void 0===a&&(a=function(){});b.reportTouchActivity=!1;var e=m.call(this,null,b,a)||this;e.hasStarted_=!1;e.on("playing",function(){this.hasStarted_=!0});e.on("loadstart",function(){this.hasStarted_=!1});Kb.names.forEach(function(h){h=Kb[h];b&&b[h.getterName]&&(e[h.privateName]=b[h.getterName])});e.featuresProgressEvents||e.manualProgressOn();e.featuresTimeupdateEvents||e.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(h){!1===b["native"+h+"Tracks"]&&(e["featuresNative"+
h+"Tracks"]=!1)});if(!1===b.nativeCaptions||!1===b.nativeTextTracks)e.featuresNativeTextTracks=!1;else if(!0===b.nativeCaptions||!0===b.nativeTextTracks)e.featuresNativeTextTracks=!0;e.featuresNativeTextTracks||e.emulateTextTracks();e.preloadTextTracks=!1!==b.preloadTextTracks;e.autoRemoteTextTracks_=new Kb.text.ListClass;e.initTrackListeners();b.nativeControlsForTouch||e.emitTapEvents();e.constructor&&(e.name_=e.constructor.name||"Unknown Tech");return e}Na(f,m);var c=f.prototype;c.triggerSourceset=
function(b){var a=this;if(!this.isReady_)this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(b)},1)});this.trigger({src:b,type:"sourceset"})};c.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};c.manualProgressOff=function(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};c.trackProgress=function(b){this.stopTrackingProgress();
this.progressInterval=this.setInterval($a(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress");this.bufferedPercent_=a;1===a&&this.stopTrackingProgress()}),500)};c.onDurationChange=function(b){this.duration_=this.duration()};c.buffered=function(){return Xa(0,0)};c.bufferedPercent=function(){return x(this.buffered(),this.duration_)};c.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};c.manualTimeUpdatesOn=function(){this.manualTimeUpdates=
!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};c.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};c.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)};c.stopTrackingCurrentTime=
function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};c.dispose=function(){this.clearTracks(bc.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();m.prototype.dispose.call(this)};c.clearTracks=function(b){var a=this;b=[].concat(b);b.forEach(function(e){for(var h=a[e+"Tracks"]()||[],l=h.length;l--;){var g=h[l];"text"===e&&a.removeRemoteTextTrack(g);h.removeTrack(g)}})};c.cleanupAutoTextTracks=
function(){for(var b=this.autoRemoteTextTracks_||[],a=b.length;a--;)this.removeRemoteTextTrack(b[a])};c.reset=function(){};c.error=function(b){void 0!==b&&(this.error_=new G(b),this.trigger("error"));return this.error_};c.played=function(){return this.hasStarted_?Xa(0,0):Xa()};c.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};c.initTrackListeners=function(){var b=this;bc.names.forEach(function(a){var e=function(){b.trigger(a+"trackchange")},
h=b[bc[a].getterName]();h.addEventListener("removetrack",e);h.addEventListener("addtrack",e);b.on("dispose",function(){h.removeEventListener("removetrack",e);h.removeEventListener("addtrack",e)})})};c.addWebVttScript_=function(){var b=this;if(!r.WebVTT)if(C.body.contains(this.el()))if(!this.options_["vtt.js"]&&z(Mh)&&0<Object.keys(Mh).length)this.trigger("vttjsloaded");else{var a=C.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";a.onload=function(){b.trigger("vttjsloaded")};
a.onerror=function(){b.trigger("vttjserror")};this.on("dispose",function(){a.onload=null;a.onerror=null});r.WebVTT=!0;this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)};c.emulateTextTracks=function(){var b=this,a=this.textTracks(),e=this.remoteTextTracks(),h=function(d){return a.addTrack(d.track)},l=function(d){return a.removeTrack(d.track)};e.on("addtrack",h);e.on("removetrack",l);this.addWebVttScript_();var g=function(){return b.trigger("texttrackchange")},n=function(){g();
for(var d=0;d<a.length;d++){var k=a[d];k.removeEventListener("cuechange",g);"showing"===k.mode&&k.addEventListener("cuechange",g)}};n();a.addEventListener("change",n);a.addEventListener("addtrack",n);a.addEventListener("removetrack",n);this.on("dispose",function(){e.off("addtrack",h);e.off("removetrack",l);a.removeEventListener("change",n);a.removeEventListener("addtrack",n);a.removeEventListener("removetrack",n);for(var d=0;d<a.length;d++)a[d].removeEventListener("cuechange",g)})};c.addTextTrack=
function(b,a,e){if(!b)throw Error("TextTrack kind is required but was not provided");var h=void 0;void 0===h&&(h={});var l=this.textTracks();h.kind=b;a&&(h.label=a);e&&(h.language=e);h.tech=this;b=new Kb.text.TrackClass(h);l.addTrack(b);return b};c.createRemoteTextTrack=function(b){b=xa(b,{tech:this});return new gd.remoteTextEl.TrackClass(b)};c.addRemoteTextTrack=function(b,a){var e=this;void 0===b&&(b={});var h=this.createRemoteTextTrack(b);!0!==a&&!1!==a&&(ab.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),
a=!0);this.remoteTextTrackEls().addTrackElement_(h);this.remoteTextTracks().addTrack(h.track);!0!==a&&this.ready(function(){return e.autoRemoteTextTracks_.addTrack(h.track)});return h};c.removeRemoteTextTrack=function(b){var a=this.remoteTextTrackEls().getTrackElementByTrack_(b);this.remoteTextTrackEls().removeTrackElement_(a);this.remoteTextTracks().removeTrack(b);this.autoRemoteTextTracks_.removeTrack(b)};c.getVideoPlaybackQuality=function(){return{}};c.requestPictureInPicture=function(){var b=
this.options_.Promise||r.Promise;if(b)return b.reject()};c.setPoster=function(){};c.playsinline=function(){};c.setPlaysinline=function(){};c.overrideNativeAudioTracks=function(){};c.overrideNativeVideoTracks=function(){};c.canPlayType=function(){return""};f.canPlayType=function(){return""};f.canPlaySource=function(b,a){return f.canPlayType(b.type)};f.isTech=function(b){return b.prototype instanceof f||b instanceof f||b===f};f.registerTech=function(b,a){f.techs_||(f.techs_={});if(!f.isTech(a))throw Error("Tech "+
b+" must be a Tech");if(!f.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!f.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");b=ob(b);f.techs_[b]=a;f.techs_[be(b)]=a;"Tech"!==b&&f.defaultTechOrder_.push(b);return a};f.getTech=function(b){if(b){if(f.techs_&&f.techs_[b])return f.techs_[b];b=ob(b);if(r&&r.videojs&&r.videojs[b])return ab.warn("The "+b+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),
r.videojs[b]}};return f}(Ea);Kb.names.forEach(function(m){var f=Kb[m];kb.prototype[f.getterName]=function(){this[f.privateName]=this[f.privateName]||new f.ListClass;return this[f.privateName]}});kb.prototype.featuresVolumeControl=!0;kb.prototype.featuresMuteControl=!0;kb.prototype.featuresFullscreenResize=!1;kb.prototype.featuresPlaybackRate=!1;kb.prototype.featuresProgressEvents=!1;kb.prototype.featuresSourceset=!1;kb.prototype.featuresTimeupdateEvents=!1;kb.prototype.featuresNativeTextTracks=!1;
kb.withSourceHandlers=function(m){m.registerSourceHandler=function(f,c){var b=m.sourceHandlers;b||(b=m.sourceHandlers=[]);void 0===c&&(c=b.length);b.splice(c,0,f)};m.canPlayType=function(f){for(var c=m.sourceHandlers||[],b,a=0;a<c.length;a++)if(b=c[a].canPlayType(f))return b;return""};m.selectSourceHandler=function(f,c){for(var b=m.sourceHandlers||[],a,e=0;e<b.length;e++)if(a=b[e].canHandleSource(f,c))return b[e];return null};m.canPlaySource=function(f,c){var b=m.selectSourceHandler(f,c);return b?
b.canHandleSource(f,c):""};["seekable","seeking","duration"].forEach(function(f){var c=this[f];"function"===typeof c&&(this[f]=function(){return this.sourceHandler_&&this.sourceHandler_[f]?this.sourceHandler_[f].apply(this.sourceHandler_,arguments):c.apply(this,arguments)})},m.prototype);m.prototype.setSource=function(f){var c=m.selectSourceHandler(f,this.options_);c||(m.nativeSourceHandler?c=m.nativeSourceHandler:ab.error("No source handler found for the current source."));this.disposeSourceHandler();
this.off("dispose",this.disposeSourceHandler);c!==m.nativeSourceHandler&&(this.currentSource_=f);this.sourceHandler_=c.handleSource(f,this,this.options_);this.one("dispose",this.disposeSourceHandler)};m.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Ea.registerComponent("Tech",kb);kb.registerTech("Tech",
kb);kb.defaultTechOrder_=[];var Kc={},Qe={},Td={},Pk={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},Qk={setCurrentTime:1,setMuted:1,setVolume:1},Nh={play:1,pause:1},Rk={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},
Ud=function(m){void 0===m&&(m="");m=sf(m);return Rk[m.toLowerCase()]||""},Sk=function(m,f){if(!f)return"";if(m.cache_.source.src===f&&m.cache_.source.type)return m.cache_.source.type;var c=m.cache_.sources.filter(function(a){return a.src===f});if(c.length)return c[0].type;m=m.$$("source");for(c=0;c<m.length;c++){var b=m[c];if(b.type&&b.src&&b.src===f)return b.type}return Ud(f)},Tk=function c(f){if(Array.isArray(f)){var b=[];f.forEach(function(a){a=c(a);Array.isArray(a)?b=b.concat(a):A(a)&&b.push(a)});
f=b}else f="string"===typeof f&&f.trim()?[Jg({src:f})]:A(f)&&"string"===typeof f.src&&f.src&&f.src.trim()?[Jg(f)]:[];return f},Uk=function(f){function c(b,a,e){var h=xa({createEl:!1},a);e=f.call(this,b,h,e)||this;if(a.playerOptions.sources&&0!==a.playerOptions.sources.length)b.src(a.playerOptions.sources);else for(h=0,a=a.playerOptions.techOrder;h<a.length;h++){var l=ob(a[h]),g=kb.getTech(l);l||(g=Ea.getComponent(l));if(g&&g.isSupported()){b.loadTech_(l);break}}return e}Na(c,f);return c}(Ea);Ea.registerComponent("MediaLoader",
Uk);var he=function(f){function c(a,e){a=f.call(this,a,e)||this;a.emitTapEvents();a.enable();return a}Na(c,f);var b=c.prototype;b.createEl=function(a,e,h){void 0===a&&(a="div");void 0===e&&(e={});void 0===h&&(h={});e=w({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},e);"button"===a&&ab.error("Creating a ClickableComponent with an HTML element of "+a+" is not supported; use a Button instead.");h=w({role:"button"},h);this.tabIndex_=
e.tabIndex;a=f.prototype.createEl.call(this,a,e,h);this.createControlTextEl(a);return a};b.dispose=function(){this.controlTextEl_=null;f.prototype.dispose.call(this)};b.createControlTextEl=function(a){this.controlTextEl_=X("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);this.controlText(this.controlText_,a);return this.controlTextEl_};b.controlText=function(a,e){void 0===e&&(e=this.el());if(void 0===a)return this.controlText_||"Need Text";var h=
this.localize(a);this.controlText_=a;ra(this.controlTextEl_,h);this.nonIconControl||e.setAttribute("title",h)};b.buildCSSClass=function(){return"vjs-control vjs-button "+f.prototype.buildCSSClass.call(this)};b.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))};
b.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};b.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)};b.handleKeyDown=function(a){Wa.isEventKey(a,
"Space")||Wa.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):f.prototype.handleKeyDown.call(this,a)};return c}(Ea);Ea.registerComponent("ClickableComponent",he);var Vk=function(f){function c(a,e){e=f.call(this,a,e)||this;e.update();a.on("posterchange",$a(Ya(e),e.update));return e}Na(c,f);var b=c.prototype;b.dispose=function(){this.player().off("posterchange",this.update);f.prototype.dispose.call(this)};b.createEl=function(){return X("div",{className:"vjs-poster",
tabIndex:-1})};b.update=function(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()};b.setSrc=function(a){var e="";a&&(e='url("'+a+'")');this.el_.style.backgroundImage=e};b.handleClick=function(a){this.player_.controls()&&(a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(xd||wd)&&a||this.player_.tech(!0).focus(),this.player_.paused()?ba(this.player_.play()):this.player_.pause())};return c}(he);Ea.registerComponent("PosterImage",
Vk);var Wk={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Xk=function(f){function c(a,e,h){e=f.call(this,a,e,h)||this;var l=$a(Ya(e),e.updateDisplay);a.on("loadstart",$a(Ya(e),
e.toggleDisplay));a.on("texttrackchange",l);a.on("loadedmetadata",$a(Ya(e),e.preselectTrack));a.ready($a(Ya(e),function(){if(a.tech_&&a.tech_.featuresNativeTextTracks)this.hide();else{a.on("fullscreenchange",l);a.on("playerresize",l);r.addEventListener("orientationchange",l);a.on("dispose",function(){return r.removeEventListener("orientationchange",l)});for(var g=this.options_.playerOptions.tracks||[],n=0;n<g.length;n++)this.player_.addRemoteTextTrack(g[n],!0);this.preselectTrack()}}));return e}Na(c,
f);var b=c.prototype;b.preselectTrack=function(){for(var a={captions:1,subtitles:1},e=this.player_.textTracks(),h=this.player_.cache_.selectedLanguage,l,g,n,d=0;d<e.length;d++){var k=e[d];h&&h.enabled&&h.language&&h.language===k.language&&k.kind in a?k.kind===h.kind?n=k:n||(n=k):h&&!h.enabled?g=l=n=null:k["default"]&&("descriptions"!==k.kind||l?k.kind in a&&!g&&(g=k):l=k)}n?n.mode="showing":g?g.mode="showing":l&&(l.mode="showing")};b.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?
this.hide():this.show()};b.createEl=function(){return f.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};b.clearDisplay=function(){"function"===typeof r.WebVTT&&r.WebVTT.processCues(r,[],this.el_)};b.updateDisplay=function(){var a=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(e){e=[];for(var h=0;h<a.length;++h){var l=a[h];"showing"===l.mode&&e.push(l)}this.updateForTrack(e)}else{h=e=null;
for(l=a.length;l--;){var g=a[l];"showing"===g.mode&&("descriptions"===g.kind?e=g:h=g)}h?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(h)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))}};b.updateDisplayState=function(a){var e=this.player_.textTrackSettings.getValues();a=a.activeCues;for(var h=a.length;h--;){var l=a[h];if(l){l=l.displayState;e.color&&(l.firstChild.style.color=e.color);
if(e.textOpacity){var g=Re(e.color||"#fff",e.textOpacity);try{l.firstChild.style.color=g}catch(n){}}e.backgroundColor&&(l.firstChild.style.backgroundColor=e.backgroundColor);if(e.backgroundOpacity){g=Re(e.backgroundColor||"#000",e.backgroundOpacity);try{l.firstChild.style.backgroundColor=g}catch(n){}}if(e.windowColor)if(e.windowOpacity){g=Re(e.windowColor,e.windowOpacity);try{l.style.backgroundColor=g}catch(n){}}else l.style.backgroundColor=e.windowColor;e.edgeStyle&&("dropshadow"===e.edgeStyle?l.firstChild.style.textShadow=
"2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===e.edgeStyle?l.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===e.edgeStyle?l.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(l.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));e.fontPercent&&1!==e.fontPercent&&(g=r.parseFloat(l.style.fontSize),l.style.fontSize=g*e.fontPercent+"px",l.style.height="auto",
l.style.top="auto",l.style.bottom="2px");e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=Wk[e.fontFamily])}}};b.updateForTrack=function(a){Array.isArray(a)||(a=[a]);if("function"===typeof r.WebVTT&&!a.every(function(n){return!n.activeCues})){for(var e=[],h=0;h<a.length;++h)for(var l=a[h],g=0;g<l.activeCues.length;++g)e.push(l.activeCues[g]);r.WebVTT.processCues(r,e,this.el_);for(e=0;e<a.length;++e){h=a[e];
for(l=0;l<h.activeCues.length;++l)g=h.activeCues[l].displayState,Ka(g,"vjs-text-track-cue"),Ka(g,"vjs-text-track-cue-"+(h.language?h.language:e));this.player_.textTrackSettings&&this.updateDisplayState(h)}}};return c}(Ea);Ea.registerComponent("TextTrackDisplay",Xk);var Yk=function(f){function c(){return f.apply(this,arguments)||this}Na(c,f);c.prototype.createEl=function(){var b=this.player_.isAudio();b=this.localize(b?"Audio Player":"Video Player");b=X("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",
[b])});for(var a=f.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"}),e=f.prototype.createEl.call(this,"div",{className:"spinner",dir:"ltr"}),h=1;5>=h;h++)e.appendChild(f.prototype.createEl.call(this,"div",{className:"rect"+h}));a.appendChild(e);a.appendChild(b);return a};return c}(Ea);Ea.registerComponent("LoadingSpinner",Yk);var ic=function(f){function c(){return f.apply(this,arguments)||this}Na(c,f);var b=c.prototype;b.createEl=function(a,e,h){void 0===e&&(e={});void 0===
h&&(h={});a="button";e=w({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e);h=w({type:"button"},h);a=Ea.prototype.createEl.call(this,a,e,h);this.createControlTextEl(a);return a};b.addChild=function(a,e){void 0===e&&(e={});ab.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return Ea.prototype.addChild.call(this,a,e)};b.enable=function(){f.prototype.enable.call(this);
this.el_.removeAttribute("disabled")};b.disable=function(){f.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};b.handleKeyDown=function(a){Wa.isEventKey(a,"Space")||Wa.isEventKey(a,"Enter")?a.stopPropagation():f.prototype.handleKeyDown.call(this,a)};return c}(he);Ea.registerComponent("Button",ic);var Oh=function(f){function c(a,e){a=f.call(this,a,e)||this;a.mouseused_=!1;a.on("mousedown",a.handleMouseDown);return a}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-big-play-button"};
b.handleClick=function(a){var e=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY)a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,ba(e),!this.player_.tech(!0)||(xd||wd)&&a||this.player_.tech(!0).focus();else{var h=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");h?(a=function(){return h.focus()},Q(e)?e.then(a,function(){}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}};b.handleKeyDown=function(a){this.mouseused_=!1;
f.prototype.handleKeyDown.call(this,a)};b.handleMouseDown=function(a){this.mouseused_=!0};return c}(ic);Oh.prototype.controlText_="Play Video";Ea.registerComponent("BigPlayButton",Oh);var Zk=function(f){function c(a,e){a=f.call(this,a,e)||this;a.controlText(e&&e.controlText||a.localize("Close"));return a}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-close-button "+f.prototype.buildCSSClass.call(this)};b.handleClick=function(a){this.trigger({type:"close",bubbles:!1})};b.handleKeyDown=
function(a){Wa.isEventKey(a,"Esc")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):f.prototype.handleKeyDown.call(this,a)};return c}(ic);Ea.registerComponent("CloseButton",Zk);var Ph=function(f){function c(a,e){void 0===e&&(e={});var h=f.call(this,a,e)||this;e.replay=void 0===e.replay||e.replay;h.on(a,"play",h.handlePlay);h.on(a,"pause",h.handlePause);if(e.replay)h.on(a,"ended",h.handleEnded);return h}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-play-control "+f.prototype.buildCSSClass.call(this)};
b.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};b.handleSeeked=function(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)};b.handlePlay=function(a){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};b.handlePause=function(a){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};b.handleEnded=function(a){this.removeClass("vjs-playing");
this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return c}(ic);Ph.prototype.controlText_="Play";Ea.registerComponent("PlayToggle",Ph);var Qh=function(f,c){f=0>f?0:f;var b=Math.floor(f%60),a=Math.floor(f/60%60),e=Math.floor(f/3600),h=Math.floor(c/60%60);c=Math.floor(c/3600);if(isNaN(f)||Infinity===f)e=a=b="-";e=0<e||0<c?e+":":"";return e+(((e||10<=h)&&10>a?"0"+a:a)+":")+(10>b?"0"+b:b)},Se=Qh,hd=function(f){function c(a,e){e=f.call(this,a,e)||
this;e.on(a,["timeupdate","ended"],e.updateContent);e.updateTextNode_();return e}Na(c,f);var b=c.prototype;b.createEl=function(){var a=this.buildCSSClass(),e=f.prototype.createEl.call(this,"div",{className:a+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=X("span",{className:a+"-display"},{"aria-live":"off",role:"presentation"});e.appendChild(this.contentEl_);return e};b.dispose=function(){this.textNode_=
this.contentEl_=null;f.prototype.dispose.call(this)};b.updateTextNode_=function(a){var e=this;void 0===a&&(a=0);a=Uc(a);this.formattedTime_!==a&&(this.formattedTime_=a,this.requestAnimationFrame(function(){if(e.contentEl_){var h=e.textNode_;e.textNode_=C.createTextNode(e.formattedTime_);e.textNode_&&(h?e.contentEl_.replaceChild(e.textNode_,h):e.contentEl_.appendChild(e.textNode_))}}))};b.updateContent=function(a){};return c}(Ea);hd.prototype.labelText_="Time";hd.prototype.controlText_="Time";Ea.registerComponent("TimeDisplay",
hd);var tf=function(f){function c(){return f.apply(this,arguments)||this}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-current-time"};b.updateContent=function(a){a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(a)};return c}(hd);tf.prototype.labelText_="Current Time";tf.prototype.controlText_="Current Time";Ea.registerComponent("CurrentTimeDisplay",tf);var uf=function(f){function c(a,
e){e=f.call(this,a,e)||this;e.on(a,"durationchange",e.updateContent);e.on(a,"loadstart",e.updateContent);e.on(a,"loadedmetadata",e.updateContent);return e}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-duration"};b.updateContent=function(a){a=this.player_.duration();this.updateTextNode_(a)};return c}(hd);uf.prototype.labelText_="Duration";uf.prototype.controlText_="Duration";Ea.registerComponent("DurationDisplay",uf);var $k=function(f){function c(){return f.apply(this,arguments)||
this}Na(c,f);c.prototype.createEl=function(){return f.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})};return c}(Ea);Ea.registerComponent("TimeDivider",$k);var vf=function(f){function c(a,e){e=f.call(this,a,e)||this;e.on(a,"durationchange",e.updateContent);return e}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-remaining-time"};b.createEl=function(){var a=f.prototype.createEl.call(this);a.insertBefore(X("span",
{},{"aria-hidden":!0},"-"),this.contentEl_);return a};b.updateContent=function(a){"number"===typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))};return c}(hd);vf.prototype.labelText_="Remaining Time";vf.prototype.controlText_="Remaining Time";Ea.registerComponent("RemainingTimeDisplay",vf);var al=function(f){function c(a,e){a=f.call(this,a,e)||this;a.updateShowing();a.on(a.player(),
"durationchange",a.updateShowing);return a}Na(c,f);var b=c.prototype;b.createEl=function(){var a=f.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=X("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\u00a0</span>"+this.localize("LIVE")},{"aria-live":"off"});a.appendChild(this.contentEl_);return a};b.dispose=function(){this.contentEl_=null;f.prototype.dispose.call(this)};b.updateShowing=function(a){Infinity===
this.player().duration()?this.show():this.hide()};return c}(Ea);Ea.registerComponent("LiveDisplay",al);var Rh=function(f){function c(a,e){a=f.call(this,a,e)||this;a.updateLiveEdgeStatus();if(a.player_.liveTracker)a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatus);return a}Na(c,f);var b=c.prototype;b.createEl=function(){var a=f.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=X("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},
{"aria-hidden":"true"});a.appendChild(this.textEl_);return a};b.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))};b.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()};b.dispose=
function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus);this.textEl_=null;f.prototype.dispose.call(this)};return c}(ic);Rh.prototype.controlText_="Seek to live, currently playing live";Ea.registerComponent("SeekToLive",Rh);var zd=function(f,c,b){f=Number(f);return Math.min(b,Math.max(c,isNaN(f)?c:f))},wf=function(f){function c(a,e){a=f.call(this,a,e)||this;a.bar=a.getChild(a.options_.barName);a.vertical(!!a.options_.vertical);a.enable();return a}
Na(c,f);var b=c.prototype;b.enabled=function(){return this.enabled_};b.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};b.disable=function(){if(this.enabled()){var a=
this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,
this.playerEvent,this.update);this.enabled_=!1}};b.createEl=function(a,e,h){void 0===e&&(e={});void 0===h&&(h={});e.className+=" vjs-slider";e=w({tabIndex:0},e);h=w({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},h);return f.prototype.createEl.call(this,a,e,h)};b.handleMouseDown=function(a){var e=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||rc||a.preventDefault();Ha();this.addClass("vjs-sliding");this.trigger("slideractive");
this.on(e,"mousemove",this.handleMouseMove);this.on(e,"mouseup",this.handleMouseUp);this.on(e,"touchmove",this.handleMouseMove);this.on(e,"touchend",this.handleMouseUp);this.handleMouseMove(a)};b.handleMouseMove=function(a){};b.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;Ta();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchmove",this.handleMouseMove);this.off(a,"touchend",
this.handleMouseUp);this.update()};b.update=function(){var a=this;if(this.el_&&this.bar){var e=this.getProgress();if(e===this.progress_)return e;this.progress_=e;this.requestAnimationFrame(function(){var h=a.vertical()?"height":"width";a.bar.el().style[h]=(100*e).toFixed(2)+"%"});return e}};b.getProgress=function(){return Number(zd(this.getPercent(),0,1).toFixed(4))};b.calculateDistance=function(a){a=Oa(this.el_,a);return this.vertical()?a.y:a.x};b.handleKeyDown=function(a){Wa.isEventKey(a,"Left")||
Wa.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepBack()):Wa.isEventKey(a,"Right")||Wa.isEventKey(a,"Up")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):f.prototype.handleKeyDown.call(this,a)};b.handleClick=function(a){a.stopPropagation();a.preventDefault()};b.vertical=function(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return c}(Ea);Ea.registerComponent("Slider",wf);
var bl=function(f){function c(a,e){e=f.call(this,a,e)||this;e.partEls_=[];e.on(a,"progress",e.update);return e}Na(c,f);var b=c.prototype;b.createEl=function(){var a=f.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),e=X("span",{className:"vjs-control-text"}),h=X("span",{textContent:this.localize("Loaded")}),l=C.createTextNode(": ");this.percentageEl_=X("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});a.appendChild(e);e.appendChild(h);e.appendChild(l);e.appendChild(this.percentageEl_);
return a};b.dispose=function(){this.percentageEl_=this.partEls_=null;f.prototype.dispose.call(this)};b.update=function(a){var e=this;this.requestAnimationFrame(function(){var h=e.player_.liveTracker,l=e.player_.buffered(),g=h&&h.isLive()?h.seekableEnd():e.player_.duration(),n=e.player_.bufferedEnd();h=e.partEls_;g=zd(n/g*100,0,100).toFixed(2)+"%";e.percent_!==g&&(e.el_.style.width=g,ra(e.percentageEl_,g),e.percent_=g);for(g=0;g<l.length;g++){var d=l.start(g),k=l.end(g),p=h[g];p||(p=e.el_.appendChild(X()),
h[g]=p);if(p.dataset.start!==d||p.dataset.end!==k)p.dataset.start=d,p.dataset.end=k,p.style.left=zd(d/n*100,0,100).toFixed(2)+"%",p.style.width=zd((k-d)/n*100,0,100).toFixed(2)+"%"}for(n=h.length;n>l.length;n--)e.el_.removeChild(h[n-1]);h.length=l.length})};return c}(Ea);Ea.registerComponent("LoadProgressBar",bl);var cl=function(f){function c(a,e){a=f.call(this,a,e)||this;a.update=Lc($a(Ya(a),a.update),30);return a}Na(c,f);var b=c.prototype;b.createEl=function(){return f.prototype.createEl.call(this,
"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};b.update=function(a,e,h){var l=za(this.el_),g=za(this.player_.el()),n=a.width*e;g&&l&&(e=a.left-g.left+n,a=a.width-n+(g.right-a.right),g=l.width/2,e<g?g+=g-e:a<g&&(g=a),0>g?g=0:g>l.width&&(g=l.width),this.el_.style.right="-"+g+"px",this.write(h))};b.write=function(a){ra(this.el_,a)};b.updateTime=function(a,e,h,l){var g=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var n=g.player_.duration();
if(g.player_.liveTracker&&g.player_.liveTracker.isLive()){n=g.player_.liveTracker.liveWindow();var d=n-e*n;n=(1>d?"":"-")+Uc(d,n)}else n=Uc(h,n);g.update(a,e,n);l&&l()})};return c}(Ea);Ea.registerComponent("TimeTooltip",cl);var xf=function(f){function c(a,e){a=f.call(this,a,e)||this;a.update=Lc($a(Ya(a),a.update),30);return a}Na(c,f);var b=c.prototype;b.createEl=function(){return f.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};b.update=
function(a,e){var h=this.getChild("timeTooltip");if(h){var l=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();h.updateTime(a,e,l)}};return c}(Ea);xf.prototype.options_={children:[]};hc||Cc||xf.prototype.options_.children.push("timeTooltip");Ea.registerComponent("PlayProgressBar",xf);var Sh=function(f){function c(a,e){a=f.call(this,a,e)||this;a.update=Lc($a(Ya(a),a.update),30);return a}Na(c,f);var b=c.prototype;b.createEl=function(){return f.prototype.createEl.call(this,
"div",{className:"vjs-mouse-display"})};b.update=function(a,e){var h=this,l=e*this.player_.duration();this.getChild("timeTooltip").updateTime(a,e,l,function(){h.el_.style.left=a.width*e+"px"})};return c}(Ea);Sh.prototype.options_={children:["timeTooltip"]};Ea.registerComponent("MouseTimeDisplay",Sh);var yf=function(f){function c(a,e){a=f.call(this,a,e)||this;a.setEventHandlers_();return a}Na(c,f);var b=c.prototype;b.setEventHandlers_=function(){this.update_=$a(this,this.update);this.update=Lc(this.update_,
30);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in C&&"visibilityState"in C)this.on(C,"visibilitychange",this.toggleVisibility_)};b.toggleVisibility_=function(a){C.hidden?this.disableInterval_(a):(this.enableInterval_(),
this.update())};b.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))};b.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)};b.createEl=function(){return f.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};b.update=function(a){var e=this,
h=f.prototype.update.call(this);this.requestAnimationFrame(function(){var l=e.player_.ended()?e.player_.duration():e.getCurrentTime_(),g=e.player_.liveTracker,n=e.player_.duration();g&&g.isLive()&&(n=e.player_.liveTracker.liveCurrentTime());e.percent_!==h&&(e.el_.setAttribute("aria-valuenow",(100*h).toFixed(2)),e.percent_=h);if(e.currentTime_!==l||e.duration_!==n)e.el_.setAttribute("aria-valuetext",e.localize("progress bar timing: currentTime={1} duration={2}",[Uc(l,n),Uc(n,n)],"{1} of {2}")),e.currentTime_=
l,e.duration_=n;e.bar&&e.bar.update(za(e.el()),e.getProgress())});return h};b.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};b.getPercent=function(){var a=this.getCurrentTime_(),e=this.player_.liveTracker;e&&e.isLive()?(a=(a-e.seekableStart())/e.liveWindow(),e.atLiveEdge()&&(a=1)):a/=this.player_.duration();return a};b.handleMouseDown=function(a){Ub(a)&&(a.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=
!this.player_.paused(),this.player_.pause(),f.prototype.handleMouseDown.call(this,a))};b.handleMouseMove=function(a){Ub(a)&&(a=this.seekBarCalcNewTime(a),"undefined"!==typeof a&&(this.player_.getCache().currentTime=a,this.update()))};b.seekBarCalcNewTime=function(a){var e=this.calculateDistance(a);var h=this.player_.liveTracker;if(h&&h.isLive()){if(.99<=e){h.seekToLiveEdge();return}a=h.seekableStart();var l=h.liveCurrentTime();e=a+e*h.liveWindow();e>=l&&(e=l);e<=a&&(e=a+.1);if(Infinity===e)return}else e*=
this.player_.duration(),e===this.player_.duration()&&(e-=.1);return e};b.enable=function(){f.prototype.enable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.show()};b.disable=function(){f.prototype.disable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.hide()};b.handleMouseUp=function(a){f.prototype.handleMouseUp.call(this,a);var e=this.seekBarCalcNewTime(a);"undefined"!==typeof e&&(this.player_.currentTime(e),a&&a.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",
target:this,manuallyTriggered:!0}),this.videoWasPlaying?ba(this.player_.play()):this.update_())};b.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};b.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};b.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()};b.handleKeyDown=function(a){Wa.isEventKey(a,"Space")||Wa.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.handleAction(a)):Wa.isEventKey(a,
"Home")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(0)):Wa.isEventKey(a,"End")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.duration())):/^[0-9]$/.test(Wa(a))?(a.preventDefault(),a.stopPropagation(),a=10*(Wa.codes[Wa(a)]-Wa.codes["0"])/100,this.player_.currentTime(this.player_.duration()*a)):Wa.isEventKey(a,"PgDn")?(a.preventDefault(),a.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):Wa.isEventKey(a,"PgUp")?(a.preventDefault(),
a.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):f.prototype.handleKeyDown.call(this,a)};b.dispose=function(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.off(this.player_,["playing"],this.enableInterval_);this.off(this.player_,["ended","pause","waiting"],this.disableInterval_);"hidden"in C&&"visibilityState"in C&&this.off(C,
"visibilitychange",this.toggleVisibility_);f.prototype.dispose.call(this)};return c}(wf);yf.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};hc||Cc||yf.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Ea.registerComponent("SeekBar",yf);var Th=function(f){function c(a,e){a=f.call(this,a,e)||this;a.handleMouseMove=Lc($a(Ya(a),a.handleMouseMove),30);a.throttledHandleMouseSeek=Lc($a(Ya(a),a.handleMouseSeek),30);a.enable();return a}Na(c,f);var b=c.prototype;
b.createEl=function(){return f.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};b.handleMouseMove=function(a){var e=this.getChild("seekBar");if(e){var h=e.getChild("playProgressBar"),l=e.getChild("mouseTimeDisplay");if(h||l){var g=e.el(),n=za(g);a=Oa(g,a).x;a=zd(0,1,a);l&&l.update(n,a);h&&h.update(n,e.getProgress())}}};b.handleMouseSeek=function(a){var e=this.getChild("seekBar");e&&e.handleMouseMove(a)};b.enabled=function(){return this.enabled_};b.disable=function(){this.children().forEach(function(a){return a.disable&&
a.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)};b.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};b.handleMouseDown=function(a){var e=
this.el_.ownerDocument,h=this.getChild("seekBar");h&&h.handleMouseDown(a);this.on(e,"mousemove",this.throttledHandleMouseSeek);this.on(e,"touchmove",this.throttledHandleMouseSeek);this.on(e,"mouseup",this.handleMouseUp);this.on(e,"touchend",this.handleMouseUp)};b.handleMouseUp=function(a){var e=this.el_.ownerDocument,h=this.getChild("seekBar");h&&h.handleMouseUp(a);this.off(e,"mousemove",this.throttledHandleMouseSeek);this.off(e,"touchmove",this.throttledHandleMouseSeek);this.off(e,"mouseup",this.handleMouseUp);
this.off(e,"touchend",this.handleMouseUp)};return c}(Ea);Th.prototype.options_={children:["seekBar"]};Ea.registerComponent("ProgressControl",Th);var Uh=function(f){function c(a,e){e=f.call(this,a,e)||this;e.on(a,["enterpictureinpicture","leavepictureinpicture"],e.handlePictureInPictureChange);C.pictureInPictureEnabled||e.disable();return e}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-picture-in-picture-control "+f.prototype.buildCSSClass.call(this)};b.handlePictureInPictureChange=
function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")};b.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()};return c}(ic);Uh.prototype.controlText_="Picture-in-Picture";Ea.registerComponent("PictureInPictureToggle",Uh);var Vh=function(f){function c(a,e){e=f.call(this,a,e)||this;e.on(a,"fullscreenchange",e.handleFullscreenChange);!1===C[a.fsApi_.fullscreenEnabled]&&
e.disable();return e}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-fullscreen-control "+f.prototype.buildCSSClass.call(this)};b.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};b.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return c}(ic);Vh.prototype.controlText_="Fullscreen";Ea.registerComponent("FullscreenToggle",Vh);var dl=function(f,
c){c.tech_&&!c.tech_.featuresVolumeControl&&f.addClass("vjs-hidden");f.on(c,"loadstart",function(){c.tech_.featuresVolumeControl?f.removeClass("vjs-hidden"):f.addClass("vjs-hidden")})},el=function(f){function c(){return f.apply(this,arguments)||this}Na(c,f);c.prototype.createEl=function(){return f.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return c}(Ea);Ea.registerComponent("VolumeLevel",el);var zf=function(f){function c(a,
e){var h=f.call(this,a,e)||this;h.on("slideractive",h.updateLastVolume_);h.on(a,"volumechange",h.updateARIAAttributes);a.ready(function(){return h.updateARIAAttributes()});return h}Na(c,f);var b=c.prototype;b.createEl=function(){return f.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};b.handleMouseDown=function(a){Ub(a)&&f.prototype.handleMouseDown.call(this,a)};b.handleMouseMove=function(a){Ub(a)&&
(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))};b.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};b.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};b.stepForward=function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};b.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};b.updateARIAAttributes=function(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",
a);this.el_.setAttribute("aria-valuetext",a+"%")};b.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};b.updateLastVolume_=function(){var a=this,e=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(e)})};return c}(wf);zf.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};zf.prototype.playerEvent="volumechange";Ea.registerComponent("VolumeBar",zf);var Wh=function(f){function c(a,e){void 0===e&&(e={});e.vertical=
e.vertical||!1;if("undefined"===typeof e.volumeBar||z(e.volumeBar))e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical;var h=f.call(this,a,e)||this;dl(Ya(h),a);h.throttledHandleMouseMove=Lc($a(Ya(h),h.handleMouseMove),30);h.on("mousedown",h.handleMouseDown);h.on("touchstart",h.handleMouseDown);h.on(h.volumeBar,["focus","slideractive"],function(){h.volumeBar.addClass("vjs-slider-active");h.addClass("vjs-slider-active");h.trigger("slideractive")});h.on(h.volumeBar,["blur","sliderinactive"],
function(){h.volumeBar.removeClass("vjs-slider-active");h.removeClass("vjs-slider-active");h.trigger("sliderinactive")});return h}Na(c,f);var b=c.prototype;b.createEl=function(){var a="vjs-volume-horizontal";this.options_.vertical&&(a="vjs-volume-vertical");return f.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+a})};b.handleMouseDown=function(a){a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);
this.on(a,"mouseup",this.handleMouseUp);this.on(a,"touchend",this.handleMouseUp)};b.handleMouseUp=function(a){a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUp);this.off(a,"touchend",this.handleMouseUp)};b.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)};return c}(Ea);Wh.prototype.options_={children:["volumeBar"]};Ea.registerComponent("VolumeControl",Wh);var fl=
function(f,c){c.tech_&&!c.tech_.featuresMuteControl&&f.addClass("vjs-hidden");f.on(c,"loadstart",function(){c.tech_.featuresMuteControl?f.removeClass("vjs-hidden"):f.addClass("vjs-hidden")})},Xh=function(f){function c(a,e){e=f.call(this,a,e)||this;fl(Ya(e),a);e.on(a,["loadstart","volumechange"],e.update);return e}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-mute-control "+f.prototype.buildCSSClass.call(this)};b.handleClick=function(a){a=this.player_.volume();var e=this.player_.lastVolume_();
0===a?(this.player_.volume(.1>e?.1:e),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};b.update=function(a){this.updateIcon_();this.updateControlText_()};b.updateIcon_=function(){var a=this.player_.volume(),e=3;hc&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===a||this.player_.muted()?e=0:.33>a?e=1:.67>a&&(e=2);for(a=0;4>a;a++)F(this.el_,"vjs-vol-"+a);Ka(this.el_,"vjs-vol-"+e)};b.updateControlText_=function(){var a=this.player_.muted()||
0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)};return c}(ic);Xh.prototype.controlText_="Mute";Ea.registerComponent("MuteToggle",Xh);var Yh=function(f){function c(a,e){void 0===e&&(e={});e.inline="undefined"!==typeof e.inline?e.inline:!0;if("undefined"===typeof e.volumeControl||z(e.volumeControl))e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline;e=f.call(this,a,e)||this;e.on(a,["loadstart"],e.volumePanelState_);e.on(e.muteToggle,"keyup",
e.handleKeyPress);e.on(e.volumeControl,"keyup",e.handleVolumeControlKeyUp);e.on("keydown",e.handleKeyPress);e.on("mouseover",e.handleMouseOver);e.on("mouseout",e.handleMouseOut);e.on(e.volumeControl,["slideractive"],e.sliderActive_);e.on(e.volumeControl,["sliderinactive"],e.sliderInactive_);return e}Na(c,f);var b=c.prototype;b.sliderActive_=function(){this.addClass("vjs-slider-active")};b.sliderInactive_=function(){this.removeClass("vjs-slider-active")};b.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&
this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};b.createEl=function(){var a="vjs-volume-panel-horizontal";this.options_.inline||(a="vjs-volume-panel-vertical");return f.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+a})};b.dispose=function(){this.handleMouseOut();f.prototype.dispose.call(this)};b.handleVolumeControlKeyUp=function(a){Wa.isEventKey(a,
"Esc")&&this.muteToggle.focus()};b.handleMouseOver=function(a){this.addClass("vjs-hover");tb(C,"keyup",$a(this,this.handleKeyPress))};b.handleMouseOut=function(a){this.removeClass("vjs-hover");B(C,"keyup",$a(this,this.handleKeyPress))};b.handleKeyPress=function(a){Wa.isEventKey(a,"Esc")&&this.handleMouseOut()};return c}(Ea);Yh.prototype.options_={children:["muteToggle","volumeControl"]};Ea.registerComponent("VolumePanel",Yh);var Af=function(f){function c(a,e){a=f.call(this,a,e)||this;e&&(a.menuButton_=
e.menuButton);a.focusedChild_=-1;a.on("keydown",a.handleKeyDown);a.boundHandleBlur_=$a(Ya(a),a.handleBlur);a.boundHandleTapClick_=$a(Ya(a),a.handleTapClick);return a}Na(c,f);var b=c.prototype;b.addEventListenerForItem=function(a){a instanceof Ea&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))};b.removeEventListenerForItem=function(a){a instanceof Ea&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))};b.removeChild=
function(a){"string"===typeof a&&(a=this.getChild(a));this.removeEventListenerForItem(a);f.prototype.removeChild.call(this,a)};b.addItem=function(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)};b.createEl=function(){this.contentEl_=X(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var a=f.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});a.appendChild(this.contentEl_);tb(a,"click",function(e){e.preventDefault();
e.stopImmediatePropagation()});return a};b.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;f.prototype.dispose.call(this)};b.handleBlur=function(a){var e=a.relatedTarget||C.activeElement;this.children().some(function(h){return h.el()===e})||(a=this.menuButton_)&&a.buttonPressed_&&e!==a.el().firstChild&&a.unpressButton()};b.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();Array.isArray(e)&&(e=e.filter(function(h){return h.el()===
a.target})[0])&&"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus()}};b.handleKeyDown=function(a){if(Wa.isEventKey(a,"Left")||Wa.isEventKey(a,"Down"))a.preventDefault(),a.stopPropagation(),this.stepForward();else if(Wa.isEventKey(a,"Right")||Wa.isEventKey(a,"Up"))a.preventDefault(),a.stopPropagation(),this.stepBack()};b.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)};b.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-
1);this.focus(a)};b.focus=function(a){void 0===a&&(a=0);var e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift();0<e.length&&(0>a?a=0:a>=e.length&&(a=e.length-1),this.focusedChild_=a,e[a].el_.focus())};return c}(Ea);Ea.registerComponent("Menu",Af);var Bf=function(f){function c(a,e){void 0===e&&(e={});var h=f.call(this,a,e)||this;h.menuButton_=new ic(a,e);h.menuButton_.controlText(h.controlText_);h.menuButton_.el_.setAttribute("aria-haspopup","true");
a=ic.prototype.buildCSSClass();h.menuButton_.el_.className=h.buildCSSClass()+" "+a;h.menuButton_.removeClass("vjs-control");h.addChild(h.menuButton_);h.update();h.enabled_=!0;h.on(h.menuButton_,"tap",h.handleClick);h.on(h.menuButton_,"click",h.handleClick);h.on(h.menuButton_,"keydown",h.handleKeyDown);h.on(h.menuButton_,"mouseenter",function(){h.addClass("vjs-hover");h.menu.show();tb(C,"keyup",$a(Ya(h),h.handleMenuKeyUp))});h.on("mouseleave",h.handleMouseLeave);h.on("keydown",h.handleSubmenuKeyDown);
return h}Na(c,f);var b=c.prototype;b.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};b.createMenu=function(){var a=new Af(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var e=X("li",{className:"vjs-menu-title",innerHTML:ob(this.options_.title),
tabIndex:-1});this.hideThreshold_+=1;e=new Ea(this.player_,{el:e});a.addItem(e)}if(this.items=this.createItems())for(e=0;e<this.items.length;e++)a.addItem(this.items[e]);return a};b.createItems=function(){};b.createEl=function(){return f.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};b.buildWrapperCSSClass=function(){var a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";var e=ic.prototype.buildCSSClass();return"vjs-menu-button "+a+" "+e+" "+f.prototype.buildCSSClass.call(this)};
b.buildCSSClass=function(){var a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";return"vjs-menu-button "+a+" "+f.prototype.buildCSSClass.call(this)};b.controlText=function(a,e){void 0===e&&(e=this.menuButton_.el());return this.menuButton_.controlText(a,e)};b.dispose=function(){this.handleMouseLeave();f.prototype.dispose.call(this)};b.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()};b.handleMouseLeave=function(a){this.removeClass("vjs-hover");
B(C,"keyup",$a(this,this.handleMenuKeyUp))};b.focus=function(){this.menuButton_.focus()};b.blur=function(){this.menuButton_.blur()};b.handleKeyDown=function(a){Wa.isEventKey(a,"Esc")||Wa.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),Wa.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):!Wa.isEventKey(a,"Up")&&!Wa.isEventKey(a,"Down")||this.buttonPressed_||(a.preventDefault(),this.pressButton())};b.handleMenuKeyUp=function(a){(Wa.isEventKey(a,"Esc")||Wa.isEventKey(a,
"Tab"))&&this.removeClass("vjs-hover")};b.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)};b.handleSubmenuKeyDown=function(a){if(Wa.isEventKey(a,"Esc")||Wa.isEventKey(a,"Tab"))this.buttonPressed_&&this.unpressButton(),Wa.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())};b.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),hc&&L()||this.menu.focus())};b.unpressButton=
function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};b.disable=function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};b.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};return c}(Ea);Ea.registerComponent("MenuButton",Bf);var Cf=function(f){function c(b,a){var e=a.tracks;b=f.call(this,b,a)||this;1>=b.items.length&&
b.hide();if(!e)return Ya(b);var h=$a(Ya(b),b.update);e.addEventListener("removetrack",h);e.addEventListener("addtrack",h);b.player_.on("ready",h);b.player_.on("dispose",function(){e.removeEventListener("removetrack",h);e.removeEventListener("addtrack",h)});return b}Na(c,f);return c}(Bf);Ea.registerComponent("TrackButton",Cf);var gl="Tab Esc Up Down Right Left".split(" "),Ad=function(f){function c(a,e){a=f.call(this,a,e)||this;a.selectable=e.selectable;a.isSelected_=e.selected||!1;a.multiSelectable=
e.multiSelectable;a.selected(a.isSelected_);a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem");return a}Na(c,f);var b=c.prototype;b.createEl=function(a,e,h){this.nonIconControl=!0;return f.prototype.createEl.call(this,"li",w({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},e),h)};b.handleKeyDown=function(a){gl.some(function(e){return Wa.isEventKey(a,
e)})||f.prototype.handleKeyDown.call(this,a)};b.handleClick=function(a){this.selected(!0)};b.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return c}(he);Ea.registerComponent("MenuItem",Ad);var id=function(f){function c(a,e){var h=e.track,l=a.textTracks();
e.label=h.label||h.language||"Unknown";e.selected="showing"===h.mode;var g=f.call(this,a,e)||this;g.track=h;g.kinds=(e.kinds||[e.kind||g.track.kind]).filter(Boolean);var n=function(){for(var p=arguments.length,q=Array(p),t=0;t<p;t++)q[t]=arguments[t];g.handleTracksChange.apply(Ya(g),q)},d=function(){for(var p=arguments.length,q=Array(p),t=0;t<p;t++)q[t]=arguments[t];g.handleSelectedLanguageChange.apply(Ya(g),q)};a.on(["loadstart","texttrackchange"],n);l.addEventListener("change",n);l.addEventListener("selectedlanguagechange",
d);g.on("dispose",function(){a.off(["loadstart","texttrackchange"],n);l.removeEventListener("change",n);l.removeEventListener("selectedlanguagechange",d)});if(void 0===l.onchange){var k;g.on(["tap","click"],function(){if("object"!==typeof r.Event)try{k=new r.Event("change")}catch(p){}k||(k=C.createEvent("Event"),k.initEvent("change",!0,!0));l.dispatchEvent(k)})}g.handleTracksChange();return g}Na(c,f);var b=c.prototype;b.handleClick=function(a){var e=this.track,h=this.player_.textTracks();f.prototype.handleClick.call(this,
a);if(h)for(a=0;a<h.length;a++){var l=h[a];-1!==this.kinds.indexOf(l.kind)&&(l===e?"showing"!==l.mode&&(l.mode="showing"):"disabled"!==l.mode&&(l.mode="disabled"))}};b.handleTracksChange=function(a){a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)};b.handleSelectedLanguageChange=function(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,
language:this.track.language,kind:this.track.kind}))};b.dispose=function(){this.track=null;f.prototype.dispose.call(this)};return c}(Ad);Ea.registerComponent("TextTrackMenuItem",id);var Zh=function(f){function c(a,e){e.track={player:a,kind:e.kind,kinds:e.kinds,"default":!1,mode:"disabled"};e.kinds||(e.kinds=[e.kind]);e.track.label=e.label?e.label:e.kinds.join(" and ")+" off";e.selectable=!0;e.multiSelectable=!1;return f.call(this,a,e)||this}Na(c,f);var b=c.prototype;b.handleTracksChange=function(a){a=
this.player().textTracks();for(var e=!0,h=0,l=a.length;h<l;h++){var g=a[h];if(-1<this.options_.kinds.indexOf(g.kind)&&"showing"===g.mode){e=!1;break}}e!==this.isSelected_&&this.selected(e)};b.handleSelectedLanguageChange=function(a){a=this.player().textTracks();for(var e=!0,h=0,l=a.length;h<l;h++){var g=a[h];if(-1<["captions","descriptions","subtitles"].indexOf(g.kind)&&"showing"===g.mode){e=!1;break}}e&&(this.player_.cache_.selectedLanguage={enabled:!1})};return c}(id);Ea.registerComponent("OffTextTrackMenuItem",
Zh);var $h=function(f){function c(b,a){a.track={player:b,kind:a.kind,kinds:a.kinds,"default":!1,mode:"disabled"};a.kinds||(a.kinds=[a.kind]);a.track.label=a.label?"-- upload --":"Upload "+a.kinds.join(" and ");a.selectable=!1;a.multiSelectable=!1;return f.call(this,b,a)||this}Na(c,f);c.prototype.handleClick=function(b){this.player_.trigger("clickHandleTrackUpload")};return c}(id);Ea.registerComponent("UploadTextTrackMenuItem",$h);var jd=function(f){function c(b,a){void 0===a&&(a={});a.tracks=b.textTracks();
return f.call(this,b,a)||this}Na(c,f);c.prototype.createItems=function(b,a){void 0===b&&(b=[]);void 0===a&&(a=id);var e;this.label_&&(e=this.label_+" off");b.push(new Zh(this.player_,{kinds:this.kinds_,kind:this.kind_,label:e}));!this.kinds_||"captions"!==this.kinds_[0]&&"subtitles"!==this.kinds_[0]||b.push(new $h(this.player_,{kinds:this.kinds_,kind:this.kind_,label:"Upload"}));this.hideThreshold_+=1;e=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var h=0;h<
e.length;h++){var l=e[h];if(-1<this.kinds_.indexOf(l.kind)){var g=new a(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});g.addClass("vjs-"+l.kind+"-menu-item");b.push(g)}}return b};return c}(Cf);Ea.registerComponent("TextTrackButton",jd);var ai=function(f){function c(a,e){var h=e.track,l=e.cue,g=a.currentTime();e.selectable=!0;e.multiSelectable=!1;e.label=l.text;e.selected=l.startTime<=g&&g<l.endTime;a=f.call(this,a,e)||this;a.track=h;a.cue=l;h.addEventListener("cuechange",
$a(Ya(a),a.update));return a}Na(c,f);var b=c.prototype;b.handleClick=function(a){f.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};b.update=function(a){a=this.cue;var e=this.player_.currentTime();this.selected(a.startTime<=e&&e<a.endTime)};return c}(Ad);Ea.registerComponent("ChaptersTrackMenuItem",ai);var Df=function(f){function c(a,e,h){return f.call(this,a,e,h)||this}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-chapters-button "+
f.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-chapters-button "+f.prototype.buildWrapperCSSClass.call(this)};b.update=function(a){this.track_&&(!a||"addtrack"!==a.type&&"removetrack"!==a.type)||this.setTrack(this.findChaptersTrack());f.prototype.update.call(this)};b.setTrack=function(a){if(this.track_!==a){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
e&&e.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_)}};b.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],e=a.length-1;0<=e;e--){var h=a[e];if(h.kind===this.kind_)return h}};b.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ob(this.kind_))};b.createMenu=
function(){this.options_.title=this.getMenuCaption();return f.prototype.createMenu.call(this)};b.createItems=function(){var a=[];if(!this.track_)return a;var e=this.track_.cues;if(!e)return a;for(var h=0,l=e.length;h<l;h++){var g=new ai(this.player_,{track:this.track_,cue:e[h]});a.push(g)}return a};return c}(jd);Df.prototype.kind_="chapters";Df.prototype.controlText_="Chapters";Ea.registerComponent("ChaptersButton",Df);var Ef=function(f){function c(a,e,h){e=f.call(this,a,e,h)||this;var l=a.textTracks(),
g=$a(Ya(e),e.handleTracksChange);l.addEventListener("change",g);e.on("dispose",function(){l.removeEventListener("change",g)});return e}Na(c,f);var b=c.prototype;b.handleTracksChange=function(a){a=this.player().textTracks();for(var e=!1,h=0,l=a.length;h<l;h++){var g=a[h];if(g.kind!==this.kind_&&"showing"===g.mode){e=!0;break}}e?this.disable():this.enable()};b.buildCSSClass=function(){return"vjs-descriptions-button "+f.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+
f.prototype.buildWrapperCSSClass.call(this)};return c}(jd);Ef.prototype.kind_="descriptions";Ef.prototype.controlText_="Descriptions";Ea.registerComponent("DescriptionsButton",Ef);var Ff=function(f){function c(a,e,h){return f.call(this,a,e,h)||this}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-subtitles-button "+f.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+f.prototype.buildWrapperCSSClass.call(this)};return c}(jd);Ff.prototype.kind_=
"subtitles";Ff.prototype.controlText_="Subtitles";Ea.registerComponent("SubtitlesButton",Ff);var Gf=function(f){function c(b,a){a.track={player:b,kind:a.kind,label:a.kind+" settings",selectable:!1,"default":!1,mode:"disabled"};a.selectable=!1;a.name="CaptionSettingsMenuItem";b=f.call(this,b,a)||this;b.addClass("vjs-texttrack-settings");b.controlText(", opens "+a.kind+" settings dialog");return b}Na(c,f);c.prototype.handleClick=function(b){this.player().getChild("textTrackSettings").open()};return c}(id);
Ea.registerComponent("CaptionSettingsMenuItem",Gf);var Hf=function(f){function c(a,e,h){return f.call(this,a,e,h)||this}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-captions-button "+f.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-captions-button "+f.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(){var a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new Gf(this.player_,
{kind:this.kind_})),this.hideThreshold_+=1);return f.prototype.createItems.call(this,a)};return c}(jd);Hf.prototype.kind_="captions";Hf.prototype.controlText_="Captions";Ea.registerComponent("CaptionsButton",Hf);var bi=function(f){function c(){return f.apply(this,arguments)||this}Na(c,f);c.prototype.createEl=function(b,a,e){var h='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(h+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+
this.localize("Captions")+"</span>\n      ");return f.prototype.createEl.call(this,b,w({innerHTML:h+"</span>"},a),e)};return c}(id);Ea.registerComponent("SubsCapsMenuItem",bi);var If=function(f){function c(a,e){void 0===e&&(e={});a=f.call(this,a,e)||this;a.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)&&(a.label_="captions");a.menuButton_.controlText(ob(a.label_));return a}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-subs-caps-button "+f.prototype.buildCSSClass.call(this)};
b.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+f.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(){var a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new Gf(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return a=f.prototype.createItems.call(this,a,bi)};return c}(jd);If.prototype.kinds_=["captions","subtitles"];If.prototype.controlText_="Subtitles";Ea.registerComponent("SubsCapsButton",
If);var ci=function(f){function c(a,e){var h=e.track,l=a.audioTracks();e.label=h.label||h.language||"Unknown";e.selected=h.enabled;var g=f.call(this,a,e)||this;g.track=h;g.addClass("vjs-"+h.kind+"-menu-item");var n=function(){for(var d=arguments.length,k=Array(d),p=0;p<d;p++)k[p]=arguments[p];g.handleTracksChange.apply(Ya(g),k)};l.addEventListener("change",n);g.on("dispose",function(){l.removeEventListener("change",n)});return g}Na(c,f);var b=c.prototype;b.createEl=function(a,e,h){var l='<span class="vjs-menu-item-text">'+
this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(l+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      ");return f.prototype.createEl.call(this,a,w({innerHTML:l+"</span>"},e),h)};b.handleClick=function(a){var e=this.player_.audioTracks();f.prototype.handleClick.call(this,a);for(a=0;a<e.length;a++){var h=e[a];h.enabled=h===this.track}};b.handleTracksChange=function(a){this.selected(this.track.enabled)};
return c}(Ad);Ea.registerComponent("AudioTrackMenuItem",ci);var di=function(f){function c(a,e){void 0===e&&(e={});e.tracks=a.audioTracks();return f.call(this,a,e)||this}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-audio-button "+f.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-audio-button "+f.prototype.buildWrapperCSSClass.call(this)};b.createItems=function(a){void 0===a&&(a=[]);this.hideThreshold_=1;for(var e=this.player_.audioTracks(),h=0;h<
e.length;h++)a.push(new ci(this.player_,{track:e[h],selectable:!0,multiSelectable:!1}));return a};return c}(Cf);di.prototype.controlText_="Audio Track";Ea.registerComponent("AudioTrackButton",di);var Jf=function(f){function c(a,e){var h=e.rate,l=parseFloat(h,10);e.label=h;e.selected=1===l;e.selectable=!0;e.multiSelectable=!1;e=f.call(this,a,e)||this;e.label=h;e.rate=l;e.on(a,"ratechange",e.update);return e}Na(c,f);var b=c.prototype;b.handleClick=function(a){f.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};
b.update=function(a){this.selected(this.player().playbackRate()===this.rate)};return c}(Ad);Jf.prototype.contentElType="button";Ea.registerComponent("PlaybackRateMenuItem",Jf);var ei=function(f){function c(a,e){e=f.call(this,a,e)||this;e.updateVisibility();e.updateLabel();e.on(a,"loadstart",e.updateVisibility);e.on(a,"ratechange",e.updateLabel);return e}Na(c,f);var b=c.prototype;b.createEl=function(){var a=f.prototype.createEl.call(this);this.labelEl_=X("div",{className:"vjs-playback-rate-value",
innerHTML:"1x"});a.appendChild(this.labelEl_);return a};b.dispose=function(){this.labelEl_=null;f.prototype.dispose.call(this)};b.buildCSSClass=function(){return"vjs-playback-rate "+f.prototype.buildCSSClass.call(this)};b.buildWrapperCSSClass=function(){return"vjs-playback-rate "+f.prototype.buildWrapperCSSClass.call(this)};b.createMenu=function(){var a=new Af(this.player()),e=this.playbackRates();if(e)for(var h=e.length-1;0<=h;h--)a.addChild(new Jf(this.player(),{rate:e[h]+"x"}));return a};b.updateARIAAttributes=
function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};b.handleClick=function(a){a=this.player().playbackRate();for(var e=this.playbackRates(),h=e[0],l=0;l<e.length;l++)if(e[l]>a){h=e[l];break}this.player().playbackRate(h)};b.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};b.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&
0<this.playbackRates().length};b.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};b.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return c}(Bf);ei.prototype.controlText_="Playback Rate";Ea.registerComponent("PlaybackRateMenuButton",ei);var fi=function(f){function c(){return f.apply(this,arguments)||this}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-spacer "+
f.prototype.buildCSSClass.call(this)};b.createEl=function(){return f.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return c}(Ea);Ea.registerComponent("Spacer",fi);var hl=function(f){function c(){return f.apply(this,arguments)||this}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-custom-control-spacer "+f.prototype.buildCSSClass.call(this)};b.createEl=function(){var a=f.prototype.createEl.call(this,{className:this.buildCSSClass()});a.innerHTML="\u00a0";return a};
return c}(fi);Ea.registerComponent("CustomControlSpacer",hl);var ie=function(f){function c(){return f.apply(this,arguments)||this}Na(c,f);c.prototype.createEl=function(){return f.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return c}(Ea);ie.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};
"exitPictureInPicture"in C&&ie.prototype.options_.children.splice(ie.prototype.options_.children.length-1,0,"pictureInPictureToggle");Ea.registerComponent("ControlBar",ie);var gi=function(f){function c(a,e){e=f.call(this,a,e)||this;e.on(a,"error",e.open);return e}Na(c,f);var b=c.prototype;b.buildCSSClass=function(){return"vjs-error-display "+f.prototype.buildCSSClass.call(this)};b.content=function(){var a=this.player().error();return a?this.localize(a.message):""};return c}(dd);gi.prototype.options_=
Rd({},dd.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Ea.registerComponent("ErrorDisplay",gi);var hi=["#000","Black"],ii=["#00F","Blue"],ji=["#0FF","Cyan"],ki=["#0F0","Green"],li=["#F0F","Magenta"],mi=["#F00","Red"],ni=["#FFF","White"],oi=["#FF0","Yellow"],Kf=["1","Opaque"],Lf=["0.5","Semi-Transparent"],pi=["0","Transparent"],Nc={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[hi,ni,mi,ki,ii,oi,li,ji]},backgroundOpacity:{selector:".vjs-bg-opacity > select",
id:"captions-background-opacity-%s",label:"Transparency",options:[Kf,Lf,pi]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ni,hi,mi,ki,ii,oi,li,ji]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",
options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],
"default":2,parser:function(f){return"1.00"===f?null:Number(f)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Kf,Lf]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[pi,Lf,Kf]}};Nc.windowColor.options=Nc.backgroundColor.options;var il=function(f){function c(a,e){e.temporary=
!1;var h=f.call(this,a,e)||this;h.updateDisplay=$a(Ya(h),h.updateDisplay);h.fill();h.hasBeenOpened_=h.hasBeenFilled_=!0;h.endDialog=X("p",{className:"vjs-control-text",textContent:h.localize("End of dialog window.")});h.el().appendChild(h.endDialog);h.setDefaults();void 0===e.persistTextTrackSettings&&(h.options_.persistTextTrackSettings=h.options_.playerOptions.persistTextTrackSettings);h.on(h.$(".vjs-done-button"),"click",function(){h.saveSettings();h.close()});h.on(h.$(".vjs-default-button"),"click",
function(){h.setDefaults();h.updateDisplay()});J(Nc,function(l){h.on(h.$(l.selector),"change",h.updateDisplay)});h.options_.persistTextTrackSettings&&h.restoreSettings();return h}Na(c,f);var b=c.prototype;b.dispose=function(){this.endDialog=null;f.prototype.dispose.call(this)};b.createElSelect_=function(a,e,h){var l=this;void 0===e&&(e="");void 0===h&&(h="label");a=Nc[a];var g=a.id.replace("%s",this.id_),n=[e,g].join(" ").trim();return["<"+h+' id="'+g+'" class="'+("label"===h?"vjs-label":"")+'">',
this.localize(a.label),"</"+h+">",'<select aria-labelledby="'+n+'">'].concat(a.options.map(function(d){var k=g+"-"+d[1].replace(/\W+/g,"");return['<option id="'+k+'" value="'+d[0]+'" ','aria-labelledby="'+n+" "+k+'">',l.localize(d[1]),"</option>"].join("")})).concat("</select>").join("")};b.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",
a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span></fieldset>"].join("")};b.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span></fieldset>"].join("")};b.createElWinColor_=function(){var a=
"captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span></fieldset>"].join("")};b.createElColors_=function(){return X("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};b.createElFont_=
function(){return X("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};b.createElControls_=function(){var a=this.localize("restore all settings to the default values");
return X("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};b.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};b.label=function(){return this.localize("Caption Settings Dialog")};b.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};
b.buildCSSClass=function(){return f.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};b.getValues=function(){var a=this;return S(Nc,function(e,h,l){var g=a.$(h.selector);h=Kg(g.options[g.options.selectedIndex].value,h.parser);void 0!==h&&(e[l]=h);return e},{})};b.setValues=function(a){var e=this;J(Nc,function(h,l){var g=e.$(h.selector);l=a[l];h=h.parser;if(l)for(var n=0;n<g.options.length;n++)if(Kg(g.options[n].value,h)===l){g.selectedIndex=n;break}})};b.setDefaults=function(){var a=
this;J(Nc,function(e){var h=e.hasOwnProperty("default")?e["default"]:0;a.$(e.selector).selectedIndex=h})};b.restoreSettings=function(){try{var a=JSON.parse(r.localStorage.getItem("vjs-text-track-settings"))}catch(e){ab.warn(e)}a&&this.setValues(a)};b.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?r.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):r.localStorage.removeItem("vjs-text-track-settings")}catch(e){ab.warn(e)}}};
b.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");this.player_.trigger("textTrackDisplayChanged");a&&a.updateDisplay()};b.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,e=a&&a.subsCapsButton;a=a&&a.captionsButton;e?e.focus():a&&a.focus()};return c}(dd);Ea.registerComponent("TextTrackSettings",il);var jl=function(f){function c(a,e){var h=e.ResizeObserver||r.ResizeObserver;null===e.ResizeObserver&&(h=!1);var l=xa({createEl:!h,reportTouchActivity:!1},
e);var g=f.call(this,a,l)||this;g.ResizeObserver=e.ResizeObserver||r.ResizeObserver;g.loadListener_=null;g.resizeObserver_=null;g.debouncedHandler_=zk(function(){g.resizeHandler()},100,!1,Ya(g));h?(g.resizeObserver_=new g.ResizeObserver(g.debouncedHandler_),g.resizeObserver_.observe(a.el())):(g.loadListener_=function(){if(g.el_&&g.el_.contentWindow){var n=g.debouncedHandler_,d=g.unloadListener_=function(){B(this,"resize",n);B(this,"unload",d);d=null};tb(g.el_.contentWindow,"unload",d);tb(g.el_.contentWindow,
"resize",n)}},g.one("load",g.loadListener_));return g}Na(c,f);var b=c.prototype;b.createEl=function(){return f.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};b.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")};b.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());
this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;f.prototype.dispose.call(this)};return c}(Ea);Ea.registerComponent("ResizeManager",jl);var kl={trackingThreshold:30,liveTolerance:15},ll=function(f){function c(a,e){e=xa(kl,e,{createEl:!1});a=f.call(this,a,e)||this;a.reset_();a.on(a.player_,"durationchange",
a.handleDurationchange);if(xd&&"hidden"in C&&"visibilityState"in C)a.on(C,"visibilitychange",a.handleVisibilityChange);return a}Na(c,f);var b=c.prototype;b.handleVisibilityChange=function(){Infinity===this.player_.duration()&&(C.hidden?this.stopTracking():this.startTracking())};b.trackLive_=function(){var a=this.player_.seekable();if(a&&a.length){a=Number(r.performance.now().toFixed(4));var e=-1===this.lastTime_?0:(a-this.lastTime_)/1E3;this.lastTime_=a;this.pastSeekEnd_=this.pastSeekEnd()+e;a=this.liveCurrentTime();
e=this.player_.currentTime();e=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-e)>this.options_.liveTolerance;this.timeupdateSeen_&&Infinity!==a||(e=!1);e!==this.behindLiveEdge_&&(this.behindLiveEdge_=e,this.trigger("liveedgechange"))}};b.handleDurationchange=function(){Infinity===this.player_.duration()&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())};
b.startTracking=function(){if(!this.isTracking())if(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_)this.on(this.player_,"seeked",this.handleSeeked);else this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)};b.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0;this.on(this.player_,
"seeked",this.handleSeeked)};b.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.skipNextSeeked_?!1:2<a;this.skipNextSeeked_=!1;this.trackLive_()};b.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};b.reset_=function(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=!0;this.skipNextSeeked_=this.seekedBehindLive_=this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);
this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLive_);this.off(this.player_,"seeked",this.handleSeeked);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate);this.off(this.player_,"timeupdate",this.seekToLiveEdge)};b.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))};b.seekableEnd=function(){for(var a=this.player_.seekable(),e=[],h=a?a.length:0;h--;)e.push(a.end(h));return e.length?
e.sort()[e.length-1]:Infinity};b.seekableStart=function(){for(var a=this.player_.seekable(),e=[],h=a?a.length:0;h--;)e.push(a.start(h));return e.length?e.sort()[0]:0};b.liveWindow=function(){var a=this.liveCurrentTime();return Infinity===a?Infinity:a-this.seekableStart()};b.isLive=function(){return this.isTracking()};b.atLiveEdge=function(){return!this.behindLiveEdge()};b.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()};b.pastSeekEnd=function(){var a=this.seekableEnd();-1!==
this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0);this.lastSeekEnd_=a;return this.pastSeekEnd_};b.behindLiveEdge=function(){return this.behindLiveEdge_};b.isTracking=function(){return"number"===typeof this.trackingInterval_};b.seekToLiveEdge=function(){this.seekedBehindLive_=!1;this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))};b.dispose=function(){this.off(C,"visibilitychange",this.handleVisibilityChange);this.stopTracking();f.prototype.dispose.call(this)};
return c}(Ea);Ea.registerComponent("LiveTracker",ll);var Mf=function(f){var c=f.el();if(c.hasAttribute("src"))return f.triggerSourceset(c.src),!0;c=f.$$("source");var b=[],a="";if(!c.length)return!1;for(var e=0;e<c.length;e++){var h=c[e].src;h&&-1===b.indexOf(h)&&b.push(h)}if(!b.length)return!1;1===b.length&&(a=b[0]);f.triggerSourceset(a);return!0},ml=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(f){var c=C.createElement(this.nodeName.toLowerCase());
c.innerHTML=f;for(f=C.createDocumentFragment();c.childNodes.length;)f.appendChild(c.childNodes[0]);this.innerText="";r.Element.prototype.appendChild.call(this,f);return this.innerHTML}}),qi=function(f,c){for(var b={},a=0;a<f.length&&!((b=Object.getOwnPropertyDescriptor(f[a],c))&&b.set&&b.get);a++);b.enumerable=!0;b.configurable=!0;return b},ri=function(f){var c=f.el();if(!c.resetSourceWatch_){var b={},a=qi([f.el(),r.HTMLMediaElement.prototype,r.Element.prototype,ml],"innerHTML"),e=function(h){return function(){for(var l=
arguments.length,g=Array(l),n=0;n<l;n++)g[n]=arguments[n];l=h.apply(c,g);Mf(f);return l}};["append","appendChild","insertAdjacentHTML"].forEach(function(h){c[h]&&(b[h]=c[h],c[h]=e(b[h]))});Object.defineProperty(c,"innerHTML",xa(a,{set:e(a.set)}));c.resetSourceWatch_=function(){c.resetSourceWatch_=null;Object.keys(b).forEach(function(h){c[h]=b[h]});Object.defineProperty(c,"innerHTML",a)};f.one("sourceset",c.resetSourceWatch_)}},nl=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?
Hh(r.Element.prototype.getAttribute.call(this,"src")):""},set:function(f){r.Element.prototype.setAttribute.call(this,"src",f);return f}}),ol=function(f){if(f.featuresSourceset){var c=f.el();if(!c.resetSourceset_){var b=qi([f.el(),r.HTMLMediaElement.prototype,nl],"src"),a=c.setAttribute,e=c.load;Object.defineProperty(c,"src",xa(b,{set:function(h){h=b.set.call(c,h);f.triggerSourceset(c.src);return h}}));c.setAttribute=function(h,l){l=a.call(c,h,l);/src/i.test(h)&&f.triggerSourceset(c.src);return l};
c.load=function(){var h=e.call(c);Mf(f)||(f.triggerSourceset(""),ri(f));return h};c.currentSrc?f.triggerSourceset(c.currentSrc):Mf(f)||ri(f);c.resetSourceset_=function(){c.resetSourceset_=null;c.load=e;c.setAttribute=a;Object.defineProperty(c,"src",b);c.resetSourceWatch_&&c.resetSourceWatch_()}}}},Nf=function(f,c,b,a){void 0===a&&(a=!0);var e=function(l){return Object.defineProperty(f,c,{value:l,enumerable:!0,writable:!0})},h={configurable:!0,enumerable:!0,get:function(){var l=b();e(l);return l}};
a&&(h.set=e);return Object.defineProperty(f,c,h)},Qa=function(f){function c(a,e){e=f.call(this,a,e)||this;var h=a.source,l=!1;h&&(e.el_.currentSrc!==h.src||a.tag&&3===a.tag.initNetworkState_)?e.setSource(h):e.handleLateInit_(e.el_);a.enableSourceset&&e.setupSourcesetHandling_();if(e.el_.hasChildNodes()){var g=e.el_.childNodes,n=g.length;for(h=[];n--;){var d=g[n];"track"===d.nodeName.toLowerCase()&&(e.featuresNativeTextTracks?(e.remoteTextTrackEls().addTrackElement_(d),e.remoteTextTracks().addTrack(d.track),
e.textTracks().addTrack(d.track),l||e.el_.hasAttribute("crossorigin")||!ge(d.src)||(l=!0)):h.push(d))}for(g=0;g<h.length;g++)e.el_.removeChild(h[g])}e.proxyNativeTracks_();e.featuresNativeTextTracks&&l&&ab.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");e.restoreMetadataTracksInIOSNativePlayer_();(bd||kf||yh)&&!0===a.nativeControlsForTouch&&e.setControls(!0);e.proxyWebkitFullscreen_();e.triggerReady();return e}
Na(c,f);var b=c.prototype;b.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();c.disposeMediaElement(this.el_);this.options_=null;f.prototype.dispose.call(this)};b.setupSourcesetHandling_=function(){ol(this)};b.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),e,h=function(){e=[];for(var g=0;g<a.length;g++){var n=a[g];"metadata"===n.kind&&e.push({track:n,storedMode:n.mode})}};h();a.addEventListener("change",h);this.on("dispose",function(){return a.removeEventListener("change",
h)});var l=function n(){for(var d=0;d<e.length;d++){var k=e[d];"disabled"===k.track.mode&&k.track.mode!==k.storedMode&&(k.track.mode=k.storedMode)}a.removeEventListener("change",n)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",h);a.removeEventListener("change",l);a.addEventListener("change",l)});this.on("webkitendfullscreen",function(){a.removeEventListener("change",h);a.addEventListener("change",h);a.removeEventListener("change",l)})};b.overrideNative_=function(a,e){var h=
this;if(e===this["featuresNative"+a+"Tracks"]){var l=a.toLowerCase();this[l+"TracksListeners_"]&&Object.keys(this[l+"TracksListeners_"]).forEach(function(g){h.el()[l+"Tracks"].removeEventListener(g,h[l+"TracksListeners_"][g])});this["featuresNative"+a+"Tracks"]=!e;this[l+"TracksListeners_"]=null;this.proxyNativeTracksForType_(l)}};b.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)};b.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)};b.proxyNativeTracksForType_=
function(a){var e=this,h=bc[a],l=this.el()[h.getterName],g=this[h.getterName]();if(this["featuresNative"+h.capitalName+"Tracks"]&&l&&l.addEventListener){var n={change:function(k){k={type:"change",target:g,currentTarget:g,srcElement:g};g.trigger(k);"text"===a&&e[gd.remoteText.getterName]().trigger(k)},addtrack:function(k){g.addTrack(k.track)},removetrack:function(k){g.removeTrack(k.track)}},d=function(){for(var k=[],p=0;p<g.length;p++){for(var q=!1,t=0;t<l.length;t++)if(l[t]===g[p]){q=!0;break}q||
k.push(g[p])}for(;k.length;)g.removeTrack(k.shift())};this[h.getterName+"Listeners_"]=n;Object.keys(n).forEach(function(k){var p=n[k];l.addEventListener(k,p);e.on("dispose",function(q){return l.removeEventListener(k,p)})});this.on("loadstart",d);this.on("dispose",function(k){return e.off("loadstart",d)})}};b.proxyNativeTracks_=function(){var a=this;bc.names.forEach(function(e){a.proxyNativeTracksForType_(e)})};b.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var e=
a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(e,a);c.disposeMediaElement(a);a=e}else a=C.createElement("video"),e=this.options_.tag&&ea(this.options_.tag),e=xa({},e),bd&&!0===this.options_.nativeControlsForTouch||delete e.controls,pa(a,w(e,{id:this.options_.techId,"class":"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&a.setAttribute("preload",this.options_.preload);e=["loop","muted","playsinline","autoplay"];for(var h=0;h<e.length;h++){var l=
e[h],g=this.options_[l];"undefined"!==typeof g&&(g?a.setAttribute(l,l):a.removeAttribute(l),a[l]=g)}return a};b.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState)if(0===a.readyState){var e=!1,h=function(){e=!0};this.on("loadstart",h);var l=function(){e||this.trigger("loadstart")};this.on("loadedmetadata",l);this.ready(function(){this.off("loadstart",h);this.off("loadedmetadata",l);e||this.trigger("loadstart")})}else{var g=["loadstart"];g.push("loadedmetadata");2<=a.readyState&&
g.push("loadeddata");3<=a.readyState&&g.push("canplay");4<=a.readyState&&g.push("canplaythrough");this.ready(function(){g.forEach(function(n){this.trigger(n)},this)})}};b.setCurrentTime=function(a){try{this.el_.currentTime=a}catch(e){ab(e,"Video is not ready. (Video.js)")}};b.duration=function(){var a=this;return Infinity===this.el_.duration&&Cc&&rc&&0===this.el_.currentTime?(this.on("timeupdate",function h(){0<a.el_.currentTime&&(Infinity===a.el_.duration&&a.trigger("durationchange"),a.off("timeupdate",
h))}),NaN):this.el_.duration||NaN};b.width=function(){return this.el_.offsetWidth};b.height=function(){return this.el_.offsetHeight};b.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},h=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};
this.on("webkitbeginfullscreen",h);this.on("dispose",function(){a.off("webkitbeginfullscreen",h);a.off("webkitendfullscreen",e)})}};b.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var a=r.navigator&&r.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1};b.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)ba(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",
e)}},0);else try{a.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}};b.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",Error("The video is not fullscreen"))};b.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()};b.src=function(a){if(void 0===a)return this.el_.src;this.setSrc(a)};b.reset=function(){c.resetMediaElement(this.el_)};b.currentSrc=function(){return this.currentSource_?
this.currentSource_.src:this.el_.currentSrc};b.setControls=function(a){this.el_.controls=!!a};b.addTextTrack=function(a,e,h){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,e,h):f.prototype.addTextTrack.call(this,a,e,h)};b.createRemoteTextTrack=function(a){if(!this.featuresNativeTextTracks)return f.prototype.createRemoteTextTrack.call(this,a);var e=C.createElement("track");a.kind&&(e.kind=a.kind);a.label&&(e.label=a.label);if(a.language||a.srclang)e.srclang=a.language||a.srclang;a["default"]&&
(e["default"]=a["default"]);a.id&&(e.id=a.id);a.src&&(e.src=a.src);return e};b.addRemoteTextTrack=function(a,e){a=f.prototype.addRemoteTextTrack.call(this,a,e);this.featuresNativeTextTracks&&this.el().appendChild(a);return a};b.removeRemoteTextTrack=function(a){f.prototype.removeRemoteTextTrack.call(this,a);if(this.featuresNativeTextTracks)for(var e=this.$$("track"),h=e.length;h--;)a!==e[h]&&a!==e[h].track||this.el().removeChild(e[h])};b.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();
var a={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);r.performance&&"function"===typeof r.performance.now?a.creationTime=r.performance.now():r.performance&&r.performance.timing&&"number"===typeof r.performance.timing.navigationStart&&(a.creationTime=r.Date.now()-r.performance.timing.navigationStart);return a};return c}(kb);
Nf(Qa,"TEST_VID",function(){if(U()){var f=C.createElement("video"),c=C.createElement("track");c.kind="captions";c.srclang="en";c.label="English";f.appendChild(c);return f}});Qa.isSupported=function(){try{Qa.TEST_VID.volume=.5}catch(f){return!1}return!(!Qa.TEST_VID||!Qa.TEST_VID.canPlayType)};Qa.canPlayType=function(f){return Qa.TEST_VID.canPlayType(f)};Qa.canPlaySource=function(f,c){return Qa.canPlayType(f.type)};Qa.canControlVolume=function(){try{var f=Qa.TEST_VID.volume;Qa.TEST_VID.volume=f/2+.1;
return f!==Qa.TEST_VID.volume}catch(c){return!1}};Qa.canMuteVolume=function(){try{var f=Qa.TEST_VID.muted;Qa.TEST_VID.muted=!f;Qa.TEST_VID.muted?Qa.TEST_VID.setAttribute("muted","muted"):Qa.TEST_VID.removeAttribute("muted");return f!==Qa.TEST_VID.muted}catch(c){return!1}};Qa.canControlPlaybackRate=function(){if(Cc&&rc&&58>Ah)return!1;try{var f=Qa.TEST_VID.playbackRate;Qa.TEST_VID.playbackRate=f/2+.1;return f!==Qa.TEST_VID.playbackRate}catch(c){return!1}};Qa.canOverrideAttributes=function(){try{var f=
function(){};Object.defineProperty(C.createElement("video"),"src",{get:f,set:f});Object.defineProperty(C.createElement("audio"),"src",{get:f,set:f});Object.defineProperty(C.createElement("video"),"innerHTML",{get:f,set:f});Object.defineProperty(C.createElement("audio"),"innerHTML",{get:f,set:f})}catch(c){return!1}return!0};Qa.supportsNativeTextTracks=function(){return lf||hc&&rc};Qa.supportsNativeVideoTracks=function(){return!(!Qa.TEST_VID||!Qa.TEST_VID.videoTracks)};Qa.supportsNativeAudioTracks=
function(){return!(!Qa.TEST_VID||!Qa.TEST_VID.audioTracks)};Qa.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks",
"supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(f){var c=f[1];Nf(Qa.prototype,f[0],function(){return Qa[c]()},!0)});Qa.prototype.movingMediaElementInDOM=!hc;Qa.prototype.featuresFullscreenResize=!0;Qa.prototype.featuresProgressEvents=!0;Qa.prototype.featuresTimeupdateEvents=!0;var je;Qa.patchCanPlayType=function(){4<=gf&&!zh&&!rc&&(je=Qa.TEST_VID&&Qa.TEST_VID.constructor.prototype.canPlayType,
Qa.TEST_VID.constructor.prototype.canPlayType=function(f){var c=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return f&&c.test(f)?"maybe":je.call(this,f)})};Qa.unpatchCanPlayType=function(){var f=Qa.TEST_VID.constructor.prototype.canPlayType;je&&(Qa.TEST_VID.constructor.prototype.canPlayType=je);return f};Qa.patchCanPlayType();Qa.disposeMediaElement=function(f){if(f){for(f.parentNode&&f.parentNode.removeChild(f);f.hasChildNodes();)f.removeChild(f.firstChild);f.removeAttribute("src");if("function"===
typeof f.load)try{f.load()}catch(c){}}};Qa.resetMediaElement=function(f){if(f){for(var c=f.querySelectorAll("source"),b=c.length;b--;)f.removeChild(c[b]);f.removeAttribute("src");if("function"===typeof f.load)try{f.load()}catch(a){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(f){Qa.prototype[f]=function(){return this.el_[f]||this.el_.hasAttribute(f)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(f){Qa.prototype["set"+ob(f)]=function(c){(this.el_[f]=
c)?this.el_.setAttribute(f,f):this.el_.removeAttribute(f)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight crossOrigin".split(" ").forEach(function(f){Qa.prototype[f]=function(){return this.el_[f]}});"volume src poster preload playbackRate defaultPlaybackRate crossOrigin".split(" ").forEach(function(f){Qa.prototype["set"+ob(f)]=function(c){this.el_[f]=c}});["pause","load","play"].forEach(function(f){Qa.prototype[f]=
function(){return this.el_[f]()}});kb.withSourceHandlers(Qa);Qa.nativeSourceHandler={};Qa.nativeSourceHandler.canPlayType=function(f){try{return Qa.TEST_VID.canPlayType(f)}catch(c){return""}};Qa.nativeSourceHandler.canHandleSource=function(f,c){return f.type?Qa.nativeSourceHandler.canPlayType(f.type):f.src?(f=sf(f.src),Qa.nativeSourceHandler.canPlayType("video/"+f)):""};Qa.nativeSourceHandler.handleSource=function(f,c,b){c.setSrc(f.src)};Qa.nativeSourceHandler.dispose=function(){};Qa.registerSourceHandler(Qa.nativeSourceHandler);
kb.registerTech("Html5",Qa);var si="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),Of={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Pf="tiny xsmall small medium large xlarge huge".split(" "),ke={};Pf.forEach(function(f){var c="x"===f.charAt(0)?"x-"+f.substring(1):f;ke[f]="vjs-layout-"+c});var pl={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity},rb=function(f){function c(a,
e,h){a.id=a.id||e.id||"vjs_video_"+zc++;e=w(c.getTagSettings(a),e);e.initChildren=!1;e.createEl=!1;e.evented=!1;e.reportTouchActivity=!1;if(!e.language)if("function"===typeof a.closest){var l=a.closest("[lang]");l&&l.getAttribute&&(e.language=l.getAttribute("lang"))}else for(l=a;l&&1===l.nodeType;){if(ea(l).hasOwnProperty("lang")){e.language=l.getAttribute("lang");break}l=l.parentNode}var g=f.call(this,null,e,h)||this;g.boundDocumentFullscreenChange_=$a(Ya(g),g.documentFullscreenChange_);g.boundFullWindowOnEscKey_=
$a(Ya(g),g.fullWindowOnEscKey);g.isFullscreen_=!1;g.log=nh(g.id_);g.fsApi_=mf;g.isPosterFromTech_=!1;g.queuedCallbacks_=[];g.isReady_=!1;g.hasStarted_=!1;g.userActive_=!1;if(!g.options_||!g.options_.techOrder||!g.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");g.tag=a;g.tagAttributes=a&&ea(a);g.language(g.options_.language);if(e.languages){var n={};Object.getOwnPropertyNames(e.languages).forEach(function(d){n[d.toLowerCase()]=
e.languages[d]});g.languages_=n}else g.languages_=c.prototype.options_.languages;g.resetCache_();g.poster_=e.poster||"";g.controls_=!!e.controls;a.controls=!1;a.removeAttribute("controls");g.changingSrc_=!1;g.playCallbacks_=[];g.playTerminatedQueue_=[];a.hasAttribute("autoplay")?g.autoplay(!0):g.autoplay(g.options_.autoplay);e.plugins&&Object.keys(e.plugins).forEach(function(d){if("function"!==typeof g[d])throw Error('plugin "'+d+'" does not exist');});g.scrubbing_=!1;g.el_=g.createEl();ka(Ya(g),
{eventBusKey:"el_"});g.fsApi_.requestFullscreen&&(tb(C,g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_),g.on(g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_));if(g.fluid_)g.on("playerreset",g.updateStyleEl_);h=xa(g.options_);e.plugins&&Object.keys(e.plugins).forEach(function(d){g[d](e.plugins[d])});g.options_.playerOptions=h;g.middleware_=[];g.initChildren();g.isAudio("audio"===a.nodeName.toLowerCase());g.controls()?g.addClass("vjs-controls-enabled"):g.addClass("vjs-controls-disabled");
g.el_.setAttribute("role","region");g.isAudio()?g.el_.setAttribute("aria-label",g.localize("Audio Player")):g.el_.setAttribute("aria-label",g.localize("Video Player"));g.isAudio()&&g.addClass("vjs-audio");g.flexNotSupported_()&&g.addClass("vjs-no-flex");bd&&g.addClass("vjs-touch-enabled");hc||g.addClass("vjs-workinghover");c.players[g.id_]=Ya(g);g.addClass("vjs-v7");g.userActive(!0);g.reportUserActivity();g.one("play",g.listenForUserActivity_);g.on("stageclick",g.handleStageClick_);g.on("keydown",
g.handleKeyDown);g.breakpoints(g.options_.breakpoints);g.responsive(g.options_.responsive);return g}Na(c,f);var b=c.prototype;b.dispose=function(){var a=this;this.trigger("dispose");this.off("dispose");B(C,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);B(C,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);c.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);
this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Qe[this.id()]=null;Kb.names.forEach(function(e){(e=a[Kb[e].getterName]())&&e.off&&e.off()});f.prototype.dispose.call(this)};b.createEl=function(){var a=this.tag,e=this.playerElIngest_=a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player"),h="video-js"===this.tag.tagName.toLowerCase();
if(e)var l=this.el_=a.parentNode;else h||(l=this.el_=f.prototype.createEl.call(this,"div"));var g=ea(a);if(h){l=this.el_=a;for(a=this.tag=C.createElement("video");l.children.length;)a.appendChild(l.firstChild);Ca(l,"video-js")||Ka(l,"video-js");l.appendChild(a);e=this.playerElIngest_=l;Object.keys(l).forEach(function(p){try{a[p]=l[p]}catch(q){}})}a.setAttribute("tabindex","-1");g.tabindex="-1";if(xd||rc&&Bh)a.setAttribute("role","application"),g.role="application";a.removeAttribute("width");a.removeAttribute("height");
"width"in g&&delete g.width;"height"in g&&delete g.height;Object.getOwnPropertyNames(g).forEach(function(p){h&&"class"===p||l.setAttribute(p,g[p]);h&&a.setAttribute(p,g[p])});a.playerId=a.id;a.id+="_html5_api";a.className="vjs-tech";a.player=l.player=this;this.addClass("vjs-paused");if(!0!==r.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=qh("vjs-styles-dimensions");var n=Ac(".vjs-styles-defaults"),d=Ac("head");d.insertBefore(this.styleEl_,n?n.nextSibling:d.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);
this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);n=a.getElementsByTagName("a");for(d=0;d<n.length;d++){var k=n.item(d);Ka(k,"vjs-hidden");k.setAttribute("hidden","hidden")}a.initNetworkState_=a.networkState;a.parentNode&&!e&&a.parentNode.insertBefore(l,a);ia(a,l);this.children_.unshift(a);this.el_.setAttribute("lang",this.language_);return this.el_=
l};b.crossOrigin=function(a){if(!a)return this.techGet_("crossOrigin");"anonymous"!==a&&"use-credentials"!==a?ab.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+a+'"'):this.techCall_("setCrossOrigin",a)};b.width=function(a){return this.dimension("width",a)};b.height=function(a){return this.dimension("height",a)};b.dimension=function(a,e){var h=a+"_";if(void 0===e)return this[h]||0;if(""===e||"auto"===e)this[h]=void 0,this.updateStyleEl_();else{var l=parseFloat(e);isNaN(l)?ab.error('Improper value "'+
e+'" supplied for for '+a):(this[h]=l,this.updateStyleEl_())}};b.fluid=function(a){if(void 0===a)return!!this.fluid_;this.fluid_=!!a;Ic(this)&&this.off("playerreset",this.updateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),Ak(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()};b.fill=function(a){if(void 0===a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")};b.aspectRatio=function(a){if(void 0===
a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()};b.updateStyleEl_=function(){if(!0===r.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,e="number"===typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(0<=a&&(h.width=a),0<=e&&(h.height=e))}else{a=(void 0!==
this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var l=a[1]/a[0];a=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300;e=void 0!==this.height_?this.height_:a*l;h=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(h);rh(this.styleEl_,"\n      ."+h+" {\n        width: "+a+"px;\n        height: "+e+"px;\n      }\n\n      ."+h+
".vjs-fluid {\n        padding-top: "+100*l+"%;\n      }\n    ")}};b.loadTech_=function(a,e){var h=this;this.tech_&&this.unloadTech_();var l=ob(a),g=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==l&&this.tag&&(kb.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=l;this.isReady_=!1;var n="string"===typeof this.autoplay()?!1:this.autoplay(),d={source:e,autoplay:n,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+
"_"+g+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Kb.names.forEach(function(k){k=Kb[k];d[k.getterName]=h[k.privateName]});w(d,this.options_[l]);w(d,this.options_[g]);w(d,
this.options_[a.toLowerCase()]);this.tag&&(d.tag=this.tag);e&&e.src===this.cache_.src&&0<this.cache_.currentTime&&(d.startTime=this.cache_.currentTime);a=kb.getTech(a);if(!a)throw Error("No Tech named '"+l+"' exists! '"+l+"' should be registered using videojs.registerTech()'");this.tech_=new a(d);this.tech_.ready($a(this,this.handleTechReady_),!0);Dh.jsonToTextTracks(this.textTracksJson_||[],this.tech_);si.forEach(function(k){h.on(h.tech_,k,h["handleTech"+ob(k)+"_"])});Object.keys(Of).forEach(function(k){h.on(h.tech_,
k,function(p){if(0===h.tech_.playbackRate()&&h.tech_.seeking())h.queuedCallbacks_.push({callback:h["handleTech"+Of[k]+"_"].bind(h),event:p});else h["handleTech"+Of[k]+"_"](p)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);
this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);this.on(this.tech_,
"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===l&&this.tag||ia(this.tech_.el(),this.el());this.tag&&
(this.tag=this.tag.player=null)};b.unloadTech_=function(){var a=this;Kb.names.forEach(function(e){e=Kb[e];a[e.privateName]=a[e.getterName]()});this.textTracksJson_=Dh.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};b.tech=function(a){void 0===a&&ab.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");
return this.tech_};b.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};b.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);
this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};b.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};b.handleTechLoadStart_=function(){this.removeClass("vjs-ended");
this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};b.manualAutoplay_=function(a){var e=this;if(this.tech_&&"string"===typeof a){var h=function(){var g=e.muted();e.muted(!0);var n=function(){e.muted(g)};e.playTerminatedQueue_.push(n);var d=e.play();if(Q(d))return d["catch"](n)};if("any"===a&&!0!==this.muted()){var l=
this.play();Q(l)&&(l=l["catch"](h))}else l="muted"===a&&!0!==this.muted()?h():this.play();if(Q(l))return l.then(function(){e.trigger({type:"autoplay-success",autoplay:a})})["catch"](function(g){e.trigger({type:"autoplay-failure",autoplay:a})})}};b.updateSourceCaches_=function(a){void 0===a&&(a="");var e=a,h="";"string"!==typeof e&&(e=a.src,h=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];e&&!h&&(h=Sk(this,e));this.cache_.source=xa({},a,{src:e,type:h});
a=this.cache_.sources.filter(function(k){return k.src&&k.src===e});h=[];for(var l=this.$$("source"),g=[],n=0;n<l.length;n++){var d=ea(l[n]);h.push(d);d.src&&d.src===e&&g.push(d.src)}g.length&&!a.length?this.cache_.sources=h:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=e};b.handleTechSourceset_=function(a){var e=this;if(!this.changingSrc_){var h=function(n){return e.updateSourceCaches_(n)},l=this.currentSource().src,g=a.src;l&&!/^blob:/.test(l)&&/^blob:/.test(g)&&(!this.lastSource_||
this.lastSource_.tech!==g&&this.lastSource_.player!==l)&&(h=function(){});h(g);a.src||this.tech_.any(["sourceset","loadstart"],function(n){"sourceset"!==n.type&&(n=e.techGet("currentSrc"),e.lastSource_.tech=n,e.updateSourceCaches_(n))})}this.lastSource_={player:this.currentSource().src,tech:a.src};this.trigger({src:a.src,type:"sourceset"})};b.hasStarted=function(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):
this.removeClass("vjs-has-started"))};b.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")};b.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};b.handleTechWaiting_=function(){var a=
this;this.addClass("vjs-waiting");this.trigger("waiting");var e=this.currentTime();this.on("timeupdate",function l(){e!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",l))})};b.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};b.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};b.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};b.handleTechSeeking_=function(){this.addClass("vjs-seeking");
this.trigger("seeking")};b.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};b.handleTechFirstPlay_=function(){this.options_.starttime&&(ab.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};b.handleTechPause_=function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};b.handleTechEnded_=
function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};b.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};b.handleTechClick_=function(a){Ub(a)&&this.controls_&&(this.paused()?ba(this.play()):this.pause())};b.handleTechDoubleClick_=function(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(a.target)})||void 0!==
this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};b.handleTechTap_=function(){this.userActive(!this.userActive())};b.handleTechTouchStart_=function(){this.userWasActive=
this.userActive()};b.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};b.handleTechTouchEnd_=function(a){a.preventDefault()};b.handleStageClick_=function(){this.reportUserActivity()};b.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};b.documentFullscreenChange_=function(a){a=a.target.player;if(!a||a===this){a=this.el();var e=C[this.fsApi_.fullscreenElement]===a;!e&&a.matches?e=a.matches(":"+this.fsApi_.fullscreen):
!e&&a.msMatchesSelector&&(e=a.msMatchesSelector(":"+this.fsApi_.fullscreen));this.isFullscreen(e)}};b.handleTechFullscreenChange_=function(a,e){e&&(e.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(e.isFullscreen))};b.handleTechFullscreenError_=function(a,e){this.trigger("fullscreenerror",e)};b.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")};b.handleTechEnterPictureInPicture_=
function(a){this.isInPictureInPicture(!0)};b.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)};b.handleTechError_=function(){var a=this.tech_.error();this.error(a)};b.handleTechTextData_=function(){var a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)};b.getCache=function(){return this.cache_};b.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),
media:null,src:"",source:{},sources:[],volume:1}};b.techCall_=function(a,e){this.ready(function(){if(a in Qk)return this.tech_[a](this.middleware_.reduce(Pe(a),e));if(a in Nh)return Ig(this.middleware_,this.tech_,a,e);try{if(this.tech_)this.tech_[a](e)}catch(h){throw ab(h),h;}},!0)};b.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in Pk){var e=this.tech_;return this.middleware_.reduceRight(Pe(a),e[a]())}if(a in Nh)return Ig(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(h){if(void 0===
this.tech_[a])throw ab("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",h),h;if("TypeError"===h.name)throw ab("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",h),this.tech_.isReady_=!1,h;ab(h);throw h;}}};b.play=function(){var a=this,e=this.options_.Promise||r.Promise;return e?new e(function(h){a.play_(h)}):this.play_()};b.play_=function(a){var e=this;void 0===a&&(a=ba);this.playCallbacks_.push(a);a=!(this.changingSrc_||!this.src()&&
!this.currentSrc());this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&a?(a=this.techGet_("play"),null===a?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)):(this.waitToPlay_=function(h){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),a||!lf&&!hc||this.load())};b.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];a.forEach(function(e){e()})};b.runPlayCallbacks_=function(a){var e=
this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];e.forEach(function(h){h(a)})};b.pause=function(){this.techCall_("pause")};b.paused=function(){return!1===this.techGet_("paused")?!1:!0};b.played=function(){return this.techGet_("played")||Xa(0,0)};b.scrubbing=function(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};b.currentTime=function(a){if("undefined"!==typeof a)0>a&&(a=0),
this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),this.cache_.initTime=0):(this.cache_.initTime=a,this.off("canplay",this.applyInitTime_),this.one("canplay",this.applyInitTime_));else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};b.applyInitTime_=function(){this.currentTime(this.cache_.initTime)};b.duration=function(a){if(void 0===a)return void 0!==this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);
0>a&&(a=Infinity);a!==this.cache_.duration&&(this.cache_.duration=a,Infinity===a?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))};b.remainingTime=function(){return this.duration()-this.currentTime()};b.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};b.buffered=function(){var a=this.techGet_("buffered");a&&a.length||(a=Xa(0,0));return a};b.bufferedPercent=function(){return x(this.buffered(),this.duration())};
b.bufferedEnd=function(){var a=this.buffered(),e=this.duration();a=a.end(a.length-1);a>e&&(a=e);return a};b.volume=function(a){if(void 0!==a)a=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a};b.muted=function(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1};b.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",
a):this.techGet_("defaultMuted")||!1};b.lastVolume_=function(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume};b.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};b.isFullscreen=function(a){if(void 0!==a){var e=this.isFullscreen_;this.isFullscreen_=!!a;this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange");this.toggleFullscreenClass_()}else return this.isFullscreen_};b.requestFullscreen=function(a){var e=this.options_.Promise||
r.Promise;if(e){var h=this;return new e(function(l,g){function n(){h.off("fullscreenerror",k);h.off("fullscreenchange",d)}function d(){n();l()}function k(q,t){n();g(t)}h.one("fullscreenchange",d);h.one("fullscreenerror",k);var p=h.requestFullscreenHelper_(a);if(p)return p.then(n,n),p})}return this.requestFullscreenHelper_()};b.requestFullscreenHelper_=function(a){var e=this;if(!this.fsApi_.prefixed){var h=this.options_.fullscreen&&this.options_.fullscreen.options||{};void 0!==a&&(h=a)}if(this.fsApi_.requestFullscreen)return(a=
this.el_[this.fsApi_.requestFullscreen](h))&&a.then(function(){return e.isFullscreen(!0)},function(){return e.isFullscreen(!1)}),a;this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()};b.exitFullscreen=function(){var a=this.options_.Promise||r.Promise;if(a){var e=this;return new a(function(h,l){function g(){e.off("fullscreenerror",d);e.off("fullscreenchange",n)}function n(){g();h()}function d(p,q){g();l(q)}e.one("fullscreenchange",n);e.one("fullscreenerror",d);
var k=e.exitFullscreenHelper_();if(k)return k.then(g,g),k})}return this.exitFullscreenHelper_()};b.exitFullscreenHelper_=function(){var a=this;if(this.fsApi_.requestFullscreen){var e=C[this.fsApi_.exitFullscreen]();e&&e.then(function(){return a.isFullscreen(!1)});return e}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()};b.enterFullWindow=function(){this.isFullscreen(!0);this.isFullWindow=!0;this.docOrigOverflow=C.documentElement.style.overflow;tb(C,"keydown",
this.boundFullWindowOnEscKey_);C.documentElement.style.overflow="hidden";Ka(C.body,"vjs-full-window");this.trigger("enterFullWindow")};b.fullWindowOnEscKey=function(a){Wa.isEventKey(a,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};b.exitFullWindow=function(){this.isFullscreen(!1);this.isFullWindow=!1;B(C,"keydown",this.boundFullWindowOnEscKey_);C.documentElement.style.overflow=this.docOrigOverflow;F(C.body,"vjs-full-window");this.trigger("exitFullWindow")};b.isInPictureInPicture=
function(a){if(void 0!==a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_};b.requestPictureInPicture=function(){if("pictureInPictureEnabled"in C)return this.techGet_("requestPictureInPicture")};b.exitPictureInPicture=function(){if("pictureInPictureEnabled"in C)return C.exitPictureInPicture()};b.handleKeyDown=function(a){var e=this.options_.userActions;if(e&&e.hotkeys){var h=this.el_.ownerDocument.activeElement;var l=h.tagName.toLowerCase();
if(h.isContentEditable)h=!0;else{var g="button checkbox hidden radio reset submit".split(" ");h="input"===l?-1===g.indexOf(h.type):-1!==["textarea"].indexOf(l)}h||("function"===typeof e.hotkeys?e.hotkeys.call(this,a):this.handleHotkeys(a))}};b.handleHotkeys=function(a){var e=this.options_.userActions?this.options_.userActions.hotkeys:{},h=e.fullscreenKey,l=e.muteKey;l=void 0===l?function(g){return Wa.isEventKey(g,"m")}:l;e=e.playPauseKey;e=void 0===e?function(g){return Wa.isEventKey(g,"k")||Wa.isEventKey(g,
"Space")}:e;(void 0===h?function(g){return Wa.isEventKey(g,"f")}:h).call(this,a)?(a.preventDefault(),a.stopPropagation(),h=Ea.getComponent("FullscreenToggle"),!1!==C[this.fsApi_.fullscreenEnabled]&&h.prototype.handleClick.call(this,a)):l.call(this,a)?(a.preventDefault(),a.stopPropagation(),Ea.getComponent("MuteToggle").prototype.handleClick.call(this,a)):e.call(this,a)&&(a.preventDefault(),a.stopPropagation(),Ea.getComponent("PlayToggle").prototype.handleClick.call(this,a))};b.canPlayType=function(a){for(var e,
h=0,l=this.options_.techOrder;h<l.length;h++){e=l[h];var g=kb.getTech(e);g||(g=Ea.getComponent(e));if(!g)ab.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.');else if(g.isSupported()&&(e=g.canPlayType(a)))return e}return""};b.selectSource=function(a){var e=this,h=this.options_.techOrder.map(function(d){return[d,kb.getTech(d)]}).filter(function(d){var k=d[0];if(d=d[1])return d.isSupported();ab.error('The "'+k+'" tech is undefined. Skipped browser support check for that tech.');
return!1}),l=function(d,k,p){var q;d.some(function(t){return k.some(function(D){if(q=p(t,D))return!0})});return q},g=function(d){return function(k,p){return d(p,k)}},n=function(d,k){var p=d[0];if(d[1].canPlaySource(k,e.options_[p.toLowerCase()]))return{source:k,tech:p}};return(this.options_.sourceOrder?l(a,h,g(n)):l(h,a,n))||!1};b.src=function(a){var e=this;if("undefined"===typeof a)return this.cache_.src||"";var h=Tk(a);h.length?(this.changingSrc_=!0,this.cache_.sources=h,this.updateSourceCaches_(h[0]),
lk(this,h[0],function(l,g){e.middleware_=g;e.cache_.sources=h;e.updateSourceCaches_(l);if(e.src_(l)){if(1<h.length)return e.src(h.slice(1));e.changingSrc_=!1;e.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);e.triggerReady()}else mk(g,e.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)};b.src_=function(a){var e=this,h=this.selectSource([a]);if(!h)return!0;if(!Bk(h.tech,this.techName_))return this.changingSrc_=
!0,this.loadTech_(h.tech,h.source),this.tech_.ready(function(){e.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src);this.changingSrc_=!1},!0);return!1};b.load=function(){this.techCall_("load")};b.reset=function(){var a=this,e=this.options_.Promise||r.Promise;this.paused()||!e?this.doReset_():(e=this.play(),ba(e.then(function(){return a.doReset_()})))};b.doReset_=function(){this.tech_&&this.tech_.clearTracks("text");
this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();Ic(this)&&this.trigger("playerreset")};b.resetControlBarUI_=function(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};b.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,e=a.durationDisplay;a=a.remainingTimeDisplay;e&&e.updateContent();a&&a.updateContent()};b.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate());
this.handleTechRateChange_()};b.resetVolumeBar_=function(){this.volume(1);this.trigger("volumechange")};b.currentSources=function(){var a=this.currentSource(),e=[];0!==Object.keys(a).length&&e.push(a);return this.cache_.sources||e};b.currentSource=function(){return this.cache_.source||{}};b.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};b.currentType=function(){return this.currentSource()&&this.currentSource().type||""};b.preload=function(a){if(void 0!==a)this.techCall_("setPreload",
a),this.options_.preload=a;else return this.techGet_("preload")};b.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;if("string"===typeof a&&/(any|play|muted)/.test(a)){this.options_.autoplay=a;this.manualAutoplay_(a);var e=!1}else this.options_.autoplay=a?!0:!1;e="undefined"===typeof e?this.options_.autoplay:e;this.tech_&&this.techCall_("setAutoplay",e)};b.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")};
b.loop=function(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")};b.poster=function(a){if(void 0===a)return this.poster_;a||(a="");a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))};b.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=
!0,this.trigger("posterchange"))}};b.controls=function(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),
this.usingNativeControls()||this.removeTechControlsListeners_()))};b.usingNativeControls=function(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a;this.usingNativeControls_!==a&&((this.usingNativeControls_=a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};b.error=function(a){if(void 0===a)return this.error_||null;if(this.options_.suppressNotSupportedError&&a&&4===a.code){var e=
function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],e);this.one("loadstart",function(){this.off(["click","touchstart"],e)})}else null===a?(this.error_=a,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new G(a),this.addClass("vjs-error"),ab.error("(CODE:"+this.error_.code+" "+G.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};b.reportUserActivity=function(a){this.userActivity_=
!0};b.userActive=function(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};b.listenForUserActivity_=function(){var a,
e,h,l=$a(this,this.reportUserActivity),g=function(d){l();this.clearInterval(a)};this.on("mousedown",function(){l();this.clearInterval(a);a=this.setInterval(l,250)});this.on("mousemove",function(d){if(d.screenX!==e||d.screenY!==h)e=d.screenX,h=d.screenY,l()});this.on("mouseup",g);this.on("mouseleave",g);!(g=this.getChild("controlBar"))||hc||Cc||(g.on("mouseenter",function(d){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0}),
g.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",l);this.on("keyup",l);var n;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(n);var d=this.options_.inactivityTimeout;0>=d||(n=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))}},250)};b.playbackRate=function(a){if(void 0!==a)this.techCall_("setPlaybackRate",a);else return this.tech_&&
this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};b.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1};b.isAudio=function(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_};b.addTextTrack=function(a,e,h){if(this.tech_)return this.tech_.addTextTrack(a,e,h)};b.addRemoteTextTrack=function(a,e){if(this.tech_)return this.tech_.addRemoteTextTrack(a,
e)};b.removeRemoteTextTrack=function(a){void 0===a&&(a={});var e=a.track;e||(e=a);if(this.tech_)return this.tech_.removeRemoteTextTrack(e)};b.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")};b.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};b.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};b.language=function(a){if(void 0===a)return this.language_;this.language_=String(a).toLowerCase()};
b.languages=function(){return xa(c.prototype.options_.languages,this.languages_)};b.toJSON=function(){var a=xa(this.options_),e=a.tracks;a.tracks=[];for(var h=0;h<e.length;h++){var l=e[h];l=xa(l);l.player=void 0;a.tracks[h]=l}return a};b.createModal=function(a,e){var h=this;e=e||{};e.content=a||"";var l=new dd(this,e);this.addChild(l);l.on("dispose",function(){h.removeChild(l)});l.open();return l};b.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),e=this.currentWidth(),
h=0;h<Pf.length;h++){var l=Pf[h];if(e<=this.breakpoints_[l]){if(a===l)break;a&&this.removeClass(ke[a]);this.addClass(ke[l]);this.breakpoint_=l;break}}};b.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="";a&&this.removeClass(a)};b.breakpoints=function(a){if(void 0===a)return w(this.breakpoints_);this.breakpoint_="";this.breakpoints_=w({},pl,a);this.updateCurrentBreakpoint_();return w(this.breakpoints_)};b.responsive=function(a){if(void 0===a)return this.responsive_;
a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a};b.currentBreakpoint=function(){return this.breakpoint_};b.currentBreakpointClass=function(){return ke[this.breakpoint_]||""};b.loadMedia=function(a,e){var h=this;if(a&&"object"===typeof a){this.reset();this.cache_.media=xa(a);a=this.cache_.media;var l=a.poster,g=a.src,
n=a.textTracks;!a.artwork&&l&&(this.cache_.media.artwork=[{src:l,type:Ud(l)}]);g&&this.src(g);l&&this.poster(l);Array.isArray(n)&&n.forEach(function(d){return h.addRemoteTextTrack(d,!1)});this.ready(e)}};b.getMedia=function(){if(!this.cache_.media){var a=this.poster(),e=this.currentSources(),h=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}});e={src:e,textTracks:h};a&&(e.poster=a,e.artwork=[{src:e.poster,type:Ud(e.poster)}]);
return e}return xa(this.cache_.media)};c.getTagSettings=function(a){var e={sources:[],tracks:[]},h=ea(a),l=h["data-setup"];Ca(a,"vjs-fill")&&(h.fill=!0);Ca(a,"vjs-fluid")&&(h.fluid=!0);if(null!==l){var g=null;try{var n=JSON.parse(l||"{}",void 0)}catch(d){g=d}n=[g,n];l=n[0];n=n[1];l&&ab.error(l);w(h,n)}w(e,h);if(a.hasChildNodes())for(a=a.childNodes,h=0,l=a.length;h<l;h++)n=a[h],g=n.nodeName.toLowerCase(),"source"===g?e.sources.push(ea(n)):"track"===g&&e.tracks.push(ea(n));return e};b.flexNotSupported_=
function(){var a=C.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)};return c}(Ea);Kb.names.forEach(function(f){var c=Kb[f];rb.prototype[c.getterName]=function(){if(this.tech_)return this.tech_[c.getterName]();this[c.privateName]=this[c.privateName]||new c.ListClass;return this[c.privateName]}});rb.prototype.crossorigin=rb.prototype.crossOrigin;rb.players={};var Bd=r.navigator;rb.prototype.options_=
{techOrder:kb.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:Bd&&(Bd.languages&&Bd.languages[0]||Bd.userLanguage||Bd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1};["ended",
"seeking","seekable","networkState","readyState"].forEach(function(f){rb.prototype[f]=function(){return this.techGet_(f)}});si.forEach(function(f){rb.prototype["handleTech"+ob(f)+"_"]=function(){return this.trigger(f)}});Ea.registerComponent("Player",rb);var ti=y(function(f){function c(b,a){f.exports=c=Object.setPrototypeOf||function(e,h){e.__proto__=h;return e};return c(b,a)}f.exports=c}),ql=function(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===
typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}},rl=y(function(f){function c(b,a,e){ql()?f.exports=c=Reflect.construct:f.exports=c=function(h,l,g){var n=[null];n.push.apply(n,l);h=new (Function.bind.apply(h,n));g&&ti(h,g.prototype);return h};return c.apply(null,arguments)}f.exports=c}),sc={},le=function(f){return sc.hasOwnProperty(f)?sc[f]:void 0},me=function(f,c,b){b=(b?"before":"")+"pluginsetup";f.trigger(b,c);f.trigger(b+
":"+c.name,c)},sl=function(f,c){var b=function(){me(this,{name:f,plugin:c,instance:null},!0);var a=c.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[f]=!0;me(this,{name:f,plugin:c,instance:a});return a};Object.keys(c).forEach(function(a){b[a]=c[a]});return b},ui=function(f,c){c.prototype.name=f;return function(){me(this,{name:f,plugin:c,instance:null},!0);for(var b=arguments.length,a=Array(b),e=0;e<b;e++)a[e]=arguments[e];var h=rl(c,[this].concat(a));this[f]=
function(){return h};me(this,h.getEventHash());return h}},mc=function(){function f(b){if(this.constructor===f)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=b;ka(this);delete this.trigger;qa(this,this.constructor.defaultState);var a=this.name;b.activePlugins_=b.activePlugins_||{};b.activePlugins_[a]=!0;this.dispose=$a(this,this.dispose);b.on("dispose",this.dispose)}var c=f.prototype;c.version=function(){return this.constructor.VERSION};c.getEventHash=function(b){void 0===
b&&(b={});b.name=this.name;b.plugin=this.constructor;b.instance=this;return b};c.trigger=function(b,a){void 0===a&&(a={});return K(this.eventBusEl_,b,this.getEventHash(a))};c.handleStateChanged=function(b){};c.dispose=function(){var b=this.name,a=this.player;this.trigger("dispose");this.off();a.off("dispose",this.dispose);a.activePlugins_[b]=!1;this.player=this.state=null;a[b]=ui(b,sc[b])};f.isBasic=function(b){b="string"===typeof b?le(b):b;return"function"===typeof b&&!f.prototype.isPrototypeOf(b.prototype)};
f.registerPlugin=function(b,a){if("string"!==typeof b)throw Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(sc.hasOwnProperty(b))ab.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(rb.prototype.hasOwnProperty(b))throw Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!==typeof a)throw Error('Illegal plugin for "'+b+'", must be a function, was '+typeof a+".");sc[b]=
a;"plugin"!==b&&(f.isBasic(a)?rb.prototype[b]=sl(b,a):rb.prototype[b]=ui(b,a));return a};f.deregisterPlugin=function(b){if("plugin"===b)throw Error("Cannot de-register base plugin.");sc.hasOwnProperty(b)&&(delete sc[b],delete rb.prototype[b])};f.getPlugins=function(b){void 0===b&&(b=Object.keys(sc));var a;b.forEach(function(e){var h=le(e);h&&(a=a||{},a[e]=h)});return a};f.getPluginVersion=function(b){return(b=le(b))&&b.VERSION||""};return f}();mc.getPlugin=le;mc.BASE_PLUGIN_NAME="plugin";mc.registerPlugin("plugin",
mc);rb.prototype.usingPlugin=function(f){return!!this.activePlugins_&&!0===this.activePlugins_[f]};rb.prototype.hasPlugin=function(f){return!!sc.hasOwnProperty(f)};var tl=function(f,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,writable:!0,configurable:!0}});c&&ti(f,c)},Lg=function(f){return 0===f.indexOf("#")?f.slice(1):f};la.hooks_={};la.hooks=function(f,c){la.hooks_[f]=
la.hooks_[f]||[];c&&(la.hooks_[f]=la.hooks_[f].concat(c));return la.hooks_[f]};la.hook=function(f,c){la.hooks(f,c)};la.hookOnce=function(f,c){la.hooks(f,[].concat(c).map(function(b){return function e(){la.removeHook(f,e);return b.apply(void 0,arguments)}}))};la.removeHook=function(f,c){c=la.hooks(f).indexOf(c);if(-1>=c)return!1;la.hooks_[f]=la.hooks_[f].slice();la.hooks_[f].splice(c,1);return!0};if(!0!==r.VIDEOJS_NO_DYNAMIC_STYLE&&U()){var ne=Ac(".vjs-styles-defaults");if(!ne){ne=qh("vjs-styles-defaults");
var Qf=Ac("head");Qf&&Qf.insertBefore(ne,Qf.firstChild);rh(ne,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}yc(1,la);la.VERSION="7.8.4";la.options=rb.prototype.options_;la.getPlayers=function(){return rb.players};la.getPlayer=function(f){var c=rb.players;if("string"===typeof f){f=Lg(f);var b=c[f];if(b)return b;f=Ac("#"+f)}if(T(f)&&(b=f,f=b.player,b=b.playerId,f||c[b]))return f||c[b]};la.getAllPlayers=
function(){return Object.keys(rb.players).map(function(f){return rb.players[f]}).filter(Boolean)};la.players=rb.players;la.getComponent=Ea.getComponent;la.registerComponent=function(f,c){kb.isTech(c)&&ab.warn("The "+f+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");Ea.registerComponent.call(Ea,f,c)};la.getTech=kb.getTech;la.registerTech=kb.registerTech;la.use=function(f,c){Kc[f]=Kc[f]||[];Kc[f].push(c)};Object.defineProperty(la,"middleware",
{value:{},writeable:!1,enumerable:!0});Object.defineProperty(la.middleware,"TERMINATOR",{value:Td,writeable:!1,enumerable:!0});la.browser=Ek;la.TOUCH_ENABLED=bd;la.extend=function(f,c){void 0===c&&(c={});var b=function(){f.apply(this,arguments)},a={};"object"===typeof c?(c.constructor!==Object.prototype.constructor&&(b=c.constructor),a=c):"function"===typeof c&&(b=c);tl(b,f);f&&(b.super_=f);for(var e in a)a.hasOwnProperty(e)&&(b.prototype[e]=a[e]);return b};la.mergeOptions=xa;la.bind=$a;la.registerPlugin=
mc.registerPlugin;la.deregisterPlugin=mc.deregisterPlugin;la.plugin=function(f,c){ab.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return mc.registerPlugin(f,c)};la.getPlugins=mc.getPlugins;la.getPlugin=mc.getPlugin;la.getPluginVersion=mc.getPluginVersion;la.addLanguage=function(f,c){var b;f=(""+f).toLowerCase();la.options.languages=xa(la.options.languages,(b={},b[f]=c,b));return la.options.languages[f]};la.log=ab;la.createLogger=nh;la.createTimeRange=la.createTimeRanges=
Xa;la.formatTime=Uc;la.setFormatTime=function(f){Se=f};la.resetFormatTime=function(){Se=Qh};la.parseUrl=rf;la.isCrossOrigin=ge;la.EventTarget=vb;la.on=tb;la.one=R;la.off=B;la.trigger=K;la.xhr=Ia;la.TextTrack=yd;la.AudioTrack=Kh;la.VideoTrack=Lh;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(f){la[f]=function(){ab.warn("videojs."+f+"() is deprecated; use videojs.dom."+f+"() instead");return ph[f].apply(null,
arguments)}});la.computedStyle=E;la.dom=ph;la.url=Mk;la.defineLazyProperty=Nf;var Rf=y(function(f,c){(function(b){var a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,e=/^([^\/?#]*)(.*)$/,h=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,g={buildAbsoluteURL:function(n,d,k){k=k||{};n=n.trim();d=d.trim();if(!d){if(!k.alwaysNormalize)return n;k=g.parseURL(n);if(!k)throw Error("Error trying to parse base URL.");k.path=g.normalizePath(k.path);return g.buildURLFromParts(k)}var p=
g.parseURL(d);if(!p)throw Error("Error trying to parse relative URL.");if(p.scheme){if(!k.alwaysNormalize)return d;p.path=g.normalizePath(p.path);return g.buildURLFromParts(p)}d=g.parseURL(n);if(!d)throw Error("Error trying to parse base URL.");!d.netLoc&&d.path&&"/"!==d.path[0]&&(n=e.exec(d.path),d.netLoc=n[1],d.path=n[2]);d.netLoc&&!d.path&&(d.path="/");n={scheme:d.scheme,netLoc:p.netLoc,path:null,params:p.params,query:p.query,fragment:p.fragment};p.netLoc||(n.netLoc=d.netLoc,"/"!==p.path[0]&&(p.path?
(d=d.path,d=d.substring(0,d.lastIndexOf("/")+1)+p.path,n.path=g.normalizePath(d)):(n.path=d.path,p.params||(n.params=d.params,p.query||(n.query=d.query)))));null===n.path&&(n.path=k.alwaysNormalize?g.normalizePath(p.path):p.path);return g.buildURLFromParts(n)},parseURL:function(n){return(n=a.exec(n))?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(n){for(n=n.split("").reverse().join("").replace(h,"");n.length!==(n=n.replace(l,
"")).length;);return n.split("").reverse().join("")},buildURLFromParts:function(n){return n.scheme+n.netLoc+n.path+n.params+n.query+n.fragment}};f.exports=g})()}),Sf=function(){function f(){this.listeners={}}var c=f.prototype;c.on=function(b,a){this.listeners[b]||(this.listeners[b]=[]);this.listeners[b].push(a)};c.off=function(b,a){if(!this.listeners[b])return!1;a=this.listeners[b].indexOf(a);this.listeners[b].splice(a,1);return-1<a};c.trigger=function(b){var a=this.listeners[b],e;if(a)if(2===arguments.length){var h=
a.length;for(e=0;e<h;++e)a[e].call(this,arguments[1])}else{var l=Array.prototype.slice.call(arguments,1);h=a.length;for(e=0;e<h;++e)a[e].apply(this,l)}};c.dispose=function(){this.listeners={}};c.pipe=function(b){this.on("data",function(a){b.push(a)})};return f}(),ul=function(f){function c(){var b=f.call(this)||this;b.buffer="";return b}Ue(c,f);c.prototype.push=function(b){this.buffer+=b;for(b=this.buffer.indexOf("\n");-1<b;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),
this.buffer=this.buffer.substring(b+1)};return c}(Sf),Cd=function(f){f=f.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var c={},b=f.length,a;b--;)""!==f[b]&&(a=/([^=]*)=(.*)/.exec(f[b]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),c[a[0]]=a[1]);return c},vl=function(f){function c(){var a=f.call(this)||this;a.customParsers=[];a.tagMappers=[];return a}Ue(c,f);var b=c.prototype;b.push=function(a){var e=this,h,l;a=a.trim();
0!==a.length&&("#"!==a[0]?this.trigger("data",{type:"uri",uri:a}):this.tagMappers.reduce(function(g,n){n=n(a);return n===a?g:g.concat([n])},[a]).forEach(function(g){for(var n=0;n<e.customParsers.length;n++)if(e.customParsers[n].call(e,g))return;0!==g.indexOf("#EXT")?e.trigger("data",{type:"comment",text:g.slice(1)}):(g=g.replace("\r",""),(h=/^#EXTM3U/.exec(g))?e.trigger("data",{type:"tag",tagType:"m3u"}):(h=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(g))?(l={type:"tag",tagType:"inf"},h[1]&&(l.duration=parseFloat(h[1])),
h[2]&&(l.title=h[2]),e.trigger("data",l)):(h=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(g))?(l={type:"tag",tagType:"targetduration"},h[1]&&(l.duration=parseInt(h[1],10)),e.trigger("data",l)):(h=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(g))?(l={type:"tag",tagType:"totalduration"},h[1]&&(l.duration=parseInt(h[1],10)),e.trigger("data",l)):(h=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(g))?(l={type:"tag",tagType:"version"},h[1]&&(l.version=parseInt(h[1],10)),e.trigger("data",l)):(h=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(g))?
(l={type:"tag",tagType:"media-sequence"},h[1]&&(l.number=parseInt(h[1],10)),e.trigger("data",l)):(h=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(g))?(l={type:"tag",tagType:"discontinuity-sequence"},h[1]&&(l.number=parseInt(h[1],10)),e.trigger("data",l)):(h=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(g))?(l={type:"tag",tagType:"playlist-type"},h[1]&&(l.playlistType=h[1]),e.trigger("data",l)):(h=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(g))?(l={type:"tag",tagType:"byterange"},h[1]&&(l.length=
parseInt(h[1],10)),h[2]&&(l.offset=parseInt(h[2],10)),e.trigger("data",l)):(h=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(g))?(l={type:"tag",tagType:"allow-cache"},h[1]&&(l.allowed=!/NO/.test(h[1])),e.trigger("data",l)):(h=/^#EXT-X-MAP:?(.*)$/.exec(g))?(l={type:"tag",tagType:"map"},h[1]&&(g=Cd(h[1]),g.URI&&(l.uri=g.URI),g.BYTERANGE&&(n=g.BYTERANGE.split("@"),g=n[0],n=n[1],l.byterange={},g&&(l.byterange.length=parseInt(g,10)),n&&(l.byterange.offset=parseInt(n,10)))),e.trigger("data",l)):(h=/^#EXT-X-STREAM-INF:?(.*)$/.exec(g))?
(l={type:"tag",tagType:"stream-inf"},h[1]&&(l.attributes=Cd(h[1]),l.attributes.RESOLUTION&&(g=l.attributes.RESOLUTION.split("x"),n={},g[0]&&(n.width=parseInt(g[0],10)),g[1]&&(n.height=parseInt(g[1],10)),l.attributes.RESOLUTION=n),l.attributes.BANDWIDTH&&(l.attributes.BANDWIDTH=parseInt(l.attributes.BANDWIDTH,10)),l.attributes["PROGRAM-ID"]&&(l.attributes["PROGRAM-ID"]=parseInt(l.attributes["PROGRAM-ID"],10))),e.trigger("data",l)):(h=/^#EXT-X-MEDIA:?(.*)$/.exec(g))?(l={type:"tag",tagType:"media"},
h[1]&&(l.attributes=Cd(h[1])),e.trigger("data",l)):(h=/^#EXT-X-ENDLIST/.exec(g))?e.trigger("data",{type:"tag",tagType:"endlist"}):(h=/^#EXT-X-DISCONTINUITY/.exec(g))?e.trigger("data",{type:"tag",tagType:"discontinuity"}):(h=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(g))?(l={type:"tag",tagType:"program-date-time"},h[1]&&(l.dateTimeString=h[1],l.dateTimeObject=new Date(h[1])),e.trigger("data",l)):(h=/^#EXT-X-KEY:?(.*)$/.exec(g))?(l={type:"tag",tagType:"key"},h[1]&&(l.attributes=Cd(h[1]),l.attributes.IV&&
("0x"===l.attributes.IV.substring(0,2).toLowerCase()&&(l.attributes.IV=l.attributes.IV.substring(2)),l.attributes.IV=l.attributes.IV.match(/.{8}/g),l.attributes.IV[0]=parseInt(l.attributes.IV[0],16),l.attributes.IV[1]=parseInt(l.attributes.IV[1],16),l.attributes.IV[2]=parseInt(l.attributes.IV[2],16),l.attributes.IV[3]=parseInt(l.attributes.IV[3],16),l.attributes.IV=new Uint32Array(l.attributes.IV))),e.trigger("data",l)):(h=/^#EXT-X-START:?(.*)$/.exec(g))?(l={type:"tag",tagType:"start"},h[1]&&(l.attributes=
Cd(h[1]),l.attributes["TIME-OFFSET"]=parseFloat(l.attributes["TIME-OFFSET"]),l.attributes.PRECISE=/YES/.test(l.attributes.PRECISE)),e.trigger("data",l)):(h=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(g))?(l={type:"tag",tagType:"cue-out-cont"},l.data=h[1]?h[1]:"",e.trigger("data",l)):(h=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(g))?(l={type:"tag",tagType:"cue-out"},l.data=h[1]?h[1]:"",e.trigger("data",l)):(h=/^#EXT-X-CUE-IN:?(.*)?$/.exec(g))?(l={type:"tag",tagType:"cue-in"},l.data=h[1]?h[1]:"",e.trigger("data",l)):e.trigger("data",
{type:"tag",data:g.slice(4)}))}))};b.addParser=function(a){var e=this,h=a.expression,l=a.customType,g=a.dataParser,n=a.segment;"function"!==typeof g&&(g=function(d){return d});this.customParsers.push(function(d){if(h.exec(d))return e.trigger("data",{type:"custom",data:g(d),customType:l,segment:n}),!0})};b.addTagMapper=function(a){var e=a.expression,h=a.map;this.tagMappers.push(function(l){return e.test(l)?h(l):l})};return c}(Sf),vi=function(f){function c(){var a=f.call(this)||this;a.lineStream=new ul;
a.parseStream=new vl;a.lineStream.pipe(a.parseStream);var e=ok(a),h=[],l={},g,n,d=function(){},k={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p=0;a.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};a.parseStream.on("data",function(q){var t,D;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=q.allowed;"allowed"in q||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var N={};"length"in q&&(l.byterange=
N,N.length=q.length,"offset"in q||(this.trigger("info",{message:"defaulting offset to zero"}),q.offset=0));"offset"in q&&(l.byterange=N,N.offset=q.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));
0<q.duration&&(l.duration=q.duration);0===q.duration&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=h},key:function(){if(q.attributes)if("NONE"===q.attributes.METHOD)n=null;else if(q.attributes.URI)if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===q.attributes.KEYFORMAT)if(-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(q.attributes.METHOD))this.trigger("warn",{message:"invalid key method provided for Widevine"});
else if("SAMPLE-AES-CENC"===q.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==q.attributes.URI.substring(0,23))this.trigger("warn",{message:"invalid key URI provided for Widevine"});else if(q.attributes.KEYID&&"0x"===q.attributes.KEYID.substring(0,2)){var N=this.manifest,Y={schemeIdUri:q.attributes.KEYFORMAT,keyId:q.attributes.KEYID.substring(2)},oa=q.attributes.URI.split(",")[1];oa=r.atob(oa||"");for(var ta=
new Uint8Array(oa.length),Ba=0;Ba<oa.length;Ba++)ta[Ba]=oa.charCodeAt(Ba);N.contentProtection={"com.widevine.alpha":{attributes:Y,pssh:ta}}}else this.trigger("warn",{message:"invalid key ID provided for Widevine"});else q.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:q.attributes.METHOD||"AES-128",uri:q.attributes.URI},"undefined"!==typeof q.attributes.IV&&(n.iv=q.attributes.IV);else this.trigger("warn",{message:"ignoring key declaration without URI"});
else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(q.number)?this.manifest.mediaSequence=q.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+q.number})},"discontinuity-sequence":function(){isFinite(q.number)?p=this.manifest.discontinuitySequence=q.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+q.number})},"playlist-type":function(){/VOD|EVENT/.test(q.playlistType)?this.manifest.playlistType=
q.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+q.playlist})},map:function(){g={};q.uri&&(g.uri=q.uri);q.byterange&&(g.byterange=q.byterange)},"stream-inf":function(){this.manifest.playlists=h;this.manifest.mediaGroups=this.manifest.mediaGroups||k;q.attributes?(l.attributes||(l.attributes={}),Te(l.attributes,q.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||k;if(q.attributes&&
q.attributes.TYPE&&q.attributes["GROUP-ID"]&&q.attributes.NAME){var N=this.manifest.mediaGroups[q.attributes.TYPE];N[q.attributes["GROUP-ID"]]=N[q.attributes["GROUP-ID"]]||{};t=N[q.attributes["GROUP-ID"]];D={"default":/yes/i.test(q.attributes.DEFAULT)};D.autoselect=D["default"]?!0:/yes/i.test(q.attributes.AUTOSELECT);q.attributes.LANGUAGE&&(D.language=q.attributes.LANGUAGE);q.attributes.URI&&(D.uri=q.attributes.URI);q.attributes["INSTREAM-ID"]&&(D.instreamId=q.attributes["INSTREAM-ID"]);q.attributes.CHARACTERISTICS&&
(D.characteristics=q.attributes.CHARACTERISTICS);q.attributes.FORCED&&(D.forced=/yes/i.test(q.attributes.FORCED));t[q.attributes.NAME]=D}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){p+=1;l.discontinuity=!0;this.manifest.discontinuityStarts.push(h.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=q.dateTimeString,this.manifest.dateTimeObject=q.dateTimeObject);l.dateTimeString=
q.dateTimeString;l.dateTimeObject=q.dateTimeObject},targetduration:function(){!isFinite(q.duration)||0>q.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+q.duration}):this.manifest.targetDuration=q.duration},totalduration:function(){!isFinite(q.duration)||0>q.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+q.duration}):this.manifest.totalDuration=q.duration},start:function(){!q.attributes||isNaN(q.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):
this.manifest.start={timeOffset:q.attributes["TIME-OFFSET"],precise:q.attributes.PRECISE}},"cue-out":function(){l.cueOut=q.data},"cue-out-cont":function(){l.cueOutCont=q.data},"cue-in":function(){l.cueIn=q.data}}[q.tagType]||d).call(e)},uri:function(){l.uri=q.uri;h.push(l);!this.manifest.targetDuration||"duration"in l||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration);n&&(l.key=n);l.timeline=p;g&&(l.map=g);l={}},comment:function(){},
custom:function(){q.segment?(l.custom=l.custom||{},l.custom[q.customType]=q.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[q.customType]=q.data)}})[q.type].call(e)});return a}Ue(c,f);var b=c.prototype;b.push=function(a){this.lineStream.push(a)};b.end=function(){this.lineStream.push("\n")};b.addParser=function(a){this.parseStream.addParser(a)};b.addTagMapper=function(a){this.parseStream.addTagMapper(a)};return c}(Sf),wi=Mg(Rf),xi=Mg(r),Tf=function(f,c){if(/^[a-z]+:/i.test(c))return c;
/\/\//i.test(f)||(f=wi.buildAbsoluteURL(xi.location&&xi.location.href||"",f));return wi.buildAbsoluteURL(f,c)},yi=r&&"object"===typeof r&&"default"in r?r["default"]:r,Uf=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,zi=new RegExp("[\\-\\.0-9"+Uf.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Ai=new RegExp("^"+Uf.source+zi.source+"*(?::"+Uf.source+zi.source+"*)?$");Ng.prototype={parse:function(f,
c,b){var a=this.domBuilder;a.startDocument();var e=c,h=c={},l;for(l in e)h[l]=e[l];pk(f,c,b,a,this.errorHandler);a.endDocument()}};Og.prototype={setTagName:function(f){if(!Ai.test(f))throw Error("invalid tagName:"+f);this.tagName=f},add:function(f,c,b){if(!Ai.test(f))throw Error("invalid attribute:"+f);this[this.length++]={qName:f,value:c,offset:b}},length:0,getLocalName:function(f){return this[f].localName},getLocator:function(f){return this[f].locator},getQName:function(f){return this[f].qName},
getURI:function(f){return this[f].uri},getValue:function(f){return this[f].value}};Vd({},Vd.prototype)instanceof Vd||(Vd=function(f,c){function b(){}b.prototype=c;b=new b;for(c in f)b[c]=f[c];return b});var Pb={},lc=Pb.ELEMENT_NODE=1,Yc=Pb.ATTRIBUTE_NODE=2,$d=Pb.TEXT_NODE=3,fh=Pb.CDATA_SECTION_NODE=4,jh=Pb.ENTITY_REFERENCE_NODE=5,wl=Pb.ENTITY_NODE=6,ih=Pb.PROCESSING_INSTRUCTION_NODE=7,gh=Pb.COMMENT_NODE=8,eh=Pb.DOCUMENT_NODE=9,hh=Pb.DOCUMENT_TYPE_NODE=10,qc=Pb.DOCUMENT_FRAGMENT_NODE=11,xl=Pb.NOTATION_NODE=
12,Cb={},ub={};Cb.INDEX_SIZE_ERR=(ub[1]="Index size error",1);Cb.DOMSTRING_SIZE_ERR=(ub[2]="DOMString size error",2);var yl=Cb.HIERARCHY_REQUEST_ERR=(ub[3]="Hierarchy request error",3);Cb.WRONG_DOCUMENT_ERR=(ub[4]="Wrong document",4);Cb.INVALID_CHARACTER_ERR=(ub[5]="Invalid character",5);Cb.NO_DATA_ALLOWED_ERR=(ub[6]="No data allowed",6);Cb.NO_MODIFICATION_ALLOWED_ERR=(ub[7]="No modification allowed",7);var vk=Cb.NOT_FOUND_ERR=(ub[8]="Not found",8);Cb.NOT_SUPPORTED_ERR=(ub[9]="Not supported",9);var Bi=
Cb.INUSE_ATTRIBUTE_ERR=(ub[10]="Attribute in use",10);Cb.INVALID_STATE_ERR=(ub[11]="Invalid state",11);Cb.SYNTAX_ERR=(ub[12]="Syntax error",12);Cb.INVALID_MODIFICATION_ERR=(ub[13]="Invalid modification",13);Cb.NAMESPACE_ERR=(ub[14]="Invalid namespace",14);Cb.INVALID_ACCESS_ERR=(ub[15]="Invalid access",15);Vc.prototype=Error.prototype;rd(Cb,Vc);Bc.prototype={length:0,item:function(f){return this[f]||null},toString:function(f,c){for(var b=[],a=0;a<this.length;a++)Xc(this[a],b,f,c);return b.join("")}};
sd.prototype.item=function(f){Ve(this);return this[f]};Ob(sd,Bc);Wd.prototype={length:0,item:Bc.prototype.item,getNamedItem:function(f){for(var c=this.length;c--;){var b=this[c];if(b.nodeName==f)return b}},setNamedItem:function(f){var c=f.ownerElement;if(c&&c!=this._ownerElement)throw new Vc(Bi);c=this.getNamedItem(f.nodeName);Tg(this._ownerElement,this,f,c);return c},setNamedItemNS:function(f){var c=f.ownerElement;if(c&&c!=this._ownerElement)throw new Vc(Bi);c=this.getNamedItemNS(f.namespaceURI,
f.localName);Tg(this._ownerElement,this,f,c);return c},removeNamedItem:function(f){f=this.getNamedItem(f);Vg(this._ownerElement,this,f);return f},removeNamedItemNS:function(f,c){f=this.getNamedItemNS(f,c);Vg(this._ownerElement,this,f);return f},getNamedItemNS:function(f,c){for(var b=this.length;b--;){var a=this[b];if(a.localName==c&&a.namespaceURI==f)return a}return null}};Wg.prototype={hasFeature:function(f,c){return(f=this._features[f.toLowerCase()])&&(!c||c in f)?!0:!1},createDocument:function(f,
c,b){var a=new td;a.implementation=this;a.childNodes=new Bc;(a.doctype=b)&&a.appendChild(b);c&&(f=a.createElementNS(f,c),a.appendChild(f));return a},createDocumentType:function(f,c,b){var a=new $e;a.name=f;a.nodeName=f;a.publicId=c;a.systemId=b;return a}};Jb.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(f,c){return Zg(this,
f,c)},replaceChild:function(f,c){this.insertBefore(f,c);c&&this.removeChild(c)},removeChild:function(f){return Yg(this,f)},appendChild:function(f){return this.insertBefore(f,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(f){return cf(this.ownerDocument||this,this,f)},normalize:function(){for(var f=this.firstChild;f;){var c=f.nextSibling;c&&c.nodeType==$d&&f.nodeType==$d?(this.removeChild(c),f.appendData(c.data)):(f.normalize(),f=c)}},isSupported:function(f,c){return this.ownerDocument.implementation.hasFeature(f,
c)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(f){for(var c=this;c;){var b=c._nsMap;if(b)for(var a in b)if(b[a]==f)return a;c=c.nodeType==Yc?c.ownerDocument:c.parentNode}return null},lookupNamespaceURI:function(f){for(var c=this;c;){var b=c._nsMap;if(b&&f in b)return b[f];c=c.nodeType==Yc?c.ownerDocument:c.parentNode}return null},isDefaultNamespace:function(f){return null==this.lookupPrefix(f)}};rd(Pb,Jb);rd(Pb,Jb.prototype);td.prototype={nodeName:"#document",
nodeType:eh,doctype:null,documentElement:null,_inc:1,insertBefore:function(f,c){if(f.nodeType==qc){for(var b=f.firstChild;b;){var a=b.nextSibling;this.insertBefore(b,c);b=a}return f}null==this.documentElement&&f.nodeType==lc&&(this.documentElement=f);return Zg(this,f,c),f.ownerDocument=this,f},removeChild:function(f){this.documentElement==f&&(this.documentElement=null);return Yg(this,f)},importNode:function(f,c){return kh(this,f,c)},getElementById:function(f){var c=null;Xd(this.documentElement,function(b){if(b.nodeType==
lc&&b.getAttribute("id")==f)return c=b,!0});return c},createElement:function(f){var c=new Wc;c.ownerDocument=this;c.nodeName=f;c.tagName=f;c.childNodes=new Bc;return(c.attributes=new Wd)._ownerElement=c},createDocumentFragment:function(){var f=new Zd;f.ownerDocument=this;f.childNodes=new Bc;return f},createTextNode:function(f){var c=new Xe;c.ownerDocument=this;c.appendData(f);return c},createComment:function(f){var c=new Ye;c.ownerDocument=this;c.appendData(f);return c},createCDATASection:function(f){var c=
new Ze;c.ownerDocument=this;c.appendData(f);return c},createProcessingInstruction:function(f,c){var b=new bf;b.ownerDocument=this;b.tagName=b.target=f;b.nodeValue=b.data=c;return b},createAttribute:function(f){var c=new Yd;c.ownerDocument=this;c.name=f;c.nodeName=f;c.localName=f;c.specified=!0;return c},createEntityReference:function(f){var c=new af;c.ownerDocument=this;c.nodeName=f;return c},createElementNS:function(f,c){var b=new Wc,a=c.split(":"),e=b.attributes=new Wd;b.childNodes=new Bc;b.ownerDocument=
this;b.nodeName=c;b.tagName=c;b.namespaceURI=f;2==a.length?(b.prefix=a[0],b.localName=a[1]):b.localName=c;return e._ownerElement=b},createAttributeNS:function(f,c){var b=new Yd,a=c.split(":");b.ownerDocument=this;b.nodeName=c;b.name=c;b.namespaceURI=f;b.specified=!0;2==a.length?(b.prefix=a[0],b.localName=a[1]):b.localName=c;return b}};Ob(td,Jb);Wc.prototype={nodeType:lc,hasAttribute:function(f){return null!=this.getAttributeNode(f)},getAttribute:function(f){return(f=this.getAttributeNode(f))&&f.value||
""},getAttributeNode:function(f){return this.attributes.getNamedItem(f)},setAttribute:function(f,c){f=this.ownerDocument.createAttribute(f);f.value=f.nodeValue=""+c;this.setAttributeNode(f)},removeAttribute:function(f){(f=this.getAttributeNode(f))&&this.removeAttributeNode(f)},appendChild:function(f){if(f.nodeType===qc)return this.insertBefore(f,null);var c=f.parentNode;c&&c.removeChild(f);c=this.lastChild;f.parentNode=this;f.previousSibling=c;f.nextSibling=null;c?c.nextSibling=f:this.firstChild=
f;this.lastChild=f;We(this.ownerDocument,this,f);return f},setAttributeNode:function(f){return this.attributes.setNamedItem(f)},setAttributeNodeNS:function(f){return this.attributes.setNamedItemNS(f)},removeAttributeNode:function(f){return this.attributes.removeNamedItem(f.nodeName)},removeAttributeNS:function(f,c){(f=this.getAttributeNodeNS(f,c))&&this.removeAttributeNode(f)},hasAttributeNS:function(f,c){return null!=this.getAttributeNodeNS(f,c)},getAttributeNS:function(f,c){return(f=this.getAttributeNodeNS(f,
c))&&f.value||""},setAttributeNS:function(f,c,b){f=this.ownerDocument.createAttributeNS(f,c);f.value=f.nodeValue=""+b;this.setAttributeNode(f)},getAttributeNodeNS:function(f,c){return this.attributes.getNamedItemNS(f,c)},getElementsByTagName:function(f){return new sd(this,function(c){var b=[];Xd(c,function(a){a===c||a.nodeType!=lc||"*"!==f&&a.tagName!=f||b.push(a)});return b})},getElementsByTagNameNS:function(f,c){return new sd(this,function(b){var a=[];Xd(b,function(e){e===b||e.nodeType!==lc||"*"!==
f&&e.namespaceURI!==f||"*"!==c&&e.localName!=c||a.push(e)});return a})}};td.prototype.getElementsByTagName=Wc.prototype.getElementsByTagName;td.prototype.getElementsByTagNameNS=Wc.prototype.getElementsByTagNameNS;Ob(Wc,Jb);Yd.prototype.nodeType=Yc;Ob(Yd,Jb);ud.prototype={data:"",substringData:function(f,c){return this.data.substring(f,f+c)},appendData:function(f){this.nodeValue=this.data=f=this.data+f;this.length=f.length},insertData:function(f,c){this.replaceData(f,0,c)},appendChild:function(f){throw Error(ub[yl]);
},deleteData:function(f,c){this.replaceData(f,c,"")},replaceData:function(f,c,b){var a=this.data.substring(0,f);f=this.data.substring(f+c);this.nodeValue=this.data=b=a+b+f;this.length=b.length}};Ob(ud,Jb);Xe.prototype={nodeName:"#text",nodeType:$d,splitText:function(f){var c=this.data,b=c.substring(f);this.data=this.nodeValue=c=c.substring(0,f);this.length=c.length;f=this.ownerDocument.createTextNode(b);this.parentNode&&this.parentNode.insertBefore(f,this.nextSibling);return f}};Ob(Xe,ud);Ye.prototype=
{nodeName:"#comment",nodeType:gh};Ob(Ye,ud);Ze.prototype={nodeName:"#cdata-section",nodeType:fh};Ob(Ze,ud);$e.prototype.nodeType=hh;Ob($e,Jb);$g.prototype.nodeType=xl;Ob($g,Jb);ah.prototype.nodeType=wl;Ob(ah,Jb);af.prototype.nodeType=jh;Ob(af,Jb);Zd.prototype.nodeName="#document-fragment";Zd.prototype.nodeType=qc;Ob(Zd,Jb);bf.prototype.nodeType=ih;Ob(bf,Jb);bh.prototype.serializeToString=function(f,c,b){return ch.call(f,c,b)};Jb.prototype.toString=ch;try{if(Object.defineProperty){var zl=function b(c){switch(c.nodeType){case lc:case qc:var a=
[];for(c=c.firstChild;c;)7!==c.nodeType&&8!==c.nodeType&&a.push(b(c)),c=c.nextSibling;return a.join("");default:return c.nodeValue}};Object.defineProperty(sd.prototype,"length",{get:function(){Ve(this);return this.$$length}});Object.defineProperty(Jb.prototype,"textContent",{get:function(){return zl(this)},set:function(c){switch(this.nodeType){case lc:case qc:for(;this.firstChild;)this.removeChild(this.firstChild);(c||String(c))&&this.appendChild(this.ownerDocument.createTextNode(c));break;default:this.nodeValue=
this.value=this.data=c}}});Rg=function(c,b,a){c["$$"+b]=a}}}catch(f){}var Al=y(function(f,c){function b(p){this.options=p||{locator:{}}}function a(p,q,t){function D(oa){var ta=p[oa];!ta&&Y&&(ta=2==p.length?function(Ba){p(oa,Ba)}:p);N[oa]=ta&&function(Ba){ta("[xmldom "+oa+"]\t"+Ba+l(t))}||function(){}}if(!p){if(q instanceof e)return q;p=q}var N={},Y=p instanceof Function;t=t||{};D("warning");D("error");D("fatalError");return N}function e(){this.cdata=!1}function h(p,q){q.lineNumber=p.lineNumber;q.columnNumber=
p.columnNumber}function l(p){if(p)return"\n@"+(p.systemId||"")+"#[line:"+p.lineNumber+",col:"+p.columnNumber+"]"}function g(p,q,t){return"string"==typeof p?p.substr(q,t):p.length>=q+t||q?new java.lang.String(p,q,t)+"":p}function n(p,q){p.currentElement?p.currentElement.appendChild(q):p.doc.appendChild(q)}b.prototype.parseFromString=function(p,q){var t=this.options,D=new d,N=t.domBuilder||new e,Y=t.errorHandler,oa=t.locator,ta=t.xmlns||{},Ba={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};oa&&N.setDocumentLocator(oa);
D.errorHandler=a(Y,N,oa);D.domBuilder=t.domBuilder||N;/\/x?html?$/.test(q)&&(Ba.nbsp="\u00a0",Ba.copy="\u00a9",ta[""]="http://www.w3.org/1999/xhtml");ta.xml=ta.xml||"http://www.w3.org/XML/1998/namespace";p?D.parse(p,ta,Ba):D.errorHandler.error("invalid doc source");return N.doc};e.prototype={startDocument:function(){this.doc=(new k).createDocument(null,null,null);this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(p,q,t,D){var N=this.doc;q=N.createElementNS(p,t||q);var Y=
D.length;n(this,q);this.currentElement=q;this.locator&&h(this.locator,q);for(var oa=0;oa<Y;oa++){p=D.getURI(oa);var ta=D.getValue(oa);t=D.getQName(oa);p=N.createAttributeNS(p,t);this.locator&&h(D.getLocator(oa),p);p.value=p.nodeValue=ta;q.setAttributeNode(p)}},endElement:function(p,q,t){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(p,q){},endPrefixMapping:function(p){},processingInstruction:function(p,q){p=this.doc.createProcessingInstruction(p,q);this.locator&&h(this.locator,
p);n(this,p)},ignorableWhitespace:function(p,q,t){},characters:function(p,q,t){if(p=g.apply(this,arguments)){var D=this.cdata?this.doc.createCDATASection(p):this.doc.createTextNode(p);this.currentElement?this.currentElement.appendChild(D):/^\s*$/.test(p)&&this.doc.appendChild(D);this.locator&&h(this.locator,D)}},skippedEntity:function(p){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(p){if(this.locator=p)p.lineNumber=0},comment:function(p,q,t){p=g.apply(this,arguments);
var D=this.doc.createComment(p);this.locator&&h(this.locator,D);n(this,D)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(p,q,t){var D=this.doc.implementation;D&&D.createDocumentType&&(p=D.createDocumentType(p,q,t),this.locator&&h(this.locator,p),n(this,p))},warning:function(p){console.warn("[xmldom warning]\t"+p,l(this.locator))},error:function(p){console.error("[xmldom error]\t"+p,l(this.locator))},fatalError:function(p){console.error("[xmldom fatalError]\t"+
p,l(this.locator));throw p;}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(p){e.prototype[p]=function(){return null}});var d=Ng,k=c.DOMImplementation=Wg;c.XMLSerializer=bh;c.DOMParser=b}).DOMParser,Ci=function(f){return!!f&&"object"===typeof f},Vb=function c(){for(var b=arguments.length,a=Array(b),e=0;e<b;e++)a[e]=arguments[e];return a.reduce(function(h,l){Object.keys(l).forEach(function(g){Array.isArray(h[g])&&
Array.isArray(l[g])?h[g]=h[g].concat(l[g]):Ci(h[g])&&Ci(l[g])?h[g]=c(h[g],l[g]):h[g]=l[g]});return h},{})},Bl=function(c){return Object.keys(c).map(function(b){return c[b]})},oe=function(c){return c.reduce(function(b,a){return b.concat(a)},[])},Di=function(c){if(!c.length)return[];for(var b=[],a=0;a<c.length;a++)b.push(c[a]);return b},Cl=function(c,b){return c.reduce(function(a,e,h){e[b]&&a.push(h);return a},[])},Dd=function(c){var b=c.baseUrl,a=c.source;a=void 0===a?"":a;var e=c.range;e=void 0===
e?"":e;c=c.indexRange;c=void 0===c?"":c;b={uri:a,resolvedUri:Tf((void 0===b?"":b)||"",a)};if(e||c)e=(e?e:c).split("-"),a=parseInt(e[0],10),e=parseInt(e[1],10),b.byterange={length:e-a+1,offset:a};return b},Dl={"static":function(c){var b=c.timescale;return{start:0,end:Math.ceil(c.sourceDuration/(c.duration/(void 0===b?1:b)))}},dynamic:function(c){var b=c.timescale;b=void 0===b?1:b;var a=c.duration,e=c.start,h=c.minimumUpdatePeriod,l=c.timeShiftBufferDepth,g=(c.NOW+c.clientOffset)/1E3;c=c.availabilityStartTime+
(void 0===e?0:e);return{start:Math.max(0,Math.floor((g-c-(void 0===l?Infinity:l))*b/a)),end:Math.min(Math.ceil((g+(void 0===h?0:h)-c)*b/a),Math.floor((g-c)*b/a))}}},El=function(c){return function(b,a){var e=c.duration,h=c.timescale,l=c.startNumber;return{number:(void 0===l?1:l)+b,duration:e/(void 0===h?1:h),timeline:c.periodIndex,time:a*e}}},Vf=function(c){var b=c.type,a=void 0===b?"static":b;b=c.duration;var e=c.timescale;e=void 0===e?1:e;var h=c.sourceDuration,l=Dl[a](c),g=l.end,n=[];for(l=l.start;l<
g;l++)n.push(l);c=n.map(El(c));"static"===a&&(a=c.length-1,c[a].duration=h-b/e*a);return c},Ei=function(c){var b=c.baseUrl,a=c.initialization,e=void 0===a?{}:a;a=c.sourceDuration;var h=c.timescale;h=void 0===h?1:h;var l=c.indexRange,g=void 0===l?"":l;l=c.duration;if(!b)throw Error("NO_BASE_URL");e=Dd({baseUrl:b,source:e.sourceURL,range:e.range});b=Dd({baseUrl:b,source:b,indexRange:g});b.map=e;l?(c=Vf(c),c.length&&(b.duration=c[0].duration,b.timeline=c[0].timeline)):a&&(b.duration=a/h,b.timeline=0);
b.number=0;return[b]},Fl=function(c,b,a){var e=c.sidx.map?c.sidx.map:null,h=c.sidx.duration,l=c.timeline||0,g=c.sidx.byterange,n=g.offset+g.length;g=b.timescale;var d=b.references.filter(function(D){return 1!==D.referenceType}),k=[];n+=b.firstOffset;for(var p=0;p<d.length;p++){var q=b.references[p],t=q.referencedSize;q=Ei({baseUrl:a,timescale:g,timeline:l,periodIndex:l,duration:q.subsegmentDuration,sourceDuration:h,indexRange:n+"-"+(n+t-1)})[0];e&&(q.map=e);k.push(q);n+=t}c.segments=k;return c},Fi=
function(c){return Bl(c.reduce(function(b,a){var e=a.attributes.id+(a.attributes.lang||"");if(b[e]){var h;a.segments[0]&&(a.segments[0].discontinuity=!0);(h=b[e].segments).push.apply(h,a.segments);a.attributes.contentProtection&&(b[e].attributes.contentProtection=a.attributes.contentProtection)}else b[e]=a;return b},{})).map(function(b){b.discontinuityStarts=Cl(b.segments,"discontinuity");return b})},Wf=function(c,b){void 0===b&&(b={});if(!Object.keys(b).length)return c;for(var a in c){var e=c[a];
if(e.sidx){var h=e.sidx.byterange;h=e.sidx.uri+"-"+(h.offset+"-"+(h.offset+h.length-1));h=b[h]&&b[h].sidx;e.sidx&&h&&Fl(e,h,e.sidx.resolvedUri)}}return c},Gl=function(c,b){void 0===b&&(b={});var a;c=c.reduce(function(h,l){var g=l.attributes.role&&l.attributes.role.value||"",n=l.attributes.lang||"",d="main";n&&(d=""+l.attributes.lang+(g?" ("+g+")":""));if(h[d]&&h[d].playlists[0].attributes.BANDWIDTH>l.attributes.bandwidth)return h;var k,p=l.attributes,q=l.segments,t=l.sidx;q={attributes:(k={NAME:p.id,
BANDWIDTH:p.bandwidth,CODECS:p.codecs},k["PROGRAM-ID"]=1,k),uri:"",endList:"static"===(p.type||"static"),timeline:p.periodIndex,resolvedUri:"",targetDuration:p.duration,segments:q,mediaSequence:q.length?q[0].number:1};p.contentProtection&&(q.contentProtection=p.contentProtection);t&&(q.sidx=t);h[d]={language:n,autoselect:!0,"default":"main"===g,playlists:Wf([q],b),uri:""};"undefined"===typeof a&&"main"===g&&(a=l,a["default"]=!0);return h},{});if(!a){var e=Object.keys(c)[0];c[e]["default"]=!0}return c},
Hl=function(c,b){void 0===b&&(b={});return c.reduce(function(a,e){var h=e.attributes.lang||"text";if(a[h])return a;var l;var g=e.attributes;e=e.segments;"undefined"===typeof e&&(e=[{uri:g.baseUrl,timeline:g.periodIndex,resolvedUri:g.baseUrl||"",duration:g.sourceDuration,number:0}],g.duration=g.sourceDuration);g={attributes:(l={NAME:g.id,BANDWIDTH:g.bandwidth},l["PROGRAM-ID"]=1,l),uri:"",endList:"static"===(g.type||"static"),timeline:g.periodIndex,resolvedUri:g.baseUrl||"",targetDuration:g.duration,
segments:e,mediaSequence:e.length?e[0].number:1};a[h]={language:h,"default":!1,autoselect:!1,playlists:Wf([g],b),uri:""};return a},{})},Il=function(c){var b,a=c.attributes,e=c.segments;c=c.sidx;e={attributes:(b={NAME:a.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:a.width,height:a.height},CODECS:a.codecs,BANDWIDTH:a.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:"",targetDuration:a.duration,segments:e,mediaSequence:e.length?e[0].number:
1};a.contentProtection&&(e.contentProtection=a.contentProtection);c&&(e.sidx=c);return e},Jl=function(c,b){var a;void 0===b&&(b={});if(!c.length)return{};var e=c[0].attributes,h=e.sourceDuration,l=e.type;l=void 0===l?"static":l;var g=e.suggestedPresentationDelay;e=e.minimumUpdatePeriod;var n=void 0===e?0:e,d=Fi(c.filter(function(k){k=k.attributes;return"video/mp4"===k.mimeType||"video"===k.contentType})).map(Il);e=Fi(c.filter(function(k){k=k.attributes;return"audio/mp4"===k.mimeType||"audio"===k.contentType}));
c=c.filter(function(k){k=k.attributes;return"text/vtt"===k.mimeType||"text"===k.contentType});h={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(a={AUDIO:{},VIDEO:{}},a["CLOSED-CAPTIONS"]={},a.SUBTITLES={},a),uri:"",duration:h,playlists:Wf(d,b),minimumUpdatePeriod:1E3*n};"dynamic"===l&&(h.suggestedPresentationDelay=g);e.length&&(h.mediaGroups.AUDIO.audio=Gl(e,b));c.length&&(h.mediaGroups.SUBTITLES.subs=Hl(c,b));return h},Gi=function(c,b){var a=c.type;a=void 0===a?"static":
a;var e=c.minimumUpdatePeriod;e=void 0===e?0:e;var h=c.media;h=void 0===h?"":h;var l=c.sourceDuration,g=c.timescale;g=void 0===g?1:g;var n=c.startNumber;n=void 0===n?1:n;for(var d=c.periodIndex,k=[],p=-1,q=0;q<b.length;q++){var t=b[q],D=t.d,N=t.r||0;t=t.t||0;0>p&&(p=t);t&&t>p&&(p=t);if(0>N)if(N=q+1,N===b.length)if("dynamic"===a&&0<e&&0<h.indexOf("$Number$")){N=c.timescale;t=c.start;var Y=c.minimumUpdatePeriod;N=Math.ceil((((c.NOW+c.clientOffset)/1E3+(void 0===Y?0:Y)-(c.availabilityStartTime+(void 0===
t?0:t)))*(void 0===N?1:N)-p)/D)}else N=(l*g-p)/D;else N=(b[N].t-p)/D;else N+=1;N=n+k.length+N;for(t=n+k.length;t<N;)k.push({number:t,duration:D/g,time:p,timeline:d}),p+=D,t++}return k},Hi=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Ii=function(c){return function(b,a,e,h){if("$$"===b)return"$";if("undefined"===typeof c[a])return b;b=""+c[a];if("RepresentationID"===a)return b;h=e?parseInt(h,10):1;return b.length>=h?b:""+Array(h-b.length+1).join("0")+b}},Kl=function(c,b){return c.duration||b?c.duration?Vf(c):
Gi(c,b):[{number:c.startNumber||1,duration:c.sourceDuration,time:0,timeline:c.periodIndex}]},Ll=function(c,b){var a={RepresentationID:c.id,Bandwidth:c.bandwidth||0},e=c.initialization;e=void 0===e?{sourceURL:"",range:""}:e;var h=Dd({baseUrl:c.baseUrl,source:e.sourceURL.replace(Hi,Ii(a)),range:e.range});return Kl(c,b).map(function(l){a.Number=l.number;a.Time=l.time;var g=(c.media||"").replace(Hi,Ii(a));return{uri:g,timeline:l.timeline,duration:l.duration,resolvedUri:Tf(c.baseUrl||"",g),map:h,number:l.number}})},
Ml=function(c,b){var a=c.duration,e=c.segmentUrls;e=void 0===e?[]:e;if(!a&&!b||a&&b)throw Error("SEGMENT_TIME_UNSPECIFIED");var h=e.map(function(g){var n=c.baseUrl,d=c.initialization;d=void 0===d?{}:d;d=Dd({baseUrl:n,source:d.sourceURL,range:d.range});g=Dd({baseUrl:n,source:g.media,range:g.mediaRange});g.map=d;return g}),l;a&&(l=Vf(c));b&&(l=Gi(c,b));return l.map(function(g,n){if(h[n])return n=h[n],n.timeline=g.timeline,n.duration=g.duration,n.number=g.number,n}).filter(function(g){return g})},Nl=
function(c){var b=c.attributes;c=c.segmentInfo;if(c.template){var a=Ll;var e=Vb(b,c.template)}else c.base?(a=Ei,e=Vb(b,c.base)):c.list&&(a=Ml,e=Vb(b,c.list));b={attributes:b};if(!a)return b;a=a(e,c.timeline);if(e.duration){var h=e,l=h.timescale;e.duration=h.duration/(void 0===l?1:l)}else e.duration=a.length?a.reduce(function(g,n){return Math.max(g,Math.ceil(n.duration))},0):0;b.attributes=e;b.segments=a;c.base&&e.indexRange&&(b.sidx=a[0],b.segments=[]);return b},xb=function(c,b){return Di(c.childNodes).filter(function(a){return a.tagName===
b})},kd=function(c){c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(c);if(!c)return 0;c=c.slice(1);var b=c[1],a=c[2],e=c[3],h=c[4],l=c[5];return 31536E3*parseFloat(c[0]||0)+2592E3*parseFloat(b||0)+86400*parseFloat(a||0)+3600*parseFloat(e||0)+60*parseFloat(h||0)+parseFloat(l||0)},Ji={mediaPresentationDuration:function(c){return kd(c)},availabilityStartTime:function(c){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(c)&&(c+="Z");return Date.parse(c)/1E3},minimumUpdatePeriod:function(c){return kd(c)},
suggestedPresentationDelay:function(c){return kd(c)},type:function(c){return c},timeShiftBufferDepth:function(c){return kd(c)},start:function(c){return kd(c)},width:function(c){return parseInt(c,10)},height:function(c){return parseInt(c,10)},bandwidth:function(c){return parseInt(c,10)},startNumber:function(c){return parseInt(c,10)},timescale:function(c){return parseInt(c,10)},duration:function(c){var b=parseInt(c,10);return isNaN(b)?kd(c):b},d:function(c){return parseInt(c,10)},t:function(c){return parseInt(c,
10)},r:function(c){return parseInt(c,10)},DEFAULT:function(c){return c}},Lb=function(c){return c&&c.attributes?Di(c.attributes).reduce(function(b,a){b[a.name]=(Ji[a.name]||Ji.DEFAULT)(a.value);return b},{}):{}},Ol={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},pe=function(c,
b){return b.length?oe(c.map(function(a){return b.map(function(e){return Tf(a,e.textContent.trim())})})):c},Xf=function(c){var b=xb(c,"SegmentTemplate")[0],a=xb(c,"SegmentList")[0],e=a&&xb(a,"SegmentURL").map(function(n){return Vb({tag:"SegmentURL"},Lb(n))});c=xb(c,"SegmentBase")[0];var h=a||b;h=h&&xb(h,"SegmentTimeline")[0];var l=a||c||b;l=l&&xb(l,"Initialization")[0];(b=b&&Lb(b))&&l?b.initialization=l&&Lb(l):b&&b.initialization&&(b.initialization={sourceURL:b.initialization});var g={template:b,timeline:h&&
xb(h,"S").map(function(n){return Lb(n)}),list:a&&Vb(Lb(a),{segmentUrls:e,initialization:Lb(l)}),base:c&&Vb(Lb(c),{initialization:Lb(l)})};Object.keys(g).forEach(function(n){g[n]||delete g[n]});return g},Pl=function(c,b,a){return function(e){var h=xb(e,"BaseURL");h=pe(b,h);var l=Vb(c,Lb(e)),g=Xf(e);return h.map(function(n){return{segmentInfo:Vb(a,g),attributes:Vb(l,{baseUrl:n})}})}},Ql=function(c){return c.reduce(function(b,a){var e=Lb(a),h=Ol[e.schemeIdUri];if(h&&(b[h]={attributes:e},a=xb(a,"cenc:pssh")[0])){if(e=
a=a.textContent.trim()){a=yi.atob?yi.atob(a):Buffer.from(a,"base64").toString("binary");e=new Uint8Array(a.length);for(var l=0;l<a.length;l++)e[l]=a.charCodeAt(l)}b[h].pssh=e}return b},{})},Rl=function(c,b,a){return function(e){var h=Lb(e),l=pe(b,xb(e,"BaseURL")),g=xb(e,"Role")[0];g={role:Lb(g)};h=Vb(c,h,g);g=Ql(xb(e,"ContentProtection"));Object.keys(g).length&&(h=Vb(h,{contentProtection:g}));g=Xf(e);e=xb(e,"Representation");g=Vb(a,g);return oe(e.map(Pl(h,l,g)))}},Sl=function(c,b){return function(a,
e){var h=pe(b,xb(a,"BaseURL")),l=Lb(a);l=parseInt(l.id,10);e=r.isNaN(l)?e:l;e=Vb(c,{periodIndex:e});l=xb(a,"AdaptationSet");a=Xf(a);return oe(l.map(Rl(e,h,a)))}},Ki=function(c){if(""===c)throw Error("DASH_EMPTY_MANIFEST");c=(c=(new Al).parseFromString(c,"application/xml"))&&"MPD"===c.documentElement.tagName?c.documentElement:null;if(!c||c&&0<c.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return c},Tl=function(c){c=xb(c,"UTCTiming")[0];if(!c)return null;c=Lb(c);switch(c.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":c.method=
"HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":c.method="DIRECT";c.value=Date.parse(c.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return c},Li=function(c,b){void 0===b&&(b={});c=Ki(c);var a=b;void 0===a&&(a={});var e=a;a=e.manifestUri;a=void 0===a?"":a;var h=
e.NOW;h=void 0===h?Date.now():h;e=e.clientOffset;e=void 0===e?0:e;var l=xb(c,"Period");if(!l.length)throw Error("INVALID_NUMBER_OF_PERIOD");var g=Lb(c);c=pe([a],xb(c,"BaseURL"));g.sourceDuration=g.mediaPresentationDuration||0;g.NOW=h;g.clientOffset=e;c=oe(l.map(Sl(g,c)));return Jl(c.map(Nl),b.sidxMapping)},cc=function(c){return new Date(1E3*c-20828448E5)},Mi=function(c){return{isLeading:(c[0]&12)>>>2,dependsOn:c[0]&3,isDependedOn:(c[1]&192)>>>6,hasRedundancy:(c[1]&48)>>>4,paddingValue:(c[1]&14)>>>
1,isNonSyncSample:c[1]&1,degradationPriority:c[2]<<8|c[3]}},ld=function(c){var b=""+String.fromCharCode(c[0]);b+=String.fromCharCode(c[1]);b+=String.fromCharCode(c[2]);return b+=String.fromCharCode(c[3])},Dc={avc1:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),
config:Qb(c.subarray(78,c.byteLength))}},avcC:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength),a={configurationVersion:c[0],avcProfileIndication:c[1],profileCompatibility:c[2],avcLevelIndication:c[3],lengthSizeMinusOne:c[4]&3,sps:[],pps:[]},e=c[5]&31,h;var l=6;for(h=0;h<e;h++){var g=b.getUint16(l);l+=2;a.sps.push(new Uint8Array(c.subarray(l,l+g)));l+=g}e=c[l];l++;for(h=0;h<e;h++)g=b.getUint16(l),l+=2,a.pps.push(new Uint8Array(c.subarray(l,l+g))),l+=g;return a},btrt:function(c){c=
new DataView(c.buffer,c.byteOffset,c.byteLength);return{bufferSizeDB:c.getUint32(0),maxBitrate:c.getUint32(4),avgBitrate:c.getUint32(8)}},esds:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),esId:c[6]<<8|c[7],streamPriority:c[8]&31,decoderConfig:{objectProfileIndication:c[11],streamType:c[12]>>>2&63,bufferSize:c[13]<<16|c[14]<<8|c[15],maxBitrate:c[16]<<24|c[17]<<16|c[18]<<8|c[19],avgBitrate:c[20]<<24|c[21]<<16|c[22]<<8|c[23],decoderConfigDescriptor:{tag:c[24],length:c[25],audioObjectType:c[26]>>>
3&31,samplingFrequencyIndex:(c[26]&7)<<1|c[27]>>>7&1,channelConfiguration:c[27]>>>3&15}}}},ftyp:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);b={majorBrand:ld(c.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]};for(var a=8;a<c.byteLength;)b.compatibleBrands.push(ld(c.subarray(a,a+4))),a+=4;return b},dinf:function(c){return{boxes:Qb(c)}},dref:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),dataReferences:Qb(c.subarray(8))}},hdlr:function(c){var b=
{version:(new DataView(c.buffer,c.byteOffset,c.byteLength)).getUint8(0),flags:new Uint8Array(c.subarray(1,4)),handlerType:ld(c.subarray(8,12)),name:""},a;for(a=24;a<c.byteLength&&0!==c[a];a++)b.name+=String.fromCharCode(c[a]);b.name=decodeURIComponent(escape(b.name));return b},mdat:function(c){var b=c.byteLength,a=new DataView(c.buffer,c.byteOffset,c.byteLength),e=[],h;for(h=0;h+4<c.length;h+=l){var l=a.getUint32(h);h+=4;if(0>=l)e.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(c[h]&
31){case 1:e.push("slice_layer_without_partitioning_rbsp");break;case 5:e.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:e.push("sei_rbsp");break;case 7:e.push("seq_parameter_set_rbsp");break;case 8:e.push("pic_parameter_set_rbsp");break;case 9:e.push("access_unit_delimiter_rbsp");break;default:e.push("UNKNOWN NAL - "+c[h]&31)}}return{byteLength:b,nals:e}},mdhd:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength),a=4;c={version:b.getUint8(0),flags:new Uint8Array(c.subarray(1,
4)),language:""};1===c.version?(a+=4,c.creationTime=cc(b.getUint32(a)),a+=8,c.modificationTime=cc(b.getUint32(a)),a+=4,c.timescale=b.getUint32(a),a+=8):(c.creationTime=cc(b.getUint32(a)),a+=4,c.modificationTime=cc(b.getUint32(a)),a+=4,c.timescale=b.getUint32(a),a+=4);c.duration=b.getUint32(a);b=b.getUint16(a+4);c.language+=String.fromCharCode((b>>10)+96);c.language+=String.fromCharCode(((b&992)>>5)+96);c.language+=String.fromCharCode((b&31)+96);return c},mdia:function(c){return{boxes:Qb(c)}},mfhd:function(c){return{version:c[0],
flags:new Uint8Array(c.subarray(1,4)),sequenceNumber:c[4]<<24|c[5]<<16|c[6]<<8|c[7]}},minf:function(c){return{boxes:Qb(c)}},mp4a:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);b={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};28<c.byteLength&&(b.streamDescriptor=Qb(c.subarray(28))[0]);return b},moof:function(c){return{boxes:Qb(c)}},moov:function(c){return{boxes:Qb(c)}},mvex:function(c){return{boxes:Qb(c)}},
mvhd:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength),a=4,e={version:b.getUint8(0),flags:new Uint8Array(c.subarray(1,4))};1===e.version?(a+=4,e.creationTime=cc(b.getUint32(a)),a+=8,e.modificationTime=cc(b.getUint32(a)),a+=4,e.timescale=b.getUint32(a),a+=8):(e.creationTime=cc(b.getUint32(a)),a+=4,e.modificationTime=cc(b.getUint32(a)),a+=4,e.timescale=b.getUint32(a),a+=4);e.duration=b.getUint32(a);a+=4;e.rate=b.getUint16(a)+b.getUint16(a+2)/16;a+=4;e.volume=b.getUint8(a)+b.getUint8(a+
1)/8;a=a+2+2+8;e.matrix=new Uint32Array(c.subarray(a,a+36));e.nextTrackId=b.getUint32(a+36+24);return e},pdin:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(c.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(c){var b={version:c[0],flags:new Uint8Array(c.subarray(1,4)),samples:[]},a;for(a=4;a<c.byteLength;a++)b.samples.push({dependsOn:(c[a]&48)>>4,isDependedOn:(c[a]&12)>>2,hasRedundancy:c[a]&3});return b},
sidx:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength),a={version:c[0],flags:new Uint8Array(c.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8),earliestPresentationTime:b.getUint32(12),firstOffset:b.getUint32(16)},e=b.getUint16(22),h;for(h=24;e;h+=12,e--)a.references.push({referenceType:(c[h]&128)>>>7,referencedSize:b.getUint32(h)&2147483647,subsegmentDuration:b.getUint32(h+4),startsWithSap:!!(c[h+8]&128),sapType:(c[h+8]&112)>>>4,sapDeltaTime:b.getUint32(h+
8)&268435455});return a},smhd:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),balance:c[4]+c[5]/256}},stbl:function(c){return{boxes:Qb(c)}},stco:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);c={version:c[0],flags:new Uint8Array(c.subarray(1,4)),chunkOffsets:[]};var a=b.getUint32(4),e;for(e=8;a;e+=4,a--)c.chunkOffsets.push(b.getUint32(e));return c},stsc:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength),a=b.getUint32(4);c={version:c[0],flags:new Uint8Array(c.subarray(1,
4)),sampleToChunks:[]};var e;for(e=8;a;e+=12,a--)c.sampleToChunks.push({firstChunk:b.getUint32(e),samplesPerChunk:b.getUint32(e+4),sampleDescriptionIndex:b.getUint32(e+8)});return c},stsd:function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),sampleDescriptions:Qb(c.subarray(8))}},stsz:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength),a={version:c[0],flags:new Uint8Array(c.subarray(1,4)),sampleSize:b.getUint32(4),entries:[]},e;for(e=12;e<c.byteLength;e+=4)a.entries.push(b.getUint32(e));
return a},stts:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);c={version:c[0],flags:new Uint8Array(c.subarray(1,4)),timeToSamples:[]};var a=b.getUint32(4),e;for(e=8;a;e+=8,a--)c.timeToSamples.push({sampleCount:b.getUint32(e),sampleDelta:b.getUint32(e+4)});return c},styp:function(c){return Dc.ftyp(c)},tfdt:function(c){var b={version:c[0],flags:new Uint8Array(c.subarray(1,4)),baseMediaDecodeTime:(c[4]<<24|c[5]<<16|c[6]<<8|c[7])>>>0};1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,
32),b.baseMediaDecodeTime+=(c[8]<<24|c[9]<<16|c[10]<<8|c[11])>>>0);return b},tfhd:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);c={version:c[0],flags:new Uint8Array(c.subarray(1,4)),trackId:b.getUint32(4)};var a=c.flags[2]&1,e=c.flags[2]&2,h=c.flags[2]&8,l=c.flags[2]&16,g=c.flags[2]&32,n=c.flags[0]&65536,d=c.flags[0]&131072;var k=8;a&&(k+=4,c.baseDataOffset=b.getUint32(12),k+=4);e&&(c.sampleDescriptionIndex=b.getUint32(k),k+=4);h&&(c.defaultSampleDuration=b.getUint32(k),k+=4);
l&&(c.defaultSampleSize=b.getUint32(k),k+=4);g&&(c.defaultSampleFlags=b.getUint32(k));n&&(c.durationIsEmpty=!0);!a&&d&&(c.baseDataOffsetIsMoof=!0);return c},tkhd:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength),a=4,e={version:b.getUint8(0),flags:new Uint8Array(c.subarray(1,4))};1===e.version?(a+=4,e.creationTime=cc(b.getUint32(a)),a+=8,e.modificationTime=cc(b.getUint32(a)),a+=4,e.trackId=b.getUint32(a),a=a+4+8):(e.creationTime=cc(b.getUint32(a)),a+=4,e.modificationTime=cc(b.getUint32(a)),
a+=4,e.trackId=b.getUint32(a),a=a+4+4);e.duration=b.getUint32(a);a=a+4+8;e.layer=b.getUint16(a);a+=2;e.alternateGroup=b.getUint16(a);a+=2;e.volume=b.getUint8(a)+b.getUint8(a+1)/8;a=a+2+2;e.matrix=new Uint32Array(c.subarray(a,a+36));a+=36;e.width=b.getUint16(a)+b.getUint16(a+2)/16;a+=4;e.height=b.getUint16(a)+b.getUint16(a+2)/16;return e},traf:function(c){return{boxes:Qb(c)}},trak:function(c){return{boxes:Qb(c)}},trex:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);return{version:c[0],
flags:new Uint8Array(c.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:c[20]&3,sampleIsDependedOn:(c[21]&192)>>6,sampleHasRedundancy:(c[21]&48)>>4,samplePaddingValue:(c[21]&14)>>1,sampleIsDifferenceSample:!!(c[21]&1),sampleDegradationPriority:b.getUint16(22)}},trun:function(c){var b={version:c[0],flags:new Uint8Array(c.subarray(1,4)),samples:[]},a=new DataView(c.buffer,c.byteOffset,
c.byteLength),e=b.flags[2]&1,h=b.flags[2]&4,l=b.flags[1]&1,g=b.flags[1]&2,n=b.flags[1]&4,d=b.flags[1]&8,k=a.getUint32(4),p=8;e&&(b.dataOffset=a.getInt32(p),p+=4);h&&k&&(e={flags:Mi(c.subarray(p,p+4))},p+=4,l&&(e.duration=a.getUint32(p),p+=4),g&&(e.size=a.getUint32(p),p+=4),d&&(e.compositionTimeOffset=a.getUint32(p),p+=4),b.samples.push(e),k--);for(;k--;)e={},l&&(e.duration=a.getUint32(p),p+=4),g&&(e.size=a.getUint32(p),p+=4),n&&(e.flags=Mi(c.subarray(p,p+4)),p+=4),d&&(e.compositionTimeOffset=a.getUint32(p),
p+=4),b.samples.push(e);return b},"url ":function(c){return{version:c[0],flags:new Uint8Array(c.subarray(1,4))}},vmhd:function(c){var b=new DataView(c.buffer,c.byteOffset,c.byteLength);return{version:c[0],flags:new Uint8Array(c.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};var Qb=function(c){var b=0,a=[],e;var h=new ArrayBuffer(c.length);var l=new Uint8Array(h);for(e=0;e<c.length;++e)l[e]=c[e];for(h=new DataView(h);b<c.byteLength;){l=
h.getUint32(b);e=ld(c.subarray(b+4,b+8));var g=1<l?b+l:c.byteLength;b=(Dc[e]||function(n){return{data:n}})(c.subarray(b+8,g));b.size=l;b.type=e;a.push(b);b=g}return a};var Ni=function(c,b){b=b||0;var a=Array(2*b+1).join(" ");return c.map(function(e,h){return a+e.type+"\n"+Object.keys(e).filter(function(l){return"type"!==l&&"boxes"!==l}).map(function(l){var g=a+"  "+l+": ";l=e[l];return l instanceof Uint8Array||l instanceof Uint32Array?(l=Array.prototype.slice.call(new Uint8Array(l.buffer,l.byteOffset,
l.byteLength)).map(function(n){return" "+("00"+n.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===l.length?g+"<"+l.join("").slice(1)+">":g+"<\n"+l.map(function(n){return a+"  "+n}).join("\n")+"\n"+a+"  >":g+"<>":g+JSON.stringify(l,null,2).split("\n").map(function(n,d){return 0===d?n:a+"  "+n}).join("\n")}).join("\n")+(e.boxes?"\n"+Ni(e.boxes,b+1):"")}).join("\n")};var hb={inspect:Qb,textify:Ni,parseType:ld,findBox:function e(b,a){var h=[],l;if(!a.length)return null;for(l=0;l<b.byteLength;){var g=
(b[l]<<24|b[l+1]<<16|b[l+2]<<8|b[l+3])>>>0;var n=ld(b.subarray(l+4,l+8));g=1<g?l+g:b.byteLength;n===a[0]&&(1===a.length?h.push(b.subarray(l+8,g)):(l=e(b.subarray(l+8,g),a.slice(1)),l.length&&(h=h.concat(l))));l=g}return h},parseTraf:Dc.traf,parseTfdt:Dc.tfdt,parseHdlr:Dc.hdlr,parseTfhd:Dc.tfhd,parseTrun:Dc.trun,parseSidx:Dc.sidx},Ed=function(b){return("00"+b.toString(16)).slice(-2)},tc={findBox:hb.findBox,parseType:hb.parseType,timescale:function(b){return hb.findBox(b,["moov","trak"]).reduce(function(a,
e){var h=hb.findBox(e,["tkhd"])[0];if(!h)return null;var l=h[0];l=0===l?12:20;h=(h[l]<<24|h[l+1]<<16|h[l+2]<<8|h[l+3])>>>0;e=hb.findBox(e,["mdia","mdhd"])[0];if(!e)return null;l=e[0];l=0===l?12:20;a[h]=(e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3])>>>0;return a},{})},startTime:function(b,a){a=hb.findBox(a,["moof","traf"]);a=[].concat.apply([],a.map(function(e){return hb.findBox(e,["tfhd"]).map(function(h){h=b[(h[4]<<24|h[5]<<16|h[6]<<8|h[7])>>>0]||9E4;var l=(l=hb.findBox(e,["tfdt"]).map(function(g){var n=
g[0];var d=(g[4]<<24|g[5]<<16|g[6]<<8|g[7])>>>0;1===n&&(d*=Math.pow(2,32),d+=(g[8]<<24|g[9]<<16|g[10]<<8|g[11])>>>0);return d})[0])||Infinity;return l/h})}));a=Math.min.apply(null,a);return isFinite(a)?a:0},compositionStartTime:function(b,a){var e=hb.findBox(a,["moof","traf"]),h=a=0,l;if(e&&e.length){e=hb.parseTraf(e[0]);for(var g=0;g<e.boxes.length;g++)"tfhd"===e.boxes[g].type?l=e.boxes[g].trackId:"tfdt"===e.boxes[g].type?a=e.boxes[g].baseMediaDecodeTime:"trun"===e.boxes[g].type&&e.boxes[g].samples.length&&
(h=e.boxes[g].samples[0].compositionTimeOffset||0)}return(a+h)/(b[l]||9E4)},videoTrackIds:function(b){var a=[];hb.findBox(b,["moov","trak"]).forEach(function(e){var h=hb.findBox(e,["mdia","hdlr"]),l=hb.findBox(e,["tkhd"]);h.forEach(function(g,n){g=hb.parseType(g.subarray(8,12));n=l[n];"vide"===g&&(n=new DataView(n.buffer,n.byteOffset,n.byteLength),g=n.getUint8(0),n=0===g?n.getUint32(12):n.getUint32(20),a.push(n))})});return a},tracks:function(b){var a=[];hb.findBox(b,["moov","trak"]).forEach(function(e){var h=
{},l=hb.findBox(e,["tkhd"])[0];if(l){var g=new DataView(l.buffer,l.byteOffset,l.byteLength);var n=g.getUint8(0);h.id=0===n?g.getUint32(12):g.getUint32(20)}if(g=hb.findBox(e,["mdia","hdlr"])[0])g=hb.parseType(g.subarray(8,12)),h.type="vide"===g?"video":"soun"===g?"audio":g;if(g=hb.findBox(e,["mdia","minf","stbl","stsd"])[0])if(g=g.subarray(8),h.codec=hb.parseType(g.subarray(4,8)),g=hb.findBox(g,[h.codec])[0],g)if(/^[a-z]vc[1-9]$/i.test(h.codec)){g=g.subarray(78);var d=hb.parseType(g.subarray(4,8));
"avcC"===d&&11<g.length?(h.codec+=".",h.codec+=Ed(g[9]),h.codec+=Ed(g[10]),h.codec+=Ed(g[11])):h.codec="avc1.4d400d"}else/^mp4[a,v]$/i.test(h.codec)&&(g=g.subarray(28),d=hb.parseType(g.subarray(4,8)),"esds"===d&&20<g.length&&0!==g[19]?(h.codec+="."+Ed(g[19]),h.codec+="."+Ed(g[20]>>>2&63).replace(/^0/,"")):h.codec="mp4a.40.2");(e=hb.findBox(e,["mdia","mdhd"])[0])&&l&&(l=0===n?12:20,h.timescale=(e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3])>>>0);a.push(h)});return a}},Fd={parseSei:function(b){for(var a=0,e=
{payloadType:-1,payloadSize:0},h=0,l=0;a<b.byteLength&&128!==b[a];){for(;255===b[a];)h+=255,a++;for(h+=b[a++];255===b[a];)l+=255,a++;l+=b[a++];if(!e.payload&&4===h){e.payloadType=h;e.payloadSize=l;e.payload=b.subarray(a,a+l);break}a+=l;l=h=0}return e},parseUserData:function(b){return 181!==b.payload[0]||49!==(b.payload[1]<<8|b.payload[2])||"GA94"!==String.fromCharCode(b.payload[3],b.payload[4],b.payload[5],b.payload[6])||3!==b.payload[7]?null:b.payload.subarray(8,b.payload.length-1)},parseCaptionPackets:function(b,
a){var e=[],h;if(!(a[0]&64))return e;var l=a[0]&31;for(h=0;h<l;h++){var g=3*h;var n={type:a[g+2]&3,pts:b};a[g+2]&4&&(n.ccData=a[g+3]<<8|a[g+4],e.push(n))}return e},discardEmulationPreventionBytes:function(b){for(var a=b.byteLength,e=[],h=1,l;h<a-2;)0===b[h]&&0===b[h+1]&&3===b[h+2]?(e.push(h+2),h+=2):h++;if(0===e.length)return b;a-=e.length;l=new Uint8Array(a);var g=0;for(h=0;h<a;g++,h++)g===e[0]&&(g++,e.shift()),l[h]=b[g];return l},USER_DATA_REGISTERED_ITU_T_T35:4},uc=function(){this.init=function(){var b=
{};this.on=function(a,e){b[a]||(b[a]=[]);b[a]=b[a].concat(e)};this.off=function(a,e){if(!b[a])return!1;e=b[a].indexOf(e);b[a]=b[a].slice();b[a].splice(e,1);return-1<e};this.trigger=function(a){var e,h;if(e=b[a])if(2===arguments.length){var l=e.length;for(h=0;h<l;++h)e[h].call(this,arguments[1])}else{var g=[];for(h=1;h<arguments.length;++h)g.push(arguments[h]);l=e.length;for(h=0;h<l;++h)e[h].apply(this,g)}};this.dispose=function(){b={}}}};uc.prototype.pipe=function(b){this.on("data",function(a){b.push(a)});
this.on("done",function(a){b.flush(a)});this.on("partialdone",function(a){b.partialFlush(a)});this.on("endedtimeline",function(a){b.endTimeline(a)});this.on("reset",function(a){b.reset(a)});return b};uc.prototype.push=function(b){this.trigger("data",b)};uc.prototype.flush=function(b){this.trigger("done",b)};uc.prototype.partialFlush=function(b){this.trigger("partialdone",b)};uc.prototype.endTimeline=function(b){this.trigger("endedtimeline",b)};uc.prototype.reset=function(b){this.trigger("reset",b)};
var dc=function a(){a.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new nb(0,0),new nb(0,1),new nb(1,0),new nb(1,1)];this.reset();this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data"));e.on("partialdone",this.trigger.bind(this,"partialdone"));e.on("done",this.trigger.bind(this,"done"))},this)};dc.prototype=new uc;dc.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var e=Fd.parseSei(a.escapedRBSP);e.payloadType===Fd.USER_DATA_REGISTERED_ITU_T_T35&&
(e=Fd.parseUserData(e))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(e=Fd.parseCaptionPackets(a.pts,e),this.captionPackets_=this.captionPackets_.concat(e),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts))}};dc.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(e){return"flush"===a?e.flush():e.partialFlush()},this)};
dc.prototype.flushStream=function(a){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,h){e.presortIndex=h}),this.captionPackets_.sort(function(e,h){return e.pts===h.pts?e.presortIndex-h.presortIndex:e.pts-h.pts}),this.captionPackets_.forEach(function(e){2>e.type&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0);this.flushCCStreams(a)};dc.prototype.flush=function(){return this.flushStream("flush")};dc.prototype.partialFlush=function(){return this.flushStream("partialFlush")};
dc.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};dc.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};
dc.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};dc.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};dc.prototype.setsTextOrXDSActive=function(a){return 256===(a.ccData&28928)||4138===(a.ccData&30974)||6186===(a.ccData&30974)};var Ul={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,
546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},
qe=function(a){if(null===a)return"";a=Ul[a]||a;return String.fromCharCode(a)},Vl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Oc=function(){for(var a=[],e=15;e--;)a.push("");return a},nb=function l(e,h){l.prototype.init.call(this);this.field_=e||0;this.dataChannel_=h||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(g){var n=g.ccData&32639;if(n===this.lastControlCode_)this.lastControlCode_=null;else{4096===
(n&61440)?this.lastControlCode_=n:n!==this.PADDING_&&(this.lastControlCode_=null);var d=n>>>8;var k=n&255;n!==this.PADDING_&&(n===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":n===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(g.pts),this.flushDisplayed(g.pts),k=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=k,this.startPts_=g.pts):n===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(g.pts)):n===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(g.pts)):
n===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(g.pts)):n===this.CARRIAGE_RETURN_?(this.clearFormatting(g.pts),this.flushDisplayed(g.pts),this.shiftRowsUp_(),this.startPts_=g.pts):n===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):n===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(g.pts),this.displayed_=Oc()):n===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=
Oc():n===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(g.pts),this.displayed_=Oc()),this.mode_="paintOn",this.startPts_=g.pts):this.isSpecialCharacter(d,k)?(n=qe((d&3)<<8|k),this[this.mode_](g.pts,n),this.column_++):this.isExtCharacter(d,k)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),n=qe((d&3)<<8|k),this[this.mode_](g.pts,n),this.column_++):this.isMidRowCode(d,
k)?(this.clearFormatting(g.pts),this[this.mode_](g.pts," "),this.column_++,14===(k&14)&&this.addFormatting(g.pts,["i"]),1===(k&1)&&this.addFormatting(g.pts,["u"])):this.isOffsetControlCode(d,k)?this.column_+=k&3:this.isPAC(d,k)?(d=Vl.indexOf(n&7968),"rollUp"===this.mode_&&(0>d-this.rollUpRows_+1&&(d=this.rollUpRows_-1),this.setRollUp(g.pts,d)),d!==this.row_&&(this.clearFormatting(g.pts),this.row_=d),k&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(g.pts,["u"]),16===(n&16)&&(this.column_=
4*((n&14)>>1)),this.isColorPAC(k)&&14===(k&14)&&this.addFormatting(g.pts,["i"])):this.isNormalChar(d)&&(0===k&&(k=null),n=qe(d),n+=qe(k),this[this.mode_](g.pts,n),this.column_+=n.length))}}};nb.prototype=new uc;nb.prototype.flushDisplayed=function(e){var h=this.displayed_.map(function(l){try{return l.trim()}catch(g){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");h.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:h,stream:this.name_})};
nb.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Oc();this.nonDisplayed_=Oc();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};nb.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=
this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};nb.prototype.isSpecialCharacter=function(e,h){return e===this.EXT_&&48<=h&&63>=h};nb.prototype.isExtCharacter=function(e,
h){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=h&&63>=h};nb.prototype.isMidRowCode=function(e,h){return e===this.EXT_&&32<=h&&47>=h};nb.prototype.isOffsetControlCode=function(e,h){return e===this.OFFSET_&&33<=h&&35>=h};nb.prototype.isPAC=function(e,h){return e>=this.BASE_&&e<this.BASE_+8&&64<=h&&127>=h};nb.prototype.isColorPAC=function(e){return 64<=e&&79>=e||96<=e&&127>=e};nb.prototype.isNormalChar=function(e){return 32<=e&&127>=e};nb.prototype.setRollUp=function(e,h){"rollUp"!==this.mode_&&(this.row_=
14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Oc(),this.displayed_=Oc());if(void 0!==h&&h!==this.row_)for(e=0;e<this.rollUpRows_;e++)this.displayed_[h-e]=this.displayed_[this.row_-e],this.displayed_[this.row_-e]="";void 0===h&&(h=this.row_);this.topRow_=h-this.rollUpRows_+1};nb.prototype.addFormatting=function(e,h){this.formatting_=this.formatting_.concat(h);h=h.reduce(function(l,g){return l+"<"+g+">"},"");this[this.mode_](e,h)};nb.prototype.clearFormatting=function(e){if(this.formatting_.length){var h=
this.formatting_.reverse().reduce(function(l,g){return l+"</"+g+">"},"");this.formatting_=[];this[this.mode_](e,h)}};nb.prototype.popOn=function(e,h){this.nonDisplayed_[this.row_]+=h};nb.prototype.rollUp=function(e,h){this.displayed_[this.row_]+=h};nb.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;15>e;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""};nb.prototype.paintOn=
function(e,h){this.displayed_[this.row_]+=h};var Wl=Fd.discardEmulationPreventionBytes,Xl=function(e,h,l){var g=h,n=l.defaultSampleDuration||0,d=l.defaultSampleSize||0,k=l.trackId,p=[];e.forEach(function(q){q=hb.parseTrun(q).samples;q.forEach(function(t){void 0===t.duration&&(t.duration=n);void 0===t.size&&(t.size=d);t.trackId=k;t.dts=g;void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0);t.pts=g+t.compositionTimeOffset;g+=t.duration});p=p.concat(q)});return p},Yl=function(e,h){var l=tc.findBox(e,
["moof","traf"]),g={},n=[];tc.findBox(e,["mdat"]).forEach(function(d,k){n.push({mdat:d,traf:l[k]})});n.forEach(function(d){var k=d.mdat,p=d.traf;d=tc.findBox(p,["tfhd"]);var q=hb.parseTfhd(d[0]);d=q.trackId;var t=tc.findBox(p,["tfdt"]);t=0<t.length?hb.parseTfdt(t[0]).baseMediaDecodeTime:0;p=tc.findBox(p,["trun"]);if(h===d&&0<p.length){p=Xl(p,t,q);q=new DataView(k.buffer,k.byteOffset,k.byteLength);t=[];var D;for(D=0;D+4<k.length;D+=N){var N=q.getUint32(D);D+=4;if(!(0>=N))switch(k[D]&31){case 6:var Y=
k.subarray(D+1,D+1+N);a:{var oa=D;for(var ta=0;ta<p.length;ta++){var Ba=p[ta];if(oa<Ba.size){oa=Ba;break a}oa-=Ba.size}oa=null}Y={nalUnitType:"sei_rbsp",size:N,data:Y,escapedRBSP:Wl(Y),trackId:d};if(oa){Y.pts=oa.pts;Y.dts=oa.dts;var Da=oa}else Y.pts=Da.pts,Y.dts=Da.dts;t.push(Y)}}g[d]||(g[d]=[]);g[d]=g[d].concat(t)}});return g},Zl=function(){var e=!1,h,l,g,n,d,k;this.isInitialized=function(){return e};this.init=function(p){h=new dc;e=!0;k=p?p.isPartial:!1;h.on("data",function(q){q.startTime=q.startPts/
n;q.endTime=q.endPts/n;d.captions.push(q);d.captionStreams[q.stream]=!0})};this.isNewInit=function(p,q){return p&&0===p.length||q&&"object"===typeof q&&0===Object.keys(q).length?!1:g!==p[0]||n!==q[g]};this.parse=function(p,q,t){if(this.isInitialized()){if(!q||!t)return null;if(this.isNewInit(q,t))g=q[0],n=t[g];else if(null===g||!n)return l.push(p),null}else return null;for(;0<l.length;){var D=l.shift();this.parse(D,q,t)}q=g;t=n;p=null===q?null:{seiNals:Yl(p,q)[q],timescale:t};if(null===p||!p.seiNals)return null;
this.pushNals(p.seiNals);this.flushStream();return d};this.pushNals=function(p){if(!this.isInitialized()||!p||0===p.length)return null;p.forEach(function(q){h.push(q)})};this.flushStream=function(){if(!this.isInitialized())return null;k?h.partialFlush():h.flush()};this.clearParsedCaptions=function(){d.captions=[];d.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;h.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};
this.reset=function(){l=[];n=g=null;d?this.clearParsedCaptions():d={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},Ec=function(e,h){var l=1;for(e>h&&(l=-1);4294967296<Math.abs(h-e);)e+=8589934592*l;return e};(function l(h){var g,n;l.prototype.init.call(this);this.type_=h||"shared";this.push=function(d){if("shared"===this.type_||d.type===this.type_)void 0===n&&(n=d.dts),d.dts=Ec(d.dts,n),d.pts=Ec(d.pts,n),g=d.dts,this.trigger("data",d)};this.flush=function(){n=g;this.trigger("done")};
this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){g=n=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}}).prototype=new uc;var Oi=function(h){var l=h[1]&31;return l=l<<8|h[2]},re=function(h){return!!(h[1]&64)},se=function(h){var l=0;1<(h[3]&48)>>>4&&(l+=h[4]+1);return l},Yf=function(h){switch(h){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";
case 9:return"access_unit_delimiter_rbsp";default:return null}},$l=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],Pi=function(h){return h[0]<<21|h[1]<<14|h[2]<<7|h[3]};var pb={parseType:function(h,l){h=Oi(h);return 0===h?"pat":h===l?"pmt":l?"pes":null},parsePat:function(h){var l=re(h),g=4+se(h);l&&(g+=h[g]+1);return(h[g+10]&31)<<8|h[g+11]},parsePmt:function(h){var l={},g=re(h),n=4+se(h);g&&(n+=h[n]+1);if(h[n+5]&1){g=3+((h[n+1]&15)<<8|h[n+2])-4;for(var d=12+((h[n+10]&15)<<8|
h[n+11]);d<g;){var k=n+d;l[(h[k+1]&31)<<8|h[k+2]]=h[k];d+=((h[k+3]&15)<<8|h[k+4])+5}return l}},parsePayloadUnitStartIndicator:re,parsePesType:function(h,l){h=Oi(h);switch(l[h]){case 27:return"video";case 15:return"audio";case 21:return"timed-metadata";default:return null}},parsePesTime:function(h){if(!re(h))return null;var l=4+se(h);if(l>=h.byteLength)return null;var g=null;var n=h[l+7];n&192&&(g={},g.pts=(h[l+9]&14)<<27|(h[l+10]&255)<<20|(h[l+11]&254)<<12|(h[l+12]&255)<<5|(h[l+13]&254)>>>3,g.pts*=
4,g.pts+=(h[l+13]&6)>>>1,g.dts=g.pts,n&64&&(g.dts=(h[l+14]&14)<<27|(h[l+15]&255)<<20|(h[l+16]&254)<<12|(h[l+17]&255)<<5|(h[l+18]&254)>>>3,g.dts*=4,g.dts+=(h[l+18]&6)>>>1));return g},videoPacketContainsKeyFrame:function(h){var l=4+se(h);h=h.subarray(l);for(var g=l=0,n=!1;g<h.byteLength-3;g++)if(1===h[g+2]){l=g+5;break}for(;l<h.byteLength;)switch(h[l]){case 0:if(0!==h[l-1]){l+=2;break}else if(0!==h[l-2]){l++;break}g+3!==l-2&&(g=Yf(h[g+3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(n=!0));
do l++;while(1!==h[l]&&l<h.length);g=l-2;l+=3;break;case 1:if(0!==h[l-1]||0!==h[l-2]){l+=3;break}g=Yf(h[g+3]&31);"slice_layer_without_partitioning_rbsp_idr"===g&&(n=!0);g=l-2;l+=3;break;default:l+=3}(h=h.subarray(g))&&3<h.byteLength&&(g=Yf(h[3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(n=!0));return n}};var md={isLikelyAacData:function(h){return 73===h[0]&&68===h[1]&&51===h[2]?!0:!1},parseId3TagSize:function(h,l){var g=h[l+6]<<21|h[l+7]<<14|h[l+8]<<7|h[l+9];return(h[l+5]&16)>>4?g+20:g+
10},parseAdtsSize:function(h,l){return h[l+3]&6144|h[l+4]<<3|(h[l+5]&224)>>5},parseType:function(h,l){return 73===h[l]&&68===h[l+1]&&51===h[l+2]?"timed-metadata":h[l]&1&&240===(h[l+1]&240)?"audio":null},parseSampleRate:function(h){for(var l=0;l+5<h.length;)if(255!==h[l]||240!==(h[l+1]&246))l++;else return $l[(h[l+2]&60)>>>2];return null},parseAacTimestamp:function(h){var l=10;h[5]&64&&(l=l+4+Pi(h.subarray(10,14)));do{var g=Pi(h.subarray(l+4,l+8));if(1>g)break;var n=String.fromCharCode(h[l],h[l+1],
h[l+2],h[l+3]);if("PRIV"===n){n=h.subarray(l+10,l+g+10);for(var d=0;d<n.byteLength;d++)if(0===n[d]){var k=unescape,p,q=n,t=d,D="";for(p=0;p<t;p++)D+="%"+("00"+q[p].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===k(D))return h=n.subarray(d+1),l=(h[3]&1)<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2,l*=4,l+=h[7]&3;break}}l+=10;l+=g}while(l<h.byteLength);return null}};var am=function(h,l){if(h.audio&&h.audio.length){var g=l;"undefined"===typeof g&&(g=h.audio[0].dts);h.audio.forEach(function(d){d.dts=
Ec(d.dts,g);d.pts=Ec(d.pts,g);d.dtsTime=d.dts/9E4;d.ptsTime=d.pts/9E4})}if(h.video&&h.video.length){var n=l;"undefined"===typeof n&&(n=h.video[0].dts);h.video.forEach(function(d){d.dts=Ec(d.dts,n);d.pts=Ec(d.pts,n);d.dtsTime=d.dts/9E4;d.ptsTime=d.pts/9E4});h.firstKeyFrame&&(h=h.firstKeyFrame,h.dts=Ec(h.dts,n),h.pts=Ec(h.pts,n),h.dtsTime=h.dts/9E4,h.ptsTime=h.dts/9E4)}},te=function(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function");},bm=function(){function h(l,g){for(var n=
0;n<g.length;n++){var d=g[n];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(l,d.key,d)}}return function(l,g,n){g&&h(l.prototype,g);n&&h(l,n);return l}}(),cm=function(h,l){if("function"!==typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);h.prototype=Object.create(l&&l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}});l&&(Object.setPrototypeOf?Object.setPrototypeOf(h,
l):h.__proto__=l)},ec=null,dm=function(){function h(l){te(this,h);if(!ec){var g=[[[],[],[],[],[]],[[],[],[],[],[]]],n=g[0],d=g[1],k=n[4],p=d[4],q,t,D,N=[],Y=[],oa;for(q=0;256>q;q++)Y[(N[q]=q<<1^283*(q>>7))^q]=q;for(t=D=0;!k[t];t^=oa||1,D=Y[D]||1){var ta=D^D<<1^D<<2^D<<3^D<<4;ta=ta>>8^ta&255^99;k[t]=ta;p[ta]=t;var Ba=N[q=N[oa=N[t]]];var Da=16843009*Ba^65537*q^257*oa^16843008*t;Ba=257*N[ta]^16843008*ta;for(q=0;4>q;q++)n[q][t]=Ba=Ba<<24^Ba>>>8,d[q][ta]=Da=Da<<24^Da>>>8}for(q=0;5>q;q++)n[q]=n[q].slice(0),
d[q]=d[q].slice(0);ec=g}this._tables=[[ec[0][0].slice(),ec[0][1].slice(),ec[0][2].slice(),ec[0][3].slice(),ec[0][4].slice()],[ec[1][0].slice(),ec[1][1].slice(),ec[1][2].slice(),ec[1][3].slice(),ec[1][4].slice()]];g=this._tables[0][4];n=this._tables[1];t=l.length;D=1;if(4!==t&&6!==t&&8!==t)throw Error("Invalid aes key size");k=l.slice(0);p=[];this._key=[k,p];for(l=t;l<4*t+28;l++){d=k[l-1];if(0===l%t||8===t&&4===l%t)d=g[d>>>24]<<24^g[d>>16&255]<<16^g[d>>8&255]<<8^g[d&255],0===l%t&&(d=d<<8^d>>>24^D<<
24,D=D<<1^283*(D>>7));k[l]=k[l-t]^d}for(t=0;l;t++,l--)d=k[t&3?l:l-4],p[t]=4>=l||4>t?d:n[0][g[d>>>24]]^n[1][g[d>>16&255]]^n[2][g[d>>8&255]]^n[3][g[d&255]]}h.prototype.decrypt=function(l,g,n,d,k,p){var q=this._key[1];l^=q[0];d^=q[1];n^=q[2];g^=q[3];var t=q.length/4-2,D,N=4;var Y=this._tables[1];var oa=Y[0],ta=Y[1],Ba=Y[2],Da=Y[3],va=Y[4];for(D=0;D<t;D++){Y=oa[l>>>24]^ta[d>>16&255]^Ba[n>>8&255]^Da[g&255]^q[N];var Aa=oa[d>>>24]^ta[n>>16&255]^Ba[g>>8&255]^Da[l&255]^q[N+1];var Pa=oa[n>>>24]^ta[g>>16&255]^
Ba[l>>8&255]^Da[d&255]^q[N+2];g=oa[g>>>24]^ta[l>>16&255]^Ba[d>>8&255]^Da[n&255]^q[N+3];N+=4;l=Y;d=Aa;n=Pa}for(D=0;4>D;D++)k[(3&-D)+p]=va[l>>>24]<<24^va[d>>16&255]<<16^va[n>>8&255]<<8^va[g&255]^q[N++],Y=l,l=d,d=n,n=g,g=Y};return h}(),Qi=function(){function h(){te(this,h);this.listeners={}}h.prototype.on=function(l,g){this.listeners[l]||(this.listeners[l]=[]);this.listeners[l].push(g)};h.prototype.off=function(l,g){if(!this.listeners[l])return!1;g=this.listeners[l].indexOf(g);this.listeners[l].splice(g,
1);return-1<g};h.prototype.trigger=function(l){var g=this.listeners[l];if(g)if(2===arguments.length)for(var n=g.length,d=0;d<n;++d)g[d].call(this,arguments[1]);else{n=Array.prototype.slice.call(arguments,1);d=g.length;for(var k=0;k<d;++k)g[k].apply(this,n)}};h.prototype.dispose=function(){this.listeners={}};h.prototype.pipe=function(l){this.on("data",function(g){l.push(g)})};return h}(),Ri=function(h){function l(){te(this,l);var g=h.call(this,Qi);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g.jobs=[];g.delay=1;g.timeout_=null;return g}cm(l,h);l.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};l.prototype.push=function(g){this.jobs.push(g);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return l}(Qi),fc=function(h){return h<<24|(h&65280)<<8|(h&16711680)>>8|h>>>24},Si=function(h,l,g){var n=new Int32Array(h.buffer,
h.byteOffset,h.byteLength>>2);l=new dm(Array.prototype.slice.call(l));h=new Uint8Array(h.byteLength);var d=new Int32Array(h.buffer),k;var p=g[0];var q=g[1];var t=g[2];g=g[3];for(k=0;k<n.length;k+=4){var D=fc(n[k]);var N=fc(n[k+1]);var Y=fc(n[k+2]);var oa=fc(n[k+3]);l.decrypt(D,N,Y,oa,d,k);d[k]=fc(d[k]^p);d[k+1]=fc(d[k+1]^q);d[k+2]=fc(d[k+2]^t);d[k+3]=fc(d[k+3]^g);p=D;q=N;t=Y;g=oa}return h},em=function(){function h(l,g,n,d){te(this,h);var k=h.STEP,p=new Int32Array(l.buffer),q=new Uint8Array(l.byteLength);
l=0;this.asyncStream_=new Ri;this.asyncStream_.push(this.decryptChunk_(p.subarray(l,l+k),g,n,q));for(l=k;l<p.length;l+=k)n=new Uint32Array([fc(p[l-4]),fc(p[l-3]),fc(p[l-2]),fc(p[l-1])]),this.asyncStream_.push(this.decryptChunk_(p.subarray(l,l+k),g,n,q));this.asyncStream_.push(function(){d(null,q.subarray(0,q.byteLength-q[q.byteLength-1]))})}h.prototype.decryptChunk_=function(l,g,n,d){return function(){var k=Si(l,g,n);d.set(k,l.byteOffset)}};bm(h,null,[{key:"STEP",get:function(){return 32E3}}]);return h}(),
Pc=function(h,l){if(/^[a-z]+:/i.test(l))return l;/\/\//i.test(h)||(h=Rf.buildAbsoluteURL(r.location.href,h));return Rf.buildAbsoluteURL(h,l)},ue=function(h,l,g){return h&&g.responseURL&&l!==g.responseURL?g.responseURL:l},gc=function(h,l){if(!(h instanceof l))throw new TypeError("Cannot call a class as a function");},jc=function(){function h(l,g){for(var n=0;n<g.length;n++){var d=g[n];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(l,d.key,d)}}return function(l,
g,n){g&&h(l.prototype,g);n&&h(l,n);return l}}(),fm=function d(l,g,n){null===l&&(l=Function.prototype);var k=Object.getOwnPropertyDescriptor(l,g);if(void 0===k){if(l=Object.getPrototypeOf(l),null!==l)return d(l,g,n)}else{if("value"in k)return k.value;g=k.get;return void 0===g?void 0:g.call(n)}},vc=function(l,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);l.prototype=Object.create(g&&g.prototype,{constructor:{value:l,enumerable:!1,
writable:!0,configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(l,g):l.__proto__=g)},nc=function(l,g){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!==typeof g&&"function"!==typeof g?l:g},gm=function(){return function(l,g){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l)){var n=[],d=!0,k=!1,p=void 0;try{for(var q=l[Symbol.iterator](),t;!(d=(t=q.next()).done)&&(n.push(t.value),!g||n.length!==g);d=!0);}catch(D){k=
!0,p=D}finally{try{if(!d&&q["return"])q["return"]()}finally{if(k)throw p;}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),Zf=la.mergeOptions,hm=la.log,ve=function(l,g){["AUDIO","SUBTITLES"].forEach(function(n){for(var d in l.mediaGroups[n])for(var k in l.mediaGroups[n][d])g(l.mediaGroups[n][d][k],n,d,k)})},im=function(l,g,n){var d=g.slice();n=n||0;g=Math.min(l.length,g.length+n);for(var k=n;k<g;k++)d[k-n]=Zf(l[k],d[k-n]);return d},$f=function(l,g){l=Zf(l,
{});var n=l.playlists[g.id];if(!n||n.segments&&g.segments&&n.segments.length===g.segments.length&&n.endList===g.endList&&n.mediaSequence===g.mediaSequence)return null;var d=Zf(n,g);n.segments&&(d.segments=im(n.segments,g.segments,g.mediaSequence-n.mediaSequence));d.segments.forEach(function(k){var p=d.resolvedUri;k.resolvedUri||(k.resolvedUri=Pc(p,k.uri));k.key&&!k.key.resolvedUri&&(k.key.resolvedUri=Pc(p,k.key.uri));k.map&&!k.map.resolvedUri&&(k.map.resolvedUri=Pc(p,k.map.uri))});for(n=0;n<l.playlists.length;n++)l.playlists[n].id===
g.id&&(l.playlists[n]=d);l.playlists[g.id]=d;l.playlists[g.uri]=d;return l},Ti=function(l){for(var g=l.playlists.length;g--;){var n=l.playlists[g];n.resolvedUri=Pc(l.uri,n.uri);n.id=g+"-"+n.uri;l.playlists[n.id]=n;l.playlists[n.uri]=n;n.attributes||(n.attributes={},hm.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Ui=function(l){ve(l,function(g){g.uri&&(g.resolvedUri=Pc(l.uri,g.uri))})},Vi=function(l,g){var n=l.segments[l.segments.length-1];return g&&n&&n.duration?1E3*
n.duration:500*(l.targetDuration||10)},we=function(l){function g(n,d){var k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};gc(this,g);var p=nc(this,(g.__proto__||Object.getPrototypeOf(g)).call(this)),q=k.withCredentials;k=k.handleManifestRedirects;p.srcUrl=n;p.hls_=d;p.withCredentials=void 0===q?!1:q;p.handleManifestRedirects=void 0===k?!1:k;q=d.options_;p.customTagParsers=q&&q.customTagParsers||[];p.customTagMappers=q&&q.customTagMappers||[];if(!p.srcUrl)throw Error("A non-empty playlist URL is required");
p.state="HAVE_NOTHING";p.on("mediaupdatetimeout",function(){"HAVE_METADATA"===p.state&&(p.state="HAVE_CURRENT_METADATA",p.request=p.hls_.xhr({uri:Pc(p.master.uri,p.media().uri),withCredentials:p.withCredentials},function(t,D){if(p.request){if(t)return p.playlistRequestError(p.request,p.media(),"HAVE_METADATA");p.haveMetadata(p.request,p.media().uri,p.media().id)}}))});return p}vc(g,l);jc(g,[{key:"playlistRequestError",value:function(n,d,k){var p=d.uri;d=d.id;this.request=null;k&&(this.state=k);this.error=
{playlist:this.master.playlists[d],status:n.status,message:"HLS playlist request error at URL: "+p+".",responseText:n.responseText,code:500<=n.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(n,d,k){var p=this;this.request=null;this.state="HAVE_METADATA";var q=new vi;this.customTagParsers.forEach(function(t){return q.addParser(t)});this.customTagMappers.forEach(function(t){return q.addTagMapper(t)});q.push(n.responseText);q.end();q.manifest.uri=d;q.manifest.id=k;q.manifest.attributes=
q.manifest.attributes||{};n=$f(this.master,q.manifest);this.targetDuration=q.manifest.targetDuration;n?(this.master=n,this.media_=this.master.playlists[k]):this.trigger("playlistunchanged");this.media().endList||(r.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=r.setTimeout(function(){p.trigger("mediaupdatetimeout")},Vi(this.media(),!!n)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.trigger("dispose");this.stopRequest();r.clearTimeout(this.mediaUpdateTimeout);
r.clearTimeout(this.finalRenditionTimeout);this.off()}},{key:"stopRequest",value:function(){if(this.request){var n=this.request;this.request=null;n.onreadystatechange=null;n.abort()}}},{key:"media",value:function(n,d){var k=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"===typeof n){if(!this.master.playlists[n])throw Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}r.clearTimeout(this.finalRenditionTimeout);
if(d)d=n.targetDuration/2*1E3||5E3,this.finalRenditionTimeout=r.setTimeout(this.media.bind(this,n,!1),d);else{var p=this.state;d=!this.media_||n.id!==this.media_.id;if(this.master.playlists[n.id].endList)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,d&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(d){this.state="SWITCHING_MEDIA";if(this.request){if(n.resolvedUri===this.request.url)return;this.request.onreadystatechange=
null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:n.resolvedUri,withCredentials:this.withCredentials},function(q,t){if(k.request){n.resolvedUri=ue(k.handleManifestRedirects,n.resolvedUri,t);if(q)return k.playlistRequestError(k.request,n,p);k.haveMetadata(t,n.uri,n.id);"HAVE_MASTER"===p?k.trigger("loadedmetadata"):k.trigger("mediachange")}})}}}},{key:"pause",value:function(){this.stopRequest();r.clearTimeout(this.mediaUpdateTimeout);
"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(n){var d=this;r.clearTimeout(this.mediaUpdateTimeout);var k=this.media();n?this.mediaUpdateTimeout=r.setTimeout(function(){return d.load()},k?k.targetDuration/2*1E3:5E3):this.started?k&&!k.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},
{key:"start",value:function(){var n=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(d,k){if(n.request){n.request=null;if(d)return n.error={status:k.status,message:"HLS playlist request error at URL: "+n.srcUrl+".",responseText:k.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");var p=new vi;n.customTagParsers.forEach(function(q){return p.addParser(q)});n.customTagMappers.forEach(function(q){return p.addTagMapper(q)});
p.push(k.responseText);p.end();n.state="HAVE_MASTER";n.srcUrl=ue(n.handleManifestRedirects,n.srcUrl,k);p.manifest.uri=n.srcUrl;if(p.manifest.playlists)n.master=p.manifest,Ti(n.master),Ui(n.master),n.trigger("loadedplaylist"),n.request||n.media(p.manifest.playlists[0]);else return d="0-"+n.srcUrl,n.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:r.location.href,playlists:[{uri:n.srcUrl,id:d,resolvedUri:n.srcUrl,attributes:{}}]},n.master.playlists[d]=n.master.playlists[0],
n.master.playlists[n.srcUrl]=n.master.playlists[0],n.haveMetadata(k,n.srcUrl,d),n.trigger("loadedmetadata")}})}}]);return g}(la.EventTarget),Wi=la.createTimeRange,jm=function(l,g){var n=0;g-=l.mediaSequence;var d=l.segments[g];if(d){if("undefined"!==typeof d.start)return{result:d.start,precise:!0};if("undefined"!==typeof d.end)return{result:d.end-d.duration,precise:!0}}for(;g--;){d=l.segments[g];if("undefined"!==typeof d.end)return{result:n+d.end,precise:!0};n+=d.duration;if("undefined"!==typeof d.start)return{result:n+
d.start,precise:!0}}return{result:n,precise:!1}},Xi=function(l,g,n){"undefined"===typeof g&&(g=l.mediaSequence+l.segments.length);if(g<l.mediaSequence)return 0;var d=jm(l,g);if(d.precise)return d.result;a:{var k=0;for(var p=g-l.mediaSequence;p<l.segments.length;p++){g=l.segments[p];if("undefined"!==typeof g.start){l=g.start-k;k=!0;break a}k+=g.duration;if("undefined"!==typeof g.end){l=g.end-k;k=!0;break a}}l=-1;k=!1}return k?l:d.result+n},Yi=function(l,g,n){if(!l)return 0;"number"!==typeof n&&(n=
0);if("undefined"===typeof g){if(l.totalDuration)return l.totalDuration;if(!l.endList)return r.Infinity}return Xi(l,g,n)},Gd=function(l,g,n){var d=0;g>n&&(n=[n,g],g=n[0],n=n[1]);if(0>g){for(;g<Math.min(0,n);g++)d+=l.targetDuration;g=0}for(;g<n;g++)d+=l.segments[g].duration;return d},Zi=function(l,g){if(!l.segments.length)return 0;var n=l.segments.length,d=l.segments[n-1].duration||l.targetDuration;g="number"===typeof g?g:d+2*l.targetDuration;if(0===g)return n;for(d=0;n--&&!(d+=l.segments[n].duration,
d>=g););return Math.max(0,n)},$i=function(l,g,n,d){if(!l||!l.segments)return null;if(l.endList)return Yi(l);if(null===g)return null;g=g||0;n=n?Zi(l,d):l.segments.length;return Xi(l,l.mediaSequence+n,g)},aj=function(l,g){if(0===g-Math.floor(g))return g+.1*l;for(var n=g.toString().split(".")[1].length,d=1;d<=n;d++){var k=Math.pow(10,d),p=g*k;if(0===p-Math.floor(p)||d===n)return(p+l)/k}},km=aj.bind(null,1),lm=aj.bind(null,-1),bj=function(l){return l.excludeUntil&&l.excludeUntil>Date.now()},ag=function(l){return l.excludeUntil&&
Infinity===l.excludeUntil},xe=function(l){var g=bj(l);return!l.disabled&&!g},cj=function(l,g){return g.attributes&&g.attributes[l]},bg=function(l,g){if(1===l.playlists.length)return!0;var n=g.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===l.playlists.filter(function(d){return xe(d)?(d.attributes.BANDWIDTH||0)<n:!1}).length},Rb={duration:Yi,seekable:function(l,g,n){var d=g||0;l=$i(l,g,!0,n);return null===l?Wi():Wi(d,l)},safeLiveIndex:Zi,getMediaInfoForTime:function(l,g,n,d){var k,p=l.segments.length,
q=g-d;if(0>q){if(0<n)for(k=n-1;0<=k;k--){var t=l.segments[k];q+=lm(t.duration);if(0<q)return{mediaIndex:k,startTime:d-Gd(l,n,k)}}return{mediaIndex:0,startTime:g}}if(0>n){for(k=n;0>k;k++)if(q-=l.targetDuration,0>q)return{mediaIndex:0,startTime:g};n=0}for(k=n;k<p;k++)if(t=l.segments[k],q-=km(t.duration),0>q)return{mediaIndex:k,startTime:d+Gd(l,n,k)};return{mediaIndex:p-1,startTime:g}},isEnabled:xe,isDisabled:function(l){return l.disabled},isBlacklisted:bj,isIncompatible:ag,playlistEnd:$i,isAes:function(l){for(var g=
0;g<l.segments.length;g++)if(l.segments[g].key)return!0;return!1},isFmp4:function(l){for(var g=0;g<l.segments.length;g++)if(l.segments[g].map)return!0;return!1},hasAttribute:cj,estimateSegmentRequestTime:function(l,g,n){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return cj("BANDWIDTH",n)?(l*n.attributes.BANDWIDTH-8*d)/g:NaN},isLowestEnabledRendition:bg},mm=la.xhr,nm=la.mergeOptions,dj=function(){return function d(g,n){g=nm({timeout:45E3},g);var k=d.beforeRequest||la.Hls.xhr.beforeRequest;
k&&"function"===typeof k&&(k=k(g))&&(g=k);var p=mm(g,function(t,D){var N=p.response;!t&&N&&(p.responseTime=Date.now(),p.roundTripTime=p.responseTime-p.requestTime,p.bytesReceived=N.byteLength||N.length,p.bandwidth||(p.bandwidth=Math.floor(p.bytesReceived/p.roundTripTime*8E3)));D.headers&&(p.responseHeaders=D.headers);t&&"ETIMEDOUT"===t.code&&(p.timedout=!0);t||p.aborted||200===D.statusCode||206===D.statusCode||0===D.statusCode||(t=Error("XHR Failed with a response of: "+(p&&(N||p.responseText))));
n(t,p)}),q=p.abort;p.abort=function(){p.aborted=!0;return q.apply(p,arguments)};p.uri=g.uri;p.requestTime=Date.now();return p}},cg=function(l){var g={};l.byterange&&(l=l.byterange,g.Range="bytes="+l.offset+"-"+(l.offset+l.length-1));return g},om=function(l,g){l=l.toString(16);return"00".substring(0,2-l.length)+l+(g%2?" ":"")},pm=function(l){return 32<=l&&126>l?String.fromCharCode(l):"."},ej=function(l){var g={};Object.keys(l).forEach(function(n){var d=l[n];ArrayBuffer.isView(d)?g[n]={bytes:d.buffer,
byteOffset:d.byteOffset,byteLength:d.byteLength}:g[n]=d});return g},ye=function(l){var g=l.byterange||{length:Infinity,offset:0};return[g.length,g.offset,l.resolvedUri].join()},fj=function(l){l=Array.prototype.slice.call(l);for(var g="",n,d,k=0;k<l.length/16;k++)n=l.slice(16*k,16*k+16).map(om).join(""),d=l.slice(16*k,16*k+16).map(pm).join(""),g+=n+" "+d+"\n";return g},qm=Object.freeze({createTransferableMessage:ej,initSegmentId:ye,segmentKeyId:function(l){return l.resolvedUri},hexDump:fj,tagDump:function(l){return fj(l.bytes)},
textRanges:function(l){var g="",n;for(n=0;n<l.length;n++){var d=l;var k=n;d=d.start(k)+"-"+d.end(k);g+=d+" "}return g}}),rm=function(l,g){var n=void 0;try{n=new Date(l)}catch(q){return null}if(!g||!g.segments||0===g.segments.length)return null;l=g.segments[0];if(n<l.dateTimeObject)return null;for(var d=0;d<g.segments.length-1&&!(l=g.segments[d],n<g.segments[d+1].dateTimeObject);d++);d=g.segments[g.segments.length-1];var k=d.dateTimeObject;if(d.videoTimingInfo){var p=d.videoTimingInfo;p=p.transmuxedPresentationEnd-
p.transmuxedPresentationStart-p.transmuxerPrependedSeconds}else p=d.duration+.25*d.duration;p=new Date(k.getTime()+1E3*p);if(n>p)return null;n>k&&(l=d);return{segment:l,estimatedStart:l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationStart:Rb.duration(g,g.mediaSequence+g.segments.indexOf(l)),type:l.videoTimingInfo?"accurate":"estimate"}},sm=function(l,g){if(!g||!g.segments||0===g.segments.length)return null;for(var n=0,d=void 0,k=0;k<g.segments.length&&!(d=g.segments[k],n=d.videoTimingInfo?
d.videoTimingInfo.transmuxedPresentationEnd:n+d.duration,l<=n);k++);g=g.segments[g.segments.length-1];if(g.videoTimingInfo&&g.videoTimingInfo.transmuxedPresentationEnd<l)return null;if(l>n){if(l>n+.25*g.duration)return null;d=g}return{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:n-d.duration,type:d.videoTimingInfo?"accurate":"estimate"}},tm=function(l,g){var n=void 0,d=void 0;try{n=new Date(l),d=new Date(g)}catch(k){}l=n.getTime();return(d.getTime()-l)/
1E3},um=function(l){if(!l.segments||0===l.segments.length)return!1;for(var g=0;g<l.segments.length;g++)if(!l.segments[g].dateTimeObject)return!1;return!0},vm=function(l){var g=l.playlist,n=l.time;n=void 0===n?void 0:n;l=l.callback;if(!l)throw Error("getProgramTime: callback must be provided");if(!g||void 0===n)return l({message:"getProgramTime: playlist and time must be provided"});var d=sm(n,g);if(!d)return l({message:"valid programTime was not found"});if("estimate"===d.type)return l({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",
seekTime:d.estimatedStart});g={mediaSeconds:n};d=d.segment;d.dateTimeObject?(n-=d.videoTimingInfo.transmuxedPresentationStart+d.videoTimingInfo.transmuxerPrependedSeconds,n=new Date(d.dateTimeObject.getTime()+1E3*n)):n=null;n&&(g.programDateTime=n.toISOString());return l(null,g)},wm=function n(g){var d=g.programTime,k=g.playlist,p=g.retryCount,q=void 0===p?2:p,t=g.seekTo;p=g.pauseAfterSeek;var D=void 0===p?!0:p,N=g.tech,Y=g.callback;if(!Y)throw Error("seekToProgramTime: callback must be provided");
if("undefined"===typeof d||!k||!t)return Y({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!k.endList&&!N.hasStarted_)return Y({message:"player must be playing a live stream to start buffering"});if(!um(k))return Y({message:"programDateTime tags must be provided in the manifest "+k.resolvedUri});g=rm(d,k);if(!g)return Y({message:d+" was not found in the stream"});p=g.segment;var oa=tm(p.dateTimeObject,d);if("estimate"===g.type){if(0===q)return Y({message:d+" is not buffered yet. Try again"});
t(g.estimatedStart+oa);N.one("seeked",function(){n({programTime:d,playlist:k,retryCount:q-1,seekTo:t,pauseAfterSeek:D,tech:N,callback:Y})})}else g=p.start+oa,N.one("seeked",function(){return Y(null,N.currentTime())}),D&&N.pause(),t(g)},ze=1/30,wc=3*ze,gj=function(g,n){var d=[],k;if(g&&g.length)for(k=0;k<g.length;k++)n(g.start(k),g.end(k))&&d.push([g.start(k),g.end(k)]);return la.createTimeRanges(d)},hj=function(g,n){return gj(g,function(d,k){return d-wc<=n&&k+wc>=n})},ij=function(g,n){return gj(g,
function(d){return d-ze>=n})},dg=function(g){var n=[];if(!g||!g.length)return"";for(var d=0;d<g.length;d++)n.push(g.start(d)+" => "+g.end(d));return n.join(", ")},xm=function(g,n){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((g.length?g.end(g.length-1):0)-n)/d},jj=function(g){for(var n=[],d=0;d<g.length;d++)n.push({start:g.start(d),end:g.end(d)});return n},nd=function(g,n,d){var k;if(d&&d.cues)for(k=d.cues.length;k--;){var p=d.cues[k];p.startTime<=n&&p.endTime>=g&&d.removeCue(p)}},
ym=function(g){Object.defineProperties(g.frame,{id:{get:function(){la.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return g.value.key}},value:{get:function(){la.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return g.value.data}},privateData:{get:function(){la.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return g.value.data}}})},kj=function(g){return isNaN(g)||Infinity===Math.abs(g)?Number.MAX_VALUE:g},zm=function(g,n,d){var k=
r.WebKitDataCue||r.VTTCue;n&&n.forEach(function(D){this.inbandTextTracks_[D.stream].addCue(new k(D.startTime+this.timestampOffset,D.endTime+this.timestampOffset,D.text))},g);if(d){var p=kj(g.mediaSource_.duration);d.forEach(function(D){var N=D.cueTime+this.timestampOffset;!("number"!==typeof N||r.isNaN(N)||0>N)&&Infinity>N&&D.frames.forEach(function(Y){var oa=new k(N,N,Y.value||Y.url||Y.data||"");oa.frame=Y;oa.value=Y;ym(oa);this.metadataTrack_.addCue(oa)},this)},g);if(g.metadataTrack_&&g.metadataTrack_.cues&&
g.metadataTrack_.cues.length){g=g.metadataTrack_.cues;n=[];for(d=0;d<g.length;d++)g[d]&&n.push(g[d]);var q=n.reduce(function(D,N){var Y=D[N.startTime]||[];Y.push(N);D[N.startTime]=Y;return D},{}),t=Object.keys(q).sort(function(D,N){return Number(D)-Number(N)});t.forEach(function(D,N){var Y=Number(t[N+1])||p;q[D].forEach(function(oa){oa.endTime=Y})})}}},Qc="undefined"!==typeof window?window:{},df="undefined"===typeof Symbol?"__target":Symbol(),xk=Qc.BlobBuilder||Qc.WebKitBlobBuilder||Qc.MozBlobBuilder||
Qc.MSBlobBuilder,$c=Qc.URL||Qc.webkitURL||$c&&$c.msURL,Zc=Qc.Worker;if(Zc){var lj=mh("self.onmessage = function () {}"),mj=new Uint8Array(1);try{var eg=new Zc(lj);eg.postMessage(mj,[mj.buffer])}catch(g){Zc=null}finally{$c.revokeObjectURL(lj),eg&&eg.terminate()}}var Wm=new lh("./transmuxer-worker.worker.js",function(g,n){var d=this;(function(){var k=function(){this.init=function(){var O={};this.on=function(Z,P){O[Z]||(O[Z]=[]);O[Z]=O[Z].concat(P)};this.off=function(Z,P){if(!O[Z])return!1;P=O[Z].indexOf(P);
O[Z]=O[Z].slice();O[Z].splice(P,1);return-1<P};this.trigger=function(Z){var P,v;if(P=O[Z])if(2===arguments.length){var I=P.length;for(v=0;v<I;++v)P[v].call(this,arguments[1])}else{var V=[];for(v=1;v<arguments.length;++v)V.push(arguments[v]);I=P.length;for(v=0;v<I;++v)P[v].apply(this,V)}};this.dispose=function(){O={}}}};k.prototype.pipe=function(O){this.on("data",function(Z){O.push(Z)});this.on("done",function(Z){O.flush(Z)});this.on("partialdone",function(Z){O.partialFlush(Z)});this.on("endedtimeline",
function(Z){O.endTimeline(Z)});this.on("reset",function(Z){O.reset(Z)});return O};k.prototype.push=function(O){this.trigger("data",O)};k.prototype.flush=function(O){this.trigger("done",O)};k.prototype.partialFlush=function(O){this.trigger("partialdone",O)};k.prototype.endTimeline=function(O){this.trigger("endedtimeline",O)};k.prototype.reset=function(O){this.trigger("reset",O)};var p=Math.pow(2,32)-1,q,t,D,N,Y,oa,ta,Ba,Da,va,Aa,Pa,Ma,eb,jb,Va;(function(){var O;D={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],
esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(O in D)D.hasOwnProperty(O)&&(D[O]=[O.charCodeAt(0),O.charCodeAt(1),O.charCodeAt(2),O.charCodeAt(3)]);N=new Uint8Array([105,115,111,109]);oa=new Uint8Array([97,118,99,49]);Y=new Uint8Array([0,0,0,1]);ta=new Uint8Array([0,
0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);Ba=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Da={video:ta,audio:Ba};Pa=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);Aa=new Uint8Array([0,0,0,0,0,0,0,0]);eb=Ma=new Uint8Array([0,0,0,0,0,0,0,0]);jb=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);Va=Ma;va=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var Fa=
function(O){var Z=[],P=0,v;for(v=1;v<arguments.length;v++)Z.push(arguments[v]);for(v=Z.length;v--;)P+=Z[v].byteLength;var I=new Uint8Array(P+8);(new DataView(I.buffer,I.byteOffset,I.byteLength)).setUint32(0,I.byteLength);I.set(O,4);v=0;for(P=8;v<Z.length;v++)I.set(Z[v],P),P+=Z[v].byteLength;return I};var Ua=function(){return Fa(D.dinf,Fa(D.dref,Pa))};var Bb=function(O){return Fa(D.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,O.audioobjecttype<<3|O.samplingfrequencyindex>>>
1,O.samplingfrequencyindex<<7|O.channelcount<<3,6,1,2]))};var yb=function(){return Fa(D.ftyp,N,Y,N,oa)};var Wb=function(O){return Fa(D.hdlr,Da[O])};var zb=function(O){var Z=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,O.duration>>>24&255,O.duration>>>16&255,O.duration>>>8&255,O.duration&255,85,196,0,0]);O.samplerate&&(Z[12]=O.samplerate>>>24&255,Z[13]=O.samplerate>>>16&255,Z[14]=O.samplerate>>>8&255,Z[15]=O.samplerate&255);return Fa(D.mdhd,Z)};var Mb=function(O){return Fa(D.mdia,zb(O),Wb(O.type),
xc(O))};var Xb=function(O){return Fa(D.mfhd,new Uint8Array([0,0,0,0,(O&4278190080)>>24,(O&16711680)>>16,(O&65280)>>8,O&255]))};var xc=function(O){return Fa(D.minf,"video"===O.type?Fa(D.vmhd,va):Fa(D.smhd,Aa),Ua(),Am(O))};var Rc=function(O){for(var Z=O.length,P=[];Z--;)P[Z]=Bm(O[Z]);return Fa.apply(null,[D.moov,Cm(4294967295)].concat(P).concat(fg(O)))};var fg=function(O){for(var Z=O.length,P=[];Z--;)P[Z]=Dm(O[Z]);return Fa.apply(null,[D.mvex].concat(P))};var Cm=function(O){O=new Uint8Array([0,0,0,
0,0,0,0,1,0,0,0,2,0,1,95,144,(O&4278190080)>>24,(O&16711680)>>16,(O&65280)>>8,O&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Fa(D.mvhd,O)};var Em=function(O){O=O.samples||[];var Z=new Uint8Array(4+O.length),P;for(P=0;P<O.length;P++){var v=O[P].flags;Z[P+4]=v.dependsOn<<4|v.isDependedOn<<2|v.hasRedundancy}return Fa(D.sdtp,Z)};var Am=function(O){return Fa(D.stbl,q(O),
Fa(D.stts,Va),Fa(D.stsc,eb),Fa(D.stsz,jb),Fa(D.stco,Ma))};(function(){q=function(P){return Fa(D.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===P.type?O(P):Z(P))};var O=function(P){var v=P.sps||[],I=P.pps||[],V=[],aa=[],ca;for(ca=0;ca<v.length;ca++)V.push((v[ca].byteLength&65280)>>>8),V.push(v[ca].byteLength&255),V=V.concat(Array.prototype.slice.call(v[ca]));for(ca=0;ca<I.length;ca++)aa.push((I[ca].byteLength&65280)>>>8),aa.push(I[ca].byteLength&255),aa=aa.concat(Array.prototype.slice.call(I[ca]));
v=[D.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(P.width&65280)>>8,P.width&255,(P.height&65280)>>8,P.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Fa(D.avcC,new Uint8Array([1,P.profileIdc,P.profileCompatibility,P.levelIdc,255].concat([v.length],V,[I.length],aa))),Fa(D.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];P.sarRatio&&(I=P.sarRatio[0],P=P.sarRatio[1],
v.push(Fa(D.pasp,new Uint8Array([(I&4278190080)>>24,(I&16711680)>>16,(I&65280)>>8,I&255,(P&4278190080)>>24,(P&16711680)>>16,(P&65280)>>8,P&255]))));return Fa.apply(null,v)};var Z=function(P){return Fa(D.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(P.channelcount&65280)>>8,P.channelcount&255,(P.samplesize&65280)>>8,P.samplesize&255,0,0,0,0,(P.samplerate&65280)>>8,P.samplerate&255,0,0]),Bb(P))}})();var Fm=function(O){O=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(O.id&4278190080)>>24,(O.id&16711680)>>
16,(O.id&65280)>>8,O.id&255,0,0,0,0,(O.duration&4278190080)>>24,(O.duration&16711680)>>16,(O.duration&65280)>>8,O.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(O.width&65280)>>8,O.width&255,0,0,(O.height&65280)>>8,O.height&255,0,0]);return Fa(D.tkhd,O)};var Gm=function(O){var Z=Fa(D.tfhd,new Uint8Array([0,0,0,58,(O.id&4278190080)>>24,(O.id&16711680)>>16,(O.id&65280)>>8,O.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var P=Math.floor(O.baseMediaDecodeTime/
(p+1));var v=Math.floor(O.baseMediaDecodeTime%(p+1));P=Fa(D.tfdt,new Uint8Array([1,0,0,0,P>>>24&255,P>>>16&255,P>>>8&255,P&255,v>>>24&255,v>>>16&255,v>>>8&255,v&255]));if("audio"===O.type)return O=t(O,92),Fa(D.traf,Z,P,O);v=Em(O);O=t(O,v.length+92);return Fa(D.traf,Z,P,O,v)};var Bm=function(O){O.duration=O.duration||4294967295;return Fa(D.trak,Fm(O),Mb(O))};var Dm=function(O){var Z=new Uint8Array([0,0,0,0,(O.id&4278190080)>>24,(O.id&16711680)>>16,(O.id&65280)>>8,O.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,
1,0,1]);"video"!==O.type&&(Z[Z.length-1]=0);return Fa(D.trex,Z)};(function(){var O=function(v,I){var V=0,aa=0,ca=0,da=0;v.length&&(void 0!==v[0].duration&&(V=1),void 0!==v[0].size&&(aa=2),void 0!==v[0].flags&&(ca=4),void 0!==v[0].compositionTimeOffset&&(da=8));return[0,0,V|aa|ca|da,1,(v.length&4278190080)>>>24,(v.length&16711680)>>>16,(v.length&65280)>>>8,v.length&255,(I&4278190080)>>>24,(I&16711680)>>>16,(I&65280)>>>8,I&255]};var Z=function(v,I){var V;v=v.samples||[];I+=20+16*v.length;I=O(v,I);for(V=
0;V<v.length;V++){var aa=v[V];I=I.concat([(aa.duration&4278190080)>>>24,(aa.duration&16711680)>>>16,(aa.duration&65280)>>>8,aa.duration&255,(aa.size&4278190080)>>>24,(aa.size&16711680)>>>16,(aa.size&65280)>>>8,aa.size&255,aa.flags.isLeading<<2|aa.flags.dependsOn,aa.flags.isDependedOn<<6|aa.flags.hasRedundancy<<4|aa.flags.paddingValue<<1|aa.flags.isNonSyncSample,aa.flags.degradationPriority&61440,aa.flags.degradationPriority&15,(aa.compositionTimeOffset&4278190080)>>>24,(aa.compositionTimeOffset&16711680)>>>
16,(aa.compositionTimeOffset&65280)>>>8,aa.compositionTimeOffset&255])}return Fa(D.trun,new Uint8Array(I))};var P=function(v,I){var V;v=v.samples||[];I+=20+8*v.length;I=O(v,I);for(V=0;V<v.length;V++){var aa=v[V];I=I.concat([(aa.duration&4278190080)>>>24,(aa.duration&16711680)>>>16,(aa.duration&65280)>>>8,aa.duration&255,(aa.size&4278190080)>>>24,(aa.size&16711680)>>>16,(aa.size&65280)>>>8,aa.size&255])}return Fa(D.trun,new Uint8Array(I))};t=function(v,I){return"audio"===v.type?P(v,I):Z(v,I)}})();
var Hd={ftyp:yb,mdat:function(O){return Fa(D.mdat,O)},moof:function(O,Z){for(var P=[],v=Z.length;v--;)P[v]=Gm(Z[v]);return Fa.apply(null,[D.moof,Xb(O)].concat(P))},moov:Rc,initSegment:function(O){var Z=yb();O=Rc(O);var P=new Uint8Array(Z.byteLength+O.byteLength);P.set(Z);P.set(O,Z.byteLength);return P}},nj=function(O,Z){var P={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};P.dataOffset=Z;P.compositionTimeOffset=O.pts-O.dts;P.duration=
O.duration;P.size=4*O.length;P.size+=O.byteLength;O.keyFrame&&(P.flags.dependsOn=2,P.flags.isNonSyncSample=0);return P},Id={groupNalsIntoFrames:function(O){var Z,P=[],v=[];v.byteLength=0;v.nalCount=0;v.duration=0;for(Z=P.byteLength=0;Z<O.length;Z++){var I=O[Z];"access_unit_delimiter_rbsp"===I.nalUnitType?(P.length&&(P.duration=I.dts-P.dts,v.byteLength+=P.byteLength,v.nalCount+=P.length,v.duration+=P.duration,v.push(P)),P=[I],P.byteLength=I.data.byteLength,P.pts=I.pts,P.dts=I.dts):("slice_layer_without_partitioning_rbsp_idr"===
I.nalUnitType&&(P.keyFrame=!0),P.duration=I.dts-P.dts,P.byteLength+=I.data.byteLength,P.push(I))}v.length&&(!P.duration||0>=P.duration)&&(P.duration=v[v.length-1].duration);v.byteLength+=P.byteLength;v.nalCount+=P.length;v.duration+=P.duration;v.push(P);return v},groupFramesIntoGops:function(O){var Z,P=[],v=[];P.byteLength=0;P.nalCount=0;P.duration=0;P.pts=O[0].pts;P.dts=O[0].dts;v.byteLength=0;v.nalCount=0;v.duration=0;v.pts=O[0].pts;v.dts=O[0].dts;for(Z=0;Z<O.length;Z++){var I=O[Z];I.keyFrame?(P.length&&
(v.push(P),v.byteLength+=P.byteLength,v.nalCount+=P.nalCount,v.duration+=P.duration),P=[I],P.nalCount=I.length,P.byteLength=I.byteLength,P.pts=I.pts,P.dts=I.dts,P.duration=I.duration):(P.duration+=I.duration,P.nalCount+=I.length,P.byteLength+=I.byteLength,P.push(I))}v.length&&0>=P.duration&&(P.duration=v[v.length-1].duration);v.byteLength+=P.byteLength;v.nalCount+=P.nalCount;v.duration+=P.duration;v.push(P);return v},extendFirstKeyFrame:function(O){if(!O[0][0].keyFrame&&1<O.length){var Z=O.shift();
O.byteLength-=Z.byteLength;O.nalCount-=Z.nalCount;O[0][0].dts=Z.dts;O[0][0].pts=Z.pts;O[0][0].duration+=Z.duration}return O},generateSampleTable:function(O,Z){var P,v=Z||0,I=[];for(Z=0;Z<O.length;Z++){var V=O[Z];for(P=0;P<V.length;P++){var aa=V[P];aa=nj(aa,v);v+=aa.size;I.push(aa)}}return I},concatenateNalData:function(O){var Z,P,v,I=0,V=new Uint8Array(O.byteLength+4*O.nalCount),aa=new DataView(V.buffer);for(Z=0;Z<O.length;Z++){var ca=O[Z];for(P=0;P<ca.length;P++){var da=ca[P];for(v=0;v<da.length;v++){var ua=
da[v];aa.setUint32(I,ua.data.byteLength);I+=4;V.set(ua.data,I);I+=ua.data.byteLength}}}return V},generateSampleTableForFrame:function(O,Z){var P=[];O=nj(O,Z||0);P.push(O);return P},concatenateNalDataForFrame:function(O){var Z,P=0,v=new Uint8Array(O.byteLength+4*O.length),I=new DataView(v.buffer);for(Z=0;Z<O.length;Z++){var V=O[Z];I.setUint32(P,V.data.byteLength);P+=4;v.set(V.data,P);P+=V.data.byteLength}return v}},qb=[33,16,5,32,164,27],Jd=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],db=function(O){for(var Z=
[];O--;)Z.push(0);return Z},Hm=function(O){return Object.keys(O).reduce(function(Z,P){Z[P]=new Uint8Array(O[P].reduce(function(v,I){return v.concat(I)},[]));return Z},{})}({96E3:[qb,[227,64],db(154),[56]],88200:[qb,[231],db(170),[56]],64E3:[qb,[248,192],db(240),[56]],48E3:[qb,[255,192],db(268),[55,148,128],db(54),[112]],44100:[qb,[255,192],db(268),[55,163,128],db(84),[112]],32E3:[qb,[255,192],db(268),[55,234],db(226),[112]],24E3:[qb,[255,192],db(268),[55,255,128],db(268),[111,112],db(126),[224]],
16E3:[qb,[255,192],db(268),[55,255,128],db(268),[111,255],db(269),[223,108],db(195),[1,192]],12E3:[Jd,db(268),[3,127,248],db(268),[6,255,240],db(268),[13,255,224],db(268),[27,253,128],db(259),[56]],11025:[Jd,db(268),[3,127,248],db(268),[6,255,240],db(268),[13,255,224],db(268),[27,255,192],db(268),[55,175,128],db(108),[112]],8E3:[Jd,db(268),[3,121,16],db(47),[7]]});var oj=function(O){return 9E4*O};var pj=function(O,Z){return O*Z};var gg=function(O){return O/9E4};var qj=function(O,Z){return O/Z};var oc=
{ONE_SECOND_IN_TS:9E4,secondsToVideoTs:oj,secondsToAudioTs:pj,videoTsToSeconds:gg,audioTsToSeconds:qj,audioTsToVideoTs:function(O,Z){return oj(qj(O,Z))},videoTsToAudioTs:function(O,Z){return pj(gg(O),Z)},metadataTsToSeconds:function(O,Z,P){return gg(P?O:O-Z)}},Ae={prefixWithSilence:function(O,Z,P,v){var I,V=I=0;if(Z.length){var aa=oc.audioTsToVideoTs(O.baseMediaDecodeTime,O.samplerate);var ca=Math.ceil(oc.ONE_SECOND_IN_TS/(O.samplerate/1024));P&&v&&(I=aa-Math.max(P,v),I=Math.floor(I/ca),V=I*ca);if(!(1>
I||V>oc.ONE_SECOND_IN_TS/2)){P=Hm[O.samplerate];P||(P=Z[0].data);for(v=0;v<I;v++)aa=Z[0],Z.splice(0,0,{data:P,dts:aa.dts-ca,pts:aa.pts-ca});O.baseMediaDecodeTime-=Math.floor(oc.videoTsToAudioTs(V,O.samplerate))}}},trimAdtsFramesByEarliestDts:function(O,Z,P){if(Z.minSegmentDts>=P)return O;Z.minSegmentDts=Infinity;return O.filter(function(v){return v.dts>=P?(Z.minSegmentDts=Math.min(Z.minSegmentDts,v.dts),Z.minSegmentPts=Z.minSegmentDts,!0):!1})},generateSampleTable:function(O){var Z,P=[];for(Z=0;Z<
O.length;Z++){var v=O[Z];P.push({size:v.data.byteLength,duration:1024})}return P},concatenateFrameData:function(O){var Z,P=0;var v=Uint8Array;var I=0;for(Z=0;Z<O.length;Z++){var V=O[Z];I+=V.data.byteLength}V=new v(I);for(v=0;v<O.length;v++)Z=O[v],V.set(Z.data,P),P+=Z.data.byteLength;return V}},Im=oc.ONE_SECOND_IN_TS,kc={clearDtsInfo:function(O){delete O.minSegmentDts;delete O.maxSegmentDts;delete O.minSegmentPts;delete O.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(O,Z){var P=O.minSegmentDts;
Z||(P-=O.timelineStartInfo.dts);Z=O.timelineStartInfo.baseMediaDecodeTime;Z=Math.max(0,Z+P);"audio"===O.type&&(O=O.samplerate/Im,Z=Math.floor(Z*O));return Z},collectDtsInfo:function(O,Z){"number"===typeof Z.pts&&(void 0===O.timelineStartInfo.pts&&(O.timelineStartInfo.pts=Z.pts),O.minSegmentPts=void 0===O.minSegmentPts?Z.pts:Math.min(O.minSegmentPts,Z.pts),O.maxSegmentPts=void 0===O.maxSegmentPts?Z.pts:Math.max(O.maxSegmentPts,Z.pts));"number"===typeof Z.dts&&(void 0===O.timelineStartInfo.dts&&(O.timelineStartInfo.dts=
Z.dts),O.minSegmentDts=void 0===O.minSegmentDts?Z.dts:Math.min(O.minSegmentDts,Z.dts),O.maxSegmentDts=void 0===O.maxSegmentDts?Z.dts:Math.max(O.maxSegmentDts,Z.dts))}},Be={parseSei:function(O){for(var Z=0,P={payloadType:-1,payloadSize:0},v=0,I=0;Z<O.byteLength&&128!==O[Z];){for(;255===O[Z];)v+=255,Z++;for(v+=O[Z++];255===O[Z];)I+=255,Z++;I+=O[Z++];if(!P.payload&&4===v){P.payloadType=v;P.payloadSize=I;P.payload=O.subarray(Z,Z+I);break}Z+=I;I=v=0}return P},parseUserData:function(O){return 181!==O.payload[0]||
49!==(O.payload[1]<<8|O.payload[2])||"GA94"!==String.fromCharCode(O.payload[3],O.payload[4],O.payload[5],O.payload[6])||3!==O.payload[7]?null:O.payload.subarray(8,O.payload.length-1)},parseCaptionPackets:function(O,Z){var P=[],v;if(!(Z[0]&64))return P;var I=Z[0]&31;for(v=0;v<I;v++){var V=3*v;var aa={type:Z[V+2]&3,pts:O};Z[V+2]&4&&(aa.ccData=Z[V+3]<<8|Z[V+4],P.push(aa))}return P},discardEmulationPreventionBytes:function(O){for(var Z=O.byteLength,P=[],v=1,I;v<Z-2;)0===O[v]&&0===O[v+1]&&3===O[v+2]?(P.push(v+
2),v+=2):v++;if(0===P.length)return O;Z-=P.length;I=new Uint8Array(Z);var V=0;for(v=0;v<Z;V++,v++)V===P[0]&&(V++,P.shift()),I[v]=O[V];return I},USER_DATA_REGISTERED_ITU_T_T35:4};qb=function Z(){Z.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new mb(0,0),new mb(0,1),new mb(1,0),new mb(1,1)];this.reset();this.ccStreams_.forEach(function(P){P.on("data",this.trigger.bind(this,"data"));P.on("partialdone",this.trigger.bind(this,"partialdone"));P.on("done",this.trigger.bind(this,"done"))},
this)};qb.prototype=new k;qb.prototype.push=function(Z){if("sei_rbsp"===Z.nalUnitType){var P=Be.parseSei(Z.escapedRBSP);P.payloadType===Be.USER_DATA_REGISTERED_ITU_T_T35&&(P=Be.parseUserData(P))&&(Z.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:Z.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(P=Be.parseCaptionPackets(Z.pts,P),this.captionPackets_=this.captionPackets_.concat(P),this.latestDts_!==Z.dts&&(this.numSameDts_=0),this.numSameDts_++,
this.latestDts_=Z.dts))}};qb.prototype.flushCCStreams=function(Z){this.ccStreams_.forEach(function(P){return"flush"===Z?P.flush():P.partialFlush()},this)};qb.prototype.flushStream=function(Z){this.captionPackets_.length&&(this.captionPackets_.forEach(function(P,v){P.presortIndex=v}),this.captionPackets_.sort(function(P,v){return P.pts===v.pts?P.presortIndex-v.presortIndex:P.pts-v.pts}),this.captionPackets_.forEach(function(P){2>P.type&&this.dispatchCea608Packet(P)},this),this.captionPackets_.length=
0);this.flushCCStreams(Z)};qb.prototype.flush=function(){return this.flushStream("flush")};qb.prototype.partialFlush=function(){return this.flushStream("partialFlush")};qb.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(Z){Z.reset()})};qb.prototype.dispatchCea608Packet=function(Z){this.setsTextOrXDSActive(Z)?this.activeCea608Channel_[Z.type]=null:this.setsChannel1Active(Z)?this.activeCea608Channel_[Z.type]=
0:this.setsChannel2Active(Z)&&(this.activeCea608Channel_[Z.type]=1);null!==this.activeCea608Channel_[Z.type]&&this.ccStreams_[(Z.type<<1)+this.activeCea608Channel_[Z.type]].push(Z)};qb.prototype.setsChannel1Active=function(Z){return 4096===(Z.ccData&30720)};qb.prototype.setsChannel2Active=function(Z){return 6144===(Z.ccData&30720)};qb.prototype.setsTextOrXDSActive=function(Z){return 256===(Z.ccData&28928)||4138===(Z.ccData&30974)||6186===(Z.ccData&30974)};var Jm={42:225,92:233,94:237,95:243,96:250,
123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,
809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ce=function(Z){if(null===Z)return"";Z=Jm[Z]||Z;return String.fromCharCode(Z)},Km=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Sc=function(){for(var Z=[],P=15;P--;)Z.push("");return Z},mb=function I(P,v){I.prototype.init.call(this);this.field_=P||0;this.dataChannel_=v||0;this.name_=
"CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(V){var aa=V.ccData&32639;if(aa===this.lastControlCode_)this.lastControlCode_=null;else{4096===(aa&61440)?this.lastControlCode_=aa:aa!==this.PADDING_&&(this.lastControlCode_=null);var ca=aa>>>8;var da=aa&255;aa!==this.PADDING_&&(aa===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":aa===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(V.pts),this.flushDisplayed(V.pts),da=this.displayed_,this.displayed_=
this.nonDisplayed_,this.nonDisplayed_=da,this.startPts_=V.pts):aa===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(V.pts)):aa===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(V.pts)):aa===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(V.pts)):aa===this.CARRIAGE_RETURN_?(this.clearFormatting(V.pts),this.flushDisplayed(V.pts),this.shiftRowsUp_(),this.startPts_=V.pts):aa===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,
-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):aa===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(V.pts),this.displayed_=Sc()):aa===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Sc():aa===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(V.pts),this.displayed_=Sc()),this.mode_="paintOn",this.startPts_=V.pts):this.isSpecialCharacter(ca,da)?(aa=Ce((ca&3)<<8|da),this[this.mode_](V.pts,aa),this.column_++):this.isExtCharacter(ca,da)?("popOn"===
this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),aa=Ce((ca&3)<<8|da),this[this.mode_](V.pts,aa),this.column_++):this.isMidRowCode(ca,da)?(this.clearFormatting(V.pts),this[this.mode_](V.pts," "),this.column_++,14===(da&14)&&this.addFormatting(V.pts,["i"]),1===(da&1)&&this.addFormatting(V.pts,["u"])):this.isOffsetControlCode(ca,da)?this.column_+=da&3:this.isPAC(ca,da)?(ca=Km.indexOf(aa&7968),"rollUp"===
this.mode_&&(0>ca-this.rollUpRows_+1&&(ca=this.rollUpRows_-1),this.setRollUp(V.pts,ca)),ca!==this.row_&&(this.clearFormatting(V.pts),this.row_=ca),da&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(V.pts,["u"]),16===(aa&16)&&(this.column_=4*((aa&14)>>1)),this.isColorPAC(da)&&14===(da&14)&&this.addFormatting(V.pts,["i"])):this.isNormalChar(ca)&&(0===da&&(da=null),aa=Ce(ca),aa+=Ce(da),this[this.mode_](V.pts,aa),this.column_+=aa.length))}}};mb.prototype=new k;mb.prototype.flushDisplayed=function(P){var v=
this.displayed_.map(function(I){try{return I.trim()}catch(V){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");v.length&&this.trigger("data",{startPts:this.startPts_,endPts:P,text:v,stream:this.name_})};mb.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Sc();this.nonDisplayed_=Sc();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};mb.prototype.setConstants=function(){0===
this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=
this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};mb.prototype.isSpecialCharacter=function(P,v){return P===this.EXT_&&48<=v&&63>=v};mb.prototype.isExtCharacter=function(P,v){return(P===this.EXT_+1||P===this.EXT_+2)&&32<=v&&63>=v};mb.prototype.isMidRowCode=function(P,v){return P===this.EXT_&&32<=v&&47>=v};mb.prototype.isOffsetControlCode=function(P,v){return P===this.OFFSET_&&33<=v&&35>=v};mb.prototype.isPAC=function(P,v){return P>=this.BASE_&&
P<this.BASE_+8&&64<=v&&127>=v};mb.prototype.isColorPAC=function(P){return 64<=P&&79>=P||96<=P&&127>=P};mb.prototype.isNormalChar=function(P){return 32<=P&&127>=P};mb.prototype.setRollUp=function(P,v){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(P),this.nonDisplayed_=Sc(),this.displayed_=Sc());if(void 0!==v&&v!==this.row_)for(P=0;P<this.rollUpRows_;P++)this.displayed_[v-P]=this.displayed_[this.row_-P],this.displayed_[this.row_-P]="";void 0===v&&(v=this.row_);this.topRow_=
v-this.rollUpRows_+1};mb.prototype.addFormatting=function(P,v){this.formatting_=this.formatting_.concat(v);v=v.reduce(function(I,V){return I+"<"+V+">"},"");this[this.mode_](P,v)};mb.prototype.clearFormatting=function(P){if(this.formatting_.length){var v=this.formatting_.reverse().reduce(function(I,V){return I+"</"+V+">"},"");this.formatting_=[];this[this.mode_](P,v)}};mb.prototype.popOn=function(P,v){this.nonDisplayed_[this.row_]+=v};mb.prototype.rollUp=function(P,v){this.displayed_[this.row_]+=v};
mb.prototype.shiftRowsUp_=function(){var P;for(P=0;P<this.topRow_;P++)this.displayed_[P]="";for(P=this.row_+1;15>P;P++)this.displayed_[P]="";for(P=this.topRow_;P<this.row_;P++)this.displayed_[P]=this.displayed_[P+1];this.displayed_[this.row_]=""};mb.prototype.paintOn=function(P,v){this.displayed_[this.row_]+=v};Jd=mb;var Yb={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},rj=function(P,v){var I=1;for(P>v&&(I=-1);4294967296<Math.abs(v-P);)P+=8589934592*I;return P};db=function I(v){var V,
aa;I.prototype.init.call(this);this.type_=v||"shared";this.push=function(ca){if("shared"===this.type_||ca.type===this.type_)void 0===aa&&(aa=ca.dts),ca.dts=rj(ca.dts,aa),ca.pts=rj(ca.pts,aa),V=ca.dts,this.trigger("data",ca)};this.flush=function(){aa=V;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){V=aa=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};db.prototype=new k;var Kd=function(v,I,V){for(var aa=
"";I<V;I++)aa+="%"+("00"+v[I].toString(16)).slice(-2);return aa},De=function(v){return v[0]<<21|v[1]<<14|v[2]<<7|v[3]},sj={TXXX:function(v){var I;if(3===v.data[0]){for(I=1;I<v.data.length;I++)if(0===v.data[I]){v.description=decodeURIComponent(Kd(v.data,1,I));v.value=decodeURIComponent(Kd(v.data,I+1,v.data.length)).replace(/\0*$/,"");break}v.data=v.value}},WXXX:function(v){var I;if(3===v.data[0])for(I=1;I<v.data.length;I++)if(0===v.data[I]){v.description=decodeURIComponent(Kd(v.data,1,I));v.url=decodeURIComponent(Kd(v.data,
I+1,v.data.length));break}},PRIV:function(v){var I;for(I=0;I<v.data.length;I++)if(0===v.data[I]){v.owner=unescape(Kd(v.data,0,I));break}v.privateData=v.data.subarray(I+1);v.data=v.privateData}};var hg=function(v){var I=!(!v||!v.debug);v=v&&v.descriptor;var V=0,aa=[],ca=0,da;hg.prototype.init.call(this);this.dispatchType=Yb.METADATA_STREAM_TYPE.toString(16);if(v)for(da=0;da<v.length;da++)this.dispatchType+=("00"+v[da].toString(16)).slice(-2);this.push=function(ua){var wa;if("timed-metadata"===ua.type)if(ua.dataAlignmentIndicator&&
(ca=0,aa.length=0),0===aa.length&&(10>ua.data.length||73!==ua.data[0]||68!==ua.data[1]||51!==ua.data[2]))I&&console.log("Skipping unrecognized metadata packet");else if(aa.push(ua),ca+=ua.data.byteLength,1===aa.length&&(V=De(ua.data.subarray(6,10)),V+=10),!(ca<V)){ua={data:new Uint8Array(V),frames:[],pts:aa[0].pts,dts:aa[0].dts};for(wa=0;wa<V;)ua.data.set(aa[0].data.subarray(0,V-wa),wa),wa+=aa[0].data.byteLength,ca-=aa[0].data.byteLength,aa.shift();wa=10;ua.data[5]&64&&(wa=wa+4+De(ua.data.subarray(10,
14)),V-=De(ua.data.subarray(16,20)));do{var ya=De(ua.data.subarray(wa+4,wa+8));if(1>ya)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var Ga=String.fromCharCode(ua.data[wa],ua.data[wa+1],ua.data[wa+2],ua.data[wa+3]);Ga={id:Ga,data:ua.data.subarray(wa+10,wa+ya+10)};Ga.key=Ga.id;if(sj[Ga.id]&&(sj[Ga.id](Ga),"com.apple.streaming.transportStreamTimestamp"===Ga.owner)){var Sa=Ga.data,Ja=(Sa[3]&1)<<30|Sa[4]<<22|Sa[5]<<14|Sa[6]<<6|Sa[7]>>>2;Ja*=4;Ja+=Sa[7]&3;Ga.timeStamp=
Ja;void 0===ua.pts&&void 0===ua.dts&&(ua.pts=Ga.timeStamp,ua.dts=Ga.timeStamp);this.trigger("timestamp",Ga)}ua.frames.push(Ga);wa+=10;wa+=ya}while(wa<V);this.trigger("data",ua)}}};hg.prototype=new k;var ig=function(){var v=new Uint8Array(188),I=0;ig.prototype.init.call(this);this.push=function(V){var aa=0,ca=188;if(I){var da=new Uint8Array(V.byteLength+I);da.set(v.subarray(0,I));da.set(V,I);I=0}else da=V;for(;ca<da.byteLength;)71===da[aa]&&71===da[ca]?(this.trigger("data",da.subarray(aa,ca)),aa+=
188,ca+=188):(aa++,ca++);aa<da.byteLength&&(v.set(da.subarray(aa),0),I=da.byteLength-aa)};this.flush=function(){188===I&&71===v[0]&&(this.trigger("data",v),I=0);this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.reset=function(){I=0;this.trigger("reset")}};ig.prototype=new k;var Ee=function(){Ee.prototype.init.call(this);var v=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var I=function(ca,da){var ua=0;da.payloadUnitStartIndicator&&(ua+=
ca[ua]+1);"pat"===da.type?V(ca.subarray(ua),da):aa(ca.subarray(ua),da)};var V=function(ca,da){da.section_number=ca[7];da.last_section_number=ca[8];v.pmtPid=(ca[10]&31)<<8|ca[11];da.pmtPid=v.pmtPid};var aa=function(ca,da){var ua;if(ca[5]&1){v.programMapTable={video:null,audio:null,"timed-metadata":{}};var wa=3+((ca[1]&15)<<8|ca[2])-4;for(ua=12+((ca[10]&15)<<8|ca[11]);ua<wa;){var ya=ca[ua],Ga=(ca[ua+1]&31)<<8|ca[ua+2];ya===Yb.H264_STREAM_TYPE&&null===v.programMapTable.video?v.programMapTable.video=
Ga:ya===Yb.ADTS_STREAM_TYPE&&null===v.programMapTable.audio?v.programMapTable.audio=Ga:ya===Yb.METADATA_STREAM_TYPE&&(v.programMapTable["timed-metadata"][Ga]=ya);ua+=((ca[ua+3]&15)<<8|ca[ua+4])+5}da.programMapTable=v.programMapTable}};this.push=function(ca){var da={},ua=4;da.payloadUnitStartIndicator=!!(ca[1]&64);da.pid=ca[1]&31;da.pid<<=8;da.pid|=ca[2];1<(ca[3]&48)>>>4&&(ua+=ca[ua]+1);if(0===da.pid)da.type="pat",I(ca.subarray(ua),da),this.trigger("data",da);else if(da.pid===this.pmtPid)for(da.type=
"pmt",I(ca.subarray(ua),da),this.trigger("data",da);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([ca,ua,da]):this.processPes_(ca,ua,da)};this.processPes_=function(ca,da,ua){ua.streamType=ua.pid===this.programMapTable.video?Yb.H264_STREAM_TYPE:ua.pid===this.programMapTable.audio?Yb.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][ua.pid];ua.type="pes";ua.data=ca.subarray(da);
this.trigger("data",ua)}};Ee.prototype=new k;Ee.STREAM_TYPES={h264:27,adts:15};var jg=function(){var v=this,I={data:[],size:0},V={data:[],size:0},aa={data:[],size:0},ca,da=function(ua,wa,ya){var Ga=new Uint8Array(ua.size),Sa={type:wa},Ja,ib=0;if(ua.data.length&&!(9>ua.size)){Sa.trackId=ua.data[0].pid;for(Ja=0;Ja<ua.data.length;Ja++){var Db=ua.data[Ja];Ga.set(Db.data,ib);ib+=Db.data.byteLength}Sa.packetLength=6+(Ga[4]<<8|Ga[5]);Sa.dataAlignmentIndicator=0!==(Ga[6]&4);Ja=Ga[7];Ja&192&&(Sa.pts=(Ga[9]&
14)<<27|(Ga[10]&255)<<20|(Ga[11]&254)<<12|(Ga[12]&255)<<5|(Ga[13]&254)>>>3,Sa.pts*=4,Sa.pts+=(Ga[13]&6)>>>1,Sa.dts=Sa.pts,Ja&64&&(Sa.dts=(Ga[14]&14)<<27|(Ga[15]&255)<<20|(Ga[16]&254)<<12|(Ga[17]&255)<<5|(Ga[18]&254)>>>3,Sa.dts*=4,Sa.dts+=(Ga[18]&6)>>>1));Sa.data=Ga.subarray(9+Ga[8]);wa="video"===wa||Sa.packetLength<=ua.size;if(ya||wa)ua.size=0,ua.data.length=0;wa&&v.trigger("data",Sa)}};jg.prototype.init.call(this);this.push=function(ua){({pat:function(){},pes:function(){switch(ua.streamType){case Yb.H264_STREAM_TYPE:case Yb.H264_STREAM_TYPE:var wa=
I;var ya="video";break;case Yb.ADTS_STREAM_TYPE:wa=V;ya="audio";break;case Yb.METADATA_STREAM_TYPE:wa=aa;ya="timed-metadata";break;default:return}ua.payloadUnitStartIndicator&&da(wa,ya,!0);wa.data.push(ua);wa.size+=ua.data.byteLength},pmt:function(){var wa={type:"metadata",tracks:[]};ca=ua.programMapTable;null!==ca.video&&wa.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ca.video,codec:"avc",type:"video"});null!==ca.audio&&wa.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+ca.audio,
codec:"adts",type:"audio"});v.trigger("data",wa)}})[ua.type]()};this.reset=function(){I.size=0;I.data.length=0;V.size=0;V.data.length=0;this.trigger("reset")};this.flushStreams_=function(){da(I,"video");da(V,"audio");da(aa,"timed-metadata")};this.flush=function(){this.flushStreams_();this.trigger("done")}};jg.prototype=new k;var pc={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ig,TransportParseStream:Ee,ElementaryStream:jg,TimestampRolloverStream:db,CaptionStream:qb,Cea608Stream:Jd,MetadataStream:hg},
Fe;for(Fe in Yb)Yb.hasOwnProperty(Fe)&&(pc[Fe]=Yb[Fe]);var Lm=oc.ONE_SECOND_IN_TS,tj=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Ge=function(v){var I,V=0;Ge.prototype.init.call(this);this.push=function(aa){var ca=0;v||(V=0);if("audio"===aa.type){if(I){var da=I;I=new Uint8Array(da.byteLength+aa.data.byteLength);I.set(da);I.set(aa.data,da.byteLength)}else I=aa.data;for(;ca+5<I.length;)if(255!==I[ca]||240!==(I[ca+1]&246))ca++;else{da=2*(~I[ca+1]&1);var ua=(I[ca+3]&3)<<11|
I[ca+4]<<3|(I[ca+5]&224)>>5;var wa=1024*((I[ca+6]&3)+1);var ya=wa*Lm/tj[(I[ca+2]&60)>>>2];ua=ca+ua;if(I.byteLength<ua)break;this.trigger("data",{pts:aa.pts+V*ya,dts:aa.dts+V*ya,sampleCount:wa,audioobjecttype:(I[ca+2]>>>6&3)+1,channelcount:(I[ca+2]&1)<<2|(I[ca+3]&192)>>>6,samplerate:tj[(I[ca+2]&60)>>>2],samplingfrequencyindex:(I[ca+2]&60)>>>2,samplesize:16,data:I.subarray(ca+7+da,ua)});V++;if(I.byteLength===ua){I=void 0;break}I=I.subarray(ua)}}};this.flush=function(){V=0;this.trigger("done")};this.reset=
function(){I=void 0;this.trigger("reset")};this.endTimeline=function(){I=void 0;this.trigger("endedtimeline")}};Ge.prototype=new k;var Mm=function(v){var I=v.byteLength,V=0,aa=0;this.length=function(){return 8*I};this.bitsAvailable=function(){return 8*I+aa};this.loadWord=function(){var ca=v.byteLength-I,da=new Uint8Array(4),ua=Math.min(4,I);if(0===ua)throw Error("no bytes available");da.set(v.subarray(ca,ca+ua));V=(new DataView(da.buffer)).getUint32(0);aa=8*ua;I-=ua};this.skipBits=function(ca){if(!(aa>
ca)){ca-=aa;var da=Math.floor(ca/8);ca-=8*da;I-=da;this.loadWord()}V<<=ca;aa-=ca};this.readBits=function(ca){var da=Math.min(aa,ca),ua=V>>>32-da;aa-=da;0<aa?V<<=da:0<I&&this.loadWord();da=ca-da;return 0<da?ua<<da|this.readBits(da):ua};this.skipLeadingZeros=function(){var ca;for(ca=0;ca<aa;++ca)if(0!==(V&2147483648>>>ca))return V<<=ca,aa-=ca,ca;this.loadWord();return ca+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+
this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var ca=this.skipLeadingZeros();return this.readBits(ca+1)-1};this.readExpGolomb=function(){var ca=this.readUnsignedExpGolomb();return 1&ca?1+ca>>>1:-1*(ca>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var kg=function(){var v=0,I,V;kg.prototype.init.call(this);this.push=function(aa){if(V){var ca=new Uint8Array(V.byteLength+aa.data.byteLength);ca.set(V);
ca.set(aa.data,V.byteLength);V=ca}else V=aa.data;for(aa=V.byteLength;v<aa-3;v++)if(1===V[v+2]){I=v+5;break}for(;I<aa;)switch(V[I]){case 0:if(0!==V[I-1]){I+=2;break}else if(0!==V[I-2]){I++;break}v+3!==I-2&&this.trigger("data",V.subarray(v+3,I-2));do I++;while(1!==V[I]&&I<aa);v=I-2;I+=3;break;case 1:if(0!==V[I-1]||0!==V[I-2]){I+=3;break}this.trigger("data",V.subarray(v+3,I-2));v=I-2;I+=3;break;default:I+=3}V=V.subarray(v);I-=v;v=0};this.reset=function(){V=null;v=0;this.trigger("reset")};this.flush=
function(){V&&3<V.byteLength&&this.trigger("data",V.subarray(v+3));V=null;v=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};kg.prototype=new k;var Nm={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var lg=function(){var v=new kg,I,V,aa;lg.prototype.init.call(this);var ca=this;this.push=function(ya){"video"===ya.type&&(I=ya.trackId,V=ya.pts,aa=ya.dts,v.push(ya))};v.on("data",function(ya){var Ga={trackId:I,pts:V,dts:aa,
data:ya};switch(ya[0]&31){case 5:Ga.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Ga.nalUnitType="sei_rbsp";Ga.escapedRBSP=ua(ya.subarray(1));break;case 7:Ga.nalUnitType="seq_parameter_set_rbsp";Ga.escapedRBSP=ua(ya.subarray(1));Ga.config=wa(Ga.escapedRBSP);break;case 8:Ga.nalUnitType="pic_parameter_set_rbsp";break;case 9:Ga.nalUnitType="access_unit_delimiter_rbsp"}ca.trigger("data",Ga)});v.on("done",function(){ca.trigger("done")});v.on("partialdone",function(){ca.trigger("partialdone")});
v.on("reset",function(){ca.trigger("reset")});v.on("endedtimeline",function(){ca.trigger("endedtimeline")});this.flush=function(){v.flush()};this.partialFlush=function(){v.partialFlush()};this.reset=function(){v.reset()};this.endTimeline=function(){v.endTimeline()};var da=function(ya,Ga){var Sa=8,Ja=8,ib;for(ib=0;ib<ya;ib++)0!==Ja&&(Ja=Ga.readExpGolomb(),Ja=(Sa+Ja+256)%256),Sa=0===Ja?Sa:Ja};var ua=function(ya){for(var Ga=ya.byteLength,Sa=[],Ja=1,ib;Ja<Ga-2;)0===ya[Ja]&&0===ya[Ja+1]&&3===ya[Ja+2]?
(Sa.push(Ja+2),Ja+=2):Ja++;if(0===Sa.length)return ya;Ga-=Sa.length;ib=new Uint8Array(Ga);var Db=0;for(Ja=0;Ja<Ga;Db++,Ja++)Db===Sa[0]&&(Db++,Sa.shift()),ib[Ja]=ya[Db];return ib};var wa=function(ya){var Ga=0,Sa=0,Ja=0,ib=0,Db=1;ya=new Mm(ya);var Eb=ya.readUnsignedByte();var Ld=ya.readUnsignedByte();var Om=ya.readUnsignedByte();ya.skipUnsignedExpGolomb();if(Nm[Eb]){var Sb=ya.readUnsignedExpGolomb();3===Sb&&ya.skipBits(1);ya.skipUnsignedExpGolomb();ya.skipUnsignedExpGolomb();ya.skipBits(1);if(ya.readBoolean()){var Md=
3!==Sb?8:12;for(Sb=0;Sb<Md;Sb++)ya.readBoolean()&&(6>Sb?da(16,ya):da(64,ya))}}ya.skipUnsignedExpGolomb();Sb=ya.readUnsignedExpGolomb();if(0===Sb)ya.readUnsignedExpGolomb();else if(1===Sb)for(ya.skipBits(1),ya.skipExpGolomb(),ya.skipExpGolomb(),Md=ya.readUnsignedExpGolomb(),Sb=0;Sb<Md;Sb++)ya.skipExpGolomb();ya.skipUnsignedExpGolomb();ya.skipBits(1);Sb=ya.readUnsignedExpGolomb();Md=ya.readUnsignedExpGolomb();var uj=ya.readBits(1);0===uj&&ya.skipBits(1);ya.skipBits(1);ya.readBoolean()&&(Ga=ya.readUnsignedExpGolomb(),
Sa=ya.readUnsignedExpGolomb(),Ja=ya.readUnsignedExpGolomb(),ib=ya.readUnsignedExpGolomb());if(ya.readBoolean()&&ya.readBoolean()){var Pm=ya.readUnsignedByte();switch(Pm){case 1:var sb=[1,1];break;case 2:sb=[12,11];break;case 3:sb=[10,11];break;case 4:sb=[16,11];break;case 5:sb=[40,33];break;case 6:sb=[24,11];break;case 7:sb=[20,11];break;case 8:sb=[32,11];break;case 9:sb=[80,33];break;case 10:sb=[18,11];break;case 11:sb=[15,11];break;case 12:sb=[64,33];break;case 13:sb=[160,99];break;case 14:sb=[4,
3];break;case 15:sb=[3,2];break;case 16:sb=[2,1];break;case 255:sb=[ya.readUnsignedByte()<<8|ya.readUnsignedByte(),ya.readUnsignedByte()<<8|ya.readUnsignedByte()]}sb&&(Db=sb[0]/sb[1])}return{profileIdc:Eb,levelIdc:Om,profileCompatibility:Ld,width:Math.ceil((16*(Sb+1)-2*Ga-2*Sa)*Db),height:(2-uj)*(Md+1)*16-2*Ja-2*ib,sarRatio:sb}}};lg.prototype=new k;var Qm=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],vj=function(v){return v[0]<<21|v[1]<<14|v[2]<<7|v[3]},mg={isLikelyAacData:function(v){return 73===
v[0]&&68===v[1]&&51===v[2]?!0:!1},parseId3TagSize:function(v,I){var V=v[I+6]<<21|v[I+7]<<14|v[I+8]<<7|v[I+9];return(v[I+5]&16)>>4?V+20:V+10},parseAdtsSize:function(v,I){return v[I+3]&6144|v[I+4]<<3|(v[I+5]&224)>>5},parseType:function(v,I){return 73===v[I]&&68===v[I+1]&&51===v[I+2]?"timed-metadata":v[I]&1&&240===(v[I+1]&240)?"audio":null},parseSampleRate:function(v){for(var I=0;I+5<v.length;)if(255!==v[I]||240!==(v[I+1]&246))I++;else return Qm[(v[I+2]&60)>>>2];return null},parseAacTimestamp:function(v){var I=
10;v[5]&64&&(I=I+4+vj(v.subarray(10,14)));do{var V=vj(v.subarray(I+4,I+8));if(1>V)break;var aa=String.fromCharCode(v[I],v[I+1],v[I+2],v[I+3]);if("PRIV"===aa){aa=v.subarray(I+10,I+V+10);for(var ca=0;ca<aa.byteLength;ca++)if(0===aa[ca]){var da=unescape,ua,wa=aa,ya=ca,Ga="";for(ua=0;ua<ya;ua++)Ga+="%"+("00"+wa[ua].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===da(Ga))return v=aa.subarray(ca+1),I=(v[3]&1)<<30|v[4]<<22|v[5]<<14|v[6]<<6|v[7]>>>2,I*=4,I+=v[7]&3;break}}I+=10;
I+=V}while(I<v.byteLength);return null}};var ng=function(){var v=new Uint8Array,I=0;ng.prototype.init.call(this);this.setTimestamp=function(V){I=V};this.push=function(V){var aa=0;if(v.length){var ca=v.length;v=new Uint8Array(V.byteLength+ca);v.set(v.subarray(0,ca));v.set(V,ca)}else v=V;for(;3<=v.length-aa;)if(73===v[aa]&&68===v[aa+1]&&51===v[aa+2]){if(10>v.length-aa)break;V=mg.parseId3TagSize(v,aa);if(aa+V>v.length)break;ca={type:"timed-metadata",data:v.subarray(aa,aa+V)};this.trigger("data",ca);
aa+=V}else if(255===(v[aa]&255)&&240===(v[aa+1]&240)){if(7>v.length-aa)break;V=mg.parseAdtsSize(v,aa);if(aa+V>v.length)break;ca={type:"audio",data:v.subarray(aa,aa+V),pts:I,dts:I};this.trigger("data",ca);aa+=V}else aa++;v=0<v.length-aa?v.subarray(aa):new Uint8Array};this.reset=function(){v=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){v=new Uint8Array;this.trigger("endedtimeline")}};ng.prototype=new k;var Rm=mg.isLikelyAacData,Sm=oc.ONE_SECOND_IN_TS,wj=["audioobjecttype","channelcount",
"samplerate","samplingfrequencyindex","samplesize"],xj="width height profileIdc levelIdc profileCompatibility sarRatio".split(" "),yj=function(v,I){var V;if(v.length!==I.length)return!1;for(V=0;V<v.length;V++)if(v[V]!==I[V])return!1;return!0},Tm=function(v,I,V,aa,ca,da){return{start:{dts:v,pts:v+(V-I)},end:{dts:v+(aa-I),pts:v+(ca-V)},prependedContentDuration:da,baseMediaDecodeTime:v}};var He=function(v,I){var V=[],aa=0,ca=0,da=0,ua=Infinity;I=I||{};He.prototype.init.call(this);this.push=function(wa){kc.collectDtsInfo(v,
wa);v&&wj.forEach(function(ya){v[ya]=wa[ya]});V.push(wa)};this.setEarliestDts=function(wa){ca=wa-v.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(wa){ua=wa};this.setAudioAppendStart=function(wa){da=wa};this.flush=function(){if(0!==V.length){var wa=Ae.trimAdtsFramesByEarliestDts(V,v,ca);v.baseMediaDecodeTime=kc.calculateTrackBaseMediaDecodeTime(v,I.keepOriginalTimestamps);Ae.prefixWithSilence(v,wa,da,ua);v.samples=Ae.generateSampleTable(wa);var ya=Hd.mdat(Ae.concatenateFrameData(wa));
V=[];var Ga=Hd.moof(aa,[v]);var Sa=new Uint8Array(Ga.byteLength+ya.byteLength);aa++;Sa.set(Ga);Sa.set(ya,Ga.byteLength);kc.clearDtsInfo(v);Ga=Math.ceil(1024*Sm/v.samplerate);wa.length&&this.trigger("timingInfo",{start:wa[0].pts,end:wa[0].pts+wa.length*Ga});this.trigger("data",{track:v,boxes:Sa})}this.trigger("done","AudioSegmentStream")};this.reset=function(){kc.clearDtsInfo(v);V=[];this.trigger("reset")}};He.prototype=new k;var og=function(v,I){var V=0,aa=[],ca=[],da,ua;I=I||{};og.prototype.init.call(this);
delete v.minPTS;this.gopCache_=[];this.push=function(wa){kc.collectDtsInfo(v,wa);"seq_parameter_set_rbsp"!==wa.nalUnitType||da||(da=wa.config,v.sps=[wa.data],xj.forEach(function(ya){v[ya]=da[ya]},this));"pic_parameter_set_rbsp"!==wa.nalUnitType||ua||(ua=wa.data,v.pps=[wa.data]);aa.push(wa)};this.flush=function(){var wa;var ya=0;for(var Ga,Sa;aa.length&&"access_unit_delimiter_rbsp"!==aa[0].nalUnitType;)aa.shift();if(0!==aa.length){var Ja=Id.groupNalsIntoFrames(aa);Ja=Id.groupFramesIntoGops(Ja);Ja[0][0].keyFrame||
((wa=this.getGopForFusion_(aa[0],v))?(ya=wa.duration,Ja.unshift(wa),Ja.byteLength+=wa.byteLength,Ja.nalCount+=wa.nalCount,Ja.pts=wa.pts,Ja.dts=wa.dts,Ja.duration+=wa.duration):Ja=Id.extendFirstKeyFrame(Ja));if(ca.length){wa=I.alignGopsAtEnd?this.alignGopsAtEnd_(Ja):this.alignGopsAtStart_(Ja);if(!wa){this.gopCache_.unshift({gop:Ja.pop(),pps:v.pps,sps:v.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);aa=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}kc.clearDtsInfo(v);
Ja=wa}kc.collectDtsInfo(v,Ja);v.samples=Id.generateSampleTable(Ja);wa=Hd.mdat(Id.concatenateNalData(Ja));v.baseMediaDecodeTime=kc.calculateTrackBaseMediaDecodeTime(v,I.keepOriginalTimestamps);this.trigger("processedGopsInfo",Ja.map(function(ib){return{pts:ib.pts,dts:ib.dts,byteLength:ib.byteLength}}));Ga=Ja[0];Sa=Ja[Ja.length-1];this.trigger("segmentTimingInfo",Tm(v.baseMediaDecodeTime,Ga.dts,Ga.pts,Sa.dts+Sa.duration,Sa.pts+Sa.duration,ya));this.trigger("timingInfo",{start:Ja[0].pts,end:Ja[Ja.length-
1].pts+Ja[Ja.length-1].duration});this.gopCache_.unshift({gop:Ja.pop(),pps:v.pps,sps:v.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);aa=[];this.trigger("baseMediaDecodeTime",v.baseMediaDecodeTime);this.trigger("timelineStartInfo",v.timelineStartInfo);ya=Hd.moof(V,[v]);Ja=new Uint8Array(ya.byteLength+wa.byteLength);V++;Ja.set(ya);Ja.set(wa,ya.byteLength);this.trigger("data",{track:v,boxes:Ja})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();
aa=[];this.gopCache_.length=0;ca.length=0;this.trigger("reset")};this.resetStream_=function(){kc.clearDtsInfo(v);ua=da=void 0};this.getGopForFusion_=function(wa){var ya=Infinity,Ga;for(Ga=0;Ga<this.gopCache_.length;Ga++){var Sa=this.gopCache_[Ga];var Ja=Sa.gop;if(v.pps&&yj(v.pps[0],Sa.pps[0])&&v.sps&&yj(v.sps[0],Sa.sps[0])&&!(Ja.dts<v.timelineStartInfo.dts)&&(Ja=wa.dts-Ja.dts-Ja.duration,-1E4<=Ja&&45E3>=Ja&&(!ib||ya>Ja))){var ib=Sa;ya=Ja}}return ib?ib.gop:null};this.alignGopsAtStart_=function(wa){var ya,
Ga;var Sa=wa.byteLength;var Ja=wa.nalCount;var ib=wa.duration;for(ya=Ga=0;ya<ca.length&&Ga<wa.length;){var Db=ca[ya];var Eb=wa[Ga];if(Db.pts===Eb.pts)break;Eb.pts>Db.pts?ya++:(Ga++,Sa-=Eb.byteLength,Ja-=Eb.nalCount,ib-=Eb.duration)}if(0===Ga)return wa;if(Ga===wa.length)return null;wa=wa.slice(Ga);wa.byteLength=Sa;wa.duration=ib;wa.nalCount=Ja;wa.pts=wa[0].pts;wa.dts=wa[0].dts;return wa};this.alignGopsAtEnd_=function(wa){var ya;var Ga=ca.length-1;var Sa=wa.length-1;var Ja=null;for(ya=!1;0<=Ga&&0<=
Sa;){var ib=ca[Ga];var Db=wa[Sa];if(ib.pts===Db.pts){ya=!0;break}ib.pts>Db.pts?Ga--:(Ga===ca.length-1&&(Ja=Sa),Sa--)}if(!ya&&null===Ja)return null;Ga=ya?Sa:Ja;if(0===Ga)return wa;wa=wa.slice(Ga);Ga=wa.reduce(function(Eb,Ld){Eb.byteLength+=Ld.byteLength;Eb.duration+=Ld.duration;Eb.nalCount+=Ld.nalCount;return Eb},{byteLength:0,duration:0,nalCount:0});wa.byteLength=Ga.byteLength;wa.duration=Ga.duration;wa.nalCount=Ga.nalCount;wa.pts=wa[0].pts;wa.dts=wa[0].dts;return wa};this.alignGopsWith=function(wa){ca=
wa}};og.prototype=new k;var od=function(v,I){this.numberOfTracks=0;this.metadataStream=I;v=v||{};this.remuxTracks="undefined"!==typeof v.remux?!!v.remux:!0;this.keepOriginalTimestamps="boolean"===typeof v.keepOriginalTimestamps?v.keepOriginalTimestamps:!1;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;od.prototype.init.call(this);this.push=function(V){if(V.text)return this.pendingCaptions.push(V);
if(V.frames)return this.pendingMetadata.push(V);this.pendingTracks.push(V.track);this.pendingBytes+=V.boxes.byteLength;"video"===V.track.type&&(this.videoTrack=V.track,this.pendingBoxes.push(V.boxes));"audio"===V.track.type&&(this.audioTrack=V.track,this.pendingBoxes.unshift(V.boxes))}};od.prototype=new k;od.prototype.flush=function(v){var I=0,V={captions:[],captionStreams:{},metadata:[],info:{}},aa=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==v&&"AudioSegmentStream"!==
v||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(aa=this.videoTrack.timelineStartInfo.pts,xj.forEach(function(ca){V.info[ca]=this.videoTrack[ca]},this)):this.audioTrack&&(aa=this.audioTrack.timelineStartInfo.pts,wj.forEach(function(ca){V.info[ca]=this.audioTrack[ca]},this));if(this.videoTrack||this.audioTrack){V.type=1===this.pendingTracks.length?this.pendingTracks[0].type:
"combined";this.emittedTracks+=this.pendingTracks.length;v=Hd.initSegment(this.pendingTracks);V.initSegment=new Uint8Array(v.byteLength);V.initSegment.set(v);V.data=new Uint8Array(this.pendingBytes);for(v=0;v<this.pendingBoxes.length;v++)V.data.set(this.pendingBoxes[v],I),I+=this.pendingBoxes[v].byteLength;for(v=0;v<this.pendingCaptions.length;v++)I=this.pendingCaptions[v],I.startTime=oc.metadataTsToSeconds(I.startPts,aa,this.keepOriginalTimestamps),I.endTime=oc.metadataTsToSeconds(I.endPts,aa,this.keepOriginalTimestamps),
V.captionStreams[I.stream]=!0,V.captions.push(I);for(v=0;v<this.pendingMetadata.length;v++)I=this.pendingMetadata[v],I.cueTime=oc.metadataTsToSeconds(I.pts,aa,this.keepOriginalTimestamps),V.metadata.push(I);V.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",V);for(v=0;v<V.captions.length;v++)I=V.captions[v],this.trigger("caption",
I);for(v=0;v<V.metadata.length;v++)I=V.metadata[v],this.trigger("id3Frame",I)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};od.prototype.setRemux=function(v){this.remuxTracks=v};var pg=function(v){var I=this,V=!0,aa,ca;pg.prototype.init.call(this);v=v||{};this.baseMediaDecodeTime=v.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var da={};this.transmuxPipeline_=da;da.type="aac";da.metadataStream=new pc.MetadataStream;da.aacStream=
new ng;da.audioTimestampRolloverStream=new pc.TimestampRolloverStream("audio");da.timedMetadataTimestampRolloverStream=new pc.TimestampRolloverStream("timed-metadata");da.adtsStream=new Ge;da.coalesceStream=new od(v,da.metadataStream);da.headOfPipeline=da.aacStream;da.aacStream.pipe(da.audioTimestampRolloverStream).pipe(da.adtsStream);da.aacStream.pipe(da.timedMetadataTimestampRolloverStream).pipe(da.metadataStream).pipe(da.coalesceStream);da.metadataStream.on("timestamp",function(ua){da.aacStream.setTimestamp(ua.timeStamp)});
da.aacStream.on("data",function(ua){"timed-metadata"!==ua.type||da.audioSegmentStream||(ca=ca||{timelineStartInfo:{baseMediaDecodeTime:I.baseMediaDecodeTime},codec:"adts",type:"audio"},da.coalesceStream.numberOfTracks++,da.audioSegmentStream=new He(ca,v),da.audioSegmentStream.on("timingInfo",I.trigger.bind(I,"audioTimingInfo")),da.adtsStream.pipe(da.audioSegmentStream).pipe(da.coalesceStream));I.trigger("trackinfo",{hasAudio:!!ca,hasVideo:!!aa})});da.coalesceStream.on("data",this.trigger.bind(this,
"data"));da.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var da={};this.transmuxPipeline_=da;da.type="ts";da.metadataStream=new pc.MetadataStream;da.packetStream=new pc.TransportPacketStream;da.parseStream=new pc.TransportParseStream;da.elementaryStream=new pc.ElementaryStream;da.timestampRolloverStream=new pc.TimestampRolloverStream;da.adtsStream=new Ge;da.h264Stream=new lg;da.captionStream=new pc.CaptionStream;da.coalesceStream=new od(v,da.metadataStream);
da.headOfPipeline=da.packetStream;da.packetStream.pipe(da.parseStream).pipe(da.elementaryStream).pipe(da.timestampRolloverStream);da.timestampRolloverStream.pipe(da.h264Stream);da.timestampRolloverStream.pipe(da.adtsStream);da.timestampRolloverStream.pipe(da.metadataStream).pipe(da.coalesceStream);da.h264Stream.pipe(da.captionStream).pipe(da.coalesceStream);da.elementaryStream.on("data",function(ua){var wa;if("metadata"===ua.type){for(wa=ua.tracks.length;wa--;)aa||"video"!==ua.tracks[wa].type?ca||
"audio"!==ua.tracks[wa].type||(ca=ua.tracks[wa],ca.timelineStartInfo.baseMediaDecodeTime=I.baseMediaDecodeTime):(aa=ua.tracks[wa],aa.timelineStartInfo.baseMediaDecodeTime=I.baseMediaDecodeTime);aa&&!da.videoSegmentStream&&(da.coalesceStream.numberOfTracks++,da.videoSegmentStream=new og(aa,v),da.videoSegmentStream.on("timelineStartInfo",function(ya){ca&&(ca.timelineStartInfo=ya,da.audioSegmentStream.setEarliestDts(ya.dts))}),da.videoSegmentStream.on("processedGopsInfo",I.trigger.bind(I,"gopInfo")),
da.videoSegmentStream.on("segmentTimingInfo",I.trigger.bind(I,"videoSegmentTimingInfo")),da.videoSegmentStream.on("baseMediaDecodeTime",function(ya){ca&&da.audioSegmentStream.setVideoBaseMediaDecodeTime(ya)}),da.videoSegmentStream.on("timingInfo",I.trigger.bind(I,"videoTimingInfo")),da.h264Stream.pipe(da.videoSegmentStream).pipe(da.coalesceStream));ca&&!da.audioSegmentStream&&(da.coalesceStream.numberOfTracks++,da.audioSegmentStream=new He(ca,v),da.audioSegmentStream.on("timingInfo",I.trigger.bind(I,
"audioTimingInfo")),da.adtsStream.pipe(da.audioSegmentStream).pipe(da.coalesceStream));I.trigger("trackinfo",{hasAudio:!!ca,hasVideo:!!aa})}});da.coalesceStream.on("data",this.trigger.bind(this,"data"));da.coalesceStream.on("id3Frame",function(ua){ua.dispatchType=da.metadataStream.dispatchType;I.trigger("id3Frame",ua)});da.coalesceStream.on("caption",this.trigger.bind(this,"caption"));da.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(da){var ua=this.transmuxPipeline_;
v.keepOriginalTimestamps||(this.baseMediaDecodeTime=da);ca&&(ca.timelineStartInfo.dts=void 0,ca.timelineStartInfo.pts=void 0,kc.clearDtsInfo(ca),v.keepOriginalTimestamps||(ca.timelineStartInfo.baseMediaDecodeTime=da),ua.audioTimestampRolloverStream&&ua.audioTimestampRolloverStream.discontinuity());aa&&(ua.videoSegmentStream&&(ua.videoSegmentStream.gopCache_=[]),aa.timelineStartInfo.dts=void 0,aa.timelineStartInfo.pts=void 0,kc.clearDtsInfo(aa),ua.captionStream.reset(),v.keepOriginalTimestamps||(aa.timelineStartInfo.baseMediaDecodeTime=
da));ua.timestampRolloverStream&&ua.timestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(da){ca&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(da)};this.setRemux=function(da){var ua=this.transmuxPipeline_;v.remux=da;ua&&ua.coalesceStream&&ua.coalesceStream.setRemux(da)};this.alignGopsWith=function(da){aa&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(da)};this.push=function(da){if(V){var ua=Rm(da);ua&&"aac"!==
this.transmuxPipeline_.type?this.setupAacPipeline():ua||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();V=!1}this.transmuxPipeline_.headOfPipeline.push(da)};this.flush=function(){V=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};
pg.prototype=new k;var Um=function(){function v(I,V){for(var aa=0;aa<V.length;aa++){var ca=V[aa];ca.enumerable=ca.enumerable||!1;ca.configurable=!0;"value"in ca&&(ca.writable=!0);Object.defineProperty(I,ca.key,ca)}}return function(I,V,aa){V&&v(I.prototype,V);aa&&v(I,aa);return I}}(),Vm=function(v,I){I.on("data",function(V){var aa=V.initSegment;V.initSegment={data:aa.buffer,byteOffset:aa.byteOffset,byteLength:aa.byteLength};aa=V.data;V.data=aa.buffer;v.postMessage({action:"data",segment:V,byteOffset:aa.byteOffset,
byteLength:aa.byteLength},[V.data])});if(I.captionStream)I.captionStream.on("data",function(V){v.postMessage({action:"caption",data:V})});I.on("done",function(V){v.postMessage({action:"done"})});I.on("gopInfo",function(V){v.postMessage({action:"gopInfo",gopInfo:V})});I.on("videoSegmentTimingInfo",function(V){v.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:V})})},zj=function(){function v(I,V){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.options=
V||{};this.self=I;this.init()}Um(v,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new pg(this.options);Vm(this.self,this.transmuxer)}},{key:"push",value:function(I){I=new Uint8Array(I.data,I.byteOffset,I.byteLength);this.transmuxer.push(I)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(I){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(I.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(I){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*
I.appendStart))}},{key:"flush",value:function(I){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(I){this.transmuxer.alignGopsWith(I.gopsToAlignWith.slice())}}]);return v}();return new function(v){v.onmessage=function(I){if("init"===I.data.action&&I.data.options)this.messageHandlers=new zj(v,I.data.options);else if(this.messageHandlers||(this.messageHandlers=new zj(v)),I.data&&I.data.action&&"init"!==I.data.action&&
this.messageHandlers[I.data.action])this.messageHandlers[I.data.action](I.data)}}(d)})()}),Aj={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Bj=function(g){return g.map(function(n){return n.replace(/avc1\.(\d+)\.(\d+)/i,function(d,k,p){d=("00"+Number(k).toString(16)).slice(-2);p=("00"+Number(p).toString(16)).slice(-2);return"avc1."+d+"00"+p})})},Nd=function(){var g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n={codecCount:0},d;n.codecCount=g.split(",").length;
n.codecCount=n.codecCount||2;if(d=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(g))n.videoCodec=d[2],n.videoObjectTypeIndicator=d[3];n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(g);n.audioProfile=n.audioProfile&&n.audioProfile[2];return n},Xm=function(g){return g.replace(/avc1\.(\d+)\.(\d+)/i,function(n){return Bj([n])[0]})},qg=function(g,n,d){return g+"/"+n+'; codecs="'+d.filter(function(k){return!!k}).join(", ")+'"'},Ym=function(g,n){if(!g.mediaGroups.AUDIO||!n)return null;g=g.mediaGroups.AUDIO[n];
if(!g)return null;for(var d in g)if(n=g[d],n["default"]&&n.playlists)return Nd(n.playlists[0].attributes.CODECS).audioProfile;return null},Cj=function(g){var n={type:"",parameters:{}};g=g.trim().split(";");n.type=g.shift().trim();g.forEach(function(d){var k=d.trim().split("=");1<k.length&&(d=k[0].replace(/"/g,"").trim(),k=k[1].replace(/"/g,"").trim(),n.parameters[d]=k)});return n},rg=function(g){return/mp4a\.\d+.\d+/i.test(g)},sg=function(g){return/avc1\.[\da-f]+/i.test(g)},Zm=function(g,n,d){if("undefined"===
typeof n||null===n||!g.length)return[];n=Math.ceil(9E4*(n-d+3));for(d=0;d<g.length&&!(g[d].pts>n);d++);return g.slice(d)},$m=function(g,n,d){var k=null,p=null,q=0,t=[],D=[];if(!g&&!n)return la.createTimeRange();if(!g)return n.buffered;if(!n||d)return g.buffered;if(0===g.buffered.length&&0===n.buffered.length)return la.createTimeRange();g=g.buffered;n=n.buffered;for(d=g.length;d--;)t.push({time:g.start(d),type:"start"}),t.push({time:g.end(d),type:"end"});for(d=n.length;d--;)t.push({time:n.start(d),
type:"start"}),t.push({time:n.end(d),type:"end"});t.sort(function(N,Y){return N.time-Y.time});for(d=0;d<t.length;d++)"start"===t[d].type?(q++,2===q&&(k=t[d].time)):"end"===t[d].type&&(q--,1===q&&(p=t[d].time)),null!==k&&null!==p&&(D.push([k,p]),p=k=null);return la.createTimeRanges(D)},an=function(g,n){var d=g.addSourceBuffer(n),k=Object.create(null);k.updating=!1;k.realBuffer_=d;g=function(q){"function"===typeof d[q]?k[q]=function(){return d[q].apply(d,arguments)}:"undefined"===typeof k[q]&&Object.defineProperty(k,
q,{get:function(){return d[q]},set:function(t){return d[q]=t}})};for(var p in d)g(p);return k},bn=function(g){function n(d,k){gc(this,n);var p=nc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,la.EventTarget));p.timestampOffset_=0;p.pendingBuffers_=[];p.bufferUpdating_=!1;p.mediaSource_=d;p.codecs_=k;p.audioCodec_=null;p.videoCodec_=null;p.audioDisabled_=!1;p.appendAudioInitSegment_=!0;p.gopBuffer_=[];p.timeMapping_=0;p.safeAppend_=11<=la.browser.IE_VERSION;d={remux:!1,alignGopsAtEnd:p.safeAppend_};
p.codecs_.forEach(function(q){rg(q)?p.audioCodec_=q:sg(q)&&(p.videoCodec_=q)});p.transmuxer_=new Wm;p.transmuxer_.postMessage({action:"init",options:d});p.transmuxer_.onmessage=function(q){if("data"===q.data.action)return p.data_(q);if("done"===q.data.action)return p.done_(q);if("gopInfo"===q.data.action)return p.appendGopInfo_(q);if("videoSegmentTimingInfo"===q.data.action)return p.videoSegmentTimingInfo_(q.data.videoSegmentTimingInfo)};Object.defineProperty(p,"timestampOffset",{get:function(){return this.timestampOffset_},
set:function(q){"number"===typeof q&&0<=q&&(this.timestampOffset_=q,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:q}))}});Object.defineProperty(p,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(q){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=q);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=q)}});Object.defineProperty(p,
"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(p,"buffered",{get:function(){return $m(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return p}vc(n,g);jc(n,[{key:"data_",value:function(d){var k=d.data.segment;k.data=new Uint8Array(k.data,d.data.byteOffset,d.data.byteLength);k.initSegment=new Uint8Array(k.initSegment.data,k.initSegment.byteOffset,
k.initSegment.byteLength);d=this.mediaSource_.player_;if(k.captions&&k.captions.length){this.inbandTextTracks_||(this.inbandTextTracks_={});for(var p in k.captionStreams)if(!this.inbandTextTracks_[p]){d.tech_.trigger({type:"usage",name:"hls-608"});var q=d.textTracks().getTrackById(p);this.inbandTextTracks_[p]=q?q:d.addRemoteTextTrack({kind:"captions",id:p,label:p},!1).track}}k.metadata&&k.metadata.length&&!this.metadataTrack_&&(this.metadataTrack_=d.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},
!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=k.metadata.dispatchType);this.pendingBuffers_.push(k)}},{key:"done_",value:function(d){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"videoSegmentTimingInfo_",value:function(d){var k={start:{decode:d.start.dts/9E4,presentation:d.start.pts/9E4},end:{decode:d.end.dts/9E4,presentation:d.end.pts/9E4},baseMediaDecodeTime:d.baseMediaDecodeTime/9E4};d.prependedContentDuration&&(k.prependedContentDuration=
d.prependedContentDuration/9E4);this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:k})}},{key:"createRealSourceBuffers_",value:function(){var d=this,k=["audio","video"];k.forEach(function(p){if(d[p+"Codec_"]&&!d[p+"Buffer_"]){var q=null;d.mediaSource_[p+"Buffer_"]?(q=d.mediaSource_[p+"Buffer_"],q.updating=!1):(q=an(d.mediaSource_.nativeMediaSource_,p+'/mp4;codecs="'+d[p+"Codec_"]+'"'),d.mediaSource_[p+"Buffer_"]=q);d[p+"Buffer_"]=q;["update","updatestart","updateend"].forEach(function(t){q.addEventListener(t,
function(){if("audio"!==p||!d.audioDisabled_)if("updateend"===t&&(d[p+"Buffer_"].updating=!1),k.every(function(D){return"audio"===D&&d.audioDisabled_?!0:p!==D&&d[D+"Buffer_"]&&d[D+"Buffer_"].updating?!1:!0}))return d.trigger(t)})})}})}},{key:"appendBuffer",value:function(d){this.bufferUpdating_=!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var k=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:k.end(k.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",
gopsToAlignWith:Zm(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",data:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength},[d.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(d){var k=this.gopBuffer_;d=d.data.gopInfo;if(d.length)if(this.safeAppend_)k=d.slice();else{var p=d[0].pts,q=0;for(q;q<k.length&&!(k[q].pts>=p);q++);k=k.slice(0,q).concat(d)}this.gopBuffer_=
k}},{key:"remove",value:function(d,k){if(this.videoBuffer_){this.videoBuffer_.updating=!0;this.videoBuffer_.remove(d,k);var p=this.gopBuffer_,q=this.timeMapping_,t=Math.ceil(9E4*(d-q)),D=Math.ceil(9E4*(k-q));q=p.slice();for(var N=p.length;N--&&!(p[N].pts<=D););if(-1!==N){for(D=N+1;D--&&!(p[D].pts<=t););D=Math.max(D,0);q.splice(D,N-D+1)}this.gopBuffer_=q}!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(d,k));nd(d,k,this.metadataTrack_);if(this.inbandTextTracks_)for(var Y in this.inbandTextTracks_)nd(d,
k,this.inbandTextTracks_[Y])}},{key:"processPendingSegments_",value:function(){var d={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(this.pendingBuffers_.length){d=this.pendingBuffers_.reduce(function(p,q){var t=q.type,D=q.data,N=q.initSegment;p[t].segments.push(D);p[t].bytes+=D.byteLength;p[t].initSegment=N;q.captions&&(p.captions=p.captions.concat(q.captions));q.info&&(p[t].info=q.info);q.metadata&&(p.metadata=p.metadata.concat(q.metadata));return p},d);this.videoBuffer_||
this.audioBuffer_||(0===d.video.bytes&&(this.videoCodec_=null),0===d.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());d.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:d.audio.info});d.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:d.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(d.audio.segments.unshift(d.audio.initSegment),d.audio.bytes+=d.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var k=!1;
this.videoBuffer_&&d.video.bytes?(d.video.segments.unshift(d.video.initSegment),d.video.bytes+=d.video.initSegment.byteLength,this.concatAndAppendSegments_(d.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(k=!0);zm(this,d.captions,d.metadata);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(d.audio,this.audioBuffer_);this.pendingBuffers_.length=0;k&&this.trigger("updateend")}else this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",
value:function(d,k){var p=0,q=void 0;if(d.bytes){q=new Uint8Array(d.bytes);d.segments.forEach(function(t){q.set(t,p);p+=t.byteLength});try{k.updating=!0,k.appendBuffer(q)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});
this.pendingBuffers_.length=0;this.bufferUpdating_=!1}},{key:"dispose",value:function(){this.transmuxer_&&this.transmuxer_.terminate();this.trigger("dispose");this.off()}}]);return n}(la.EventTarget),tg=function(g){function n(){gc(this,n);var d=nc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),k=void 0;d.nativeMediaSource_=new r.MediaSource;for(k in d.nativeMediaSource_)k in n.prototype||"function"!==typeof d.nativeMediaSource_[k]||(d[k]=d.nativeMediaSource_[k].bind(d.nativeMediaSource_));
d.duration_=NaN;Object.defineProperty(d,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(p){this.duration_=p;Infinity!==p&&(this.nativeMediaSource_.duration=p)}});Object.defineProperty(d,"seekable",{get:function(){return Infinity===this.duration_?la.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(d,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});
Object.defineProperty(d,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});d.sourceBuffers=[];d.activeSourceBuffers_=[];d.updateActiveSourceBuffers_=function(){d.activeSourceBuffers_.length=0;if(1===d.sourceBuffers.length){var p=d.sourceBuffers[0];p.appendAudioInitSegment_=!0;p.audioDisabled_=!p.audioCodec_;d.activeSourceBuffers_.push(p)}else{var q=!1,t=!0;for(p=0;p<d.player_.audioTracks().length;p++){var D=d.player_.audioTracks()[p];if(D.enabled&&"main"!==D.kind){q=!0;t=!1;
break}}d.sourceBuffers.forEach(function(N,Y){N.appendAudioInitSegment_=!0;if(N.videoCodec_&&N.audioCodec_)N.audioDisabled_=q;else if(N.videoCodec_&&!N.audioCodec_)N.audioDisabled_=!0,t=!1;else if(!N.videoCodec_&&N.audioCodec_&&(N.audioDisabled_=Y?t:!t,N.audioDisabled_))return;d.activeSourceBuffers_.push(N)})}};d.onPlayerMediachange_=function(){d.sourceBuffers.forEach(function(p){p.appendAudioInitSegment_=!0})};d.onHlsReset_=function(){d.sourceBuffers.forEach(function(p){p.transmuxer_&&p.transmuxer_.postMessage({action:"resetCaptions"})})};
d.onHlsSegmentTimeMapping_=function(p){d.sourceBuffers.forEach(function(q){return q.timeMapping_=p.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(p){this.nativeMediaSource_.addEventListener(p,this.trigger.bind(this))},d);d.on("sourceopen",function(p){if(p=C.querySelector('[src="'+d.url_+'"]'))d.player_=la(p.parentNode),d.player_&&(d.player_.tech_.on("hls-reset",d.onHlsReset_),d.player_.tech_.on("hls-segment-time-mapping",d.onHlsSegmentTimeMapping_),d.player_.audioTracks&&d.player_.audioTracks()&&
(d.player_.audioTracks().on("change",d.updateActiveSourceBuffers_),d.player_.audioTracks().on("addtrack",d.updateActiveSourceBuffers_),d.player_.audioTracks().on("removetrack",d.updateActiveSourceBuffers_)),d.player_.on("mediachange",d.onPlayerMediachange_))});d.on("sourceended",function(p){p=kj(d.duration);for(var q=0;q<d.sourceBuffers.length;q++){var t=d.sourceBuffers[q];(t=t.metadataTrack_&&t.metadataTrack_.cues)&&t.length&&(t[t.length-1].endTime=p)}});d.on("sourceclose",function(p){this.sourceBuffers.forEach(function(q){q.transmuxer_&&
q.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",
this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))});return d}vc(n,g);jc(n,[{key:"addSeekableRange_",value:function(d,k){if(Infinity!==this.duration)throw d=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),d.name="InvalidStateError",d.code=11,d;if(k>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=k}},{key:"addSourceBuffer",value:function(d){var k=void 0;
k=Cj(d);/^(video|audio)\/mp2t$/i.test(k.type)?(d=[],k.parameters&&k.parameters.codecs&&(d=k.parameters.codecs.split(","),d=Bj(d),d=d.filter(function(p){return rg(p)||sg(p)})),0===d.length&&(d=["avc1.4d400d","mp4a.40.2"]),k=new bn(this,d),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),k.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):k=this.nativeMediaSource_.addSourceBuffer(d);this.sourceBuffers.push(k);return k}},{key:"dispose",value:function(){this.trigger("dispose");
this.off();this.sourceBuffers.forEach(function(d){d.dispose&&d.dispose()});this.sourceBuffers.length=0}}]);return n}(la.EventTarget),Dj=0;la.mediaSources={};var Ej=function(g,n){if(g=la.mediaSources[g])g.trigger({type:"sourceopen",swfId:n});else throw Error("Media Source not found (Video.js)");},ug=function(){return!!r.MediaSource&&!!r.MediaSource.isTypeSupported&&r.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Od=function(){this.MediaSource={open:Ej,supportsNativeMediaSources:ug};
if(ug())return new tg;throw Error("Cannot use create a virtual MediaSource for this video");};Od.open=Ej;Od.supportsNativeMediaSources=ug;var Fj={createObjectURL:function(g){if(g instanceof tg){var n=r.URL.createObjectURL(g.nativeMediaSource_);return g.url_=n}if(!(g instanceof tg))return n=r.URL.createObjectURL(g),g.url_=n;n="blob:vjs-media-source/"+Dj;Dj++;la.mediaSources[n]=g;return n}};la.MediaSource=Od;la.URL=Fj;var Gj=la.mergeOptions,Hj=function(g,n){var d=void 0,k=Gj(g,{duration:n.duration,
minimumUpdatePeriod:n.minimumUpdatePeriod});for(g=0;g<n.playlists.length;g++){var p=$f(k,n.playlists[g]);p?k=p:d=!0}ve(n,function(q,t,D,N){if(q.playlists&&q.playlists.length){var Y=q.playlists[0].id;if(q=$f(k,q.playlists[0]))k=q,k.mediaGroups[t][D][N].playlists[0]=k.playlists[Y],d=!1}});return d?null:k},vg=function(g){return g.uri+"-"+g.byterange.offset+"-"+(g.byterange.offset+g.byterange.length-1)},Ij=function(g,n){var d={},k;for(k in g){var p=g[k].sidx;if(p){var q=vg(p);if(!n[q])break;var t=n[q].sidxInfo;
(!t.map&&!p.map||t.map&&p.map&&t.map.byterange.offset===p.map.byterange.offset&&t.map.byterange.length===p.map.byterange.length)&&t.uri===p.uri&&t.byterange.offset===p.byterange.offset&&t.byterange.length===p.byterange.length&&(d[q]=n[q])}}return d},cn=function(g,n,d,k){g=Li(g,{manifestUri:n,clientOffset:d});var p=Ij(g.playlists,k);ve(g,function(q,t,D,N){q.playlists&&q.playlists.length&&(p=Gj(p,Ij(q.playlists,k)))});return p},Jj=function(g,n,d,k,p){g={uri:ue(k.handleManifestRedirects,g.resolvedUri),
byterange:g.byterange,playlist:n};g=la.mergeOptions(g,{responseType:"arraybuffer",headers:cg(g)});return d(g,p)},wg=function(g){function n(d,k){var p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},q=arguments[3];gc(this,n);var t=nc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),D=p.withCredentials;p=p.handleManifestRedirects;t.hls_=k;t.withCredentials=void 0===D?!1:D;t.handleManifestRedirects=void 0===p?!1:p;if(!d)throw Error("A non-empty playlist URL or playlist is required");
t.on("minimumUpdatePeriod",function(){t.refreshXml_()});t.on("mediaupdatetimeout",function(){t.refreshMedia_(t.media().id)});t.state="HAVE_NOTHING";t.loadedPlaylists_={};if("string"===typeof d)return t.srcUrl=d,t.sidxMapping_={},nc(t);t.setupChildLoader(q,d);return t}vc(n,g);jc(n,[{key:"setupChildLoader",value:function(d,k){this.masterPlaylistLoader_=d;this.childPlaylist_=k}},{key:"dispose",value:function(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};r.clearTimeout(this.minimumUpdatePeriodTimeout_);
r.clearTimeout(this.mediaRequest_);r.clearTimeout(this.mediaUpdateTimeout);this.off()}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var d=this.request;this.request=null;d.onreadystatechange=null;d.abort()}}},{key:"sidxRequestFinished_",value:function(d,k,p,q){var t=this;return function(D,N){if(t.request){t.request=null;if(D)return t.error={status:N.status,message:"DASH playlist request error at URL: "+d.uri,
response:N.response,code:2},p&&(t.state=p),t.trigger("error"),q(k,null);D=new Uint8Array(N.response);D=hb.parseSidx(D.subarray(8));return q(k,D)}}}},{key:"media",value:function(d){var k=this;if(!d)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var p=this.state;if("string"===typeof d){if(!this.master.playlists[d])throw Error("Unknown playlist URI: "+d);d=this.master.playlists[d]}var q=!this.media_||d.id!==this.media_.id;if(q&&this.loadedPlaylists_[d.id]&&
this.loadedPlaylists_[d.id].endList)this.state="HAVE_METADATA",this.media_=d,q&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(q)if(this.media_&&this.trigger("mediachanging"),d.sidx){var t=q=void 0;this.masterPlaylistLoader_?(q=this.masterPlaylistLoader_.master,t=this.masterPlaylistLoader_.sidxMapping_):(q=this.master,t=this.sidxMapping_);var D=vg(d.sidx);t[D]={sidxInfo:d.sidx};this.request=Jj(d.sidx,d,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(d,
q,p,function(N,Y){if(!N||!Y)throw Error("failed to request sidx");t[D].sidx=Y;k.haveMetadata({startingState:p,playlist:N.playlists[d.id]})}))}else this.mediaRequest_=r.setTimeout(this.haveMetadata.bind(this,{startingState:p,playlist:d}),0)}},{key:"haveMetadata",value:function(d){var k=d.startingState;d=d.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[d.id]=d;this.mediaRequest_=null;this.refreshMedia_(d.id);"HAVE_MASTER"===k?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",
value:function(){this.stopRequest();r.clearTimeout(this.mediaUpdateTimeout);r.clearTimeout(this.minimumUpdatePeriodTimeout_);"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(d){var k=this;r.clearTimeout(this.mediaUpdateTimeout);r.clearTimeout(this.minimumUpdatePeriodTimeout_);var p=this.media();d?this.mediaUpdateTimeout=r.setTimeout(function(){return k.load()},p?p.targetDuration/2*1E3:5E3):this.started?p&&!p.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):
this.start()}},{key:"parseMasterXml",value:function(){var d=Li(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});d.uri=this.srcUrl;for(var k=0;k<d.playlists.length;k++)d.playlists[k].uri="placeholder-uri-"+k;ve(d,function(p,q,t,D){p.playlists&&p.playlists.length&&(q="placeholder-uri-"+q+"-"+t+"-"+D,t="0-"+q,p.playlists[0].uri=q,p.playlists[0].id=t,d.playlists[t]=p.playlists[0],d.playlists[q]=p.playlists[0])});Ti(d);Ui(d);return d}},{key:"start",
value:function(){var d=this;this.started=!0;this.masterPlaylistLoader_?this.mediaRequest_=r.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(k,p){if(d.request){d.request=null;if(k)return d.error={status:p.status,message:"DASH playlist request error at URL: "+d.srcUrl,responseText:p.responseText,code:2},"HAVE_NOTHING"===d.state&&(d.started=!1),d.trigger("error");d.masterXml_=p.responseText;d.masterLoaded_=p.responseHeaders&&
p.responseHeaders.date?Date.parse(p.responseHeaders.date):Date.now();d.srcUrl=ue(d.handleManifestRedirects,d.srcUrl,p);d.syncClientServerClock_(d.onClientServerClockSync_.bind(d))}})}},{key:"syncClientServerClock_",value:function(d){var k=this,p=Tl(Ki(this.masterXml_));if(null===p)return this.clientOffset_=this.masterLoaded_-Date.now(),d();if("DIRECT"===p.method)return this.clientOffset_=p.value-Date.now(),d();this.request=this.hls_.xhr({uri:Pc(this.srcUrl,p.value),method:p.method,withCredentials:this.withCredentials},
function(q,t){if(k.request){if(q)return k.clientOffset_=k.masterLoaded_-Date.now(),d();q="HEAD"===p.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):k.masterLoaded_:Date.parse(t.responseText);k.clientOffset_=q-Date.now();d()}})}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER";this.mediaRequest_=null;this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",
value:function(){var d=this;this.haveMaster_();this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]);this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=r.setTimeout(function(){d.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var d=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(k,p){if(d.request){d.request=null;if(k)return d.error={status:p.status,
message:"DASH playlist request error at URL: "+d.srcUrl,responseText:p.responseText,code:2},"HAVE_NOTHING"===d.state&&(d.started=!1),d.trigger("error");d.masterXml_=p.responseText;d.sidxMapping_=cn(d.masterXml_,d.srcUrl,d.clientOffset_,d.sidxMapping_);k=d.parseMasterXml();p=Hj(d.master,k);var q=d.media().sidx;if(p)if(q){var t=vg(q);d.sidxMapping_[t]||(p=d.media(),d.request=Jj(p.sidx,p,d.hls_.xhr,{handleManifestRedirects:d.handleManifestRedirects},d.sidxRequestFinished_(p,k,d.state,function(D,N){if(!D||
!N)throw Error("failed to request sidx on minimumUpdatePeriod");d.sidxMapping_[t].sidx=N;d.minimumUpdatePeriodTimeout_=r.setTimeout(function(){d.trigger("minimumUpdatePeriod")},d.master.minimumUpdatePeriod);d.refreshMedia_(d.media().id)})))}else d.master=p;d.minimumUpdatePeriodTimeout_=r.setTimeout(function(){d.trigger("minimumUpdatePeriod")},d.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(d){var k=this;if(!d)throw Error("refreshMedia_ must take a media id");var p=void 0,q=
void 0;this.masterPlaylistLoader_?(p=this.masterPlaylistLoader_.master,q=this.masterPlaylistLoader_.parseMasterXml()):(p=this.master,q=this.parseMasterXml());(p=Hj(p,q))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=p:this.master=p,this.media_=p.playlists[d]):(this.media_=q.playlists[d],this.trigger("playlistunchanged"));this.media().endList||(this.mediaUpdateTimeout=r.setTimeout(function(){k.trigger("mediaupdatetimeout")},Vi(this.media(),!!p)));this.trigger("loadedplaylist")}}]);
return n}(la.EventTarget),Pd=function(g){return la.log.debug?la.log.debug.bind(la,"VHS:",g+" >"):function(){}},dn=function(){function g(n,d,k,p){gc(this,g);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=n;this.processedAppend_=!1;this.type_=k;this.mimeType_=d;this.logger_=Pd("SourceUpdater["+k+"]["+d+"]");"closed"===n.readyState?n.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,d,p)):this.createSourceBuffer_(d,p)}jc(g,[{key:"createSourceBuffer_",
value:function(n,d){var k=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(n);this.logger_("created SourceBuffer");if(d&&(d.trigger("sourcebufferadded"),2>this.mediaSource.sourceBuffers.length)){d.on("sourcebufferadded",function(){k.start_()});return}this.start_()}},{key:"start_",value:function(){var n=this;this.started_=!0;this.onUpdateendCallback_=function(){var d=n.pendingCallback_;n.pendingCallback_=null;n.sourceBuffer_.removing=!1;n.logger_("buffered ["+dg(n.buffered())+"]");d&&d();n.runCallback_()};
this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(n){var d=this;this.processedAppend_&&this.queueCallback_(function(){d.sourceBuffer_.abort()},n)}},{key:"appendBuffer",value:function(n,d){var k=this;this.processedAppend_=!0;this.queueCallback_(function(){n.videoSegmentTimingInfoCallback&&k.sourceBuffer_.addEventListener("videoSegmentTimingInfo",n.videoSegmentTimingInfoCallback);k.sourceBuffer_.appendBuffer(n.bytes)},function(){n.videoSegmentTimingInfoCallback&&
k.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",n.videoSegmentTimingInfoCallback);d()})}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:la.createTimeRanges()}},{key:"remove",value:function(n,d){var k=this,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ad;this.processedAppend_&&this.queueCallback_(function(){k.logger_("remove ["+n+" => "+d+"]");k.sourceBuffer_.removing=!0;k.sourceBuffer_.remove(n,d)},p)}},{key:"updating",value:function(){return!this.sourceBuffer_||
this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==ad}},{key:"timestampOffset",value:function(n){var d=this;"undefined"!==typeof n&&(this.queueCallback_(function(){d.sourceBuffer_.timestampOffset=n;d.runCallback_()}),this.timestampOffset_=n);return this.timestampOffset_}},{key:"queueCallback_",value:function(n,d){this.callbacks_.push([n.bind(this),d]);this.runCallback_()}},{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length&&this.started_){var n=
this.callbacks_.shift();this.pendingCallback_=n[1];n[0]()}}},{key:"dispose",value:function(){var n=this,d=function p(){n.sourceBuffer_&&"open"===n.mediaSource.readyState&&n.sourceBuffer_.abort();n.sourceBuffer_.removeEventListener("updateend",p)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",d):d()}}]);return g}(),Zb={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,
INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Kj=function(g){g.forEach(function(n){n.abort()})},en=function(g){var n=g.target;n=Date.now()-n.requestTime;n={bandwidth:Infinity,bytesReceived:0,roundTripTime:n||0};n.bytesReceived=g.loaded;n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8E3);return n},xg=function(g,n){return n.timedout?{status:n.status,message:"HLS request timed-out at URL: "+n.uri,code:-101,
xhr:n}:n.aborted?{status:n.status,message:"HLS request aborted at URL: "+n.uri,code:-102,xhr:n}:g?{status:n.status,message:"HLS request errored at URL: "+n.uri,code:2,xhr:n}:null},fn=function(g,n){return function(d,k){var p=k.response;if(d=xg(d,k))return n(d,g);if(16!==p.byteLength)return n({status:k.status,message:"Invalid HLS key at URL: "+k.uri,code:2,xhr:k},g);k=new DataView(p);g.key.bytes=new Uint32Array([k.getUint32(0),k.getUint32(4),k.getUint32(8),k.getUint32(12)]);return n(null,g)}},gn=function(g,
n,d){return function(k,p){var q=p.response;if(k=xg(k,p))return d(k,g);if(0===q.byteLength)return d({status:p.status,message:"Empty HLS segment content at URL: "+p.uri,code:2,xhr:p},g);g.map.bytes=new Uint8Array(p.response);n&&!n.isInitialized()&&n.init();g.map.timescales=tc.timescale(g.map.bytes);g.map.videoTrackIds=tc.videoTrackIds(g.map.bytes);return d(null,g)}},hn=function(g,n,d){return function(k,p){var q=p.response;if(k=xg(k,p))return d(k,g);if(0===q.byteLength)return d({status:p.status,message:"Empty HLS segment content at URL: "+
p.uri,code:2,xhr:p},g);g.stats={bandwidth:p.bandwidth,bytesReceived:p.bytesReceived||0,roundTripTime:p.roundTripTime||0};g.key?g.encryptedBytes=new Uint8Array(p.response):g.bytes=new Uint8Array(p.response);n&&g.map&&g.map.bytes&&(n.isInitialized()||n.init(),(p=n.parse(g.bytes,g.map.videoTrackIds,g.map.timescales))&&p.captions&&(g.captionStreams=p.captionStreams,g.fmp4Captions=p.captions));return d(null,g)}},jn=function(g,n,d){g.addEventListener("message",function t(q){if(q.data.source===n.requestId)return g.removeEventListener("message",
t),q=q.data.decrypted,n.bytes=new Uint8Array(q.bytes,q.byteOffset,q.byteLength),d(null,n)});var k=void 0;k=n.key.bytes.slice?n.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(n.key.bytes));g.postMessage(ej({source:n.requestId,encrypted:n.encryptedBytes,key:k,iv:n.key.iv}),[n.encryptedBytes.buffer,k.buffer])},kn=function(g,n,d){var k=0,p=!1;return function(q,t){if(!p){if(q)return p=!0,Kj(g),d(q,t);k+=1;if(k===g.length)return t.endOfAllRequests=Date.now(),t.encryptedBytes?jn(n,t,d):d(null,
t)}}},ln=function(g,n){return function(d){g.stats=la.mergeOptions(g.stats,en(d));!g.stats.firstBytesReceivedAt&&g.stats.bytesReceived&&(g.stats.firstBytesReceivedAt=Date.now());return n(d,g)}},mn=function(g,n,d,k,p,q,t){var D=[];d=kn(D,d,t);if(p.key&&!p.key.bytes){t=la.mergeOptions(n,{uri:p.key.resolvedUri,responseType:"arraybuffer"});var N=fn(p,d);t=g(t,N);D.push(t)}p.map&&!p.map.bytes&&(t=la.mergeOptions(n,{uri:p.map.resolvedUri,responseType:"arraybuffer",headers:cg(p.map)}),N=gn(p,k,d),t=g(t,N),
D.push(t));n=la.mergeOptions(n,{uri:p.resolvedUri,responseType:"arraybuffer",headers:cg(p)});k=hn(p,k,d);g=g(n,k);g.addEventListener("progress",ln(p,q));D.push(g);return function(){return Kj(D)}},Lj=function(g,n){return g?(g=r.getComputedStyle(g))?g[n]:"":""},Qd=function(g,n){var d=g.slice();g.sort(function(k,p){var q=n(k,p);return 0===q?d.indexOf(k)-d.indexOf(p):q})},yg=function(g,n){var d=void 0,k=void 0;g.attributes.BANDWIDTH&&(d=g.attributes.BANDWIDTH);d=d||r.Number.MAX_VALUE;n.attributes.BANDWIDTH&&
(k=n.attributes.BANDWIDTH);k=k||r.Number.MAX_VALUE;return d-k},nn=function(g,n,d,k,p){g=g.playlists.map(function(ta){var Ba=ta.attributes.RESOLUTION&&ta.attributes.RESOLUTION.width;var Da=ta.attributes.RESOLUTION&&ta.attributes.RESOLUTION.height;var va=(va=ta.attributes.BANDWIDTH)||r.Number.MAX_VALUE;return{bandwidth:va,width:Ba,height:Da,playlist:ta}});Qd(g,function(ta,Ba){return ta.bandwidth-Ba.bandwidth});g=g.filter(function(ta){return!Rb.isIncompatible(ta.playlist)});var q=g.filter(function(ta){return Rb.isEnabled(ta.playlist)});
q.length||(q=g.filter(function(ta){return!Rb.isDisabled(ta.playlist)}));var t=q.filter(function(ta){return ta.bandwidth*Zb.BANDWIDTH_VARIANCE<n}),D=t[t.length-1],N=t.filter(function(ta){return ta.bandwidth===D.bandwidth})[0];if(!1===p)return(g=N||q[0]||g[0])?g.playlist:null;p=t.filter(function(ta){return ta.width&&ta.height});Qd(p,function(ta,Ba){return ta.width-Ba.width});t=p.filter(function(ta){return ta.width===d&&ta.height===k});D=t[t.length-1];t=t.filter(function(ta){return ta.bandwidth===D.bandwidth})[0];
var Y=void 0,oa=void 0;oa=void 0;t||(Y=p.filter(function(ta){return ta.width>d||ta.height>k}),oa=Y.filter(function(ta){return ta.width===Y[0].width&&ta.height===Y[0].height}),D=oa[oa.length-1],oa=oa.filter(function(ta){return ta.bandwidth===D.bandwidth})[0]);return(g=oa||t||N||q[0]||g[0])?g.playlist:null},on=function(g){var n=g.currentTime,d=g.bandwidth,k=g.duration,p=g.segmentDuration,q=g.timeUntilRebuffer,t=g.currentTimeline,D=g.syncController;g=g.master.playlists.filter(function(Y){return!Rb.isIncompatible(Y)});
var N=g.filter(Rb.isEnabled);N.length||(N=g.filter(function(Y){return!Rb.isDisabled(Y)}));g=N.filter(Rb.hasAttribute.bind(null,"BANDWIDTH")).map(function(Y){var oa=D.getSyncPoint(Y,k,t,n)?1:2;oa=Rb.estimateSegmentRequestTime(p,d,Y)*oa-q;return{playlist:Y,rebufferingImpact:oa}});N=g.filter(function(Y){return 0>=Y.rebufferingImpact});Qd(N,function(Y,oa){return yg(oa.playlist,Y.playlist)});if(N.length)return N[0];Qd(g,function(Y,oa){return Y.rebufferingImpact-oa.rebufferingImpact});return g[0]||null},
pn=function(g){var n=g.inbandTextTracks,d=g.captionArray,k=g.timestampOffset;if(d){var p=window.WebKitDataCue||window.VTTCue;d.forEach(function(q){var t=q.stream,D=q.startTime,N=q.endTime;n[t]&&(D+=k,N+=k,n[t].addCue(new p(D,N,q.text)))})}},qn=function(g,n,d){return"main"===g&&n&&d?d.containsAudio||d.containsVideo?n.containsVideo&&!d.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":
!n.containsVideo&&d.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},rn=function(g){var n=g.segment,d=g.playlist,k=d.mediaSequence,p=d.segments;return["appending ["+g.mediaIndex+"] of ["+k+", "+(k+(void 0===p?[]:p).length)+"] from playlist ["+d.id+"]","["+n.start+" => "+n.end+"] in timeline ["+
g.timeline+"]"].join(" ")},zg=function(g){function n(d){gc(this,n);var k=nc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(!d)throw new TypeError("Initialization settings are required");if("function"!==typeof d.currentTime)throw new TypeError("No currentTime getter specified");if(!d.mediaSource)throw new TypeError("No MediaSource specified");k.bandwidth=d.bandwidth;k.throughput={rate:0,count:0};k.roundTrip=NaN;k.resetStats_();k.mediaIndex=null;k.hasPlayed_=d.hasPlayed;k.currentTime_=
d.currentTime;k.seekable_=d.seekable;k.seeking_=d.seeking;k.duration_=d.duration;k.mediaSource_=d.mediaSource;k.hls_=d.hls;k.loaderType_=d.loaderType;k.startingMedia_=void 0;k.segmentMetadataTrack_=d.segmentMetadataTrack;k.goalBufferLength_=d.goalBufferLength;k.sourceType_=d.sourceType;k.inbandTextTracks_=d.inbandTextTracks;k.state_="INIT";k.checkBufferTimeout_=null;k.error_=void 0;k.currentTimeline_=-1;k.pendingSegment_=null;k.mimeType_=null;k.sourceUpdater_=null;k.xhrOptions_=null;k.activeInitSegmentId_=
null;k.initSegments_={};k.cacheEncryptionKeys_=d.cacheEncryptionKeys;k.keyCache_={};k.captionParser_="main"===k.loaderType_?new Zl:null;k.decrypter_=d.decrypter;k.syncController_=d.syncController;k.syncPoint_={segmentIndex:0,time:0};k.triggerSyncInfoUpdate_=function(){return k.trigger("syncinfoupdate")};k.syncController_.on("syncinfoupdate",k.triggerSyncInfoUpdate_);k.mediaSource_.addEventListener("sourceopen",function(){return k.ended_=!1});k.fetchAtBuffer_=!1;k.logger_=Pd("SegmentLoader["+k.loaderType_+
"]");Object.defineProperty(k,"state",{get:function(){return this.state_},set:function(p){p!==this.state_&&(this.logger_(this.state_+" -> "+p),this.state_=p)}});return k}vc(n,g);jc(n,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();
this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_();this.captionParser_&&this.captionParser_.reset();this.checkBufferTimeout_&&r.clearTimeout(this.checkBufferTimeout_);this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_);this.off()}},{key:"abort",value:function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",
value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(d){"undefined"!==typeof d&&(this.error_=d);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():la.createTimeRanges()}},{key:"initSegment",value:function(d){var k=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!1;if(!d)return null;var p=ye(d),q=this.initSegments_[p];k&&!q&&d.bytes&&(this.initSegments_[p]=q={resolvedUri:d.resolvedUri,byterange:d.byterange,bytes:d.bytes,timescales:d.timescales,videoTrackIds:d.videoTrackIds});return q||d}},{key:"segmentKey",value:function(d){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!d)return null;var p=d.resolvedUri,q=this.keyCache_[p];this.cacheEncryptionKeys_&&k&&!q&&d.bytes&&(this.keyCache_[p]=q={resolvedUri:d.resolvedUri,bytes:d.bytes});
k={resolvedUri:(q||d).resolvedUri};q&&(k.bytes=q.bytes);return k}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},
{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new dn(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(d){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(d){var p=this.playlist_,q=this.pendingSegment_;this.playlist_=d;this.xhrOptions_=k;"INIT"===this.state&&(d.syncInfo={mediaSequence:d.mediaSequence,time:0});k=null;p&&(p.id?k=p.id:p.uri&&(k=p.uri));
this.logger_("playlist update ["+k+" => "+(d.id||d.uri)+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();p&&p.uri===d.uri?(k=d.mediaSequence-p.mediaSequence,this.logger_("live window shift ["+k+"]"),null!==this.mediaIndex&&(this.mediaIndex-=k),q&&(q.mediaIndex-=k,0<=q.mediaIndex&&(q.segment=d.segments[q.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(p,d)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&
(r.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(d,k){this.mimeType_||(this.mimeType_=d,this.sourceBufferEmitter_=k,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(d){this.ended_=!1;this.resetLoader();this.remove(0,Infinity,d);this.captionParser_&&this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},
{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(d,k,p){Infinity===k&&(k=this.duration_());this.sourceUpdater_&&this.sourceUpdater_.remove(d,k,p);nd(d,k,this.segmentMetadataTrack_);if(this.inbandTextTracks_)for(var q in this.inbandTextTracks_)nd(d,k,this.inbandTextTracks_[q])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&r.clearTimeout(this.checkBufferTimeout_);
this.checkBufferTimeout_=r.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&r.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=r.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,
this.currentTime_()));var d=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(d)if(this.isEndOfStream_(d.mediaIndex))this.endOfStream();else if(d.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())d.timeline!==this.currentTimeline_&&(this.syncController_.reset(),d.timestampOffset=d.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(d)}}},
{key:"isEndOfStream_",value:function(d){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.playlist_;var p=this.mediaSource_;if(k&&p){var q=d===k.segments.length;k=k.endList&&"open"===p.readyState&&q}else k=!1;return k&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(d,k,p,q,t,D){var N=0;d.length&&(N=d.end(d.length-1));d=Math.max(0,N-t);if(!k.segments.length||d>=this.goalBufferLength_()||!q&&1<=d)return null;if(null===D)return p=this.getSyncSegmentCandidate_(k),
this.generateSegmentInfo_(k,p,null,!0);if(null!==p)return this.generateSegmentInfo_(k,p+1,N,!1);this.fetchAtBuffer_?(q=Rb.getMediaInfoForTime(k,N,D.segmentIndex,D.time),p=q.mediaIndex,q=q.startTime):(q=Rb.getMediaInfoForTime(k,t,D.segmentIndex,D.time),p=q.mediaIndex,q=q.startTime);return this.generateSegmentInfo_(k,p,q,!1)}},{key:"getSyncSegmentCandidate_",value:function(d){var k=this;if(-1===this.currentTimeline_)return 0;var p=d.segments.map(function(q,t){return{timeline:q.timeline,segmentIndex:t}}).filter(function(q){return q.timeline===
k.currentTimeline_});return p.length?p[Math.min(p.length-1,1)].segmentIndex:Math.max(d.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(d,k,p,q){if(0>k||k>=d.segments.length)return null;var t=d.segments[k];return{requestId:"segment-loader-"+Math.random(),uri:t.resolvedUri,mediaIndex:k,isSyncRequest:q,startOfSegment:p,playlist:d,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:t.timeline,duration:t.duration,segment:t}}},{key:"abortRequestEarly_",value:function(d){if(this.hls_.tech_.paused()||
!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(d.firstBytesReceivedAt||Date.now()))return!1;var k=this.currentTime_(),p=d.bandwidth,q=this.pendingSegment_.duration,t=Rb.estimateSegmentRequestTime(q,p,this.playlist_,d.bytesReceived);d=xm(this.buffered_(),k,this.hls_.tech_.playbackRate())-1;if(t<=d)return!1;if(k=on({master:this.hls_.playlists.master,currentTime:k,bandwidth:p,duration:this.duration_(),segmentDuration:q,timeUntilRebuffer:d,currentTimeline:this.currentTimeline_,
syncController:this.syncController_})){p=t-d-k.rebufferingImpact;q=.5;d<=ze&&(q=1);if(!k.playlist||k.playlist.uri===this.playlist_.uri||p<q)return!1;this.bandwidth=k.playlist.attributes.BANDWIDTH*Zb.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",value:function(d,k){this.pendingSegment_&&k.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(k.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(d){this.state="WAITING";
this.pendingSegment_=d;this.trimBackBuffer_(d);d.abortRequests=mn(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(d),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(d){d=this.seekable_();var k=this.currentTime_(),p=this.playlist_.targetDuration||10,q=k-30;d.length&&(q=Math.max(q,d.start(0)));d=Math.min(k-p,q);0<d&&this.remove(0,d)}},{key:"createSimplifiedSegmentObj_",value:function(d){var k=
d.segment,p={resolvedUri:k.resolvedUri,byterange:k.byterange,requestId:d.requestId};k.key&&(d=k.key.iv||new Uint32Array([0,0,0,d.mediaIndex+d.playlist.mediaSequence]),p.key=this.segmentKey(k.key),p.key.iv=d);k.map&&(p.map=this.initSegment(k.map));return p}},{key:"segmentRequestFinished_",value:function(d,k){this.mediaRequests+=1;k.stats&&(this.mediaBytesTransferred+=k.stats.bytesReceived,this.mediaTransferDuration+=k.stats.roundTripTime);this.pendingSegment_?k.requestId===this.pendingSegment_.requestId&&
(d?(this.pendingSegment_=null,this.state="READY",-102===d.code?this.mediaRequestsAborted+=1:(this.pause(),-101===d.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(d),this.trigger("error")))):(this.bandwidth=k.stats.bandwidth,this.roundTrip=k.stats.roundTripTime,k.map&&(k.map=this.initSegment(k.map,!0)),k.key&&this.segmentKey(k.key,!0),this.processSegmentResponse_(k))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",
value:function(d){var k=this.pendingSegment_;k.bytes=d.bytes;d.map&&(k.segment.map.bytes=d.map.bytes);k.endOfAllRequests=d.endOfAllRequests;if(d.fmp4Captions){k=this.inbandTextTracks_;var p=this.hls_.tech_,q=d.captionStreams,t;for(t in q)k[t]||(p.trigger({type:"usage",name:"hls-608"}),q=p.textTracks().getTrackById(t),k[t]=q?q:p.addRemoteTextTrack({kind:"captions",id:t,label:t},!1).track);pn({inbandTextTracks:this.inbandTextTracks_,captionArray:d.fmp4Captions,timestampOffset:0});this.captionParser_&&
this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function(){var d=this;if(this.pendingSegment_){var k=this.pendingSegment_,p=k.segment,q=this.syncController_.probeSegmentInfo(k);"undefined"===typeof this.startingMedia_&&q&&(q.containsAudio||q.containsVideo)&&(this.startingMedia_={containsAudio:q.containsAudio,containsVideo:q.containsVideo});var t=qn(this.loaderType_,this.startingMedia_,q);if(t)this.error({message:t,blacklistDuration:Infinity}),this.trigger("error");
else if(k.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";else{null!==k.timestampOffset&&k.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(q&&q.segmentTimestampInfo&&(k.timestampOffset-=q.segmentTimestampInfo[0].ptsTime-q.segmentTimestampInfo[0].dtsTime),this.sourceUpdater_.timestampOffset(k.timestampOffset),this.trigger("timestampoffset"));q=this.syncController_.mappingForTimeline(k.timeline);null!==q&&this.trigger({type:"segmenttimemapping",mapping:q});
this.state="APPENDING";if(p.map){var D=ye(p.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===D||(q=this.initSegment(p.map),this.sourceUpdater_.appendBuffer({bytes:q.bytes},function(){d.activeInitSegmentId_=D}))}k.byteLength=k.bytes.byteLength;this.mediaSecondsLoaded="number"===typeof p.start&&"number"===typeof p.end?this.mediaSecondsLoaded+(p.end-p.start):this.mediaSecondsLoaded+p.duration;this.logger_(rn(k));this.sourceUpdater_.appendBuffer({bytes:k.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,
k.requestId)},this.handleUpdateEnd_.bind(this))}}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(d,k){this.pendingSegment_&&d===this.pendingSegment_.requestId&&(d=this.pendingSegment_.segment,d.videoTimingInfo||(d.videoTimingInfo={}),d.videoTimingInfo.transmuxerPrependedSeconds=k.videoSegmentTimingInfo.prependedContentDuration||0,d.videoTimingInfo.transmuxedPresentationStart=k.videoSegmentTimingInfo.start.presentation,d.videoTimingInfo.transmuxedPresentationEnd=k.videoSegmentTimingInfo.end.presentation,
d.videoTimingInfo.baseMediaDecodeTime=k.videoSegmentTimingInfo.baseMediaDecodeTime)}},{key:"handleUpdateEnd_",value:function(){if(this.pendingSegment_){var d=this.pendingSegment_,k=d.segment,p=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(d);this.addSegmentMetadataCue_(d);this.state="READY";this.mediaIndex=d.mediaIndex;this.fetchAtBuffer_=!0;this.currentTimeline_=d.timeline;this.trigger("syncinfoupdate");k.end&&this.currentTime_()-k.end>3*d.playlist.targetDuration?this.resetEverything():
(p&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(d.mediaIndex+1,d.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(d){var k=this.throughput.rate,p=Date.now()-d.endOfAllRequests+1;this.throughput.rate+=(Math.floor(d.byteLength/p*8E3)-k)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(d){if(this.segmentMetadataTrack_){var k=
d.segment,p=k.start,q=k.end;if("number"===typeof p&&isFinite(p)&&"number"===typeof q&&isFinite(q)){nd(p,q,this.segmentMetadataTrack_);var t=r.WebKitDataCue||r.VTTCue;d={custom:k.custom,dateTimeObject:k.dateTimeObject,dateTimeString:k.dateTimeString,bandwidth:d.playlist.attributes.BANDWIDTH,resolution:d.playlist.attributes.RESOLUTION,codecs:d.playlist.attributes.CODECS,byteLength:d.byteLength,uri:d.uri,timeline:d.timeline,playlist:d.playlist.id,start:p,end:q};k=JSON.stringify(d);p=new t(p,q,k);p.value=
d;this.segmentMetadataTrack_.addCue(p)}}}}]);return n}(la.EventTarget),Mj=new Uint8Array(["\n","\n"].map(function(g){return g.charCodeAt(0)})),sn=function(g){function n(d){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};gc(this,n);k=nc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,d,k));k.mediaSource_=null;k.subtitlesTrack_=null;k.featuresNativeTextTracks_=d.featuresNativeTextTracks;return k}vc(n,g);jc(n,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return la.createTimeRanges();
var d=this.subtitlesTrack_.cues;return la.createTimeRanges([[d[0].startTime,d[d.length-1].startTime]])}},{key:"initSegment",value:function(d){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!d)return null;var p=ye(d),q=this.initSegments_[p];k&&!q&&d.bytes&&(k=new Uint8Array(Mj.byteLength+d.bytes.byteLength),k.set(d.bytes),k.set(Mj,d.bytes.byteLength),this.initSegments_[p]=q={resolvedUri:d.resolvedUri,byterange:d.byterange,bytes:k});return q||d}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&
this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(d){if("undefined"===typeof d)return this.subtitlesTrack_;this.subtitlesTrack_=d;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(d,k){nd(d,k,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var d=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,
this.duration_(),this.currentTimeline_,this.currentTime_()));var k=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(k=this.skipEmptySegments_(k))null===this.syncController_.timestampOffsetForTimeline(k.timeline)?(this.syncController_.one("timestampoffset",function(){d.state="READY";d.paused()||d.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(k)}},{key:"skipEmptySegments_",value:function(d){for(;d&&d.segment.empty;)d=
this.generateSegmentInfo_(d.playlist,d.mediaIndex+1,d.startOfSegment+d.duration,d.isSyncRequest);return d}},{key:"handleSegment_",value:function(){var d=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var k=this.pendingSegment_,p=k.segment;if("function"!==typeof r.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var q=void 0,t=function(){d.subtitlesTrack_.tech_.off("vttjsloaded",q);d.error({message:"Error loading vtt.js"});d.state="READY";d.pause();d.trigger("error")};
q=function(){d.subtitlesTrack_.tech_.off("vttjserror",t);d.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",q);this.subtitlesTrack_.tech_.one("vttjserror",t)}else{p.requested=!0;try{this.parseVTTCues_(k)}catch(D){return this.error({message:D.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(k,this.syncController_.timelines[k.timeline],this.playlist_);k.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=
null,this.state="READY"):(k.byteLength=k.bytes.byteLength,this.mediaSecondsLoaded+=p.duration,k.cues.length&&this.remove(k.cues[0].endTime,k.cues[k.cues.length-1].endTime),k.cues.forEach(function(D){d.subtitlesTrack_.addCue(d.featuresNativeTextTracks_?new r.VTTCue(D.startTime,D.endTime,D.text):D)}),this.handleUpdateEnd_())}}else this.state="READY"}},{key:"parseVTTCues_",value:function(d){var k=void 0,p=!1;"function"===typeof r.TextDecoder?k=new r.TextDecoder("utf8"):(k=r.WebVTT.StringDecoder(),p=
!0);k=new r.WebVTT.Parser(r,r.vttjs,k);d.cues=[];d.timestampmap={MPEGTS:0,LOCAL:0};k.oncue=d.cues.push.bind(d.cues);k.ontimestampmap=function(t){return d.timestampmap=t};k.onparsingerror=function(t){la.log.warn("Error encountered when parsing cues: "+t.message)};if(d.segment.map){var q=d.segment.map.bytes;p&&(q=decodeURIComponent(escape(String.fromCharCode.apply(null,q))));k.parse(q)}q=d.bytes;p&&(q=decodeURIComponent(escape(String.fromCharCode.apply(null,q))));k.parse(q);k.flush()}},{key:"updateTimeMapping_",
value:function(d,k,p){var q=d.segment;if(k)if(d.cues.length){var t=d.timestampmap,D=t.MPEGTS/9E4-t.LOCAL+k.mapping;d.cues.forEach(function(N){N.startTime+=D;N.endTime+=D});p.syncInfo||(p.syncInfo={mediaSequence:p.mediaSequence+d.mediaIndex,time:Math.min(d.cues[0].startTime,d.cues[d.cues.length-1].startTime-q.duration)})}else q.empty=!0}}]);return n}(zg),tn=function(g,n){if(g.segments)for(var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,k=void 0,p=0;p<g.segments.length;p++){var q=g.segments[p];
if(!k)a:{var t=d+q.duration/2;k=n.cues;for(var D=0;D<k.length;D++){var N=k[D];if(t>=N.adStartTime&&t<=N.adEndTime){k=N;break a}}k=null}if(k){if("cueIn"in q){k.endTime=d;k.adEndTime=d;d+=q.duration;k=null;continue}if(d<k.endTime){d+=q.duration;continue}k.endTime+=q.duration}else"cueOut"in q&&(k=new r.VTTCue(d,d+q.duration,q.cueOut),k.adStartTime=d,k.adEndTime=d+parseFloat(q.cueOut),n.addCue(k)),"cueOutCont"in q&&(t=q.cueOutCont.split("/").map(parseFloat),k=gm(t,2),t=k[0],D=k[1],k=new r.VTTCue(d,d+
q.duration,""),k.adStartTime=d-t,k.adEndTime=k.adStartTime+D,n.addCue(k));d+=q.duration}},Nj=[{name:"VOD",run:function(g,n,d,k,p){return Infinity!==d?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(g,n,d,k,p){if(!g.datetimeToDisplayTime)return null;n=n.segments||[];k=d=null;p=p||0;for(var q=0;q<n.length;q++){var t=n[q];if(t.dateTimeObject){t=t.dateTimeObject.getTime()/1E3+g.datetimeToDisplayTime;var D=Math.abs(p-t);if(null!==k&&(0===D||k<D))break;k=D;d={time:t,segmentIndex:q}}}return d}},
{name:"Segment",run:function(g,n,d,k,p){g=n.segments||[];d=n=null;p=p||0;for(var q=0;q<g.length;q++){var t=g[q];if(t.timeline===k&&"undefined"!==typeof t.start){var D=Math.abs(p-t.start);if(null!==d&&d<D)break;if(!n||null===d||d>=D)d=D,n={time:t.start,segmentIndex:q}}}return n}},{name:"Discontinuity",run:function(g,n,d,k,p){d=null;p=p||0;if(n.discontinuityStarts&&n.discontinuityStarts.length){k=null;for(var q=0;q<n.discontinuityStarts.length;q++){var t=n.discontinuityStarts[q],D=g.discontinuities[n.discontinuitySequence+
q+1];if(D){var N=Math.abs(p-D.time);if(null!==k&&k<N)break;if(!d||null===k||k>=N)k=N,d={time:D.time,segmentIndex:t}}}}return d}},{name:"Playlist",run:function(g,n,d,k,p){return n.syncInfo?{time:n.syncInfo.time,segmentIndex:n.syncInfo.mediaSequence-n.mediaSequence}:null}}],un=function(g){function n(){gc(this,n);var d=nc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));d.inspectCache_=void 0;d.timelines=[];d.discontinuities=[];d.datetimeToDisplayTime=null;d.logger_=Pd("SyncController");return d}
vc(n,g);jc(n,[{key:"getSyncPoint",value:function(d,k,p,q){d=this.runStrategies_(d,k,p,q);return d.length?this.selectSyncPoint_(d,{key:"time",value:q}):null}},{key:"getExpiredTime",value:function(d,k){if(!d||!d.segments)return null;k=this.runStrategies_(d,k,d.discontinuitySequence,0);if(!k.length)return null;k=this.selectSyncPoint_(k,{key:"segmentIndex",value:0});0<k.segmentIndex&&(k.time*=-1);return Math.abs(k.time+Gd(d,k.segmentIndex,0))}},{key:"runStrategies_",value:function(d,k,p,q){for(var t=
[],D=0;D<Nj.length;D++){var N=Nj[D],Y=N.run(this,d,k,p,q);Y&&(Y.strategy=N.name,t.push({strategy:N.name,syncPoint:Y}))}return t}},{key:"selectSyncPoint_",value:function(d,k){for(var p=d[0].syncPoint,q=Math.abs(d[0].syncPoint[k.key]-k.value),t=d[0].strategy,D=1;D<d.length;D++){var N=Math.abs(d[D].syncPoint[k.key]-k.value);N<q&&(q=N,p=d[D].syncPoint,t=d[D].strategy)}this.logger_("syncPoint for ["+k.key+": "+k.value+"] chosen with strategy ["+(t+"]: [time:"+p.time+", segmentIndex:")+(p.segmentIndex+
"]"));return p}},{key:"saveExpiredSegmentInfo",value:function(d,k){for(var p=k.mediaSequence-d.mediaSequence-1;0<=p;p--){var q=d.segments[p];if(q&&"undefined"!==typeof q.start){k.syncInfo={mediaSequence:d.mediaSequence+p,time:q.start};this.logger_("playlist refresh sync: [time:"+k.syncInfo.time+", mediaSequence: "+(k.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(d){!this.datetimeToDisplayTime&&d.segments&&d.segments.length&&d.segments[0].dateTimeObject&&
(this.datetimeToDisplayTime=-(d.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(d){var k=d.segment,p=d.playlist,q;(q=k.map?this.probeMp4Segment_(d):this.probeTsSegment_(d))&&this.calculateSegmentTimeMapping_(d,q)&&(this.saveDiscontinuitySyncInfo_(d),p.syncInfo||(p.syncInfo={mediaSequence:p.mediaSequence+d.mediaIndex,time:k.start}));return q}},{key:"probeMp4Segment_",value:function(d){var k=d.segment,p=tc.timescale(k.map.bytes);
p=tc.compositionStartTime(p,d.bytes);null!==d.timestampOffset&&(d.timestampOffset-=p);return{start:p,end:p+k.duration}}},{key:"probeTsSegment_",value:function(d){var k=d.bytes;d=this.inspectCache_;if(md.isLikelyAacData(k))b:{for(var p=!1,q=0,t=null,D=null,N,Y=0,oa;3<=k.length-Y;){switch(md.parseType(k,Y)){case "timed-metadata":if(10>k.length-Y){p=!0;break}N=md.parseId3TagSize(k,Y);if(N>k.length){p=!0;break}null===D&&(oa=k.subarray(Y,Y+N),D=md.parseAacTimestamp(oa));Y+=N;break;case "audio":if(7>k.length-
Y){p=!0;break}N=md.parseAdtsSize(k,Y);if(N>k.length){p=!0;break}null===t&&(oa=k.subarray(Y,Y+N),t=md.parseSampleRate(oa));q++;Y+=N;break;default:Y++}if(p){k=null;break b}}null===t||null===D?k=null:(k=9E4/t,k={audio:[{type:"audio",dts:D,pts:D},{type:"audio",dts:D+1024*q*k,pts:D+1024*q*k}]})}else{D={pid:null,table:null};p={};t=0;for(N=188;N<k.byteLength;)if(71===k[t]&&71===k[N]){Y=k.subarray(t,N);oa=pb.parseType(Y,D.pid);switch(oa){case "pat":D.pid||(D.pid=pb.parsePat(Y));break;case "pmt":D.table||
(D.table=pb.parsePmt(Y))}if(D.pid&&D.table)break;t+=188;N+=188}else t++,N++;for(q in D.table)if(D.table.hasOwnProperty(q))switch(D.table[q]){case 27:p.video=[];var ta;N=k;Y=D;oa=p;var Ba=0,Da=188,va=!1,Aa=[];for(ta=0;Da<N.byteLength;)if(71===N[Ba]&&71===N[Da]){t=N.subarray(Ba,Da);var Pa=pb.parseType(t,Y.pid);switch(Pa){case "pes":var Ma=pb.parsePesType(t,Y.table);Pa=pb.parsePayloadUnitStartIndicator(t);if("video"===Ma&&(Pa&&!va&&(Ma=pb.parsePesTime(t))&&(Ma.type="video",oa.video.push(Ma),va=!0),!oa.firstKeyFrame)){if(Pa&&
0!==ta){Ma=new Uint8Array(ta);for(Pa=0;Aa.length;)ta=Aa.shift(),Ma.set(ta,Pa),Pa+=ta.byteLength;pb.videoPacketContainsKeyFrame(Ma)&&((ta=pb.parsePesTime(Ma))?(oa.firstKeyFrame=ta,oa.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));
ta=0}Aa.push(t);ta+=t.byteLength}}if(va&&oa.firstKeyFrame)break;Ba+=188;Da+=188}else Ba++,Da++;Da=N.byteLength;Ba=Da-188;for(va=!1;0<=Ba;)if(71===N[Ba]&&71===N[Da]){t=N.subarray(Ba,Da);Pa=pb.parseType(t,Y.pid);switch(Pa){case "pes":if(Ma=pb.parsePesType(t,Y.table),Pa=pb.parsePayloadUnitStartIndicator(t),"video"===Ma&&Pa&&(Ma=pb.parsePesTime(t)))Ma.type="video",oa.video.push(Ma),va=!0}if(va)break;Ba-=188;Da-=188}else Ba--,Da--;0===p.video.length&&delete p.video;break;case 15:p.audio=[];t=k;N=D;Y=p;
oa=0;Ba=188;for(Da=!1;Ba<=t.byteLength;)if(71!==t[oa]||71!==t[Ba]&&Ba!==t.byteLength)oa++,Ba++;else{va=t.subarray(oa,Ba);Aa=pb.parseType(va,N.pid);switch(Aa){case "pes":if(ta=pb.parsePesType(va,N.table),Aa=pb.parsePayloadUnitStartIndicator(va),"audio"===ta&&Aa&&(va=pb.parsePesTime(va)))va.type="audio",Y.audio.push(va),Da=!0}if(Da)break;oa+=188;Ba+=188}Ba=t.byteLength;oa=Ba-188;for(Da=!1;0<=oa;)if(71!==t[oa]||71!==t[Ba]&&Ba!==t.byteLength)oa--,Ba--;else{va=t.subarray(oa,Ba);Aa=pb.parseType(va,N.pid);
switch(Aa){case "pes":if(ta=pb.parsePesType(va,N.table),Aa=pb.parsePayloadUnitStartIndicator(va),"audio"===ta&&Aa&&(va=pb.parsePesTime(va)))va.type="audio",Y.audio.push(va),Da=!0}if(Da)break;oa-=188;Ba-=188}0===p.audio.length&&delete p.audio}k=p}k&&(k.audio||k.video)?(am(k,d),d=k):d=null;D=q=k=void 0;if(!d)return null;d.video&&2===d.video.length?(this.inspectCache_=d.video[1].dts,k=d.video[0].dtsTime,q=d.video[1].dtsTime,D=d.video):d.audio&&2===d.audio.length&&(this.inspectCache_=d.audio[1].dts,k=
d.audio[0].dtsTime,q=d.audio[1].dtsTime,D=d.audio);return{segmentTimestampInfo:D,start:k,end:q,containsVideo:d.video&&2===d.video.length,containsAudio:d.audio&&2===d.audio.length}}},{key:"timestampOffsetForTimeline",value:function(d){return"undefined"===typeof this.timelines[d]?null:this.timelines[d].time}},{key:"mappingForTimeline",value:function(d){return"undefined"===typeof this.timelines[d]?null:this.timelines[d].mapping}},{key:"calculateSegmentTimeMapping_",value:function(d,k){var p=d.segment,
q=this.timelines[d.timeline];if(null!==d.timestampOffset)q={time:d.startOfSegment,mapping:d.startOfSegment-k.start},this.timelines[d.timeline]=q,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+d.timeline+": [time: "+(q.time+"] [mapping: "+q.mapping+"]")),p.start=d.startOfSegment,p.end=k.end+q.mapping;else if(q)p.start=k.start+q.mapping,p.end=k.end+q.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(d){var k=d.playlist,p=d.segment;if(p.discontinuity)this.discontinuities[p.timeline]=
{time:p.start,accuracy:0};else if(k.discontinuityStarts&&k.discontinuityStarts.length)for(var q=0;q<k.discontinuityStarts.length;q++){var t=k.discontinuityStarts[q],D=k.discontinuitySequence+q+1,N=t-d.mediaIndex,Y=Math.abs(N);if(!this.discontinuities[D]||this.discontinuities[D].accuracy>Y)t=0>N?p.start-Gd(k,d.mediaIndex,t):p.end+Gd(k,d.mediaIndex+1,t),this.discontinuities[D]={time:t,accuracy:Y}}}},{key:"dispose",value:function(){this.trigger("dispose");this.off()}}]);return n}(la.EventTarget),vn=
new lh("./decrypter-worker.worker.js",function(g,n){var d=this;(function(){var k=function(Da,va){if(!(Da instanceof va))throw new TypeError("Cannot call a class as a function");},p=function(){function Da(va,Aa){for(var Pa=0;Pa<Aa.length;Pa++){var Ma=Aa[Pa];Ma.enumerable=Ma.enumerable||!1;Ma.configurable=!0;"value"in Ma&&(Ma.writable=!0);Object.defineProperty(va,Ma.key,Ma)}}return function(va,Aa,Pa){Aa&&Da(va.prototype,Aa);Pa&&Da(va,Pa);return va}}(),q=function(Da,va){if("function"!==typeof va&&null!==
va)throw new TypeError("Super expression must either be null or a function, not "+typeof va);Da.prototype=Object.create(va&&va.prototype,{constructor:{value:Da,enumerable:!1,writable:!0,configurable:!0}});va&&(Object.setPrototypeOf?Object.setPrototypeOf(Da,va):Da.__proto__=va)},t=null,D=function(){function Da(va){k(this,Da);if(!t){var Aa=[[[],[],[],[],[]],[[],[],[],[],[]]],Pa=Aa[0],Ma=Aa[1],eb=Pa[4],jb=Ma[4],Va,Fa,Ua,Bb=[],yb=[],Wb;for(Va=0;256>Va;Va++)yb[(Bb[Va]=Va<<1^283*(Va>>7))^Va]=Va;for(Fa=
Ua=0;!eb[Fa];Fa^=Wb||1,Ua=yb[Ua]||1){var zb=Ua^Ua<<1^Ua<<2^Ua<<3^Ua<<4;zb=zb>>8^zb&255^99;eb[Fa]=zb;jb[zb]=Fa;var Mb=Bb[Va=Bb[Wb=Bb[Fa]]];var Xb=16843009*Mb^65537*Va^257*Wb^16843008*Fa;Mb=257*Bb[zb]^16843008*zb;for(Va=0;4>Va;Va++)Pa[Va][Fa]=Mb=Mb<<24^Mb>>>8,Ma[Va][zb]=Xb=Xb<<24^Xb>>>8}for(Va=0;5>Va;Va++)Pa[Va]=Pa[Va].slice(0),Ma[Va]=Ma[Va].slice(0);t=Aa}this._tables=[[t[0][0].slice(),t[0][1].slice(),t[0][2].slice(),t[0][3].slice(),t[0][4].slice()],[t[1][0].slice(),t[1][1].slice(),t[1][2].slice(),
t[1][3].slice(),t[1][4].slice()]];Aa=this._tables[0][4];Pa=this._tables[1];Fa=va.length;Ua=1;if(4!==Fa&&6!==Fa&&8!==Fa)throw Error("Invalid aes key size");eb=va.slice(0);jb=[];this._key=[eb,jb];for(va=Fa;va<4*Fa+28;va++){Ma=eb[va-1];if(0===va%Fa||8===Fa&&4===va%Fa)Ma=Aa[Ma>>>24]<<24^Aa[Ma>>16&255]<<16^Aa[Ma>>8&255]<<8^Aa[Ma&255],0===va%Fa&&(Ma=Ma<<8^Ma>>>24^Ua<<24,Ua=Ua<<1^283*(Ua>>7));eb[va]=eb[va-Fa]^Ma}for(Fa=0;va;Fa++,va--)Ma=eb[Fa&3?va:va-4],jb[Fa]=4>=va||4>Fa?Ma:Pa[0][Aa[Ma>>>24]]^Pa[1][Aa[Ma>>
16&255]]^Pa[2][Aa[Ma>>8&255]]^Pa[3][Aa[Ma&255]]}Da.prototype.decrypt=function(va,Aa,Pa,Ma,eb,jb){var Va=this._key[1];va^=Va[0];Ma^=Va[1];Pa^=Va[2];Aa^=Va[3];var Fa=Va.length/4-2,Ua,Bb=4;var yb=this._tables[1];var Wb=yb[0],zb=yb[1],Mb=yb[2],Xb=yb[3],xc=yb[4];for(Ua=0;Ua<Fa;Ua++){yb=Wb[va>>>24]^zb[Ma>>16&255]^Mb[Pa>>8&255]^Xb[Aa&255]^Va[Bb];var Rc=Wb[Ma>>>24]^zb[Pa>>16&255]^Mb[Aa>>8&255]^Xb[va&255]^Va[Bb+1];var fg=Wb[Pa>>>24]^zb[Aa>>16&255]^Mb[va>>8&255]^Xb[Ma&255]^Va[Bb+2];Aa=Wb[Aa>>>24]^zb[va>>16&
255]^Mb[Ma>>8&255]^Xb[Pa&255]^Va[Bb+3];Bb+=4;va=yb;Ma=Rc;Pa=fg}for(Ua=0;4>Ua;Ua++)eb[(3&-Ua)+jb]=xc[va>>>24]<<24^xc[Ma>>16&255]<<16^xc[Pa>>8&255]<<8^xc[Aa&255]^Va[Bb++],yb=va,va=Ma,Ma=Pa,Pa=Aa,Aa=yb};return Da}(),N=function(){function Da(){k(this,Da);this.listeners={}}Da.prototype.on=function(va,Aa){this.listeners[va]||(this.listeners[va]=[]);this.listeners[va].push(Aa)};Da.prototype.off=function(va,Aa){if(!this.listeners[va])return!1;Aa=this.listeners[va].indexOf(Aa);this.listeners[va].splice(Aa,
1);return-1<Aa};Da.prototype.trigger=function(va){var Aa=this.listeners[va];if(Aa)if(2===arguments.length)for(var Pa=Aa.length,Ma=0;Ma<Pa;++Ma)Aa[Ma].call(this,arguments[1]);else{Pa=Array.prototype.slice.call(arguments,1);Ma=Aa.length;for(var eb=0;eb<Ma;++eb)Aa[eb].apply(this,Pa)}};Da.prototype.dispose=function(){this.listeners={}};Da.prototype.pipe=function(va){this.on("data",function(Aa){va.push(Aa)})};return Da}(),Y=function(Da){function va(){k(this,va);var Aa=Da.call(this,N);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
Aa=!Aa||"object"!==typeof Aa&&"function"!==typeof Aa?this:Aa;Aa.jobs=[];Aa.delay=1;Aa.timeout_=null;return Aa}q(va,Da);va.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};va.prototype.push=function(Aa){this.jobs.push(Aa);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return va}(N),oa=function(Da){return Da<<24|(Da&65280)<<8|(Da&16711680)>>8|Da>>>24},ta=function(){function Da(va,
Aa,Pa,Ma){k(this,Da);var eb=Da.STEP,jb=new Int32Array(va.buffer),Va=new Uint8Array(va.byteLength);va=0;this.asyncStream_=new Y;this.asyncStream_.push(this.decryptChunk_(jb.subarray(va,va+eb),Aa,Pa,Va));for(va=eb;va<jb.length;va+=eb)Pa=new Uint32Array([oa(jb[va-4]),oa(jb[va-3]),oa(jb[va-2]),oa(jb[va-1])]),this.asyncStream_.push(this.decryptChunk_(jb.subarray(va,va+eb),Aa,Pa,Va));this.asyncStream_.push(function(){Ma(null,Va.subarray(0,Va.byteLength-Va[Va.byteLength-1]))})}Da.prototype.decryptChunk_=
function(va,Aa,Pa,Ma){return function(){var eb=new Int32Array(va.buffer,va.byteOffset,va.byteLength>>2),jb=new D(Array.prototype.slice.call(Aa)),Va=new Uint8Array(va.byteLength),Fa=new Int32Array(Va.buffer),Ua;var Bb=Pa[0];var yb=Pa[1];var Wb=Pa[2];var zb=Pa[3];for(Ua=0;Ua<eb.length;Ua+=4){var Mb=oa(eb[Ua]);var Xb=oa(eb[Ua+1]);var xc=oa(eb[Ua+2]);var Rc=oa(eb[Ua+3]);jb.decrypt(Mb,Xb,xc,Rc,Fa,Ua);Fa[Ua]=oa(Fa[Ua]^Bb);Fa[Ua+1]=oa(Fa[Ua+1]^yb);Fa[Ua+2]=oa(Fa[Ua+2]^Wb);Fa[Ua+3]=oa(Fa[Ua+3]^zb);Bb=Mb;
yb=Xb;Wb=xc;zb=Rc}Ma.set(Va,va.byteOffset)}};p(Da,null,[{key:"STEP",get:function(){return 32E3}}]);return Da}(),Ba=function(Da){var va={};Object.keys(Da).forEach(function(Aa){var Pa=Da[Aa];ArrayBuffer.isView(Pa)?va[Aa]={bytes:Pa.buffer,byteOffset:Pa.byteOffset,byteLength:Pa.byteLength}:va[Aa]=Pa});return va};return new function(Da){Da.onmessage=function(va){var Aa=va.data;va=new Uint8Array(Aa.encrypted.bytes,Aa.encrypted.byteOffset,Aa.encrypted.byteLength);var Pa=new Uint32Array(Aa.key.bytes,Aa.key.byteOffset,
Aa.key.byteLength/4),Ma=new Uint32Array(Aa.iv.bytes,Aa.iv.byteOffset,Aa.iv.byteLength/4);new ta(va,Pa,Ma,function(eb,jb){Da.postMessage(Ba({source:Aa.source,decrypted:jb}),[jb.buffer])})}}(d)})()}),Ie=function(g,n){g.abort();g.pause();n&&n.activePlaylistLoader&&(n.activePlaylistLoader.pause(),n.activePlaylistLoader=null)},wn=function(g,n){return function(){var d=n.segmentLoaders,k=d[g],p=d.main;d=n.mediaTypes[g];var q=d.activeTrack();q=d.activeGroup(q);var t=d.activePlaylistLoader;Ie(k,d);q&&(q.playlistLoader?
(k.resyncLoader(),k=q.playlistLoader,d.activePlaylistLoader=k,k.load()):t&&p.resetEverything())}},xn=function(g,n){return function(){var d=n.segmentLoaders,k=d[g],p=d.main;d=n.mediaTypes[g];var q=d.activeTrack(),t=d.activeGroup(q),D=d.activePlaylistLoader;Ie(k,d);t&&(t.playlistLoader?D===t.playlistLoader?(k=t.playlistLoader,d.activePlaylistLoader=k,k.load()):(k.track&&k.track(q),k.resetEverything(),k=t.playlistLoader,d.activePlaylistLoader=k,k.load()):p.resetEverything())}},Je={AUDIO:function(g,n){return function(){var d=
n.mediaTypes[g],k=n.blacklistCurrentPlaylist;Ie(n.segmentLoaders[g],d);var p=d.activeTrack(),q=d.activeGroup();q=(q.filter(function(D){return D["default"]})[0]||q[0]).id;q=d.tracks[q];if(p===q)k({message:"Problem encountered loading the default audio track."});else{la.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var t in d.tracks)d.tracks[t].enabled=d.tracks[t]===q;d.onTrackChanged()}}},SUBTITLES:function(g,n){return function(){var d=n.segmentLoaders[g],
k=n.mediaTypes[g];la.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");Ie(d,k);if(d=k.activeTrack())d.mode="disabled";k.onTrackChanged()}}},Oj={AUDIO:function(g,n,d){if(n){var k=d.tech,p=d.requestOptions,q=d.segmentLoaders[g];n.on("loadedmetadata",function(){var t=n.media();q.playlist(t,p);(!k.paused()||t.endList&&"none"!==k.preload())&&q.load()});n.on("loadedplaylist",function(){q.playlist(n.media(),p);k.paused()||q.load()});n.on("error",Je[g](g,d))}},SUBTITLES:function(g,
n,d){var k=d.tech,p=d.requestOptions,q=d.segmentLoaders[g],t=d.mediaTypes[g];n.on("loadedmetadata",function(){var D=n.media();q.playlist(D,p);q.track(t.activeTrack());(!k.paused()||D.endList&&"none"!==k.preload())&&q.load()});n.on("loadedplaylist",function(){q.playlist(n.media(),p);k.paused()||q.load()});n.on("error",Je[g](g,d))}},yn={AUDIO:function(g,n){var d=n.hls,k=n.sourceType,p=n.segmentLoaders[g],q=n.requestOptions,t=n.master.mediaGroups,D=n.mediaTypes[g],N=D.groups;D=D.tracks;var Y=n.masterPlaylistLoader;
t[g]&&0!==Object.keys(t[g]).length||(t[g]={main:{"default":{"default":!0}}});for(var oa in t[g]){N[oa]||(N[oa]=[]);for(var ta in t[g][oa]){var Ba=t[g][oa][ta];var Da=Ba.resolvedUri?new we(Ba.resolvedUri,d,q):Ba.playlists&&"dash"===k?new wg(Ba.playlists[0],d,q,Y):null;Ba=la.mergeOptions({id:ta,playlistLoader:Da},Ba);Oj[g](g,Ba.playlistLoader,n);N[oa].push(Ba);if("undefined"===typeof D[ta]){Da=la.AudioTrack;var va=ta,Aa=Ba["default"]?"main":"alternative";Ba.characteristics&&0<=Ba.characteristics.indexOf("public.accessibility.describes-video")&&
(Aa="main-desc");Ba=new Da({id:va,kind:Aa,enabled:!1,language:Ba.language,"default":Ba["default"],label:ta});D[ta]=Ba}}}p.on("error",Je[g](g,n))},SUBTITLES:function(g,n){var d=n.tech,k=n.hls,p=n.sourceType,q=n.segmentLoaders[g],t=n.requestOptions,D=n.master.mediaGroups,N=n.mediaTypes[g],Y=N.groups;N=N.tracks;var oa=n.masterPlaylistLoader,ta;for(ta in D[g]){Y[ta]||(Y[ta]=[]);for(var Ba in D[g][ta])if(!D[g][ta][Ba].forced){var Da=D[g][ta][Ba],va=void 0;"hls"===p?va=new we(Da.resolvedUri,k,t):"dash"===
p&&(va=new wg(Da.playlists[0],k,t,oa));Da=la.mergeOptions({id:Ba,playlistLoader:va},Da);Oj[g](g,Da.playlistLoader,n);Y[ta].push(Da);"undefined"===typeof N[Ba]&&(Da=d.addRemoteTextTrack({id:Ba,kind:"subtitles","default":Da["default"]&&Da.autoselect,language:Da.language,label:Ba},!1).track,N[Ba]=Da)}}q.on("error",Je[g](g,n))},"CLOSED-CAPTIONS":function(g,n){var d=n.tech,k=n.master.mediaGroups,p=n.mediaTypes[g];n=p.groups;p=p.tracks;for(var q in k[g]){n[q]||(n[q]=[]);for(var t in k[g][q]){var D=k[g][q][t];
D.instreamId.match(/CC\d/)&&(n[q].push(la.mergeOptions({id:t},D)),"undefined"===typeof p[t]&&(D=d.addRemoteTextTrack({id:D.instreamId,kind:"captions","default":D["default"]&&D.autoselect,language:D.language,label:t},!1).track,p[t]=D))}}}},zn=function(g,n){return function(d){var k=n.mediaTypes[g].groups,p=n.masterPlaylistLoader.media();if(!p)return null;var q=null;p.attributes[g]&&(q=k[p.attributes[g]]);q=q||k.main;return"undefined"===typeof d?q:null===d?null:q.filter(function(t){return t.id===d.id})[0]||
null}},An={AUDIO:function(g,n){return function(){var d=n.mediaTypes[g].tracks,k;for(k in d)if(d[k].enabled)return d[k];return null}},SUBTITLES:function(g,n){return function(){var d=n.mediaTypes[g].tracks,k;for(k in d)if("showing"===d[k].mode||"hidden"===d[k].mode)return d[k];return null}}},Bn=function(g){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(N){yn[N](N,g)});var n=g.mediaTypes,d=g.masterPlaylistLoader,k=g.tech,p=g.hls;["AUDIO","SUBTITLES"].forEach(function(N){n[N].activeGroup=zn(N,
g);n[N].activeTrack=An[N](N,g);n[N].onGroupChanged=wn(N,g);n[N].onTrackChanged=xn(N,g)});var q=n.AUDIO.activeGroup();q=(q.filter(function(N){return N["default"]})[0]||q[0]).id;n.AUDIO.tracks[q].enabled=!0;n.AUDIO.onTrackChanged();d.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(N){return n[N].onGroupChanged()})});var t=function(){n.AUDIO.onTrackChanged();k.trigger({type:"usage",name:"hls-audio-change"})};k.audioTracks().addEventListener("change",t);k.remoteTextTracks().addEventListener("change",
n.SUBTITLES.onTrackChanged);p.on("dispose",function(){k.audioTracks().removeEventListener("change",t);k.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)});k.clearTracks("audio");for(var D in n.AUDIO.tracks)k.audioTracks().addTrack(n.AUDIO.tracks[D])},Cn=function(){var g={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(n){g[n]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ad,activeTrack:ad,onGroupChanged:ad,onTrackChanged:ad}});return g},Fc=void 0,
Dn="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),En=function(g){return this.audioSegmentLoader_[g]+this.mainSegmentLoader_[g]},Fn=function(g){function n(d){gc(this,n);var k=nc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),p=d.url,q=d.handleManifestRedirects,t=d.withCredentials,D=d.tech,N=d.bandwidth,Y=d.externHls,oa=d.useCueTags,ta=d.blacklistDuration,Ba=d.enableLowInitialPlaylist,Da=d.cacheEncryptionKeys,
va=d.sourceType;if(!p)throw Error("A non-empty playlist URL is required");Fc=Y;k.withCredentials=t;k.tech_=D;k.hls_=D.hls;k.sourceType_=va;k.useCueTags_=oa;k.blacklistDuration=ta;k.enableLowInitialPlaylist=Ba;k.useCueTags_&&(k.cueTagsTrack_=k.tech_.addTextTrack("metadata","ad-cues"),k.cueTagsTrack_.inBandMetadataTrackDispatchType="");k.requestOptions_={withCredentials:t,handleManifestRedirects:q,timeout:null};k.mediaTypes_=Cn();k.mediaSource=new la.MediaSource;k.mediaSource.addEventListener("sourceopen",
k.handleSourceOpen_.bind(k));k.seekable_=la.createTimeRanges();k.hasPlayed_=!1;k.syncController_=new un(d);k.segmentMetadataTrack_=D.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;k.decrypter_=new vn;k.inbandTextTracks_={};q={hls:k.hls_,mediaSource:k.mediaSource,currentTime:k.tech_.currentTime.bind(k.tech_),seekable:function(){return k.seekable()},seeking:function(){return k.tech_.seeking()},duration:function(){return k.mediaSource.duration},hasPlayed:function(){return k.hasPlayed_},
goalBufferLength:function(){return k.goalBufferLength()},bandwidth:N,syncController:k.syncController_,decrypter:k.decrypter_,sourceType:k.sourceType_,inbandTextTracks:k.inbandTextTracks_,cacheEncryptionKeys:Da};k.masterPlaylistLoader_="dash"===k.sourceType_?new wg(p,k.hls_,k.requestOptions_):new we(p,k.hls_,k.requestOptions_);k.setupMasterPlaylistLoaderListeners_();k.mainSegmentLoader_=new zg(la.mergeOptions(q,{segmentMetadataTrack:k.segmentMetadataTrack_,loaderType:"main"}),d);k.audioSegmentLoader_=
new zg(la.mergeOptions(q,{loaderType:"audio"}),d);k.subtitleSegmentLoader_=new sn(la.mergeOptions(q,{loaderType:"vtt",featuresNativeTextTracks:k.tech_.featuresNativeTextTracks}),d);k.setupSegmentLoaderListeners_();Dn.forEach(function(Aa){k[Aa+"_"]=En.bind(k,Aa)});k.logger_=Pd("MPC");k.masterPlaylistLoader_.load();return k}vc(n,g);jc(n,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var d=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var k=d.masterPlaylistLoader_.media(),
p=1500*k.targetDuration;bg(d.masterPlaylistLoader_.master,d.masterPlaylistLoader_.media())?d.requestOptions_.timeout=0:d.requestOptions_.timeout=p;k.endList&&"none"!==d.tech_.preload()&&(d.mainSegmentLoader_.playlist(k,d.requestOptions_),d.mainSegmentLoader_.load());Bn({sourceType:d.sourceType_,segmentLoaders:{AUDIO:d.audioSegmentLoader_,SUBTITLES:d.subtitleSegmentLoader_,main:d.mainSegmentLoader_},tech:d.tech_,requestOptions:d.requestOptions_,masterPlaylistLoader:d.masterPlaylistLoader_,hls:d.hls_,
master:d.master(),mediaTypes:d.mediaTypes_,blacklistCurrentPlaylist:d.blacklistCurrentPlaylist.bind(d)});d.triggerPresenceUsage_(d.master(),k);try{d.setupSourceBuffers_()}catch(q){return la.log.warn("Failed to create SourceBuffers",q),d.mediaSource.endOfStream("decode")}d.setupFirstPlay();if(!d.mediaTypes_.AUDIO.activePlaylistLoader||d.mediaTypes_.AUDIO.activePlaylistLoader.media())d.trigger("selectedinitialmedia");else d.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){d.trigger("selectedinitialmedia")})});
this.masterPlaylistLoader_.on("loadedplaylist",function(){var k=d.masterPlaylistLoader_.media();if(k){if(d.useCueTags_&&d.updateAdCues_(k),d.mainSegmentLoader_.playlist(k,d.requestOptions_),d.updateDuration(),d.tech_.paused()||(d.mainSegmentLoader_.load(),d.audioSegmentLoader_&&d.audioSegmentLoader_.load()),!k.endList){var p=function(){var q=d.seekable();0!==q.length&&d.mediaSource.addSeekableRange_(q.start(0),q.end(0))};if(Infinity!==d.duration())d.tech_.one("durationchange",function t(){if(Infinity===
d.duration())p();else d.tech_.one("durationchange",t)});else p()}}else d.excludeUnsupportedVariants_(),k=void 0,d.enableLowInitialPlaylist&&(k=d.selectInitialPlaylist()),k||(k=d.selectPlaylist()),d.initialMedia_=k,d.masterPlaylistLoader_.media(d.initialMedia_)});this.masterPlaylistLoader_.on("error",function(){d.blacklistCurrentPlaylist(d.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){d.mainSegmentLoader_.abort();d.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",
function(){var k=d.masterPlaylistLoader_.media(),p=1500*k.targetDuration;bg(d.masterPlaylistLoader_.master,d.masterPlaylistLoader_.media())?d.requestOptions_.timeout=0:d.requestOptions_.timeout=p;d.mainSegmentLoader_.playlist(k,d.requestOptions_);d.mainSegmentLoader_.load();d.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var k=d.masterPlaylistLoader_.media();d.stuckAtPlaylistEnd_(k)&&(d.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),
d.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){d.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){d.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(d,k){d=d.mediaGroups||{};var p=!0,q=Object.keys(d.AUDIO),t;for(t in d.AUDIO)for(var D in d.AUDIO[t])d.AUDIO[t][D].uri||(p=!1);p&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});
Object.keys(d.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});Fc.Playlist.isAes(k)&&this.tech_.trigger({type:"usage",name:"hls-aes"});Fc.Playlist.isFmp4(k)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});q.length&&1<Object.keys(d.AUDIO[q[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var d=this;this.mainSegmentLoader_.on("bandwidthupdate",
function(){var k=d.selectPlaylist(),p=d.masterPlaylistLoader_.media(),q=d.tech_.buffered();q=q.length?q.end(q.length-1)-d.tech_.currentTime():0;var t=d.bufferLowWaterLine(),D=d.duration();k?p=!p.endList||D<Zb.MAX_BUFFER_LOW_WATER_LINE||k.attributes.BANDWIDTH<p.attributes.BANDWIDTH||q>=t?!0:!1:(la.log.warn("We received no playlist to switch to. Please check your stream."),p=!1);p&&d.masterPlaylistLoader_.media(k);d.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){d.trigger("progress")});
this.mainSegmentLoader_.on("error",function(){d.blacklistCurrentPlaylist(d.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){d.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){d.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){d.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){d.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){d.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},
120)});this.mainSegmentLoader_.on("reseteverything",function(){d.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(k){d.tech_.trigger({type:"hls-segment-time-mapping",mapping:k.mapping})});this.audioSegmentLoader_.on("ended",function(){d.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();
this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var d=this.selectPlaylist();d!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(d),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var d=this,k=this.selectPlaylist();k!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(k),
this.mainSegmentLoader_.resetEverything(function(){la.browser.IE_VERSION||la.browser.IS_EDGE?d.tech_.setCurrentTime(d.tech_.currentTime()+.04):d.tech_.setCurrentTime(d.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_&&this.load();var d=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<d.start(0))return this.tech_.setCurrentTime(d.end(d.length-1))}}},{key:"setupFirstPlay",
value:function(){var d=this,k=this.masterPlaylistLoader_.media();if(!k||this.tech_.paused()||this.hasPlayed_)return!1;if(!k.endList){var p=this.seekable();if(!p.length)return!1;if(la.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){d.trigger("firstplay");d.tech_.setCurrentTime(p.end(0));d.hasPlayed_=!0}),!1;this.trigger("firstplay");this.tech_.setCurrentTime(p.end(0))}this.hasPlayed_=!0;this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(k){return la.log.warn("Failed to create Source Buffers",
k),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var d=this.tech_.play();"undefined"!==typeof d&&"function"===typeof d.then&&d.then(null,function(k){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var d=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(d=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?d&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);if(d){this.logger_("calling mediaSource.endOfStream()");
try{this.mediaSource.endOfStream()}catch(k){la.log.warn("Failed to call media source endOfStream",k)}}}},{key:"stuckAtPlaylistEnd_",value:function(d){if(!this.seekable().length)return!1;var k=this.syncController_.getExpiredTime(d,this.mediaSource.duration);if(null===k)return!1;d=Fc.Playlist.playlistEnd(d,k);k=this.tech_.currentTime();var p=this.tech_.buffered();if(!p.length)return d-k<=wc;p=p.end(p.length-1);return p-k<=wc&&d-p<=wc}},{key:"blacklistCurrentPlaylist",value:function(){var d=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},k=arguments[1],p=void 0;p=void 0;p=d.playlist||this.masterPlaylistLoader_.media();k=k||d.blacklistDuration||this.blacklistDuration;if(!p){this.error=d;try{return this.mediaSource.endOfStream("network")}catch(D){return this.trigger("error")}}var q=1===this.masterPlaylistLoader_.master.playlists.filter(xe).length,t=this.masterPlaylistLoader_.master.playlists;if(1===t.length)return la.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),
this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(q);q&&(la.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),t.forEach(function(D){Infinity!==D.excludeUntil&&delete D.excludeUntil}),this.tech_.trigger("retryplaylist"));p.excludeUntil=Date.now()+1E3*k;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});p=this.selectPlaylist();la.log.warn("Problem encountered with the current HLS playlist."+
(d.message?" "+d.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(p,q)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(d){var k=hj(this.tech_.buffered(),d);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;
if(k&&k.length)return d;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Fc.Playlist.duration(this.masterPlaylistLoader_.media()):
0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var d=void 0;if(this.masterPlaylistLoader_){var k=this.masterPlaylistLoader_.media();if(k){var p=this.syncController_.getExpiredTime(k,this.mediaSource.duration);if(null!==p){var q=this.masterPlaylistLoader_.master.suggestedPresentationDelay,t=Fc.Playlist.seekable(k,p,q);if(0!==t.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){k=this.mediaTypes_.AUDIO.activePlaylistLoader.media();p=this.syncController_.getExpiredTime(k,
this.mediaSource.duration);if(null===p)return;d=Fc.Playlist.seekable(k,p,q);if(0===d.length)return}p=k=void 0;this.seekable_&&this.seekable_.length&&(k=this.seekable_.end(0),p=this.seekable_.start(0));d?d.start(0)>t.end(0)||t.start(0)>d.end(0)?this.seekable_=t:this.seekable_=la.createTimeRanges([[d.start(0)>t.start(0)?d.start(0):t.start(0),d.end(0)<t.end(0)?d.end(0):t.end(0)]]):this.seekable_=t;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===k&&this.seekable_.start(0)===p||(this.logger_("seekable updated ["+
dg(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(){var d=this,k=this.mediaSource.duration,p=Fc.Playlist.duration(this.masterPlaylistLoader_.media()),q=this.tech_.buffered(),t=function N(){d.logger_("Setting duration from "+d.mediaSource.duration+" => "+p);try{d.mediaSource.duration=p}catch(Y){la.log.warn("Failed to set media source duration",Y)}d.tech_.trigger("durationchange");d.mediaSource.removeEventListener("sourceopen",N)};0<q.length&&
(p=Math.max(p,q.end(q.length-1)));k!==p&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",t):t())}},{key:"dispose",value:function(){var d=this;this.trigger("dispose");this.decrypter_&&this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(k){k=d.mediaTypes_[k].groups;for(var p in k)k[p].forEach(function(q){q.playlistLoader&&q.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();
this.subtitleSegmentLoader_.dispose();this.off();this.mediaSource.dispose&&this.mediaSource.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var d=this.masterPlaylistLoader_.media(),k;if(d&&"open"===this.mediaSource.readyState){var p=this.masterPlaylistLoader_.master;var q=d.segments&&d.segments.length&&d.segments[0].map?"mp4":
"mp2t";var t=d.attributes||{};var D=t.CODECS?Nd(t.CODECS):Aj;var N=d.attributes||{};t=!0;var Y=!1;if(d){if(p.mediaGroups.AUDIO&&N.AUDIO){var oa=p.mediaGroups.AUDIO[N.AUDIO];if(oa){Y=!0;t=!1;for(var ta in oa)if(!oa[ta].uri&&!oa[ta].playlists){t=!0;break}}}Y&&!D.audioProfile&&(t||(D.audioProfile=Ym(p,N.AUDIO)),D.audioProfile||(la.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),D.audioProfile=Aj.audioProfile));var Ba;
D.videoCodec&&(k=""+D.videoCodec+D.videoObjectTypeIndicator);D.audioProfile&&(Ba="mp4a.40."+D.audioProfile);p=qg("audio",q,[Ba]);ta=qg("video",q,[k]);q=qg("video",q,[k,Ba]);k=Y?!t&&k?[ta,p]:t||k?[q,p]:[p,p]:k?[q]:[p]}else k=[];if(1>k.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+d.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(k);this.excludeIncompatibleVariants_(d)}}},{key:"configureLoaderMimeTypes_",value:function(d){var k=
1<d.length&&-1===d[0].indexOf(",")&&d[0]!==d[1]?new la.EventTarget:null;this.mainSegmentLoader_.mimeType(d[0],k);d[1]&&this.audioSegmentLoader_.mimeType(d[1],k)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(d){d.attributes.CODECS&&r.MediaSource&&r.MediaSource.isTypeSupported&&!r.MediaSource.isTypeSupported('video/mp4; codecs="'+Xm(d.attributes.CODECS)+'"')&&(d.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function(d){var k=2,
p=null,q=void 0;d.attributes.CODECS&&(q=Nd(d.attributes.CODECS),p=q.videoCodec,k=q.codecCount);this.master().playlists.forEach(function(t){var D={codecCount:2,videoCodec:null};t.attributes.CODECS&&(D=Nd(t.attributes.CODECS));D.codecCount!==k&&(t.excludeUntil=Infinity);D.videoCodec!==p&&(t.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(d){var k=0,p=this.seekable();p.length&&(k=p.start(0));tn(d,this.cueTagsTrack_,k)}},{key:"goalBufferLength",value:function(){var d=this.tech_.currentTime(),
k=Zb.GOAL_BUFFER_LENGTH;return Math.min(k+d*Zb.GOAL_BUFFER_LENGTH_RATE,Math.max(k,Zb.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",value:function(){var d=this.tech_.currentTime(),k=Zb.BUFFER_LOW_WATER_LINE;return Math.min(k+d*Zb.BUFFER_LOW_WATER_LINE_RATE,Math.max(k,Zb.MAX_BUFFER_LOW_WATER_LINE))}}]);return n}(la.EventTarget),Gn=function(g,n,d){return function(k){var p=g.master.playlists[n],q=ag(p),t=xe(p);if("undefined"===typeof k)return t;k?delete p.disabled:p.disabled=!0;k===t||q||(d(),
k?g.trigger("renditionenabled"):g.trigger("renditiondisabled"));return k}},Hn=function p(n,d,k){gc(this,p);var q=n.masterPlaylistController_;q=q[(n.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(q);if(d.attributes.RESOLUTION){var t=d.attributes.RESOLUTION;this.width=t.width;this.height=t.height}this.bandwidth=d.attributes.BANDWIDTH;this.id=k;this.enabled=Gn(n.playlists,d.id,q)},In=function(n){var d=n.playlists;n.representations=function(){return d&&d.master&&d.master.playlists?
d.master.playlists.filter(function(k){return!ag(k)}).map(function(k,p){return new Hn(n,k,k.id)}):[]}},Pj=["seeking","seeked","pause","playing","error"],Jn=function(){function n(d){var k=this;gc(this,n);this.tech_=d.tech;this.seekable=d.seekable;this.allowSeeksWithinUnsafeLiveWindow=d.allowSeeksWithinUnsafeLiveWindow;this.media=d.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=Pd("PlaybackWatcher");this.logger_("initialize");var p=function(){return k.monitorCurrentTime_()},
q=function(){return k.techWaiting_()},t=function(){return k.cancelTimer_()},D=function(){return k.fixesBadSeeks_()};this.tech_.on("seekablechanged",D);this.tech_.on("waiting",q);this.tech_.on(Pj,t);this.tech_.on("canplay",p);this.dispose=function(){k.logger_("dispose");k.tech_.off("seekablechanged",D);k.tech_.off("waiting",q);k.tech_.off(Pj,t);k.tech_.off("canplay",p);k.checkCurrentTimeTimeout_&&r.clearTimeout(k.checkCurrentTimeTimeout_);k.cancelTimer_()}}jc(n,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();
this.checkCurrentTimeTimeout_&&r.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=r.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var d=this.tech_.currentTime(),k=this.tech_.buffered();if(this.lastRecordedTime===d&&(!k.length||d+wc>=k.end(k.length-1)))return this.techWaiting_();
5<=this.consecutiveUpdates&&d===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):d===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=d)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var d=this.seekable(),k=this.tech_.currentTime(),p=void 0;this.afterSeekableWindow_(d,
k,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(p=d.end(d.length-1));this.beforeSeekableWindow_(d,k)&&(p=d.start(0)+wc);return"undefined"!==typeof p?(this.logger_("Trying to seek outside of seekable at time "+k+" with seekable range "+(dg(d)+". Seeking to ")+(p+".")),this.tech_.setCurrentTime(p),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var d=this.tech_.currentTime(),k=this.tech_.buffered();k=hj(k,d);k.length&&d+3<=k.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(d),
this.logger_("Stopped at "+d+" while inside a buffered region ["+(k.start(0)+" -> "+k.end(0)+"]. Attempting to resume playback by seeking to the current time.")),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",value:function(){var d=this.seekable(),k=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(d,k))return d=d.end(d.length-1),this.logger_("Fell out of live window at time "+
k+". Seeking to live point (seekable end) "+d),this.cancelTimer_(),this.tech_.setCurrentTime(d),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;var p=this.tech_.buffered();d=ij(p,k);return this.videoUnderflow_(d,p,k)?(this.cancelTimer_(),this.tech_.setCurrentTime(k),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<d.length?(p=d.start(0)-k,this.logger_("Stopped at "+k+", setting timer for "+p+", seeking to "+d.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),
1E3*p,k),!0):!1}},{key:"afterSeekableWindow_",value:function(d,k,p){var q=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!d.length)return!1;var t=d.end(d.length-1)+wc;!p.endList&&q&&(t=d.end(d.length-1)+3*p.targetDuration);return k>t?!0:!1}},{key:"beforeSeekableWindow_",value:function(d,k){return d.length&&0<d.start(0)&&k<d.start(0)-wc?!0:!1}},{key:"videoUnderflow_",value:function(d,k,p){return 0===d.length&&(d=this.gapFromVideoUnderflow_(k,p))?(this.logger_("Encountered a gap in video from "+
d.start+" to "+d.end+". Seeking to current time "+p),!0):!1}},{key:"skipTheGap_",value:function(d){var k=this.tech_.buffered(),p=this.tech_.currentTime();k=ij(k,p);this.cancelTimer_();0!==k.length&&p===d&&(this.logger_("skipTheGap_:","currentTime:",p,"scheduled currentTime:",d,"nextRange start:",k.start(0)),this.tech_.setCurrentTime(k.start(0)+ze),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(d,k){if(2>d.length)d=la.createTimeRanges();else{for(var p=
[],q=1;q<d.length;q++){var t=d.end(q-1),D=d.start(q);p.push([t,D])}d=la.createTimeRanges(p)}for(p=0;p<d.length;p++)if(q=d.start(p),t=d.end(p),4>k-q&&2<k-q)return{start:q,end:t};return null}}]);return n}(),Kn={errorInterval:30,getSource:function(n){var d=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;return n(d)}},Ln=function p(d,k){var q=0,t=0,D=la.mergeOptions(Kn,k);d.ready(function(){d.trigger({type:"usage",name:"hls-error-reload-initialized"})});var N=function(){t&&d.currentTime(t)},Y=
function(Ba){null!==Ba&&void 0!==Ba&&(t=Infinity!==d.duration()&&d.currentTime()||0,d.one("loadedmetadata",N),d.src(Ba),d.trigger({type:"usage",name:"hls-error-reload"}),d.play())},oa=function(){if(Date.now()-q<1E3*D.errorInterval)d.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(D.getSource&&"function"===typeof D.getSource)return q=Date.now(),D.getSource.call(d,Y);la.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},ta=function Da(){d.off("loadedmetadata",
N);d.off("error",oa);d.off("dispose",Da)};d.on("error",oa);d.on("dispose",ta);d.reloadSourceOnError=function(Da){ta();p(d,Da)}},Qj=function(d){Ln(this,d)},Tb={PlaylistLoader:we,Playlist:Rb,Decrypter:em,AsyncStream:Ri,decrypt:Si,utils:qm,STANDARD_PLAYLIST_SELECTOR:function(){var d=this.useDevicePixelRatio?r.devicePixelRatio||1:1;return nn(this.playlists.master,this.systemBandwidth,parseInt(Lj(this.tech_.el(),"width"),10)*d,parseInt(Lj(this.tech_.el(),"height"),10)*d,this.limitRenditionByPlayerDimensions)},
INITIAL_PLAYLIST_SELECTOR:function(){var d=this.playlists.master.playlists.filter(Rb.isEnabled);Qd(d,function(k,p){return yg(k,p)});return d.filter(function(k){return Nd(k.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:yg,comparePlaylistResolution:function(d,k){var p=void 0,q=void 0;d.attributes.RESOLUTION&&d.attributes.RESOLUTION.width&&(p=d.attributes.RESOLUTION.width);p=p||r.Number.MAX_VALUE;k.attributes.RESOLUTION&&k.attributes.RESOLUTION.width&&(q=k.attributes.RESOLUTION.width);
q=q||r.Number.MAX_VALUE;return p===q&&d.attributes.BANDWIDTH&&k.attributes.BANDWIDTH?d.attributes.BANDWIDTH-k.attributes.BANDWIDTH:p-q},xhr:dj()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(d){Object.defineProperty(Tb,d,{get:function(){la.log.warn("using Hls."+d+" is UNSAFE be sure you know what you are doing");return Zb[d]},set:function(k){la.log.warn("using Hls."+
d+" is UNSAFE be sure you know what you are doing");"number"!==typeof k||0>k?la.log.warn("value of Hls."+d+" must be greater than or equal to 0"):Zb[d]=k}})});var Rj=function(d){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(d)?"hls":/^application\/dash\+xml/i.test(d)?"dash":null},Sj=function(d,k){k=k.media();for(var p=-1,q=0;q<d.length;q++)if(d[q].id===k.id){p=q;break}d.selectedIndex_=p;d.trigger({selectedIndex:p,type:"change"})},Mn=function(d,k){k.representations().forEach(function(p){d.addQualityLevel(p)});
Sj(d,k.playlists)};Tb.canPlaySource=function(){return la.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Nn=function(d,k,p){if(!d)return d;var q=void 0,t=void 0;if(p.mimeType_)q=k.mimeType_,t=p.mimeType_;else{t=Cj(k.mimeType_);var D=void 0,N=void 0;t.parameters.codecs.split(",").forEach(function(oa){oa=oa.trim();rg(oa)?D=oa:sg(oa)&&(N=oa)});q=t.type+'; codecs="'+N+'"';t=t.type.replace("video","audio")+'; codecs="'+D+'"'}p={};k=k.playlist_;for(var Y in d)p[Y]=
{audioContentType:t,videoContentType:q},k.contentProtection&&k.contentProtection[Y]&&k.contentProtection[Y].pssh&&(p[Y].pssh=k.contentProtection[Y].pssh),"string"===typeof d[Y]&&(p[Y].url=d[Y]);return la.mergeOptions(d,p)},Tj=function(){if(!window.localStorage)return null;var d=window.localStorage.getItem("videojs-vhs");if(!d)return null;try{return JSON.parse(d)}catch(k){return null}};Tb.supportsNativeHls=function(){var d=C.createElement("video");return la.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(k){return/maybe|probably/i.test(d.canPlayType(k))}):
!1}();var On=la.getTech("Html5").isSupported()?/maybe|probably/i.test(C.createElement("video").canPlayType("application/dash+xml")):!1;Tb.supportsNativeDash=On;Tb.supportsTypeNatively=function(d){return"hls"===d?Tb.supportsNativeHls:"dash"===d?Tb.supportsNativeDash:!1};Tb.isSupported=function(){return la.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Uj=function(d){function k(p,q,t){gc(this,k);var D=nc(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,
q,t.hls));q.options_&&q.options_.playerId&&(t=la(q.options_.playerId),t.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){la.log.warn("player.hls is deprecated. Use player.tech().hls instead.");q.trigger({type:"usage",name:"hls-player-access"});return D},configurable:!0}),t.vhs=D,t.dash=D,D.player_=t);D.tech_=q;D.source_=p;D.stats={};D.ignoreNextSeekingEvent_=!1;D.setOptions_();if(D.options_.overrideNative&&q.overrideNativeAudioTracks&&q.overrideNativeVideoTracks)q.overrideNativeAudioTracks(!0),
q.overrideNativeVideoTracks(!0);else if(D.options_.overrideNative&&(q.featuresNativeVideoTracks||q.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");D.on(C,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(N){(N=C.fullscreenElement||C.webkitFullscreenElement||C.mozFullScreenElement||C.msFullscreenElement)&&N.contains(D.tech_.el())&&D.masterPlaylistController_.smoothQualityChange_()});D.on(D.tech_,
"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});D.on(D.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});D.on(D.tech_,"play",D.play);return D}vc(k,d);jc(k,[{key:"setOptions_",value:function(){var p=this;this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1;this.options_.limitRenditionByPlayerDimensions=
!1===this.options_.limitRenditionByPlayerDimensions?!1:!0;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1;this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1;this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||
[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);if("number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var q=Tj();q&&q.bandwidth&&(this.options_.bandwidth=q.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"}));q&&q.throughput&&(this.options_.throughput=q.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==
typeof this.options_.bandwidth&&(this.options_.bandwidth=Zb.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Zb.INITIAL_BANDWIDTH;"withCredentials useDevicePixelRatio limitRenditionByPlayerDimensions bandwidth smoothQualityChange customTagParsers customTagMappers handleManifestRedirects cacheEncryptionKeys".split(" ").forEach(function(t){"undefined"!==typeof p.source_[t]&&(p.options_[t]=p.source_[t])});this.limitRenditionByPlayerDimensions=
this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function(p,q){var t=this;p&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Tb,this.options_.sourceType=Rj(q),this.options_.seekTo=function(D){t.tech_.setCurrentTime(D)},this.masterPlaylistController_=new Fn(this.options_),this.playbackWatcher_=new Jn(la.mergeOptions(this.options_,{seekable:function(){return t.seekable()},
media:function(){return t.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){la.players[t.tech_.options_.playerId].error(t.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Tb.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Tb.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=
this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(D){this.masterPlaylistController_.selectPlaylist=D.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(D){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=D;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},
set:function(D){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=D;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){la.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,
{bandwidth:{get:function(){return t.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return t.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return t.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return t.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return t.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},
mediaTransferDuration:{get:function(){return t.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return t.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return t.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return jj(t.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return t.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return t.tech_.currentSource_},
enumerable:!0},currentTech:{get:function(){return t.tech_.name_},enumerable:!0},duration:{get:function(){return t.tech_.duration()},enumerable:!0},master:{get:function(){return t.playlists.master},enumerable:!0},playerDimensions:{get:function(){return t.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return jj(t.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return t.tech_.getVideoPlaybackQuality()},
enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(t.options_.useBandwidthFromLocalStorage){var D={bandwidth:t.bandwidth,throughput:Math.round(t.throughput)};if(window.localStorage){var N=Tj();N=N?la.mergeOptions(N,D):D;try{window.localStorage.setItem("videojs-vhs",JSON.stringify(N))}catch(Y){}}}}),this.masterPlaylistController_.on("selectedinitialmedia",function(){In(t);var D=
t.masterPlaylistController_.mainSegmentLoader_,N=t.masterPlaylistController_.audioSegmentLoader_,Y=la.players[t.tech_.options_.playerId];Y.eme&&(D=Nn(t.source_.keySystems,D,N))&&(Y.currentSource().keySystems=D,11!==la.browser.IE_VERSION&&Y.eme.initializeMediaKeys&&Y.eme.initializeMediaKeys())}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),
this.tech_.el()&&this.tech_.src(la.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var p=this,q=la.players[this.tech_.options_.playerId];q&&q.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=q.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Mn(p.qualityLevels_,p)}),this.playlists.on("mediachange",function(){Sj(p.qualityLevels_,p.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},
{key:"setCurrentTime",value:function(p){this.masterPlaylistController_.setCurrentTime(p)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();this.player_&&(delete this.player_.vhs,
delete this.player_.dash,delete this.player_.hls);this.tech_&&this.tech_.hls&&delete this.tech_.hls;fm(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(p,q){return vm({playlist:this.masterPlaylistController_.media(),time:p,callback:q})}},{key:"seekToProgramTime",value:function(p,q){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,D=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2;return wm({programTime:p,
playlist:this.masterPlaylistController_.media(),retryCount:D,pauseAfterSeek:t,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:q})}}]);return k}(la.getComponent("Component")),Ag={name:"videojs-http-streaming",VERSION:"1.13.2",canHandleSource:function(d){var k=la.mergeOptions(la.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return Ag.canPlayType(d.type,k)},handleSource:function(d,k){var p=la.mergeOptions(la.options,2<arguments.length&&void 0!==arguments[2]?arguments[2]:
{});k.hls=new Uj(d,k,p);k.hls.xhr=dj();k.hls.src(d.src,d.type);return k.hls},canPlayType:function(d){var k=la.mergeOptions(la.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,p=Rj(d);return!p||Tb.supportsTypeNatively(p)&&!k?"":"maybe"}};if("undefined"===typeof la.MediaSource||"undefined"===typeof la.URL)la.MediaSource=Od,la.URL=Fj;Od.supportsNativeMediaSources()&&la.getTech("Html5").registerSourceHandler(Ag,0);la.HlsHandler=Uj;la.HlsSourceHandler=Ag;la.Hls=Tb;
la.use||la.registerComponent("Hls",Tb);la.options.hls=la.options.hls||{};la.registerPlugin?la.registerPlugin("reloadSourceOnError",Qj):la.plugin("reloadSourceOnError",Qj);return la});
!function(r,C){"object"==typeof exports&&"undefined"!=typeof module?module.exports=C(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],C):(r=r||self).videojsSeekButtons=C(r.videojs)}(this,function(r){function C(w,A){return(C=Object.setPrototypeOf||function(z,E){return z.__proto__=E,z})(w,A)}var W=(r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r).getComponent("Button"),y={forwardIndex:1,backIndex:1},J=r.registerPlugin||r.plugin,S=function(w){var A=this;
this.ready(function(){var z=r.mergeOptions(y,w);A.addClass("vjs-seek-buttons");z.forward&&0<z.forward&&(A.controlBar.seekForward=A.controlBar.addChild("seekButton",{direction:"forward",seconds:z.forward},z.forwardIndex));z.back&&0<z.back&&(A.controlBar.seekBack=A.controlBar.addChild("seekButton",{direction:"back",seconds:z.back},z.backIndex));!0})};S.VERSION="1.6.0";W=function(w){function A(E,H){var U;return"forward"===(U=w.call(this,E,H)||this).options_.direction?U.controlText(U.localize("Seek forward {{seconds}} seconds").replace("{{seconds}}",
U.options_.seconds)):"back"===U.options_.direction&&U.controlText(U.localize("Seek back {{seconds}} seconds").replace("{{seconds}}",U.options_.seconds)),U}A.prototype=Object.create(w.prototype);A.prototype.constructor=A;C(A,w);var z=A.prototype;return z.buildCSSClass=function(){return"vjs-seek-button skip-"+this.options_.direction+" skip-"+this.options_.seconds+" "+w.prototype.buildCSSClass.call(this)},z.handleClick=function(){var E=this.player_.currentTime();"forward"===this.options_.direction?this.player_.currentTime(E+
this.options_.seconds):"back"===this.options_.direction&&this.player_.currentTime(E-this.options_.seconds)},A}(W);return r.registerComponent("SeekButton",W),J("seekButtons",S),S});
!function(r,C){"undefined"!=typeof window&&window.videojs?C(window.videojs):"function"==typeof define&&define.amd?define("videojs-hotkeys",["video.js"],function(W){return C(W.default||W)}):"undefined"!=typeof module&&module.exports&&(module.exports=C(require("video.js")))}(0,function(r){"undefined"!=typeof window&&(window.videojs_hotkeys={version:"0.2.27"});(r.registerPlugin||r.plugin)("hotkeys",function(C){function W(ea){null!=ea&&"function"==typeof ea.then&&ea.then(null,function(Ha){})}var y=this,
J=y.el(),S=document,w=(C=(r.mergeOptions||r.util.mergeOptions)({volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableHoverScroll:!1,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,captureDocumentHotkeys:!1,documentHotkeysFocusElementFilter:function(){return!1},enableModifiersForNumbers:!0,enableInactiveFocus:!0,skipInitialFocus:!1,playPauseKey:function(ea){return 32===ea.which||179===ea.which},rewindKey:function(ea){return 37===ea.which||177===ea.which},
forwardKey:function(ea){return 39===ea.which||176===ea.which},volumeUpKey:function(ea){return 38===ea.which},volumeDownKey:function(ea){return 40===ea.which},muteKey:function(ea){return 77===ea.which},fullscreenKey:function(ea){return 70===ea.which},customKeys:{}},C||{})).volumeStep,A=C.seekStep,z=C.enableMute,E=C.enableVolumeScroll,H=C.enableHoverScroll,U=C.enableFullscreen,T=C.enableNumbers,L=C.enableJogStyle,sa=C.alwaysCaptureHotkeys,X=C.captureDocumentHotkeys,ra=C.documentHotkeysFocusElementFilter,
ia=C.enableModifiersForNumbers,Ca=C.enableInactiveFocus,Ka=C.skipInitialFocus,F=r.VERSION;J.hasAttribute("tabIndex")||J.setAttribute("tabIndex","-1");J.style.outline="none";!sa&&y.autoplay()||Ka||y.one("play",function(){J.focus()});Ca&&y.on("userinactive",function(){var ea=function(){clearTimeout(Ha)},Ha=setTimeout(function(){y.off("useractive",ea);var Ta=S.activeElement,za=J.querySelector(".vjs-control-bar");Ta&&Ta.parentElement==za&&J.focus()},10);y.one("useractive",ea)});y.on("play",function(){var ea=
J.querySelector(".iframeblocker");ea&&""===ea.style.display&&(ea.style.display="block",ea.style.bottom="39px")});var ha=function(ea){var Ha,Ta=ea.which,za=ea.preventDefault.bind(ea),na=y.duration();if(y.controls()){var Oa=S.activeElement;if(sa||X&&ra(Oa)||Oa==J||Oa==J.querySelector(".vjs-tech")||Oa==J.querySelector(".vjs-control-bar")||Oa==J.querySelector(".iframeblocker"))switch(C.playPauseKey(ea,y)?1:C.rewindKey(ea,y)?2:C.forwardKey(ea,y)?3:C.volumeUpKey(ea,y)?4:C.volumeDownKey(ea,y)?5:C.muteKey(ea,
y)?6:C.fullscreenKey(ea,y)?7:void 0){case 1:za();(sa||X)&&ea.stopPropagation();y.paused()?W(y.play()):y.pause();break;case 2:var gb=!y.paused();za();gb&&y.pause();0>=(Ha=y.currentTime()-("function"==typeof A?A(ea):A))&&(Ha=0);y.currentTime(Ha);gb&&W(y.play());break;case 3:gb=!y.paused();za();gb&&y.pause();(Ha=y.currentTime()+("function"==typeof A?A(ea):A))>=na&&(Ha=gb?na-.001:na);y.currentTime(Ha);gb&&W(y.play());break;case 5:za();L?(Ha=y.currentTime()-1,1>=y.currentTime()&&(Ha=0),y.currentTime(Ha)):
y.volume(y.volume()-w);break;case 4:za();L?((Ha=y.currentTime()+1)>=na&&(Ha=na),y.currentTime(Ha)):y.volume(y.volume()+w);break;case 6:z&&y.muted(!y.muted());break;case 7:U&&(y.isFullscreen()?y.exitFullscreen():y.requestFullscreen());break;default:for(gb in(47<Ta&&59>Ta||95<Ta&&106>Ta)&&(ia||!(ea.metaKey||ea.ctrlKey||ea.altKey))&&T&&(Ha=48,95<Ta&&(Ha=96),Ha=Ta-Ha,za(),y.currentTime(y.duration()*Ha*.1)),C.customKeys)(Ha=C.customKeys[gb])&&Ha.key&&Ha.handler&&Ha.key(ea)&&(za(),Ha.handler(y,C,ea))}}},
pa=!1;Ca=J.querySelector(".vjs-volume-menu-button")||J.querySelector(".vjs-volume-panel");null!=Ca&&(Ca.onmouseover=function(){pa=!0},Ca.onmouseout=function(){pa=!1});Ca=function(ea){var Ha=H?0:S.activeElement;y.controls()&&(sa||Ha==J||Ha==J.querySelector(".vjs-tech")||Ha==J.querySelector(".iframeblocker")||Ha==J.querySelector(".vjs-control-bar")||pa)&&E&&(ea=window.event||ea,Ha=Math.max(-1,Math.min(1,ea.wheelDelta||-ea.detail)),ea.preventDefault(),1==Ha?y.volume(y.volume()+w):-1==Ha&&y.volume(y.volume()-
w))};return y.on("keydown",ha),y.on("dblclick",function(ea){null!=F&&"7.1.0">=F&&y.controls()&&(ea=ea.relatedTarget||ea.toElement||S.activeElement,ea!=J&&ea!=J.querySelector(".vjs-tech")&&ea!=J.querySelector(".iframeblocker")||U&&(y.isFullscreen()?y.exitFullscreen():y.requestFullscreen()))}),y.on("mousewheel",Ca),y.on("DOMMouseScroll",Ca),X&&document.addEventListener("keydown",function(ea){ha(ea)}),this})});
!function u(r,C,W){function J(A,z){if(!C[A]){if(!r[A]){var E="function"==typeof require&&require;if(!z&&E)return E(A,!0);if(S)return S(A,!0);z=Error("Cannot find module '"+A+"'");throw z.code="MODULE_NOT_FOUND",z;}z=C[A]={exports:{}};r[A][0].call(z.exports,function(H){return J(r[A][1][H]||H)},z,z.exports,u,r,C,W)}return C[A].exports}for(var S="function"==typeof require&&require,w=0;w<W.length;w++)J(W[w]);return J}({1:[function(r,C,W){!function(){var y=!1,J=/xyz/.test(function(){xyz})?/\b_super\b/:
/.*/;this.Class=function(){};Class.extend=function(S){function w(){!y&&this.init&&this.init.apply(this,arguments)}var A=this.prototype;y=!0;var z=new this,E;for(E in y=!1,S)z[E]="function"==typeof S[E]&&"function"==typeof A[E]&&J.test(S[E])?function(H,U){return function(){var T=this._super;this._super=A[H];var L=U.apply(this,arguments);return this._super=T,L}}(E,S[E]):S[E];return((w.prototype=z).constructor=w).extend=arguments.callee,w};C.exports=Class}()},{}],2:[function(r,C,W){(function(y){!function(){function J(){}
function S(x,G,Q){if(void 0===G)return x;switch(null==Q?3:Q){case 1:return function(ba){return x.call(G,ba)};case 3:return function(ba,ja,ma){return x.call(G,ba,ja,ma)};case 4:return function(ba,ja,ma,Ia){return x.call(G,ba,ja,ma,Ia)}}return function(){return x.apply(G,arguments)}}function w(x,G,Q){return M.iteratee!==Gc?M.iteratee(x,G):null==x?M.identity:M.isFunction(x)?S(x,G,Q):M.isObject(x)&&!M.isArray(x)?M.matcher(x):M.property(x)}function A(x,G){return G=null==G?x.length-1:+G,function(){for(var Q=
Math.max(arguments.length-G,0),ba=Array(Q),ja=0;ja<Q;ja++)ba[ja]=arguments[ja+G];switch(G){case 0:return x.call(this,ba);case 1:return x.call(this,arguments[0],ba);case 2:return x.call(this,arguments[0],arguments[1],ba)}Q=Array(G+1);for(ja=0;ja<G;ja++)Q[ja]=arguments[ja];return Q[G]=ba,x.apply(this,Q)}}function z(x){if(!M.isObject(x))return{};if(yc)return yc(x);J.prototype=x;x=new J;return J.prototype=null,x}function E(x){return function(G){return null==G?void 0:G[x]}}function H(x,G){return null!=
x&&Fb.call(x,G)}function U(x,G){for(var Q=G.length,ba=0;ba<Q;ba++){if(null==x)return;x=x[G[ba]]}return Q?x:void 0}function T(x){x=Ab(x);return"number"==typeof x&&0<=x&&x<=Hc}function L(x){return function(G,Q,ba,ja){var ma=3<=arguments.length,Ia=S(Q,ja,4),La=ba,Za=!T(G)&&M.keys(G),bb=(Za||G).length,lb=0<x?0:bb-1;for(ma||(La=G[Za?Za[lb]:lb],lb+=x);0<=lb&&lb<bb;lb+=x)ma=Za?Za[lb]:lb,La=Ia(La,G[ma],ma,G);return La}}function sa(x,G){return function(Q,ba,ja){var ma=G?[[],[]]:{};return ba=w(ba,ja),M.each(Q,
function(Ia,La){La=ba(Ia,La,Q);x(ma,Ia,La)}),ma}}function X(x){return function(G,Q,ba){Q=w(Q,ba);ba=Ab(G);for(var ja=0<x?0:ba-1;0<=ja&&ja<ba;ja+=x)if(Q(G[ja],ja,G))return ja;return-1}}function ra(x,G,Q){return function(ba,ja,ma){var Ia=0,La=Ab(ba);if("number"==typeof ma)0<x?Ia=0<=ma?ma:Math.max(ma+La,Ia):La=0<=ma?Math.min(ma+1,La):ma+La+1;else if(Q&&ma&&La)return ba[ma=Q(ba,ja)]===ja?ma:-1;if(ja!=ja)return 0<=(ma=G(fb.call(ba,Ia,La),M.isNaN))?ma+Ia:-1;for(ma=0<x?Ia:La-1;0<=ma&&ma<La;ma+=x)if(ba[ma]===
ja)return ma;return-1}}function ia(x,G,Q,ba,ja){if(!(ba instanceof G))return x.apply(Q,ja);G=z(x.prototype);x=x.apply(G,ja);return M.isObject(x)?x:G}function Ca(x,G){var Q=R.length,ba=x.constructor;ba=M.isFunction(ba)&&ba.prototype||na;var ja="constructor";for(H(x,ja)&&!M.contains(G,ja)&&G.push(ja);Q--;)(ja=R[Q])in x&&x[ja]!==ba[ja]&&!M.contains(G,ja)&&G.push(ja)}function Ka(x,G){return function(Q){var ba=arguments.length;if(G&&(Q=Object(Q)),2>ba||null==Q)return Q;for(var ja=1;ja<ba;ja++)for(var ma=
arguments[ja],Ia=x(ma),La=Ia.length,Za=0;Za<La;Za++){var bb=Ia[Za];G&&void 0!==Q[bb]||(Q[bb]=ma[bb])}return Q}}function F(x,G,Q){return G in Q}function ha(x){function G(ma){return x[ma]}var Q="(?:"+M.keys(x).join("|")+")",ba=RegExp(Q),ja=RegExp(Q,"g");return function(ma){return ma=null==ma?"":""+ma,ba.test(ma)?ma.replace(ja,G):ma}}function pa(x){return"\\"+cb[x]}function ea(x,G){return x._chain?M(G).chain():G}var Ha="object"==typeof self&&self.self===self&&self||"object"==typeof y&&y.global===y&&
y||this||{},Ta=Ha._,za=Array.prototype,na=Object.prototype,Oa="undefined"!=typeof Symbol?Symbol.prototype:null,gb=za.push,fb=za.slice,Gb=na.toString,Fb=na.hasOwnProperty,$b=Array.isArray,Ub=Object.keys,yc=Object.create,M=function(x){return x instanceof M?x:this instanceof M?void(this._wrapped=x):new M(x)};void 0===W||W.nodeType?Ha._=M:(void 0!==C&&!C.nodeType&&C.exports&&(W=C.exports=M),W._=M);M.VERSION="1.9.1";var Gc;M.iteratee=Gc=function(x,G){return w(x,G,1/0)};var Hc=Math.pow(2,53)-1,Ab=E("length");
M.each=M.forEach=function(x,G,Q){var ba;if(G=S(G,Q),T(x))for(Q=0,ba=x.length;Q<ba;Q++)G(x[Q],Q,x);else{var ja=M.keys(x);Q=0;for(ba=ja.length;Q<ba;Q++)G(x[ja[Q]],ja[Q],x)}return x};M.map=M.collect=function(x,G,Q){G=w(G,Q);Q=!T(x)&&M.keys(x);for(var ba=(Q||x).length,ja=Array(ba),ma=0;ma<ba;ma++){var Ia=Q?Q[ma]:ma;ja[ma]=G(x[Ia],Ia,x)}return ja};M.reduce=M.foldl=M.inject=L(1);M.reduceRight=M.foldr=L(-1);M.find=M.detect=function(x,G,Q){G=(T(x)?M.findIndex:M.findKey)(x,G,Q);if(void 0!==G&&-1!==G)return x[G]};
M.filter=M.select=function(x,G,Q){var ba=[];return G=w(G,Q),M.each(x,function(ja,ma,Ia){G(ja,ma,Ia)&&ba.push(ja)}),ba};M.reject=function(x,G,Q){return M.filter(x,M.negate(w(G)),Q)};M.every=M.all=function(x,G,Q){G=w(G,Q);Q=!T(x)&&M.keys(x);for(var ba=(Q||x).length,ja=0;ja<ba;ja++){var ma=Q?Q[ja]:ja;if(!G(x[ma],ma,x))return!1}return!0};M.some=M.any=function(x,G,Q){G=w(G,Q);Q=!T(x)&&M.keys(x);for(var ba=(Q||x).length,ja=0;ja<ba;ja++){var ma=Q?Q[ja]:ja;if(G(x[ma],ma,x))return!0}return!1};M.contains=M.includes=
M.include=function(x,G,Q,ba){return T(x)||(x=M.values(x)),"number"==typeof Q&&!ba||(Q=0),0<=M.indexOf(x,G,Q)};M.invoke=A(function(x,G,Q){var ba,ja;return M.isFunction(G)?ja=G:M.isArray(G)&&(ba=G.slice(0,-1),G=G[G.length-1]),M.map(x,function(ma){var Ia=ja;if(!Ia){if(ba&&ba.length&&(ma=U(ma,ba)),null==ma)return;Ia=ma[G]}return null==Ia?Ia:Ia.apply(ma,Q)})});M.pluck=function(x,G){return M.map(x,M.property(G))};M.where=function(x,G){return M.filter(x,M.matcher(G))};M.findWhere=function(x,G){return M.find(x,
M.matcher(G))};M.max=function(x,G,Q){var ba,ja,ma=-1/0,Ia=-1/0;if(null==G||"number"==typeof G&&"object"!=typeof x[0]&&null!=x){Q=0;for(var La=(x=T(x)?x:M.values(x)).length;Q<La;Q++)null!=(ba=x[Q])&&ma<ba&&(ma=ba)}else G=w(G,Q),M.each(x,function(Za,bb,lb){ja=G(Za,bb,lb);(Ia<ja||ja===-1/0&&ma===-1/0)&&(ma=Za,Ia=ja)});return ma};M.min=function(x,G,Q){var ba,ja,ma=1/0,Ia=1/0;if(null==G||"number"==typeof G&&"object"!=typeof x[0]&&null!=x){Q=0;for(var La=(x=T(x)?x:M.values(x)).length;Q<La;Q++)null!=(ba=
x[Q])&&ba<ma&&(ma=ba)}else G=w(G,Q),M.each(x,function(Za,bb,lb){((ja=G(Za,bb,lb))<Ia||ja===1/0&&ma===1/0)&&(ma=Za,Ia=ja)});return ma};M.shuffle=function(x){return M.sample(x,1/0)};M.sample=function(x,G,Q){if(null==G||Q)return T(x)||(x=M.values(x)),x[M.random(x.length-1)];x=T(x)?M.clone(x):M.values(x);Q=Ab(x);G=Math.max(Math.min(G,Q),0);--Q;for(var ba=0;ba<G;ba++){var ja=M.random(ba,Q),ma=x[ba];x[ba]=x[ja];x[ja]=ma}return x.slice(0,G)};M.sortBy=function(x,G,Q){var ba=0;return G=w(G,Q),M.pluck(M.map(x,
function(ja,ma,Ia){return{value:ja,index:ba++,criteria:G(ja,ma,Ia)}}).sort(function(ja,ma){var Ia=ja.criteria,La=ma.criteria;if(Ia!==La){if(La<Ia||void 0===Ia)return 1;if(Ia<La||void 0===La)return-1}return ja.index-ma.index}),"value")};M.groupBy=sa(function(x,G,Q){H(x,Q)?x[Q].push(G):x[Q]=[G]});M.indexBy=sa(function(x,G,Q){x[Q]=G});M.countBy=sa(function(x,G,Q){H(x,Q)?x[Q]++:x[Q]=1});var tb=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;M.toArray=function(x){return x?M.isArray(x)?
fb.call(x):M.isString(x)?x.match(tb):T(x)?M.map(x,M.identity):M.values(x):[]};M.size=function(x){return null==x?0:T(x)?x.length:M.keys(x).length};M.partition=sa(function(x,G,Q){x[Q?0:1].push(G)},!0);M.first=M.head=M.take=function(x,G,Q){return null==x||1>x.length?null==G?void 0:[]:null==G||Q?x[0]:M.initial(x,x.length-G)};M.initial=function(x,G,Q){return fb.call(x,0,Math.max(0,x.length-(null==G||Q?1:G)))};M.last=function(x,G,Q){return null==x||1>x.length?null==G?void 0:[]:null==G||Q?x[x.length-1]:
M.rest(x,Math.max(0,x.length-G))};M.rest=M.tail=M.drop=function(x,G,Q){return fb.call(x,null==G||Q?1:G)};M.compact=function(x){return M.filter(x,Boolean)};var B=function(x,G,Q,ba){for(var ja=(ba=ba||[]).length,ma=0,Ia=Ab(x);ma<Ia;ma++){var La=x[ma];if(T(La)&&(M.isArray(La)||M.isArguments(La)))if(G)for(var Za=0,bb=La.length;Za<bb;)ba[ja++]=La[Za++];else B(La,G,Q,ba),ja=ba.length;else Q||(ba[ja++]=La)}return ba};M.flatten=function(x,G){return B(x,G,!1)};M.without=A(function(x,G){return M.difference(x,
G)});M.uniq=M.unique=function(x,G,Q,ba){M.isBoolean(G)||(ba=Q,Q=G,G=!1);null!=Q&&(Q=w(Q,ba));ba=[];for(var ja=[],ma=0,Ia=Ab(x);ma<Ia;ma++){var La=x[ma],Za=Q?Q(La,ma,x):La;G&&!Q?(ma&&ja===Za||ba.push(La),ja=Za):Q?M.contains(ja,Za)||(ja.push(Za),ba.push(La)):M.contains(ba,La)||ba.push(La)}return ba};M.union=A(function(x){return M.uniq(B(x,!0,!0))});M.intersection=function(x){for(var G=[],Q=arguments.length,ba=0,ja=Ab(x);ba<ja;ba++){var ma=x[ba];if(!M.contains(G,ma)){var Ia;for(Ia=1;Ia<Q&&M.contains(arguments[Ia],
ma);Ia++);Ia===Q&&G.push(ma)}}return G};M.difference=A(function(x,G){return G=B(G,!0,!0),M.filter(x,function(Q){return!M.contains(G,Q)})});M.unzip=function(x){for(var G=x&&M.max(x,Ab).length||0,Q=Array(G),ba=0;ba<G;ba++)Q[ba]=M.pluck(x,ba);return Q};M.zip=A(M.unzip);M.object=function(x,G){for(var Q={},ba=0,ja=Ab(x);ba<ja;ba++)G?Q[x[ba]]=G[ba]:Q[x[ba][0]]=x[ba][1];return Q};M.findIndex=X(1);M.findLastIndex=X(-1);M.sortedIndex=function(x,G,Q,ba){G=(Q=w(Q,ba,1))(G);ba=0;for(var ja=Ab(x);ba<ja;){var ma=
Math.floor((ba+ja)/2);Q(x[ma])<G?ba=ma+1:ja=ma}return ba};M.indexOf=ra(1,M.findIndex,M.sortedIndex);M.lastIndexOf=ra(-1,M.findLastIndex);M.range=function(x,G,Q){null==G&&(G=x||0,x=0);Q=Q||(G<x?-1:1);G=Math.max(Math.ceil((G-x)/Q),0);for(var ba=Array(G),ja=0;ja<G;ja++,x+=Q)ba[ja]=x;return ba};M.chunk=function(x,G){if(null==G||1>G)return[];for(var Q=[],ba=0,ja=x.length;ba<ja;)Q.push(fb.call(x,ba,ba+=G));return Q};M.bind=A(function(x,G,Q){if(!M.isFunction(x))throw new TypeError("Bind must be called on a function");
var ba=A(function(ja){return ia(x,ba,G,this,Q.concat(ja))});return ba});M.partial=A(function(x,G){var Q=M.partial.placeholder,ba=function(){for(var ja=0,ma=G.length,Ia=Array(ma),La=0;La<ma;La++)Ia[La]=G[La]===Q?arguments[ja++]:G[La];for(;ja<arguments.length;)Ia.push(arguments[ja++]);return ia(x,ba,this,this,Ia)};return ba});(M.partial.placeholder=M).bindAll=A(function(x,G){var Q=(G=B(G,!1,!1)).length;if(1>Q)throw Error("bindAll must be passed function names");for(;Q--;){var ba=G[Q];x[ba]=M.bind(x[ba],
x)}});M.memoize=function(x,G){var Q=function(ba){var ja=Q.cache,ma=""+(G?G.apply(this,arguments):ba);return H(ja,ma)||(ja[ma]=x.apply(this,arguments)),ja[ma]};return Q.cache={},Q};M.delay=A(function(x,G,Q){return setTimeout(function(){return x.apply(null,Q)},G)});M.defer=M.partial(M.delay,M,1);M.throttle=function(x,G,Q){function ba(){bb=!1===Q.leading?0:M.now();ma=null;Za=x.apply(Ia,La);ma||(Ia=La=null)}function ja(){var lb=M.now();bb||!1!==Q.leading||(bb=lb);var ac=G-(lb-bb);return Ia=this,La=arguments,
0>=ac||G<ac?(ma&&(clearTimeout(ma),ma=null),bb=lb,Za=x.apply(Ia,La),ma||(Ia=La=null)):ma||!1===Q.trailing||(ma=setTimeout(ba,ac)),Za}var ma,Ia,La,Za,bb=0;Q=Q||{};return ja.cancel=function(){clearTimeout(ma);bb=0;ma=Ia=La=null},ja};M.debounce=function(x,G,Q){function ba(La,Za){ja=null;Za&&(ma=x.apply(La,Za))}var ja,ma,Ia=A(function(La){if(ja&&clearTimeout(ja),Q){var Za=!ja;ja=setTimeout(ba,G);Za&&(ma=x.apply(this,La))}else ja=M.delay(ba,G,this,La);return ma});return Ia.cancel=function(){clearTimeout(ja);
ja=null},Ia};M.wrap=function(x,G){return M.partial(G,x)};M.negate=function(x){return function(){return!x.apply(this,arguments)}};M.compose=function(){var x=arguments,G=x.length-1;return function(){for(var Q=G,ba=x[G].apply(this,arguments);Q--;)ba=x[Q].call(this,ba);return ba}};M.after=function(x,G){return function(){if(1>--x)return G.apply(this,arguments)}};M.before=function(x,G){var Q;return function(){return 0<--x&&(Q=G.apply(this,arguments)),1>=x&&(G=null),Q}};M.once=M.partial(M.before,2);M.restArguments=
A;var K=!{toString:null}.propertyIsEnumerable("toString"),R="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");M.keys=function(x){if(!M.isObject(x))return[];if(Ub)return Ub(x);var G=[],Q;for(Q in x)H(x,Q)&&G.push(Q);return K&&Ca(x,G),G};M.allKeys=function(x){if(!M.isObject(x))return[];var G=[],Q;for(Q in x)G.push(Q);return K&&Ca(x,G),G};M.values=function(x){for(var G=M.keys(x),Q=G.length,ba=Array(Q),ja=0;ja<Q;ja++)ba[ja]=x[G[ja]];return ba};M.mapObject=
function(x,G,Q){G=w(G,Q);Q=M.keys(x);for(var ba=Q.length,ja={},ma=0;ma<ba;ma++){var Ia=Q[ma];ja[Ia]=G(x[Ia],Ia,x)}return ja};M.pairs=function(x){for(var G=M.keys(x),Q=G.length,ba=Array(Q),ja=0;ja<Q;ja++)ba[ja]=[G[ja],x[G[ja]]];return ba};M.invert=function(x){for(var G={},Q=M.keys(x),ba=0,ja=Q.length;ba<ja;ba++)G[x[Q[ba]]]=Q[ba];return G};M.functions=M.methods=function(x){var G=[],Q;for(Q in x)M.isFunction(x[Q])&&G.push(Q);return G.sort()};M.extend=Ka(M.allKeys);M.extendOwn=M.assign=Ka(M.keys);M.findKey=
function(x,G,Q){G=w(G,Q);var ba;Q=M.keys(x);for(var ja=0,ma=Q.length;ja<ma;ja++)if(G(x[ba=Q[ja]],ba,x))return ba};M.pick=A(function(x,G){var Q={},ba=G[0];if(null==x)return Q;M.isFunction(ba)?(1<G.length&&(ba=S(ba,G[1])),G=M.allKeys(x)):(ba=F,G=B(G,!1,!1),x=Object(x));for(var ja=0,ma=G.length;ja<ma;ja++){var Ia=G[ja],La=x[Ia];ba(La,Ia,x)&&(Q[Ia]=La)}return Q});M.omit=A(function(x,G){var Q,ba=G[0];return M.isFunction(ba)?(ba=M.negate(ba),1<G.length&&(Q=G[1])):(G=M.map(B(G,!1,!1),String),ba=function(ja,
ma){return!M.contains(G,ma)}),M.pick(x,ba,Q)});M.defaults=Ka(M.allKeys,!0);M.create=function(x,G){x=z(x);return G&&M.extendOwn(x,G),x};M.clone=function(x){return M.isObject(x)?M.isArray(x)?x.slice():M.extend({},x):x};M.tap=function(x,G){return G(x),x};M.isMatch=function(x,G){var Q=M.keys(G),ba=Q.length;if(null==x)return!ba;x=Object(x);for(var ja=0;ja<ba;ja++){var ma=Q[ja];if(G[ma]!==x[ma]||!(ma in x))return!1}return!0};var fa=function(x,G,Q,ba){if(x===G)return 0!==x||1/x==1/G;if(null==x||null==G)return!1;
if(x!=x)return G!=G;var ja=typeof x;return("function"==ja||"object"==ja||"object"==typeof G)&&ka(x,G,Q,ba)};var ka=function(x,G,Q,ba){x instanceof M&&(x=x._wrapped);G instanceof M&&(G=G._wrapped);var ja=Gb.call(x);if(ja!==Gb.call(G))return!1;switch(ja){case "[object RegExp]":case "[object String]":return""+x==""+G;case "[object Number]":return+x!=+x?+G!=+G:0==+x?1/+x==1/G:+x==+G;case "[object Date]":case "[object Boolean]":return+x==+G;case "[object Symbol]":return Oa.valueOf.call(x)===Oa.valueOf.call(G)}ja=
"[object Array]"===ja;if(!ja){if("object"!=typeof x||"object"!=typeof G)return!1;var ma=x.constructor,Ia=G.constructor;if(ma!==Ia&&!(M.isFunction(ma)&&ma instanceof ma&&M.isFunction(Ia)&&Ia instanceof Ia)&&"constructor"in x&&"constructor"in G)return!1}ba=ba||[];for(ma=(Q=Q||[]).length;ma--;)if(Q[ma]===x)return ba[ma]===G;if(Q.push(x),ba.push(G),ja){if((ma=x.length)!==G.length)return!1;for(;ma--;)if(!fa(x[ma],G[ma],Q,ba))return!1}else{var La;ja=M.keys(x);if(ma=ja.length,M.keys(G).length!==ma)return!1;
for(;ma--;)if(La=ja[ma],!H(G,La)||!fa(x[La],G[La],Q,ba))return!1}return Q.pop(),ba.pop(),!0};M.isEqual=function(x,G){return fa(x,G)};M.isEmpty=function(x){return null==x||(T(x)&&(M.isArray(x)||M.isString(x)||M.isArguments(x))?0===x.length:0===M.keys(x).length)};M.isElement=function(x){return!(!x||1!==x.nodeType)};M.isArray=$b||function(x){return"[object Array]"===Gb.call(x)};M.isObject=function(x){var G=typeof x;return"function"==G||"object"==G&&!!x};M.each("Arguments Function String Number Date RegExp Error Symbol Map WeakMap Set WeakSet".split(" "),
function(x){M["is"+x]=function(G){return Gb.call(G)==="[object "+x+"]"}});M.isArguments(arguments)||(M.isArguments=function(x){return H(x,"callee")});$b=Ha.document&&Ha.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof $b&&(M.isFunction=function(x){return"function"==typeof x||!1});M.isFinite=function(x){return!M.isSymbol(x)&&isFinite(x)&&!isNaN(parseFloat(x))};M.isNaN=function(x){return M.isNumber(x)&&isNaN(x)};M.isBoolean=function(x){return!0===x||!1===x||
"[object Boolean]"===Gb.call(x)};M.isNull=function(x){return null===x};M.isUndefined=function(x){return void 0===x};M.has=function(x,G){if(!M.isArray(G))return H(x,G);for(var Q=G.length,ba=0;ba<Q;ba++){var ja=G[ba];if(null==x||!Fb.call(x,ja))return!1;x=x[ja]}return!!Q};M.noConflict=function(){return Ha._=Ta,this};M.identity=function(x){return x};M.constant=function(x){return function(){return x}};M.noop=function(){};M.property=function(x){return M.isArray(x)?function(G){return U(G,x)}:E(x)};M.propertyOf=
function(x){return null==x?function(){}:function(G){return M.isArray(G)?U(x,G):x[G]}};M.matcher=M.matches=function(x){return x=M.extendOwn({},x),function(G){return M.isMatch(G,x)}};M.times=function(x,G,Q){var ba=Array(Math.max(0,x));G=S(G,Q,1);for(Q=0;Q<x;Q++)ba[Q]=G(Q);return ba};M.random=function(x,G){return null==G&&(G=x,x=0),x+Math.floor(Math.random()*(G-x+1))};M.now=Date.now||function(){return(new Date).getTime()};$b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};
var qa=M.invert($b);M.escape=ha($b);M.unescape=ha(qa);M.result=function(x,G,Q){M.isArray(G)||(G=[G]);var ba=G.length;if(!ba)return M.isFunction(Q)?Q.call(x):Q;for(var ja=0;ja<ba;ja++){var ma=null==x?void 0:x[G[ja]];void 0===ma&&(ma=Q,ja=ba);x=M.isFunction(ma)?ma.call(x):ma}return x};var xa=0;M.uniqueId=function(x){var G=++xa+"";return x?x+G:G};M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Ra=/(.)^/,cb={"'":"'","\\":"\\","\r":"r","\n":"n",
"\u2028":"u2028","\u2029":"u2029"},Xa=/\\|'|\r|\n|\u2028|\u2029/g;M.template=function(x,G,Q){function ba(La){return Ia.call(this,La,M)}!G&&Q&&(G=Q);G=M.defaults({},G,M.templateSettings);Q=RegExp([(G.escape||Ra).source,(G.interpolate||Ra).source,(G.evaluate||Ra).source].join("|")+"|$","g");var ja=0,ma="__p+='";x.replace(Q,function(La,Za,bb,lb,ac){return ma+=x.slice(ja,ac).replace(Xa,pa),ja=ac+La.length,Za?ma+="'+\n((__t=("+Za+"))==null?'':_.escape(__t))+\n'":bb?ma+="'+\n((__t=("+bb+"))==null?'':__t)+\n'":
lb&&(ma+="';\n"+lb+"\n__p+='"),La});ma+="';\n";G.variable||(ma="with(obj||{}){\n"+ma+"}\n");ma="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+ma+"return __p;\n";try{var Ia=new Function(G.variable||"obj","_",ma)}catch(La){throw La.source=ma,La;}return ba.source="function("+(G.variable||"obj")+"){\n"+ma+"}",ba};M.chain=function(x){x=M(x);return x._chain=!0,x};M.mixin=function(x){return M.each(M.functions(x),function(G){var Q=M[G]=x[G];M.prototype[G]=function(){var ba=
[this._wrapped];return gb.apply(ba,arguments),ea(this,Q.apply(M,ba))}}),M};M.mixin(M);M.each("pop push reverse shift sort splice unshift".split(" "),function(x){var G=za[x];M.prototype[x]=function(){var Q=this._wrapped;return G.apply(Q,arguments),"shift"!==x&&"splice"!==x||0!==Q.length||delete Q[0],ea(this,Q)}});M.each(["concat","join","slice"],function(x){var G=za[x];M.prototype[x]=function(){return ea(this,G.apply(this._wrapped,arguments))}});M.prototype.value=function(){return this._wrapped};M.prototype.valueOf=
M.prototype.toJSON=M.prototype.value;M.prototype.toString=function(){return String(this._wrapped)};"function"==typeof define&&define.amd&&define("underscore",[],function(){return M})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(r,C,W){var y=r("underscore"),J=r("../events");C.exports=function(S){var w=S.getComponent("MenuItem");return S.extend(w,{constructor:function(A,z){var E=z.source;if(!y.isObject(E))throw Error('was not provided a "source" object, but rather: '+
typeof E);z=y.extend({selectable:!0,label:E.label},z);w.call(this,A,z);this.source=E},handleClick:function(A){w.prototype.handleClick.call(this,A);this.player().trigger(J.QUALITY_REQUESTED,this.source)}})}},{"../events":5,underscore:2}],4:[function(r,C,W){var y=r("underscore"),J=r("../events"),S=r("./QualityOption");C.exports=function(w){var A,z=w.getComponent("MenuButton"),E=w.getComponent("Component"),H=w.getComponent("Button"),U=w.getComponent("Menu"),T=S(w);return A=w.extend(z,{constructor:function(L,
sa){z.call(this,L,sa);this.menuButton_.off("mouseenter");this.menuButton_.off("mouseleave");L.on(J.QUALITY_REQUESTED,function(X,ra){this.setSelectedSource(ra);L.addClass("vjs-quality-changing");L.one("loadeddata",function(){L.removeClass("vjs-quality-changing")})}.bind(this));L.on(J.PLAYER_SOURCES_CHANGED,function(){this.update()}.bind(this));L.on(J.QUALITY_SELECTED,function(X,ra){this.setSelectedSource(ra)}.bind(this));L.one("ready",function(){this.selectedSrc=L.src();this.update()}.bind(this));
this.controlText("Open quality selector menu")},update:function(){var L=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=L;540<window.innerWidth?this.addChild(L):this.player_.addChild(L);this.player_.trigger("vjs-quality-menu-created");this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},setSelectedSource:function(L){var sa=L?L.src:void 0;this.selectedSrc!==
sa&&(this.selectedSrc=sa,y.each(this.items,function(X){X.selected(X.source.src===sa)}))},createDomEl:function(L,sa,X){L=document.createElement(L);if(L.innerHTML=sa,"object"==typeof X)for(sa=X.length-1;0<=sa;sa--)L.classList.add(X[sa]);return"string"==typeof X&&L.classList.add(X),L},createMenu:function(){var L=this,sa=new E("menuContainer",{el:this.createDomEl("div","",["vjs-menu","vjs-settings-menu","vjs-settings-quality-menu","vjs-hidden"])}),X=new E("menuHeading",{el:this.createDomEl("div","","vjs-settings-heading")}),
ra=new E("menuBody",{el:this.createDomEl("div","","vjs-settings-body")});X.addChild(new H("closeButton",{el:this.createDomEl("button",'<span class="vjs-icon-placeholder vjs-icon-close"></span>',["vjs-heading-button","heading-close-button"]),clickHandler:function(Ka){L.unpressButton()}}));var ia=new U(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.items=this.createItems(),this.items)for(var Ca=0;Ca<this.items.length;Ca++)ia.addItem(this.items[Ca]);return ra.addChild(ia),sa.addChild(X),
sa.addChild(ra),sa},createItems:function(){var L=this.player(),sa=L.currentSources();return!sa||2>sa.length?[]:y.map(sa,function(X){return new T(L,{source:X,selected:X.src===this.selectedSrc})}.bind(this))},buildWrapperCSSClass:function(){return"vjs-quality-selector "+z.prototype.buildWrapperCSSClass.call(this)}}),w.registerComponent("QualitySelector",A),A}},{"../events":5,"./QualityOption":3,underscore:2}],5:[function(r,C,W){C.exports={QUALITY_REQUESTED:"qualityRequested",QUALITY_SELECTED:"qualitySelected",
PLAYER_SOURCES_CHANGED:"playerSourcesChanged"}},{}],6:[function(r,C,W){var y=r("underscore"),J=r("./events"),S=r("./components/QualitySelector"),w=r("./middleware/SourceInterceptor"),A=r("./util/SafeSeek");C.exports=function(z){z=z||window.videojs;S(z);w(z);z.hook("setup",function(E){E.on(J.QUALITY_REQUESTED,function(H,U){H=E.currentSources();var T=E.currentTime(),L=E.playbackRate(),sa=E.paused();y.each(H,function(X){X.selected=!1});y.findWhere(H,{src:U.src}).selected=!0;E._qualitySelectorSafeSeek&&
E._qualitySelectorSafeSeek.onQualitySelectionChange();E.src(H);E.ready(function(){E._qualitySelectorSafeSeek&&!E._qualitySelectorSafeSeek.hasFinished()||(E._qualitySelectorSafeSeek=new A(E,T),E.playbackRate(L));sa||E.play()})})})};C.exports.EVENTS=J},{"./components/QualitySelector":4,"./events":5,"./middleware/SourceInterceptor":7,"./util/SafeSeek":9,underscore:2}],7:[function(r,C,W){var y=r("underscore"),J=r("../events");C.exports=function(S){S.use("*",function(w){return{setSource:function(A,z){var E=
w.currentSources();w._qualitySelectorSafeSeek&&w._qualitySelectorSafeSeek.onPlayerSourcesChange();y.isEqual(E,w._qualitySelectorPreviousSources)||(w.trigger(J.PLAYER_SOURCES_CHANGED,E),w._qualitySelectorPreviousSources=E);A=y.find(E,function(H){return!0===H.selected||"true"===H.selected||"selected"===H.selected})||A;w.trigger(J.QUALITY_SELECTED,A);z(null,A)}}})}},{"../events":5,underscore:2}],8:[function(r,C,W){r("./index")()},{"./index":6}],9:[function(r,C,W){r=r("class.extend");C.exports=r.extend({init:function(y,
J){this._player=y;this._seekToTime=J;this._keepThisInstanceWhenPlayerSourcesChange=this._hasFinished=!1;this._seekWhenSafe()},_seekWhenSafe:function(){3>this._player.readyState()?(this._seekFn=this._seek.bind(this),this._player.one("canplay",this._seekFn)):this._seek()},onPlayerSourcesChange:function(){this._keepThisInstanceWhenPlayerSourcesChange?this._keepThisInstanceWhenPlayerSourcesChange=!1:this.cancel()},onQualitySelectionChange:function(){this.hasFinished()||(this._keepThisInstanceWhenPlayerSourcesChange=
!0)},_seek:function(){this._player.currentTime(this._seekToTime);this._keepThisInstanceWhenPlayerSourcesChange=!1;this._hasFinished=!0},hasFinished:function(){return this._hasFinished},cancel:function(){this._player.off("canplay",this._seekFn);this._keepThisInstanceWhenPlayerSourcesChange=!1;this._hasFinished=!0}})},{"class.extend":1}]},{},[8]);
(function(){function r(C,W,y){function J(A,z){if(!W[A]){if(!C[A]){var E="function"==typeof require&&require;if(!z&&E)return E(A,!0);if(S)return S(A,!0);z=Error("Cannot find module '"+A+"'");throw z.code="MODULE_NOT_FOUND",z;}z=W[A]={exports:{}};C[A][0].call(z.exports,function(H){return J(C[A][1][H]||H)},z,z.exports,r,C,W,y)}return W[A].exports}for(var S="function"==typeof require&&require,w=0;w<y.length;w++)J(y[w]);return J}return r})()({1:[function(r,C,W){(function(){var y=!1,J=/xyz/.test(function(){xyz})?
/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(S){function w(){!y&&this.init&&this.init.apply(this,arguments)}var A=this.prototype;y=!0;var z=new this;y=!1;for(var E in S)z[E]="function"==typeof S[E]&&"function"==typeof A[E]&&J.test(S[E])?function(H,U){return function(){var T=this._super;this._super=A[H];var L=U.apply(this,arguments);this._super=T;return L}}(E,S[E]):S[E];w.prototype=z;w.prototype.constructor=w;w.extend=arguments.callee;return w};C.exports=Class})()},{}],2:[function(r,
C,W){(function(){function y(B){return function(K,R,fa,ka){R=ha(R,ka,4);var qa=!Oa(K)&&F.keys(K),xa=(qa||K).length,Ra=0<B?0:xa-1;3>arguments.length&&(fa=K[qa?qa[Ra]:Ra],Ra+=B);for(var cb=R,Xa=fa;0<=Ra&&Ra<xa;Ra+=B){var x=qa?qa[Ra]:Ra;Xa=cb(Xa,K[x],x,K)}return Xa}}function J(B){return function(K,R,fa){R=pa(R,fa);fa=na(K);for(var ka=0<B?0:fa-1;0<=ka&&ka<fa;ka+=B)if(R(K[ka],ka,K))return ka;return-1}}function S(B,K,R){return function(fa,ka,qa){var xa=0,Ra=na(fa);if("number"==typeof qa)0<B?xa=0<=qa?qa:
Math.max(qa+Ra,xa):Ra=0<=qa?Math.min(qa+1,Ra):qa+Ra+1;else if(R&&qa&&Ra)return qa=R(fa,ka),fa[qa]===ka?qa:-1;if(ka!==ka)return qa=K(T.call(fa,xa,Ra),F.isNaN),0<=qa?qa+xa:-1;for(qa=0<B?xa:Ra-1;0<=qa&&qa<Ra;qa+=B)if(fa[qa]===ka)return qa;return-1}}function w(B,K){var R=$b.length,fa=B.constructor;fa=F.isFunction(fa)&&fa.prototype||H;var ka="constructor";for(F.has(B,ka)&&!F.contains(K,ka)&&K.push(ka);R--;)ka=$b[R],ka in B&&B[ka]!==fa[ka]&&!F.contains(K,ka)&&K.push(ka)}var A=this,z=A._,E=Array.prototype,
H=Object.prototype,U=E.push,T=E.slice,L=H.toString,sa=H.hasOwnProperty,X=Array.isArray,ra=Object.keys,ia=Function.prototype.bind,Ca=Object.create,Ka=function(){},F=function(B){if(B instanceof F)return B;if(!(this instanceof F))return new F(B);this._wrapped=B};"undefined"!==typeof W?("undefined"!==typeof C&&C.exports&&(W=C.exports=F),W._=F):A._=F;F.VERSION="1.8.3";var ha=function(B,K,R){if(void 0===K)return B;switch(null==R?3:R){case 1:return function(fa){return B.call(K,fa)};case 2:return function(fa,
ka){return B.call(K,fa,ka)};case 3:return function(fa,ka,qa){return B.call(K,fa,ka,qa)};case 4:return function(fa,ka,qa,xa){return B.call(K,fa,ka,qa,xa)}}return function(){return B.apply(K,arguments)}},pa=function(B,K,R){return null==B?F.identity:F.isFunction(B)?ha(B,K,R):F.isObject(B)?F.matcher(B):F.property(B)};F.iteratee=function(B,K){return pa(B,K,Infinity)};var ea=function(B,K){return function(R){var fa=arguments.length;if(2>fa||null==R)return R;for(var ka=1;ka<fa;ka++)for(var qa=arguments[ka],
xa=B(qa),Ra=xa.length,cb=0;cb<Ra;cb++){var Xa=xa[cb];K&&void 0!==R[Xa]||(R[Xa]=qa[Xa])}return R}},Ha=function(B){if(!F.isObject(B))return{};if(Ca)return Ca(B);Ka.prototype=B;B=new Ka;Ka.prototype=null;return B},Ta=function(B){return function(K){return null==K?void 0:K[B]}},za=Math.pow(2,53)-1,na=Ta("length"),Oa=function(B){B=na(B);return"number"==typeof B&&0<=B&&B<=za};F.each=F.forEach=function(B,K,R){K=ha(K,R);var fa;if(Oa(B))for(R=0,fa=B.length;R<fa;R++)K(B[R],R,B);else{var ka=F.keys(B);R=0;for(fa=
ka.length;R<fa;R++)K(B[ka[R]],ka[R],B)}return B};F.map=F.collect=function(B,K,R){K=pa(K,R);R=!Oa(B)&&F.keys(B);for(var fa=(R||B).length,ka=Array(fa),qa=0;qa<fa;qa++){var xa=R?R[qa]:qa;ka[qa]=K(B[xa],xa,B)}return ka};F.reduce=F.foldl=F.inject=y(1);F.reduceRight=F.foldr=y(-1);F.find=F.detect=function(B,K,R){K=Oa(B)?F.findIndex(B,K,R):F.findKey(B,K,R);if(void 0!==K&&-1!==K)return B[K]};F.filter=F.select=function(B,K,R){var fa=[];K=pa(K,R);F.each(B,function(ka,qa,xa){K(ka,qa,xa)&&fa.push(ka)});return fa};
F.reject=function(B,K,R){return F.filter(B,F.negate(pa(K)),R)};F.every=F.all=function(B,K,R){K=pa(K,R);R=!Oa(B)&&F.keys(B);for(var fa=(R||B).length,ka=0;ka<fa;ka++){var qa=R?R[ka]:ka;if(!K(B[qa],qa,B))return!1}return!0};F.some=F.any=function(B,K,R){K=pa(K,R);R=!Oa(B)&&F.keys(B);for(var fa=(R||B).length,ka=0;ka<fa;ka++){var qa=R?R[ka]:ka;if(K(B[qa],qa,B))return!0}return!1};F.contains=F.includes=F.include=function(B,K,R,fa){Oa(B)||(B=F.values(B));if("number"!=typeof R||fa)R=0;return 0<=F.indexOf(B,
K,R)};F.invoke=function(B,K){var R=T.call(arguments,2),fa=F.isFunction(K);return F.map(B,function(ka){var qa=fa?K:ka[K];return null==qa?qa:qa.apply(ka,R)})};F.pluck=function(B,K){return F.map(B,F.property(K))};F.where=function(B,K){return F.filter(B,F.matcher(K))};F.findWhere=function(B,K){return F.find(B,F.matcher(K))};F.max=function(B,K,R){var fa=-Infinity,ka=-Infinity,qa;if(null==K&&null!=B){B=Oa(B)?B:F.values(B);for(var xa=0,Ra=B.length;xa<Ra;xa++)R=B[xa],R>fa&&(fa=R)}else K=pa(K,R),F.each(B,
function(cb,Xa,x){qa=K(cb,Xa,x);if(qa>ka||-Infinity===qa&&-Infinity===fa)fa=cb,ka=qa});return fa};F.min=function(B,K,R){var fa=Infinity,ka=Infinity,qa;if(null==K&&null!=B){B=Oa(B)?B:F.values(B);for(var xa=0,Ra=B.length;xa<Ra;xa++)R=B[xa],R<fa&&(fa=R)}else K=pa(K,R),F.each(B,function(cb,Xa,x){qa=K(cb,Xa,x);if(qa<ka||Infinity===qa&&Infinity===fa)fa=cb,ka=qa});return fa};F.shuffle=function(B){B=Oa(B)?B:F.values(B);for(var K=B.length,R=Array(K),fa=0,ka;fa<K;fa++)ka=F.random(0,fa),ka!==fa&&(R[fa]=R[ka]),
R[ka]=B[fa];return R};F.sample=function(B,K,R){return null==K||R?(Oa(B)||(B=F.values(B)),B[F.random(B.length-1)]):F.shuffle(B).slice(0,Math.max(0,K))};F.sortBy=function(B,K,R){K=pa(K,R);return F.pluck(F.map(B,function(fa,ka,qa){return{value:fa,index:ka,criteria:K(fa,ka,qa)}}).sort(function(fa,ka){var qa=fa.criteria,xa=ka.criteria;if(qa!==xa){if(qa>xa||void 0===qa)return 1;if(qa<xa||void 0===xa)return-1}return fa.index-ka.index}),"value")};var gb=function(B){return function(K,R,fa){var ka={};R=pa(R,
fa);F.each(K,function(qa,xa){xa=R(qa,xa,K);B(ka,qa,xa)});return ka}};F.groupBy=gb(function(B,K,R){F.has(B,R)?B[R].push(K):B[R]=[K]});F.indexBy=gb(function(B,K,R){B[R]=K});F.countBy=gb(function(B,K,R){F.has(B,R)?B[R]++:B[R]=1});F.toArray=function(B){return B?F.isArray(B)?T.call(B):Oa(B)?F.map(B,F.identity):F.values(B):[]};F.size=function(B){return null==B?0:Oa(B)?B.length:F.keys(B).length};F.partition=function(B,K,R){K=pa(K,R);var fa=[],ka=[];F.each(B,function(qa,xa,Ra){(K(qa,xa,Ra)?fa:ka).push(qa)});
return[fa,ka]};F.first=F.head=F.take=function(B,K,R){if(null!=B)return null==K||R?B[0]:F.initial(B,B.length-K)};F.initial=function(B,K,R){return T.call(B,0,Math.max(0,B.length-(null==K||R?1:K)))};F.last=function(B,K,R){if(null!=B)return null==K||R?B[B.length-1]:F.rest(B,Math.max(0,B.length-K))};F.rest=F.tail=F.drop=function(B,K,R){return T.call(B,null==K||R?1:K)};F.compact=function(B){return F.filter(B,F.identity)};var fb=function(B,K,R,fa){var ka=[],qa=0;fa=fa||0;for(var xa=na(B);fa<xa;fa++){var Ra=
B[fa];if(Oa(Ra)&&(F.isArray(Ra)||F.isArguments(Ra))){K||(Ra=fb(Ra,K,R));var cb=0,Xa=Ra.length;for(ka.length+=Xa;cb<Xa;)ka[qa++]=Ra[cb++]}else R||(ka[qa++]=Ra)}return ka};F.flatten=function(B,K){return fb(B,K,!1)};F.without=function(B){return F.difference(B,T.call(arguments,1))};F.uniq=F.unique=function(B,K,R,fa){F.isBoolean(K)||(fa=R,R=K,K=!1);null!=R&&(R=pa(R,fa));fa=[];for(var ka=[],qa=0,xa=na(B);qa<xa;qa++){var Ra=B[qa],cb=R?R(Ra,qa,B):Ra;K?(qa&&ka===cb||fa.push(Ra),ka=cb):R?F.contains(ka,cb)||
(ka.push(cb),fa.push(Ra)):F.contains(fa,Ra)||fa.push(Ra)}return fa};F.union=function(){return F.uniq(fb(arguments,!0,!0))};F.intersection=function(B){for(var K=[],R=arguments.length,fa=0,ka=na(B);fa<ka;fa++){var qa=B[fa];if(!F.contains(K,qa)){for(var xa=1;xa<R&&F.contains(arguments[xa],qa);xa++);xa===R&&K.push(qa)}}return K};F.difference=function(B){var K=fb(arguments,!0,!0,1);return F.filter(B,function(R){return!F.contains(K,R)})};F.zip=function(){return F.unzip(arguments)};F.unzip=function(B){for(var K=
B&&F.max(B,na).length||0,R=Array(K),fa=0;fa<K;fa++)R[fa]=F.pluck(B,fa);return R};F.object=function(B,K){for(var R={},fa=0,ka=na(B);fa<ka;fa++)K?R[B[fa]]=K[fa]:R[B[fa][0]]=B[fa][1];return R};F.findIndex=J(1);F.findLastIndex=J(-1);F.sortedIndex=function(B,K,R,fa){R=pa(R,fa,1);K=R(K);fa=0;for(var ka=na(B);fa<ka;){var qa=Math.floor((fa+ka)/2);R(B[qa])<K?fa=qa+1:ka=qa}return fa};F.indexOf=S(1,F.findIndex,F.sortedIndex);F.lastIndexOf=S(-1,F.findLastIndex);F.range=function(B,K,R){null==K&&(K=B||0,B=0);R=
R||1;K=Math.max(Math.ceil((K-B)/R),0);for(var fa=Array(K),ka=0;ka<K;ka++,B+=R)fa[ka]=B;return fa};var Gb=function(B,K,R,fa,ka){if(!(fa instanceof K))return B.apply(R,ka);K=Ha(B.prototype);B=B.apply(K,ka);return F.isObject(B)?B:K};F.bind=function(B,K){if(ia&&B.bind===ia)return ia.apply(B,T.call(arguments,1));if(!F.isFunction(B))throw new TypeError("Bind must be called on a function");var R=T.call(arguments,2),fa=function(){return Gb(B,fa,K,this,R.concat(T.call(arguments)))};return fa};F.partial=function(B){var K=
T.call(arguments,1),R=function(){for(var fa=0,ka=K.length,qa=Array(ka),xa=0;xa<ka;xa++)qa[xa]=K[xa]===F?arguments[fa++]:K[xa];for(;fa<arguments.length;)qa.push(arguments[fa++]);return Gb(B,R,this,this,qa)};return R};F.bindAll=function(B){var K,R=arguments.length;if(1>=R)throw Error("bindAll must be passed function names");for(K=1;K<R;K++){var fa=arguments[K];B[fa]=F.bind(B[fa],B)}return B};F.memoize=function(B,K){var R=function(fa){var ka=R.cache,qa=""+(K?K.apply(this,arguments):fa);F.has(ka,qa)||
(ka[qa]=B.apply(this,arguments));return ka[qa]};R.cache={};return R};F.delay=function(B,K){var R=T.call(arguments,2);return setTimeout(function(){return B.apply(null,R)},K)};F.defer=F.partial(F.delay,F,1);F.throttle=function(B,K,R){var fa,ka,qa,xa=null,Ra=0;R||(R={});var cb=function(){Ra=!1===R.leading?0:F.now();xa=null;qa=B.apply(fa,ka);xa||(fa=ka=null)};return function(){var Xa=F.now();Ra||!1!==R.leading||(Ra=Xa);var x=K-(Xa-Ra);fa=this;ka=arguments;0>=x||x>K?(xa&&(clearTimeout(xa),xa=null),Ra=
Xa,qa=B.apply(fa,ka),xa||(fa=ka=null)):xa||!1===R.trailing||(xa=setTimeout(cb,x));return qa}};F.debounce=function(B,K,R){var fa,ka,qa,xa,Ra,cb=function(){var Xa=F.now()-xa;Xa<K&&0<=Xa?fa=setTimeout(cb,K-Xa):(fa=null,R||(Ra=B.apply(qa,ka),fa||(qa=ka=null)))};return function(){qa=this;ka=arguments;xa=F.now();var Xa=R&&!fa;fa||(fa=setTimeout(cb,K));Xa&&(Ra=B.apply(qa,ka),qa=ka=null);return Ra}};F.wrap=function(B,K){return F.partial(K,B)};F.negate=function(B){return function(){return!B.apply(this,arguments)}};
F.compose=function(){var B=arguments,K=B.length-1;return function(){for(var R=K,fa=B[K].apply(this,arguments);R--;)fa=B[R].call(this,fa);return fa}};F.after=function(B,K){return function(){if(1>--B)return K.apply(this,arguments)}};F.before=function(B,K){var R;return function(){0<--B&&(R=K.apply(this,arguments));1>=B&&(K=null);return R}};F.once=F.partial(F.before,2);var Fb=!{toString:null}.propertyIsEnumerable("toString"),$b="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");
F.keys=function(B){if(!F.isObject(B))return[];if(ra)return ra(B);var K=[],R;for(R in B)F.has(B,R)&&K.push(R);Fb&&w(B,K);return K};F.allKeys=function(B){if(!F.isObject(B))return[];var K=[],R;for(R in B)K.push(R);Fb&&w(B,K);return K};F.values=function(B){for(var K=F.keys(B),R=K.length,fa=Array(R),ka=0;ka<R;ka++)fa[ka]=B[K[ka]];return fa};F.mapObject=function(B,K,R){K=pa(K,R);R=F.keys(B);for(var fa=R.length,ka={},qa,xa=0;xa<fa;xa++)qa=R[xa],ka[qa]=K(B[qa],qa,B);return ka};F.pairs=function(B){for(var K=
F.keys(B),R=K.length,fa=Array(R),ka=0;ka<R;ka++)fa[ka]=[K[ka],B[K[ka]]];return fa};F.invert=function(B){for(var K={},R=F.keys(B),fa=0,ka=R.length;fa<ka;fa++)K[B[R[fa]]]=R[fa];return K};F.functions=F.methods=function(B){var K=[],R;for(R in B)F.isFunction(B[R])&&K.push(R);return K.sort()};F.extend=ea(F.allKeys);F.extendOwn=F.assign=ea(F.keys);F.findKey=function(B,K,R){K=pa(K,R);R=F.keys(B);for(var fa,ka=0,qa=R.length;ka<qa;ka++)if(fa=R[ka],K(B[fa],fa,B))return fa};F.pick=function(B,K,R){var fa={},ka=
B;if(null==ka)return fa;if(F.isFunction(K)){var qa=F.allKeys(ka);var xa=ha(K,R)}else qa=fb(arguments,!1,!1,1),xa=function(G,Q,ba){return Q in ba},ka=Object(ka);for(var Ra=0,cb=qa.length;Ra<cb;Ra++){var Xa=qa[Ra],x=ka[Xa];xa(x,Xa,ka)&&(fa[Xa]=x)}return fa};F.omit=function(B,K,R){if(F.isFunction(K))K=F.negate(K);else{var fa=F.map(fb(arguments,!1,!1,1),String);K=function(ka,qa){return!F.contains(fa,qa)}}return F.pick(B,K,R)};F.defaults=ea(F.allKeys,!0);F.create=function(B,K){B=Ha(B);K&&F.extendOwn(B,
K);return B};F.clone=function(B){return F.isObject(B)?F.isArray(B)?B.slice():F.extend({},B):B};F.tap=function(B,K){K(B);return B};F.isMatch=function(B,K){var R=F.keys(K),fa=R.length;if(null==B)return!fa;B=Object(B);for(var ka=0;ka<fa;ka++){var qa=R[ka];if(K[qa]!==B[qa]||!(qa in B))return!1}return!0};var Ub=function(B,K,R,fa){if(B===K)return 0!==B||1/B===1/K;if(null==B||null==K)return B===K;B instanceof F&&(B=B._wrapped);K instanceof F&&(K=K._wrapped);var ka=L.call(B);if(ka!==L.call(K))return!1;switch(ka){case "[object RegExp]":case "[object String]":return""+
B===""+K;case "[object Number]":return+B!==+B?+K!==+K:0===+B?1/+B===1/K:+B===+K;case "[object Date]":case "[object Boolean]":return+B===+K}ka="[object Array]"===ka;if(!ka){if("object"!=typeof B||"object"!=typeof K)return!1;var qa=B.constructor,xa=K.constructor;if(qa!==xa&&!(F.isFunction(qa)&&qa instanceof qa&&F.isFunction(xa)&&xa instanceof xa)&&"constructor"in B&&"constructor"in K)return!1}R=R||[];fa=fa||[];for(qa=R.length;qa--;)if(R[qa]===B)return fa[qa]===K;R.push(B);fa.push(K);if(ka){qa=B.length;
if(qa!==K.length)return!1;for(;qa--;)if(!Ub(B[qa],K[qa],R,fa))return!1}else{ka=F.keys(B);qa=ka.length;if(F.keys(K).length!==qa)return!1;for(;qa--;)if(xa=ka[qa],!F.has(K,xa)||!Ub(B[xa],K[xa],R,fa))return!1}R.pop();fa.pop();return!0};F.isEqual=function(B,K){return Ub(B,K)};F.isEmpty=function(B){return null==B?!0:Oa(B)&&(F.isArray(B)||F.isString(B)||F.isArguments(B))?0===B.length:0===F.keys(B).length};F.isElement=function(B){return!(!B||1!==B.nodeType)};F.isArray=X||function(B){return"[object Array]"===
L.call(B)};F.isObject=function(B){var K=typeof B;return"function"===K||"object"===K&&!!B};F.each("Arguments Function String Number Date RegExp Error".split(" "),function(B){F["is"+B]=function(K){return L.call(K)==="[object "+B+"]"}});F.isArguments(arguments)||(F.isArguments=function(B){return F.has(B,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(F.isFunction=function(B){return"function"==typeof B||!1});F.isFinite=function(B){return isFinite(B)&&!isNaN(parseFloat(B))};F.isNaN=function(B){return F.isNumber(B)&&
B!==+B};F.isBoolean=function(B){return!0===B||!1===B||"[object Boolean]"===L.call(B)};F.isNull=function(B){return null===B};F.isUndefined=function(B){return void 0===B};F.has=function(B,K){return null!=B&&sa.call(B,K)};F.noConflict=function(){A._=z;return this};F.identity=function(B){return B};F.constant=function(B){return function(){return B}};F.noop=function(){};F.property=Ta;F.propertyOf=function(B){return null==B?function(){}:function(K){return B[K]}};F.matcher=F.matches=function(B){B=F.extendOwn({},
B);return function(K){return F.isMatch(K,B)}};F.times=function(B,K,R){var fa=Array(Math.max(0,B));K=ha(K,R,1);for(R=0;R<B;R++)fa[R]=K(R);return fa};F.random=function(B,K){null==K&&(K=B,B=0);return B+Math.floor(Math.random()*(K-B+1))};F.now=Date.now||function(){return(new Date).getTime()};X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};ea=F.invert(X);Ta=function(B){var K=function(qa){return B[qa]},R="(?:"+F.keys(B).join("|")+")",fa=RegExp(R),ka=RegExp(R,"g");return function(qa){qa=
null==qa?"":""+qa;return fa.test(qa)?qa.replace(ka,K):qa}};F.escape=Ta(X);F.unescape=Ta(ea);F.result=function(B,K,R){K=null==B?void 0:B[K];void 0===K&&(K=R);return F.isFunction(K)?K.call(B):K};var yc=0;F.uniqueId=function(B){var K=++yc+"";return B?B+K:K};F.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,Gc={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Hc=/\\|'|\r|\n|\u2028|\u2029/g,Ab=function(B){return"\\"+
Gc[B]};F.template=function(B,K,R){!K&&R&&(K=R);K=F.defaults({},K,F.templateSettings);R=RegExp([(K.escape||M).source,(K.interpolate||M).source,(K.evaluate||M).source].join("|")+"|$","g");var fa=0,ka="__p+='";B.replace(R,function(xa,Ra,cb,Xa,x){ka+=B.slice(fa,x).replace(Hc,Ab);fa=x+xa.length;Ra?ka+="'+\n((__t=("+Ra+"))==null?'':_.escape(__t))+\n'":cb?ka+="'+\n((__t=("+cb+"))==null?'':__t)+\n'":Xa&&(ka+="';\n"+Xa+"\n__p+='");return xa});ka+="';\n";K.variable||(ka="with(obj||{}){\n"+ka+"}\n");ka="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
ka+"return __p;\n";try{var qa=new Function(K.variable||"obj","_",ka)}catch(xa){throw xa.source=ka,xa;}R=function(xa){return qa.call(this,xa,F)};R.source="function("+(K.variable||"obj")+"){\n"+ka+"}";return R};F.chain=function(B){B=F(B);B._chain=!0;return B};var tb=function(B,K){return B._chain?F(K).chain():K};F.mixin=function(B){F.each(F.functions(B),function(K){var R=F[K]=B[K];F.prototype[K]=function(){var fa=[this._wrapped];U.apply(fa,arguments);return tb(this,R.apply(F,fa))}})};F.mixin(F);F.each("pop push reverse shift sort splice unshift".split(" "),
function(B){var K=E[B];F.prototype[B]=function(){var R=this._wrapped;K.apply(R,arguments);"shift"!==B&&"splice"!==B||0!==R.length||delete R[0];return tb(this,R)}});F.each(["concat","join","slice"],function(B){var K=E[B];F.prototype[B]=function(){return tb(this,K.apply(this._wrapped,arguments))}});F.prototype.value=function(){return this._wrapped};F.prototype.valueOf=F.prototype.toJSON=F.prototype.value;F.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&
define("underscore",[],function(){return F})}).call(this)},{}],3:[function(r,C,W){(function(){window.WebComponents=window.WebComponents||{flags:{}};var y=document.querySelector('script[src*="webcomponents-lite.js"]'),J={};if(!J.noOpts){location.search.slice(1).split("&").forEach(function(A){A=A.split("=");var z;A[0]&&(z=A[0].match(/wc-(.+)/))&&(J[z[1]]=A[1]||!0)});if(y)for(var S=0,w;w=y.attributes[S];S++)"src"!==w.name&&(J[w.name]=w.value||!0);J.log&&J.log.split?(y=J.log.split(","),J.log={},y.forEach(function(A){J.log[A]=
!0})):J.log={}}J.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=J.register);WebComponents.flags=J})();(function(y){function J(ia){""==ia&&(z.call(this),this._isInvalid=!0);return ia.toLowerCase()}function S(ia){var Ca=ia.charCodeAt(0);return 32<Ca&&127>Ca&&-1==[34,35,60,62,63,96].indexOf(Ca)?ia:encodeURIComponent(ia)}function w(ia){var Ca=ia.charCodeAt(0);return 32<Ca&&127>Ca&&-1==[34,35,60,62,96].indexOf(Ca)?ia:encodeURIComponent(ia)}function A(ia,
Ca,Ka){function F(gb){za.push(gb)}var ha=Ca||"scheme start",pa=0,ea="",Ha=!1,Ta=!1,za=[];a:for(;(void 0!=ia[pa-1]||0==pa)&&!this._isInvalid;){var na=ia[pa];switch(ha){case "scheme start":if(na&&sa.test(na))ea+=na.toLowerCase(),ha="scheme";else if(Ca){F("Invalid scheme.");break a}else{ea="";ha="no scheme";continue}break;case "scheme":if(na&&X.test(na))ea+=na.toLowerCase();else if(":"==na){this._scheme=ea;ea="";if(Ca)break a;void 0!==T[this._scheme]&&(this._isRelative=!0);ha="file"==this._scheme?"relative":
this._isRelative&&Ka&&Ka._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}else if(Ca){void 0!=na&&F("Code point not allowed in scheme: "+na);break a}else{ea="";pa=0;ha="no scheme";continue}break;case "scheme data":"?"==na?(this._query="?",ha="query"):"#"==na?(this._fragment="#",ha="fragment"):void 0!=na&&"\t"!=na&&"\n"!=na&&"\r"!=na&&(this._schemeData+=S(na));break;case "no scheme":if(Ka&&void 0!==T[Ka._scheme]){ha="relative";continue}else F("Missing scheme."),
z.call(this),this._isInvalid=!0;break;case "relative or authority":if("/"==na&&"/"==ia[pa+1])ha="authority ignore slashes";else{F("Expected /, got: "+na);ha="relative";continue}break;case "relative":this._isRelative=!0;"file"!=this._scheme&&(this._scheme=Ka._scheme);if(void 0==na){this._host=Ka._host;this._port=Ka._port;this._path=Ka._path.slice();this._query=Ka._query;this._username=Ka._username;this._password=Ka._password;break a}else if("/"==na||"\\"==na)"\\"==na&&F("\\ is an invalid code point."),
ha="relative slash";else if("?"==na)this._host=Ka._host,this._port=Ka._port,this._path=Ka._path.slice(),this._query="?",this._username=Ka._username,this._password=Ka._password,ha="query";else if("#"==na)this._host=Ka._host,this._port=Ka._port,this._path=Ka._path.slice(),this._query=Ka._query,this._fragment="#",this._username=Ka._username,this._password=Ka._password,ha="fragment";else{ha=ia[pa+1];var Oa=ia[pa+2];if("file"!=this._scheme||!sa.test(na)||":"!=ha&&"|"!=ha||void 0!=Oa&&"/"!=Oa&&"\\"!=Oa&&
"?"!=Oa&&"#"!=Oa)this._host=Ka._host,this._port=Ka._port,this._username=Ka._username,this._password=Ka._password,this._path=Ka._path.slice(),this._path.pop();ha="relative path";continue}break;case "relative slash":if("/"==na||"\\"==na)"\\"==na&&F("\\ is an invalid code point."),ha="file"==this._scheme?"file host":"authority ignore slashes";else{"file"!=this._scheme&&(this._host=Ka._host,this._port=Ka._port,this._username=Ka._username,this._password=Ka._password);ha="relative path";continue}break;
case "authority first slash":if("/"==na)ha="authority second slash";else{F("Expected '/', got: "+na);ha="authority ignore slashes";continue}break;case "authority second slash":ha="authority ignore slashes";if("/"!=na){F("Expected '/', got: "+na);continue}break;case "authority ignore slashes":if("/"!=na&&"\\"!=na){ha="authority";continue}else F("Expected authority, got: "+na);break;case "authority":if("@"==na){Ha&&(F("@ already seen."),ea+="%40");Ha=!0;for(na=0;na<ea.length;na++)Oa=ea[na],"\t"==Oa||
"\n"==Oa||"\r"==Oa?F("Invalid whitespace in authority."):":"==Oa&&null===this._password?this._password="":(Oa=S(Oa),null!==this._password?this._password+=Oa:this._username+=Oa);ea=""}else if(void 0==na||"/"==na||"\\"==na||"?"==na||"#"==na){pa-=ea.length;ea="";ha="host";continue}else ea+=na;break;case "file host":if(void 0==na||"/"==na||"\\"==na||"?"==na||"#"==na){2!=ea.length||!sa.test(ea[0])||":"!=ea[1]&&"|"!=ea[1]?(0!=ea.length&&(this._host=J.call(this,ea),ea=""),ha="relative path start"):ha="relative path";
continue}else"\t"==na||"\n"==na||"\r"==na?F("Invalid whitespace in file host."):ea+=na;break;case "host":case "hostname":if(":"!=na||Ta)if(void 0==na||"/"==na||"\\"==na||"?"==na||"#"==na){this._host=J.call(this,ea);ea="";ha="relative path start";if(Ca)break a;continue}else"\t"!=na&&"\n"!=na&&"\r"!=na?("["==na?Ta=!0:"]"==na&&(Ta=!1),ea+=na):F("Invalid code point in host/hostname: "+na);else if(this._host=J.call(this,ea),ea="",ha="port","hostname"==Ca)break a;break;case "port":if(/[0-9]/.test(na))ea+=
na;else if(void 0==na||"/"==na||"\\"==na||"?"==na||"#"==na||Ca){""!=ea&&(ea=parseInt(ea,10),ea!=T[this._scheme]&&(this._port=ea+""),ea="");if(Ca)break a;ha="relative path start";continue}else"\t"==na||"\n"==na||"\r"==na?F("Invalid code point in port: "+na):(z.call(this),this._isInvalid=!0);break;case "relative path start":"\\"==na&&F("'\\' not allowed in path.");ha="relative path";if("/"!=na&&"\\"!=na)continue;break;case "relative path":if(void 0!=na&&"/"!=na&&"\\"!=na&&(Ca||"?"!=na&&"#"!=na))"\t"!=
na&&"\n"!=na&&"\r"!=na&&(ea+=S(na));else{"\\"==na&&F("\\ not allowed in relative path.");if(Oa=L[ea.toLowerCase()])ea=Oa;".."==ea?(this._path.pop(),"/"!=na&&"\\"!=na&&this._path.push("")):"."==ea&&"/"!=na&&"\\"!=na?this._path.push(""):"."!=ea&&("file"==this._scheme&&0==this._path.length&&2==ea.length&&sa.test(ea[0])&&"|"==ea[1]&&(ea=ea[0]+":"),this._path.push(ea));ea="";"?"==na?(this._query="?",ha="query"):"#"==na&&(this._fragment="#",ha="fragment")}break;case "query":Ca||"#"!=na?void 0!=na&&"\t"!=
na&&"\n"!=na&&"\r"!=na&&(this._query+=w(na)):(this._fragment="#",ha="fragment");break;case "fragment":void 0!=na&&"\t"!=na&&"\n"!=na&&"\r"!=na&&(this._fragment+=na)}pa++}}function z(){this._username=this._schemeData=this._scheme="";this._password=null;this._port=this._host="";this._path=[];this._fragment=this._query="";this._isRelative=this._isInvalid=!1}function E(ia,Ca){void 0===Ca||Ca instanceof E||(Ca=new E(String(Ca)));this._url=ia;z.call(this);ia=ia.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");
A.call(this,ia,null,Ca)}var H=!1;if(!y.forceJURL)try{var U=new URL("b","http://a");U.pathname="c%20d";H="http://a/c%20d"===U.href}catch(ia){}if(!H){var T=Object.create(null);T.ftp=21;T.file=0;T.gopher=70;T.http=80;T.https=443;T.ws=80;T.wss=443;var L=Object.create(null);L["%2e"]=".";L[".%2e"]="..";L["%2e."]="..";L["%2e%2e"]="..";var sa=/[a-zA-Z]/,X=/[a-zA-Z0-9\+\-\.]/;E.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var ia="";if(""!=this._username||
null!=this._password)ia=this._username+(null!=this._password?":"+this._password:"")+"@";return this.protocol+(this._isRelative?"//"+ia+this.host:"")+this.pathname+this._query+this._fragment},set href(ia){z.call(this);A.call(this,ia)},get protocol(){return this._scheme+":"},set protocol(ia){this._isInvalid||A.call(this,ia+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(ia){!this._isInvalid&&this._isRelative&&A.call(this,ia,"host")},
get hostname(){return this._host},set hostname(ia){!this._isInvalid&&this._isRelative&&A.call(this,ia,"hostname")},get port(){return this._port},set port(ia){!this._isInvalid&&this._isRelative&&A.call(this,ia,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(ia){!this._isInvalid&&this._isRelative&&(this._path=[],A.call(this,ia,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},
set search(ia){!this._isInvalid&&this._isRelative&&(this._query="?","?"==ia[0]&&(ia=ia.slice(1)),A.call(this,ia,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(ia){this._isInvalid||(this._fragment="#","#"==ia[0]&&(ia=ia.slice(1)),A.call(this,ia,"fragment"))},get origin(){var ia;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case "data":case "file":case "javascript":case "mailto":return"null"}return(ia=this.host)?this._scheme+
"://"+ia:""}};var ra=y.URL;ra&&(E.createObjectURL=function(ia){return ra.createObjectURL.apply(ra,arguments)},E.revokeObjectURL=function(ia){ra.revokeObjectURL(ia)});y.URL=E}})(self);"undefined"===typeof WeakMap&&function(){var y=Object.defineProperty,J=Date.now()%1E9,S=function(){this.name="__st"+(1E9*Math.random()>>>0)+(J++ +"__")};S.prototype={set:function(w,A){var z=w[this.name];z&&z[0]===w?z[1]=A:y(w,this.name,{value:[w,A],writable:!0});return this},get:function(w){var A;return(A=w[this.name])&&
A[0]===w?A[1]:void 0},"delete":function(w){var A=w[this.name];if(!A||A[0]!==w)return!1;A[0]=A[1]=void 0;return!0},has:function(w){var A=w[this.name];return A?A[0]===w:!1}};window.WeakMap=S}();(function(y){function J(){ra=!1;var ha=ia;ia=[];ha.sort(function(ea,Ha){return ea.uid_-Ha.uid_});var pa=!1;ha.forEach(function(ea){var Ha=ea.takeRecords();S(ea);Ha.length&&(ea.callback_(Ha,ea),pa=!0)});pa&&J()}function S(ha){ha.nodes_.forEach(function(pa){(pa=T.get(pa))&&pa.forEach(function(ea){ea.observer===
ha&&ea.removeTransientObservers()})})}function w(ha,pa){for(var ea=ha;ea;ea=ea.parentNode){var Ha=T.get(ea);if(Ha)for(var Ta=0;Ta<Ha.length;Ta++){var za=Ha[Ta],na=za.options;(ea===ha||na.subtree)&&(na=pa(na))&&za.enqueue(na)}}}function A(ha){this.callback_=ha;this.nodes_=[];this.records_=[];this.uid_=++Ca}function z(ha,pa){this.type=ha;this.target=pa;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}function E(ha,
pa){return Ka=new z(ha,pa)}function H(ha){if(F)return F;var pa=Ka,ea=new z(pa.type,pa.target);ea.addedNodes=pa.addedNodes.slice();ea.removedNodes=pa.removedNodes.slice();ea.previousSibling=pa.previousSibling;ea.nextSibling=pa.nextSibling;ea.attributeName=pa.attributeName;ea.attributeNamespace=pa.attributeNamespace;ea.oldValue=pa.oldValue;F=ea;F.oldValue=ha;return F}function U(ha,pa,ea){this.observer=ha;this.target=pa;this.options=ea;this.transientObservedNodes=[]}if(!y.JsMutationObserver){var T=new WeakMap;
if(/Trident|Edge/.test(navigator.userAgent))var L=setTimeout;else if(window.setImmediate)L=window.setImmediate;else{var sa=[],X=String(Math.random());window.addEventListener("message",function(ha){ha.data===X&&(ha=sa,sa=[],ha.forEach(function(pa){pa()}))});L=function(ha){sa.push(ha);window.postMessage(X,"*")}}var ra=!1,ia=[],Ca=0;A.prototype={observe:function(ha,pa){ha=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(ha)||ha;if(!pa.childList&&!pa.attributes&&!pa.characterData||pa.attributeOldValue&&
!pa.attributes||pa.attributeFilter&&pa.attributeFilter.length&&!pa.attributes||pa.characterDataOldValue&&!pa.characterData)throw new SyntaxError;var ea=T.get(ha);ea||T.set(ha,ea=[]);for(var Ha,Ta=0;Ta<ea.length;Ta++)if(ea[Ta].observer===this){Ha=ea[Ta];Ha.removeListeners();Ha.options=pa;break}Ha||(Ha=new U(this,ha,pa),ea.push(Ha),this.nodes_.push(ha));Ha.addListeners()},disconnect:function(){this.nodes_.forEach(function(ha){ha=T.get(ha);for(var pa=0;pa<ha.length;pa++){var ea=ha[pa];if(ea.observer===
this){ea.removeListeners();ha.splice(pa,1);break}}},this);this.records_=[]},takeRecords:function(){var ha=this.records_;this.records_=[];return ha}};var Ka,F;U.prototype={enqueue:function(ha){var pa=this.observer.records_,ea=pa.length;if(0<pa.length){var Ha=pa[ea-1];Ha=Ha===ha?Ha:!F||Ha!==F&&Ha!==Ka?null:F;if(Ha){pa[ea-1]=Ha;return}}else ia.push(this.observer),ra||(ra=!0,L(J));pa[ea]=ha},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(ha){var pa=this.options;pa.attributes&&
ha.addEventListener("DOMAttrModified",this,!0);pa.characterData&&ha.addEventListener("DOMCharacterDataModified",this,!0);pa.childList&&ha.addEventListener("DOMNodeInserted",this,!0);(pa.childList||pa.subtree)&&ha.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(ha){var pa=this.options;pa.attributes&&ha.removeEventListener("DOMAttrModified",this,!0);pa.characterData&&ha.removeEventListener("DOMCharacterDataModified",
this,!0);pa.childList&&ha.removeEventListener("DOMNodeInserted",this,!0);(pa.childList||pa.subtree)&&ha.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(ha){if(ha!==this.target){this.addListeners_(ha);this.transientObservedNodes.push(ha);var pa=T.get(ha);pa||T.set(ha,pa=[]);pa.push(this)}},removeTransientObservers:function(){var ha=this.transientObservedNodes;this.transientObservedNodes=[];ha.forEach(function(pa){this.removeListeners_(pa);pa=T.get(pa);for(var ea=0;ea<pa.length;ea++)if(pa[ea]===
this){pa.splice(ea,1);break}},this)},handleEvent:function(ha){ha.stopImmediatePropagation();switch(ha.type){case "DOMAttrModified":var pa=ha.attrName,ea=ha.relatedNode.namespaceURI,Ha=ha.target,Ta=new E("attributes",Ha);Ta.attributeName=pa;Ta.attributeNamespace=ea;var za=ha.attrChange===MutationEvent.ADDITION?null:ha.prevValue;w(Ha,function(fb){if(fb.attributes&&(!fb.attributeFilter||!fb.attributeFilter.length||-1!==fb.attributeFilter.indexOf(pa)||-1!==fb.attributeFilter.indexOf(ea)))return fb.attributeOldValue?
H(za):Ta});break;case "DOMCharacterDataModified":Ha=ha.target;Ta=E("characterData",Ha);za=ha.prevValue;w(Ha,function(fb){if(fb.characterData)return fb.characterDataOldValue?H(za):Ta});break;case "DOMNodeRemoved":this.addTransientObserver(ha.target);case "DOMNodeInserted":var na=ha.target;if("DOMNodeInserted"===ha.type){Ha=[na];var Oa=[]}else Ha=[],Oa=[na];var gb=na.previousSibling;na=na.nextSibling;Ta=E("childList",ha.target.parentNode);Ta.addedNodes=Ha;Ta.removedNodes=Oa;Ta.previousSibling=gb;Ta.nextSibling=
na;w(ha.relatedNode,function(fb){if(fb.childList)return Ta})}Ka=F=void 0}};y.JsMutationObserver=A;y.MutationObserver||(y.MutationObserver=A,A._isPolyfilled=!0)}})(self);(function(){var y="undefined"===typeof HTMLTemplateElement;/Trident/.test(navigator.userAgent)&&function(){var X=document.importNode;document.importNode=function(){var ra=X.apply(document,arguments);if(ra.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var ia=document.createDocumentFragment();ia.appendChild(ra);return ia}return ra}}();var J=
function(){if(!y){var X=document.createElement("template"),ra=document.createElement("template");ra.content.appendChild(document.createElement("div"));X.content.appendChild(ra);X=X.cloneNode(!0);return 0===X.content.childNodes.length||0===X.content.firstChild.content.childNodes.length}}(),S=function(){};if(y){var w=function(X){switch(X){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case "\u00a0":return"&nbsp;"}},A=document.implementation.createHTMLDocument("template"),z=!0,E=
document.createElement("style");E.textContent="template{display:none;}";var H=document.head;H.insertBefore(E,H.firstElementChild);S.prototype=Object.create(HTMLElement.prototype);S.decorate=function(X){if(!X.content){X.content=A.createDocumentFragment();for(var ra;ra=X.firstChild;)X.content.appendChild(ra);X.cloneNode=function(ia){return S.cloneNode(this,ia)};if(z)try{Object.defineProperty(X,"innerHTML",{get:function(){for(var ia="",Ca=this.content.firstChild;Ca;Ca=Ca.nextSibling)ia+=Ca.outerHTML||
Ca.data.replace(T,w);return ia},set:function(ia){A.body.innerHTML=ia;for(S.bootstrap(A);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;A.body.firstChild;)this.content.appendChild(A.body.firstChild)},configurable:!0})}catch(ia){z=!1}S.bootstrap(X.content)}};S.bootstrap=function(X){X=X.querySelectorAll("template");for(var ra=0,ia=X.length,Ca;ra<ia&&(Ca=X[ra]);ra++)S.decorate(Ca)};document.addEventListener("DOMContentLoaded",function(){S.bootstrap(document)});var U=document.createElement;
document.createElement=function(){var X=U.apply(document,arguments);"template"===X.localName&&S.decorate(X);return X};var T=/[&\u00A0<>]/g}if(y||J){var L=Node.prototype.cloneNode;S.cloneNode=function(X,ra){var ia=L.call(X,!1);this.decorate&&this.decorate(ia);ra&&(ia.content.appendChild(L.call(X.content,!0)),this.fixClonedDom(ia.content,X.content));return ia};S.fixClonedDom=function(X,ra){if(ra.querySelectorAll){ra=ra.querySelectorAll("template");X=X.querySelectorAll("template");for(var ia=0,Ca=X.length,
Ka,F;ia<Ca;ia++)F=ra[ia],Ka=X[ia],this.decorate&&this.decorate(F),Ka.parentNode.replaceChild(F.cloneNode(!0),Ka)}};var sa=document.importNode;Node.prototype.cloneNode=function(X){var ra=L.call(this,X);X&&S.fixClonedDom(ra,this);return ra};document.importNode=function(X,ra){if("template"===X.localName)return S.cloneNode(X,ra);var ia=sa.call(document,X,ra);ra&&S.fixClonedDom(ia,X);return ia};J&&(HTMLTemplateElement.prototype.cloneNode=function(X){return S.cloneNode(this,X)})}y&&(window.HTMLTemplateElement=
S)})();(function(y){if(!window.performance||!window.performance.now){var J=Date.now();window.performance={now:function(){return Date.now()-J}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var w=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return w?function(A){return w(function(){A(performance.now())})}:function(A){return window.setTimeout(A,1E3/60)}}());window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||
window.mozCancelAnimationFrame||function(w){clearTimeout(w)}}());if(!function(){var w=document.createEvent("Event");w.initEvent("foo",!0,!0);w.preventDefault();return w.defaultPrevented}()){var S=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(S.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}y=/Trident/.test(navigator.userAgent);if(!window.CustomEvent||y&&"function"!==typeof window.CustomEvent)window.CustomEvent=
function(w,A){A=A||{};var z=document.createEvent("CustomEvent");z.initCustomEvent(w,!!A.bubbles,!!A.cancelable,A.detail);return z},window.CustomEvent.prototype=window.Event.prototype;if(!window.Event||y&&"function"!==typeof window.Event)y=window.Event,window.Event=function(w,A){A=A||{};var z=document.createEvent("Event");z.initEvent(w,!!A.bubbles,!!A.cancelable);return z},window.Event.prototype=y.prototype})(window.WebComponents);window.HTMLImports=window.HTMLImports||{flags:{}};(function(y){function J(X,
ra){ra=ra||H;S(function(){A(X,ra)},ra)}function S(X,ra){if("complete"!==ra.readyState&&ra.readyState!==T){var ia=function(){if("complete"===ra.readyState||ra.readyState===T)ra.removeEventListener(L,ia),S(X,ra)};ra.addEventListener(L,ia)}else X&&X()}function w(X){X.target.__loaded=!0}function A(X,ra){function ia(){ha==pa&&X&&X({allImports:F,loadedImports:ea,errorImports:Ha})}function Ca(za){w(za);ea.push(this);ha++;ia()}function Ka(za){Ha.push(this);ha++;ia()}var F=ra.querySelectorAll("link[rel=import]"),
ha=0,pa=F.length,ea=[],Ha=[];if(pa){ra=0;for(var Ta;ra<pa&&(Ta=F[ra]);ra++)(z?Ta.__loaded||Ta.import&&"loading"!==Ta.import.readyState:Ta.__importParsed)?(ea.push(this),ha++,ia()):(Ta.addEventListener("load",Ca),Ta.addEventListener("error",Ka))}else ia()}var z="import"in document.createElement("link"),E=!!window.ShadowDOMPolyfill,H=E?window.ShadowDOMPolyfill.wrapIfNeeded(document):document,U={get:function(){var X=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?
document.scripts[document.scripts.length-1]:null);return E?window.ShadowDOMPolyfill.wrapIfNeeded(X):X},configurable:!0};Object.defineProperty(document,"_currentScript",U);Object.defineProperty(H,"_currentScript",U);var T=(U=/Trident/.test(navigator.userAgent))?"complete":"interactive",L="readystatechange";if(z){var sa=function(X){X.import?w({target:X}):(X.addEventListener("load",w),X.addEventListener("error",w))};(new MutationObserver(function(X){for(var ra=0,ia=X.length,Ca;ra<ia&&(Ca=X[ra]);ra++)if(Ca.addedNodes)for(var Ka=
void 0,F=Ca.addedNodes,ha=0,pa=F.length;ha<pa&&(Ka=F[ha]);ha++)"link"===Ka.localName&&"import"===Ka.rel&&sa(Ka)})).observe(document.head,{childList:!0});(function(){if("loading"===document.readyState)for(var X=document.querySelectorAll("link[rel=import]"),ra=0,ia=X.length,Ca;ra<ia&&(Ca=X[ra]);ra++)sa(Ca)})()}J(function(X){window.HTMLImports.ready=!0;window.HTMLImports.readyTime=(new Date).getTime();var ra=H.createEvent("CustomEvent");ra.initCustomEvent("HTMLImportsLoaded",!0,!0,X);H.dispatchEvent(ra)});
y.IMPORT_LINK_TYPE="import";y.useNative=z;y.rootDocument=H;y.whenReady=J;y.isIE=U})(window.HTMLImports);(function(y){var J=[];y.addModule=function(S){J.push(S)};y.initializeModules=function(){J.forEach(function(S){S(y)})}})(window.HTMLImports);window.HTMLImports.addModule(function(y){var J=/(url\()([^)]*)(\))/g,S=/(@import[\s]+(?!url\())([^;]*)(;)/g;y.path={resolveUrlsInStyle:function(w,A){var z=w.ownerDocument.createElement("a");w.textContent=this.resolveUrlsInCssText(w.textContent,A,z);return w},
resolveUrlsInCssText:function(w,A,z){w=this.replaceUrls(w,z,A,J);return w=this.replaceUrls(w,z,A,S)},replaceUrls:function(w,A,z,E){return w.replace(E,function(H,U,T,L){H=T.replace(/["']/g,"");z&&(H=(new URL(H,z)).href);A.href=H;H=A.href;return U+"'"+H+"'"+L})}}});window.HTMLImports.addModule(function(y){var J={async:!0,ok:function(S){return 200<=S.status&&300>S.status||304===S.status||0===S.status},load:function(S,w,A){var z=new XMLHttpRequest;if(y.flags.debug||y.flags.bust)S+="?"+Math.random();z.open("GET",
S,J.async);z.addEventListener("readystatechange",function(E){if(4===z.readyState){E=null;try{var H=z.getResponseHeader("Location");H&&(E="/"===H.substr(0,1)?location.origin+H:H)}catch(U){console.error(U.message)}w.call(A,!J.ok(z)&&z,z.response||z.responseText,E)}});z.send();return z},loadDocument:function(S,w,A){this.load(S,w,A).responseType="document"}};y.xhr=J});window.HTMLImports.addModule(function(y){var J=y.xhr,S=y.flags,w=function(A,z){this.cache={};this.onload=A;this.oncomplete=z;this.inflight=
0;this.pending={}};w.prototype={addNodes:function(A){this.inflight+=A.length;for(var z=0,E=A.length,H;z<E&&(H=A[z]);z++)this.require(H);this.checkDone()},addNode:function(A){this.inflight++;this.require(A);this.checkDone()},require:function(A){var z=A.src||A.href;A.__nodeUrl=z;this.dedupe(z,A)||this.fetch(z,A)},dedupe:function(A,z){if(this.pending[A])return this.pending[A].push(z),!0;if(this.cache[A])return this.onload(A,z,this.cache[A]),this.tail(),!0;this.pending[A]=[z];return!1},fetch:function(A,
z){S.load&&console.log("fetch",A,z);if(A)if(A.match(/^data:/)){var E=A.split(","),H=E[1];H=-1<E[0].indexOf(";base64")?atob(H):decodeURIComponent(H);setTimeout(function(){this.receive(A,z,null,H)}.bind(this),0)}else E=function(U,T,L){this.receive(A,z,U,T,L)}.bind(this),J.load(A,E);else setTimeout(function(){this.receive(A,z,{error:"href must be specified"},null)}.bind(this),0)},receive:function(A,z,E,H,U){this.cache[A]=H;z=this.pending[A];for(var T=0,L=z.length,sa;T<L&&(sa=z[T]);T++)this.onload(A,
sa,H,E,U),this.tail();this.pending[A]=null},tail:function(){--this.inflight;this.checkDone()},checkDone:function(){if(!this.inflight)this.oncomplete()}};y.Loader=w});window.HTMLImports.addModule(function(y){var J=function(S){this.addCallback=S;this.mo=new MutationObserver(this.handler.bind(this))};J.prototype={handler:function(S){for(var w=0,A=S.length,z;w<A&&(z=S[w]);w++)"childList"===z.type&&z.addedNodes.length&&this.addedNodes(z.addedNodes)},addedNodes:function(S){this.addCallback&&this.addCallback(S);
for(var w=0,A=S.length,z;w<A&&(z=S[w]);w++)z.children&&z.children.length&&this.addedNodes(z.children)},observe:function(S){this.mo.observe(S,{childList:!0,subtree:!0})}};y.Observer=J});window.HTMLImports.addModule(function(y){function J(L){return"link"===L.localName&&L.rel===H}function S(L){var sa=L.textContent,X=L.ownerDocument;X.__importedScripts=X.__importedScripts||0;L=L.ownerDocument.baseURI;var ra=X.__importedScripts?"-"+X.__importedScripts:"";X.__importedScripts++;return"data:text/javascript;charset=utf-8,"+
encodeURIComponent(sa+("\n//# sourceURL="+L+ra+".js\n"))}var w=y.path,A=y.rootDocument,z=y.flags,E=y.isIE,H=y.IMPORT_LINK_TYPE,U="link[rel="+H+"]",T={documentSelectors:U,importsSelectors:[U,'link[rel=stylesheet]:not([type]),style:not([type]),script:not([type]),script[type="application/javascript"],script[type="text/javascript"]'].join(),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var L=this.nextToParse();L&&this.parse(L)},parse:function(L){if(this.isParsed(L))z.parse&&
console.log("[%s] is already parsed",L.localName);else{var sa=this[this.map[L.localName]];sa&&(this.markParsing(L),sa.call(this,L))}},parseDynamic:function(L,sa){this.dynamicElements.push(L);sa||this.parseNext()},markParsing:function(L){z.parse&&console.log("parsing",L);this.parsingElement=L},markParsingComplete:function(L){L.__importParsed=!0;this.markDynamicParsingComplete(L);L.__importElement&&(L.__importElement.__importParsed=!0,this.markDynamicParsingComplete(L.__importElement));this.parsingElement=
null;z.parse&&console.log("completed",L)},markDynamicParsingComplete:function(L){L=this.dynamicElements.indexOf(L);0<=L&&this.dynamicElements.splice(L,1)},parseImport:function(L){L.import=L.__doc;window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(L);L.import&&(L.import.__importParsed=!0);this.markParsingComplete(L);L.__resource&&!L.__error?L.dispatchEvent(new CustomEvent("load",{bubbles:!1})):L.dispatchEvent(new CustomEvent("error",{bubbles:!1}));if(L.__pending)for(var sa;L.__pending.length;)(sa=
L.__pending.shift())&&sa({target:L});this.parseNext()},parseLink:function(L){J(L)?this.parseImport(L):(L.href=L.href,this.parseGeneric(L))},parseStyle:function(L){var sa=L,X=L.ownerDocument.createElement("style");X.textContent=L.textContent;w.resolveUrlsInStyle(X);L=X;sa.__appliedElement=L;L.__importElement=sa;this.parseGeneric(L)},parseGeneric:function(L){this.trackElement(L);this.addElementToDocument(L)},rootImportForElement:function(L){for(;L.ownerDocument.__importLink;)L=L.ownerDocument.__importLink;
return L},addElementToDocument:function(L){var sa=this.rootImportForElement(L.__importElement||L);sa.parentNode.insertBefore(L,sa)},trackElement:function(L,sa){var X=this,ra=function(pa){L.removeEventListener("load",ra);L.removeEventListener("error",ra);sa&&sa(pa);X.markParsingComplete(L);X.parseNext()};L.addEventListener("load",ra);L.addEventListener("error",ra);if(E&&"style"===L.localName){var ia=!1;if(-1==L.textContent.indexOf("@import"))ia=!0;else if(L.sheet){ia=!0;for(var Ca=L.sheet.cssRules,
Ka=Ca?Ca.length:0,F=0,ha;F<Ka&&(ha=Ca[F]);F++)ha.type===CSSRule.IMPORT_RULE&&(ia=ia&&!!ha.styleSheet)}ia&&setTimeout(function(){L.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(L){var sa=document.createElement("script");sa.__importElement=L;sa.src=L.src?L.src:S(L);y.currentScript=L;this.trackElement(sa,function(X){sa.parentNode&&sa.parentNode.removeChild(sa);y.currentScript=null});this.addElementToDocument(sa)},nextToParse:function(){this._mayParse=[];return!this.parsingElement&&
(this.nextToParseInDoc(A)||this.nextToParseDynamic())},nextToParseInDoc:function(L,sa){if(L&&0>this._mayParse.indexOf(L)){this._mayParse.push(L);L=L.querySelectorAll(this.parseSelectorsForNode(L));for(var X=0,ra=L.length,ia;X<ra&&(ia=L[X]);X++)if(!this.isParsed(ia)){if(this.hasResource(ia))return J(ia)?this.nextToParseInDoc(ia.__doc,ia):ia;return}}return sa},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(L){return(L.ownerDocument||L)===A?this.documentSelectors:
this.importsSelectors},isParsed:function(L){return L.__importParsed},needsDynamicParsing:function(L){return 0<=this.dynamicElements.indexOf(L)},hasResource:function(L){return J(L)&&void 0===L.__doc?!1:!0}};y.parser=T;y.IMPORT_SELECTOR=U});window.HTMLImports.addModule(function(y){var J=y.flags,S=y.IMPORT_LINK_TYPE,w=y.IMPORT_SELECTOR,A=y.rootDocument,z=y.Loader,E=y.Observer,H=y.parser;w={documents:{},documentPreloadSelectors:w,importsPreloadSelectors:[w].join(),loadNode:function(T){U.addNode(T)},loadSubtree:function(T){T=
this.marshalNodes(T);U.addNodes(T)},marshalNodes:function(T){return T.querySelectorAll(this.loadSelectorsForNode(T))},loadSelectorsForNode:function(T){return(T.ownerDocument||T)===A?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(T,L,sa,X,ra){J.load&&console.log("loaded",T,L);L.__resource=sa;L.__error=X;if("link"===L.localName&&L.getAttribute("rel")===S){var ia=this.documents[T];if(void 0===ia){X?sa=null:(ia=ra||T,X=document.implementation.createHTMLDocument(S),X._URL=
ia,ra=X.createElement("base"),ra.setAttribute("href",ia),X.baseURI||Object.getOwnPropertyDescriptor(X,"baseURI")||Object.defineProperty(X,"baseURI",{value:ia}),ia=X.createElement("meta"),ia.setAttribute("charset","utf-8"),X.head.appendChild(ia),X.head.appendChild(ra),X.body.innerHTML=sa,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(X),sa=X);if(ia=sa)ia.__importLink=L,this.bootDocument(ia);this.documents[T]=ia}L.__doc=ia}H.parseNext()},bootDocument:function(T){this.loadSubtree(T);
this.observer.observe(T);H.parseNext()},loadedAll:function(){H.parseNext()}};var U=new z(w.loaded.bind(w),w.loadedAll.bind(w));w.observer=new E;document.baseURI||(z={get:function(){var T=document.querySelector("base");return T?T.href:window.location.href},configurable:!0},Object.defineProperty(document,"baseURI",z),Object.defineProperty(A,"baseURI",z));y.importer=w;y.importLoader=U});window.HTMLImports.addModule(function(y){var J=y.parser,S=y.importer;y={added:function(A){for(var z,E,H,U=0,T=A.length,
L;U<T&&(L=A[U]);U++)z||(z=L.ownerDocument,E=J.isParsed(z)),(H=this.shouldLoadNode(L))&&S.loadNode(L),this.shouldParseNode(L)&&E&&J.parseDynamic(L,H)},shouldLoadNode:function(A){return 1===A.nodeType&&w.call(A,S.loadSelectorsForNode(A))},shouldParseNode:function(A){return 1===A.nodeType&&w.call(A,J.parseSelectorsForNode(A))}};S.observer.addCallback=y.added.bind(y);var w=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||
HTMLElement.prototype.msMatchesSelector});(function(y){function J(){window.HTMLImports.importer.bootDocument(w)}var S=y.initializeModules;if(!y.useNative){S();var w=y.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?J():document.addEventListener("DOMContentLoaded",J)}})(window.HTMLImports);window.CustomElements=window.CustomElements||{flags:{}};(function(y){var J=y.flags,S=[];y.addModule=function(w){S.push(w)};y.initializeModules=function(){S.forEach(function(w){w(y)})};
y.hasNative=!!document.registerElement;y.isIE=/Trident/.test(navigator.userAgent);y.useNative=!J.register&&y.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)})(window.CustomElements);window.CustomElements.addModule(function(y){function J(E,H){S(E,function(U){if(H(U))return!0;w(U,H)});w(E,H)}function S(E,H,U){var T=E.firstElementChild;if(!T)for(T=E.firstChild;T&&T.nodeType!==Node.ELEMENT_NODE;)T=T.nextSibling;for(;T;)!0!==H(T,U)&&S(T,H,U),T=T.nextElementSibling;
return null}function w(E,H){for(E=E.shadowRoot;E;)J(E,H),E=E.olderShadowRoot}function A(E,H,U){E=window.wrap(E);if(!(0<=U.indexOf(E))){U.push(E);for(var T=E.querySelectorAll("link[rel="+z+"]"),L=0,sa=T.length,X;L<sa&&(X=T[L]);L++)X.import&&A(X.import,H,U);H(E)}}var z=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";y.forDocumentTree=function(E,H){A(E,H,[])};y.forSubtree=J});window.CustomElements.addModule(function(y){function J(za,na){return S(za,na)||w(za,na)}function S(za,na){if(y.upgrade(za,
na))return!0;na&&E(za)}function w(za,na){Ka(za,function(Oa){if(S(Oa,na))return!0})}function A(za){ea.push(za);pa||(pa=!0,setTimeout(z))}function z(){pa=!1;for(var za=ea,na=0,Oa=za.length,gb;na<Oa&&(gb=za[na]);na++)gb();ea=[]}function E(za){ha?A(function(){H(za)}):H(za)}function H(za){za.__upgraded__&&!za.__attached&&(za.__attached=!0,za.attachedCallback&&za.attachedCallback())}function U(za){T(za);Ka(za,function(na){T(na)})}function T(za){ha?A(function(){L(za)}):L(za)}function L(za){za.__upgraded__&&
za.__attached&&(za.__attached=!1,za.detachedCallback&&za.detachedCallback())}function sa(za){for(var na=window.wrap(document);za;){if(za==na)return!0;za=za.parentNode||za.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&za.host}}function X(za,na){if(Ca.dom){var Oa=na[0];if(Oa&&"childList"===Oa.type&&Oa.addedNodes&&Oa.addedNodes){for(Oa=Oa.addedNodes[0];Oa&&Oa!==document&&!Oa.host;)Oa=Oa.parentNode;var gb=Oa&&(Oa.URL||Oa._URL||Oa.host&&Oa.host.localName)||"";gb=gb.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",
na.length,gb||"")}var fb=sa(za);na.forEach(function(Gb){"childList"===Gb.type&&(Ha(Gb.addedNodes,function(Fb){Fb.localName&&J(Fb,fb)}),Ha(Gb.removedNodes,function(Fb){Fb.localName&&U(Fb)}))});Ca.dom&&console.groupEnd()}function ra(za){if(!za.__observer){var na=new MutationObserver(X.bind(this,za));na.observe(za,{childList:!0,subtree:!0});za.__observer=na}}function ia(za){za=window.wrap(za);Ca.dom&&console.group("upgradeDocument: ",za.baseURI.split("/").pop());var na=za===window.wrap(document);J(za,
na);ra(za);Ca.dom&&console.groupEnd()}var Ca=y.flags,Ka=y.forSubtree,F=y.forDocumentTree,ha=window.MutationObserver._isPolyfilled&&Ca["throttle-attached"];y.hasPolyfillMutations=ha;y.hasThrottledAttached=ha;var pa=!1,ea=[],Ha=Array.prototype.forEach.call.bind(Array.prototype.forEach),Ta=Element.prototype.createShadowRoot;Ta&&(Element.prototype.createShadowRoot=function(){var za=Ta.call(this);window.CustomElements.watchShadow(this);return za});y.watchShadow=function(za){if(za.shadowRoot&&!za.shadowRoot.__watched)for(Ca.dom&&
console.log("watching shadow-root for: ",za.localName),za=za.shadowRoot;za;)ra(za),za=za.olderShadowRoot};y.upgradeDocumentTree=function(za){F(za,ia)};y.upgradeDocument=ia;y.upgradeSubtree=w;y.upgradeAll=J;y.attached=E;y.takeRecords=function(za){for((za=window.wrap(za))||(za=window.wrap(document));za.parentNode;)za=za.parentNode;var na=za.__observer;na&&(X(za,na.takeRecords()),z())}});window.CustomElements.addModule(function(y){function J(A,z,E){w.upgrade&&console.group("upgrade:",A.localName);z.is&&
A.setAttribute("is",z.is);S(A,z);A.__upgraded__=!0;A.createdCallback&&A.createdCallback();E&&y.attached(A);y.upgradeSubtree(A,E);w.upgrade&&console.groupEnd();return A}function S(A,z){if(!Object.__proto__)for(var E=z.native,H={},U=z.prototype;U!==E&&U!==HTMLElement.prototype;){for(var T=Object.getOwnPropertyNames(U),L=0,sa;sa=T[L];L++)H[sa]||(Object.defineProperty(A,sa,Object.getOwnPropertyDescriptor(U,sa)),H[sa]=1);U=Object.getPrototypeOf(U)}A.__proto__=z.prototype}var w=y.flags;y.upgrade=function(A,
z){"template"===A.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(A);if(!A.__upgraded__&&A.nodeType===Node.ELEMENT_NODE){var E=A.getAttribute("is"),H=y.getRegisteredDefinition(A.localName)||y.getRegisteredDefinition(E);if(H&&(E&&H.tag==A.localName||!E&&!H.extends))return J(A,H,z)}};y.upgradeWithDefinition=J;y.implementPrototype=S});window.CustomElements.addModule(function(y){function J(F){if(!F.setAttribute._polyfilled){var ha=F.setAttribute;F.setAttribute=
function(ea,Ha){S.call(this,ea,Ha,ha)};var pa=F.removeAttribute;F.removeAttribute=function(ea){S.call(this,ea,null,pa)};F.setAttribute._polyfilled=!0}}function S(F,ha,pa){F=F.toLowerCase();var ea=this.getAttribute(F);pa.apply(this,arguments);var Ha=this.getAttribute(F);this.attributeChangedCallback&&Ha!==ea&&this.attributeChangedCallback(F,ea,Ha)}function w(F){return(F=A(F))?w(F.extends).concat([F]):[]}function A(F){if(F)return ia[F.toLowerCase()]}function z(F){return function(){return L(Ca(F.tag),
F)}}function E(F,ha){F&&(F=F.toLowerCase());ha&&(ha=ha.toLowerCase());var pa=A(ha||F);if(pa&&(F==pa.tag&&ha==pa.is||!ha&&!pa.is))return new pa.ctor;if(ha)return pa=E(F),pa.setAttribute("is",ha),pa;pa=Ca(F);0<=F.indexOf("-")&&sa(pa,HTMLElement);return pa}function H(F,ha){var pa=F[ha];F[ha]=function(){var ea=pa.apply(this,arguments);T(ea);return ea}}var U=y.upgradeDocumentTree,T=y.upgradeAll,L=y.upgradeWithDefinition,sa=y.implementPrototype,X=y.useNative,ra="annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" "),
ia={},Ca=document.createElement.bind(document),Ka=document.createElementNS.bind(document);X=Object.__proto__||X?function(F,ha){return F instanceof ha}:function(F,ha){if(F instanceof ha)return!0;for(;F;){if(F===ha.prototype)return!0;F=F.__proto__}return!1};H(Node.prototype,"cloneNode");H(document,"importNode");document.registerElement=function(F,ha){ha=ha||{};if(!F)throw Error("document.registerElement: first argument `name` must not be empty");if(0>F.indexOf("-"))throw Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+
String(F)+"'.");var pa;a:{for(pa=0;pa<ra.length;pa++)if(F===ra[pa]){pa=!0;break a}pa=void 0}if(pa)throw Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(F)+"'. The type name is invalid.");if(A(F))throw Error("DuplicateDefinitionError: a type with name '"+String(F)+"' is already registered");ha.prototype||(ha.prototype=Object.create(HTMLElement.prototype));ha.__name=F.toLowerCase();ha.extends&&(ha.extends=ha.extends.toLowerCase());ha.lifecycle=ha.lifecycle||
{};ha.ancestry=w(ha.extends);F=ha.extends;pa=0;for(var ea;ea=ha.ancestry[pa];pa++)F=ea.is&&ea.tag;ha.tag=F||ha.__name;F&&(ha.is=ha.__name);if(!Object.__proto__){F=HTMLElement.prototype;ha.is&&(F=document.createElement(ha.tag),F=Object.getPrototypeOf(F));pa=ha.prototype;for(var Ha=!1;pa;){pa==F&&(Ha=!0);if(ea=Object.getPrototypeOf(pa))pa.__proto__=ea;pa=ea}Ha||console.warn(ha.tag+" prototype not found in prototype chain for "+ha.is);ha.native=F}J(ha.prototype);ia[ha.__name]=ha;ha.ctor=z(ha);ha.ctor.prototype=
ha.prototype;ha.prototype.constructor=ha.ctor;y.ready&&U(document);return ha.ctor};document.createElement=E;document.createElementNS=function(F,ha,pa){return"http://www.w3.org/1999/xhtml"===F?E(ha,pa):Ka(F,ha)};y.registry=ia;y.instanceof=X;y.reservedTagList=ra;y.getRegisteredDefinition=A;document.register=document.registerElement});(function(y){function J(){w(window.wrap(document));window.CustomElements.ready=!0;(window.requestAnimationFrame||function(z){setTimeout(z,16)})(function(){setTimeout(function(){window.CustomElements.readyTime=
Date.now();window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime);document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var S=y.initializeModules;y.useNative?(S=function(){},y.watchShadow=S,y.upgrade=S,y.upgradeAll=S,y.upgradeDocumentTree=S,y.upgradeSubtree=S,y.takeRecords=S,y.instanceof=function(z,E){return z instanceof E}):S();var w=y.upgradeDocumentTree,A=y.upgradeDocument;window.wrap||(window.ShadowDOMPolyfill?
(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(z){return z});window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(z){z.import&&A(wrap(z.import))});"complete"===document.readyState||y.flags.eager?J():"interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready?window.addEventListener(window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":
"DOMContentLoaded",J):J()})(window.CustomElements);(function(y){y=document.createElement("style");y.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var J=document.querySelector("head");J.insertBefore(y,J.firstChild)})(window.WebComponents)},{}],4:[function(r,C,W){function y(){return cast.framework.CastContext.getInstance()}W=r("class.extend");var J=r("underscore"),S=!1;var w=W.extend({init:function(A){this.player=
A;this._addCastContextEventListeners();this.player.on("dispose",this._removeCastContextEventListeners.bind(this));this._notifyPlayerOfDevicesAvailabilityChange(this.getCastContext().getCastState());this.remotePlayer=new cast.framework.RemotePlayer;this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer)},_addCastContextEventListeners:function(){var A=cast.framework.CastContextEventType.SESSION_STATE_CHANGED,z=cast.framework.CastContextEventType.CAST_STATE_CHANGED;this.getCastContext().addEventListener(A,
this._onSessionStateChange.bind(this));this.getCastContext().addEventListener(z,this._onCastStateChange.bind(this))},_removeCastContextEventListeners:function(){var A=cast.framework.CastContextEventType.SESSION_STATE_CHANGED,z=cast.framework.CastContextEventType.CAST_STATE_CHANGED;this.getCastContext().removeEventListener(A);this.getCastContext().removeEventListener(z)},_onSessionStateChange:function(A){A.sessionState===cast.framework.SessionState.SESSION_ENDED&&(this.player.trigger("chromecastDisconnected"),
this._reloadTech())},_onCastStateChange:function(A){this._notifyPlayerOfDevicesAvailabilityChange(A.castState)},_notifyPlayerOfDevicesAvailabilityChange:function(A){this.hasAvailableDevices(A)?this.player.trigger("chromecastDevicesAvailable"):this.player.trigger("chromecastDevicesUnavailable")},hasAvailableDevices:function(A){A=A||this.getCastContext().getCastState();return A===cast.framework.CastState.NOT_CONNECTED||A===cast.framework.CastState.CONNECTING||A===cast.framework.CastState.CONNECTED},
openCastMenu:function(){if(this.player.currentSource()){var A=function(){S=!0;this.player.trigger("chromecastConnected");this._reloadTech()}.bind(this);this.getCastContext().requestSession().then(A,J.noop)}},_reloadTech:function(){var A=this.player,z=A.currentTime(),E=A.paused(),H=A.currentSources();A.src(H);A.ready(function(){E?A.pause():A.play();A.currentTime(z||0)})},getCastContext:y,getRemotePlayer:function(){return this.remotePlayer},getRemotePlayerController:function(){return this.remotePlayerController}});
w.isChromecastAPIAvailable=function(){return window.chrome&&window.chrome.cast&&window.cast};w.isChromecastConnected=function(){return w.isChromecastAPIAvailable()&&y().getCastState()===cast.framework.CastState.CONNECTED&&S};C.exports=w},{"class.extend":1,underscore:2}],5:[function(r,C,W){var y={constructor:function(J){this.constructor.super_.apply(this,arguments);J.on("chromecastConnected",this._onChromecastConnected.bind(this));J.on("chromecastDisconnected",this._onChromecastDisconnected.bind(this));
J.on("chromecastDevicesAvailable",this._onChromecastDevicesAvailable.bind(this));J.on("chromecastDevicesUnavailable",this._onChromecastDevicesUnavailable.bind(this));this.controlText("Open Chromecast menu");J.chromecastSessionManager&&J.chromecastSessionManager.hasAvailableDevices()?this._onChromecastDevicesAvailable():this._onChromecastDevicesUnavailable()},buildCSSClass:function(){return"vjs-chromecast-button "+(this._isChromecastConnected?"vjs-chromecast-casting-state ":"")+this.constructor.super_.prototype.buildCSSClass()},
handleClick:function(){this.player().trigger("chromecastRequested")},_onChromecastConnected:function(){this._isChromecastConnected=!0;this._reloadCSSClasses()},_onChromecastDisconnected:function(){this._isChromecastConnected=!1;this._reloadCSSClasses()},_onChromecastDevicesAvailable:function(){this.show()},_onChromecastDevicesUnavailable:function(){this.hide()},_reloadCSSClasses:function(){this.el_&&(this.el_.className=this.buildCSSClass())}};C.exports=function(J){var S=J.extend(J.getComponent("Button"),
y);J.registerComponent("chromecastButton",S)}},{}],6:[function(r,C,W){function y(E){cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:E.receiverAppID||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}function J(E){E.chromecastSessionManager.openCastMenu()}function S(E,H){if(H.addButtonToControlBar&&!E.controlBar.getChild("chromecastButton")){var U=E.controlBar.children().length;"undefined"!==typeof H.buttonPositionIndex&&
(U=0<=H.buttonPositionIndex?H.buttonPositionIndex:E.controlBar.children().length+H.buttonPositionIndex);E.controlBar.addChild("chromecastButton",H,U)}E.on("chromecastRequested",J.bind(null,E))}function w(E,H){var U=1;var T=setInterval(function(){30<U?clearInterval(T):(A.isChromecastAPIAvailable()&&(clearInterval(T),y(H),E.chromecastSessionManager||(E.chromecastSessionManager=new A(E)),S(E,H)),U+=1)},1E3)}var A=r("./chromecast/ChromecastSessionManager"),z=r("underscore");C.exports=function(E){E.registerPlugin("chromecast",
function(H){var U=z.extend({addButtonToControlBar:!0},H||{});this.ready(function(){this.controlBar&&(A.isChromecastAPIAvailable()?(y(U),this.chromecastSessionManager||(this.chromecastSessionManager=new A(this)),S(this,U)):w(this,U))}.bind(this))})}},{"./chromecast/ChromecastSessionManager":4,underscore:2}],7:[function(r,C,W){var y=r("underscore"),J=r("./preloadWebComponents"),S=r("./components/ChromecastButton"),w=r("./tech/ChromecastTech"),A=r("./enableChromecast");C.exports=function(z,E){y.defaults(y.extend({},
E),{preloadWebComponents:!1}).preloadWebComponents&&J();z=z||window.videojs;S(z);w(z);A(z)}},{"./components/ChromecastButton":5,"./enableChromecast":6,"./preloadWebComponents":8,"./tech/ChromecastTech":10,underscore:2}],8:[function(r,C,W){function y(S){return J.isString(window.navigator.userAgent)&&0<=window.navigator.userAgent.indexOf(S)}var J=r("underscore");C.exports=function(){var S=!document.registerElement,w=y("CriOS");(y("Android")&&y("Chrome/")&&window.navigator.presentation||w)&&S&&r("webcomponents.js/webcomponents-lite.js")}},
{underscore:2,"webcomponents.js/webcomponents-lite.js":3}],9:[function(r,C,W){r("./index")(void 0,window.SILVERMINE_VIDEOJS_CHROMECAST_CONFIG)},{"./index":7}],10:[function(r,C,W){var y=r("../chromecast/ChromecastSessionManager"),J=r("./ChromecastTechUI"),S=r("../vjsTextTrackStylesMap"),w=r("underscore");var A={constructor:function(z){this._eventListeners=[];this.videojsPlayer=this.videojs(z.playerId);this._chromecastSessionManager=this.videojsPlayer.chromecastSessionManager;this._ui=new J;this._textTracks=
this.videojsPlayer.textTracks();var E=this.constructor.super_.apply(this,arguments);this._remotePlayer=this._chromecastSessionManager.getRemotePlayer();this._remotePlayerController=this._chromecastSessionManager.getRemotePlayerController();this._listenToPlayerControllerEvents();this._listenToVideoJsPlayerEvents();this.on("dispose",this._removeAllEventListeners.bind(this));this.on("dispose",this._removeVideoJsAllEventListeners.bind(this));this._hasPlayedAnyItem=!1;this._requestTitle=z.requestTitleFn||
w.noop;this._requestSubtitle=z.requestSubtitleFn||w.noop;this._requestPoster=z.requestPosterFn||w.noop;this._requestCustomData=z.requestCustomDataFn||w.noop;this._initialStartTime=z.startTime||0;setTimeout(function(){this._playSource(z.source,this._initialStartTime,this._textTracks)}.bind(this),50);this.ready(function(){this.setMuted(z.muted)}.bind(this));return E},createEl:function(){return this._ui.getDOMElement()},play:function(){this.paused()&&(this.ended()&&!this._isMediaLoading?this._playSource({src:this.videojsPlayer.src()},
0):this._remotePlayerController.playOrPause())},pause:function(){!this.paused()&&this._remotePlayer.canPause&&this._remotePlayerController.playOrPause()},paused:function(){return this._remotePlayer.isPaused||this.ended()||null===this._remotePlayer.playerState},vjsTextTrackStylesToCAF:function(){var z=this.videojsPlayer.textTrackSettings.getValues(),E=new chrome.cast.media.TextTrackStyle;E.foregroundColor=S.getTextColorWithOpacity(z.color,z.textOpacity);E.backgroundColor=S.getTextColorWithOpacity(z.backgroundColor,
z.backgroundOpacity);E.fontScale=parseFloat(z.fontPercent);E.edgeType=S.translateTextTrackEdgeType(z.edgeStyle);E.fontFamily=S.translateFontFamily(z.fontFamily);return E},setSource:function(z){this._currentSource&&this._currentSource.src===z.src&&this._currentSource.type===z.type||(this._currentSource=z,this._playSource(z,this.currentTime(),this._textTracks))},_listenToVideoJsPlayerEvents:function(){this._textTracks.on("change",this._textTrackChanged.bind(this));this.videojsPlayer.on("textTrackDisplayChanged",
this._textTrackStyleChanged.bind(this))},_removeVideoJsAllEventListeners:function(){this._textTracks.off("change",this._textTrackChanged.bind(this));this.videojsPlayer.off("textTrackDisplayChanged",this._textTrackStyleChanged.bind(this))},_textTrackChanged:function(){this._playSource(this.videojsPlayer.currentSource(),this.currentTime(),this._textTracks)},_textTrackStyleChanged:function(){for(var z=null,E=this.vjsTextTrackStylesToCAF(),H=this._getMediaSession(),U=0;U<this._textTracks.length;U++)if("showing"===
this._textTracks[U].mode){z=U;break}if(null===z)return!1;z=new chrome.cast.media.EditTracksInfoRequest([z],E);H.editTracksInfo(z)},_playSource:function(z,E,H){var U=this._getCastSession(),T=[],L=new chrome.cast.media.MediaInfo(z.src,z.type),sa=this._requestTitle(z),X=this._requestPoster(z),ra=this._requestSubtitle(z);z=this._requestCustomData(z);this.trigger("waiting");this._clearSessionTimeout();L.metadata=new chrome.cast.media.GenericMediaMetadata;L.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC;
L.textTrackStyle=this.vjsTextTrackStylesToCAF();L.metadata.title=sa;L.metadata.subtitle=ra;L.metadata.images=[new chrome.cast.Image(X)];z&&(L.customData=z);L.tracks=[];var ia=this;w.each(H,function(Ca,Ka){if(("subtitles"===Ca.kind||"subtitles"===Ca.kind)&&"showing"===Ca.mode){var F=new chrome.cast.media.Track(Ka,chrome.cast.media.TrackType.TEXT);F.name=Ca.label;F.subtype="CAPTIONS";F.trackContentType="text/vtt";F.trackContentId=Ca.src;L.tracks=[F];T=[Ka]}}.bind(this));this._ui.updateTitle(sa);this._ui.updateSubtitle(ra);
H=new chrome.cast.media.LoadRequest(L);H.activeTrackIds=T;H.autoplay=!0;H.currentTime=E;this._isMediaLoading=!0;this._hasPlayedCurrentItem=!1;ia=this;U.loadMedia(H).then(function(){this._hasPlayedAnyItem||this.triggerReady();setTimeout(function(){ia.trigger("loadstart");ia.trigger("loadeddata");ia.trigger("play");ia.trigger("playing")},50);this._hasPlayedAnyItem=!0;this._isMediaLoading=!1;this._getMediaSession().addUpdateListener(this._onMediaSessionStatusChanged.bind(this))}.bind(this),this._triggerErrorEvent.bind(this))},
setCurrentTime:function(z){var E=this.duration();z>E||!this._remotePlayer.canSeek||(this._remotePlayer.currentTime=Math.min(E-1,z),this._remotePlayerController.seek(),this._triggerTimeUpdateEvent())},currentTime:function(){return this._hasPlayedAnyItem?this._remotePlayer.currentTime:this._initialStartTime},duration:function(){return this._hasPlayedAnyItem?this._remotePlayer.duration:this.videojsPlayer.duration()},ended:function(){var z=this._getMediaSession();return!z&&this._hasMediaSessionEnded?
!0:z?z.idleReason===chrome.cast.media.IdleReason.FINISHED:!1},volume:function(){return this._remotePlayer.volumeLevel},setVolume:function(z){this._remotePlayer.volumeLevel=z;this._remotePlayerController.setVolumeLevel();this._triggerVolumeChangeEvent()},muted:function(){return this._remotePlayer.isMuted},setMuted:function(z){(this._remotePlayer.isMuted&&!z||!this._remotePlayer.isMuted&&z)&&this._remotePlayerController.muteOrUnmute()},poster:function(){return this._ui.getPoster()},setPoster:function(z){},
buffered:function(){},seekable:function(){return this.videojs.createTimeRange(0,this.duration())},controls:function(){return!1},playsinline:function(){return!0},supportsFullScreen:function(){return!0},setAutoplay:function(){},playbackRate:function(){var z=this._getMediaSession();return z?z.playbackRate:1},setPlaybackRate:function(){},load:function(){},readyState:function(){return"IDLE"===this._remotePlayer.playerState||"BUFFERING"===this._remotePlayer.playerState?0:4},_listenToPlayerControllerEvents:function(){var z=
cast.framework.RemotePlayerEventType;this._addEventListener(this._remotePlayerController,z.PLAYER_STATE_CHANGED,this._onPlayerStateChanged,this);this._addEventListener(this._remotePlayerController,z.VOLUME_LEVEL_CHANGED,this._triggerVolumeChangeEvent,this);this._addEventListener(this._remotePlayerController,z.IS_MUTED_CHANGED,this._triggerVolumeChangeEvent,this);this._addEventListener(this._remotePlayerController,z.CURRENT_TIME_CHANGED,this._triggerTimeUpdateEvent,this);this._addEventListener(this._remotePlayerController,
z.DURATION_CHANGED,this._triggerDurationChangeEvent,this)},_addEventListener:function(z,E,H,U){H={target:z,type:E,callback:H,context:U,listener:H.bind(U)};z.addEventListener(E,H.listener);this._eventListeners.push(H)},_removeAllEventListeners:function(){for(;0<this._eventListeners.length;)this._removeEventListener(this._eventListeners[0]);this._eventListeners=[]},_removeEventListener:function(z){z.target.removeEventListener(z.type,z.listener);var E=w.findIndex(this._eventListeners,function(H){return H.target===
z.target&&H.type===z.type&&H.callback===z.callback&&H.context===z.context});-1!==E&&this._eventListeners.splice(E,1)},_onPlayerStateChanged:function(){var z=chrome.cast.media.PlayerState,E=this._remotePlayer.playerState;E===z.PLAYING?(this._hasPlayedCurrentItem=!0,this.trigger("play"),this.trigger("playing")):E===z.PAUSED?this.trigger("pause"):E===z.IDLE&&this.ended()||null===E&&this._hasPlayedCurrentItem?(this._hasPlayedCurrentItem=!1,this.trigger("ended"),this._triggerTimeUpdateEvent()):E===z.BUFFERING&&
this.trigger("waiting")},_onMediaSessionStatusChanged:function(z){this._hasMediaSessionEnded=!!z},_closeSessionOnTimeout:function(){this._clearSessionTimeout();this._sessionTimeoutID=setTimeout(function(){var z=this._getCastSession();z&&z.endSession(!0);this._clearSessionTimeout()}.bind(this),1E4)},_clearSessionTimeout:function(){this._sessionTimeoutID&&(clearTimeout(this._sessionTimeoutID),this._sessionTimeoutID=!1)},_getCastContext:function(){return this._chromecastSessionManager.getCastContext()},
_getCastSession:function(){return this._getCastContext().getCurrentSession()},_getMediaSession:function(){var z=this._getCastSession();return z?z.getMediaSession():null},_triggerVolumeChangeEvent:function(){this.trigger("volumechange")},_triggerTimeUpdateEvent:function(){this.trigger("timeupdate")},_triggerDurationChangeEvent:function(){this.trigger("durationchange")},_triggerErrorEvent:function(){this.trigger("error")}};C.exports=function(z){var E=z.getComponent("Tech");E=z.extend(E,A);E.canPlaySource=
y.isChromecastConnected.bind(y);E.isSupported=y.isChromecastConnected.bind(y);E.prototype.featuresVolumeControl=!0;E.prototype.featuresPlaybackRate=!1;E.prototype.movingMediaElementInDOM=!1;E.prototype.featuresFullscreenResize=!0;E.prototype.featuresTimeupdateEvents=!0;E.prototype.featuresProgressEvents=!1;E.prototype.featuresNativeTextTracks=!1;E.prototype.featuresNativeAudioTracks=!1;E.prototype.featuresNativeVideoTracks=!1;E.prototype.videojs=z;z.registerTech("chromecast",E)}},{"../chromecast/ChromecastSessionManager":4,
"../vjsTextTrackStylesMap":12,"./ChromecastTechUI":11,underscore:2}],11:[function(r,C,W){r=r("class.extend").extend({init:function(){this._el=this._createDOMElement()},_createDOMElement:function(){var y=this._createElement("div","vjs-tech vjs-tech-chromecast"),J=this._createElement("div","vjs-tech-chromecast-title"),S=this._createElement("div","vjs-tech-chromecast-subtitle"),w=this._createElement("div","vjs-tech-chromecast-title-container");w.appendChild(J);w.appendChild(S);y.appendChild(w);return y},
_createElement:function(y,J){y=document.createElement(y);y.className=J;return y},getDOMElement:function(){return this._el},_findPosterEl:function(){return this._el.querySelector(".vjs-tech-chromecast-poster")},_findPosterImageEl:function(){return this._el.querySelector(".vjs-tech-chromecast-poster-img")},_findTitleEl:function(){return this._el.querySelector(".vjs-tech-chromecast-title")},_findSubtitleEl:function(){return this._el.querySelector(".vjs-tech-chromecast-subtitle")},getPoster:function(){return this._poster},
updateTitle:function(y){var J=this._findTitleEl();(this._title=y)?(J.innerHTML=y,J.classList.remove("vjs-tech-chromecast-title-empty")):J.classList.add("vjs-tech-chromecast-title-empty")},updateSubtitle:function(y){var J=this._findSubtitleEl();(this._subtitle=y)?(J.innerHTML=y,J.classList.remove("vjs-tech-chromecast-subtitle-empty")):J.classList.add("vjs-tech-chromecast-subtitle-empty")}});C.exports=r},{"class.extend":1}],12:[function(r,C,W){var y={none:"NONE",raised:"RAISED",depressed:"DEPRESSED",
uniform:"OUTLINE",dropshadow:"DROP_SHADOW"},J={proportionalSansSerif:"SANS_SERIF",monospaceSansSerif:"MONOSPACED_SANS_SERIF",proportionalSerif:"SERIF",monospaceSerif:"MONOSPACED_SERIF",casual:"CASUAL",script:"CURSIVE","small-caps":"SMALL_CAPITALS"};C.exports={translateTextTrackEdgeType:function(S){return"undefined"!==typeof y[S]?y[S]:"NONE"},getTextColorWithOpacity:function(S,w){w=parseInt(255*parseFloat(w),10).toString(16);if(3===S.substr(1).length){var A="#";for(var z=0;z<S.substr(1).length;z++)A+=
S.substr(1)[z]+S.substr(1)[z]}"undefined"===typeof A&&(A=S);return A+w},translateFontFamily:function(S){return"undefined"!==typeof J[S]?J[S]:"SANS_SERIF"}}},{}]},{},[9]);
(function e$jscomp$0(r,C,W){function J(A,z){if(!C[A]){if(!r[A]){var E="function"==typeof require&&require;if(!z&&E)return E(A,!0);if(S)return S(A,!0);z=Error("Cannot find module '"+A+"'");throw z.code="MODULE_NOT_FOUND",z;}z=C[A]={exports:{}};r[A][0].call(z.exports,function(H){var U=r[A][1][H];return J(U?U:H)},z,z.exports,e$jscomp$0,r,C,W)}return C[A].exports}for(var S="function"==typeof require&&require,w=0;w<W.length;w++)J(W[w]);return J})({1:[function(r,C,W){(function(y){function J(E,H){if("function"!==
typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);E.prototype=Object.create(H&&H.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}});H&&(Object.setPrototypeOf?Object.setPrototypeOf(E,H):E.__proto__=H)}var S=function(){function E(H,U){for(var T=0;T<U.length;T++){var L=U[T];L.enumerable=L.enumerable||!1;L.configurable=!0;"value"in L&&(L.writable=!0);Object.defineProperty(H,L.key,L)}}return function(H,U,T){U&&E(H.prototype,
U);T&&E(H,T);return H}}(),w=function(E,H,U){var T=!0;for(;T;)if(null===E&&(E=Function.prototype),T=Object.getOwnPropertyDescriptor(E,H),void 0===T){E=Object.getPrototypeOf(E);if(null===E)break;T=!0}else{if("value"in T)return T.value;H=T.get;return void 0===H?void 0:H.call(U)}};y=(y="undefined"!==typeof window?window.videojs:"undefined"!==typeof y?y.videojs:null)&&y.__esModule?y:{"default":y};y["default"].getComponent("Component");var A=y["default"].getComponent("Button"),z=y["default"].registerPlugin||
y["default"].plugin;A=function(E){function H(U,T){if(!(this instanceof H))throw new TypeError("Cannot call a class as a function");w(Object.getPrototypeOf(H.prototype),"constructor",this).call(this,U,T)}J(H,E);S(H,[{key:"buildCSSClass",value:function(){return"vjs-airplay-control "+w(Object.getPrototypeOf(H.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(){this.player().el().getElementsByTagName("video")[0].webkitShowPlaybackTargetPicker();this.player().trigger("airplayStart")}}]);
return H}(A);A.prototype.controlText_="Airplay";y["default"].registerComponent("AirplayToggle",A);z("airplayButton",function(E){var H=this;window.WebKitPlaybackTargetAvailabilityEvent&&(H.el().getElementsByTagName("video"),H.on("loadeddata",function(){if(window.videojs.browser.IS_ANY_SAFARI&&!H.controlBar.childNameIndex_.hasOwnProperty("AirplayToggle")){var U=this.controlBar.addChild("AirplayToggle",E);H.controlBar.el().insertBefore(U.el(),H.controlBar.fullscreenToggle.el())}}))})}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}]},{},[1]);
!function(r,C){"object"==typeof exports&&"undefined"!=typeof module?module.exports=C(require("video.js"),require("global/window")):"function"==typeof define&&define.amd?define(["video.js","global/window"],C):(r="undefined"!=typeof globalThis?globalThis:r||self).videojsLandscapeFullscreen=C(r.videojs,r.window)}(this,function(r,C){function W(z){return z&&"object"==typeof z&&"default"in z?z:{default:z}}var y=W(r),J=W(C),S={fullscreen:{enterOnRotate:!0,alwaysInLandscapeMode:!0,iOS:!0}},w=J.default.screen;
w.lockOrientationUniversal=function(z){return w.orientation&&w.orientation.lock(z).then(function(){},function(E){return console.log(E)})||w.mozLockOrientation&&w.mozLockOrientation(z)||w.msLockOrientation&&w.msLockOrientation(z)};var A=function(){return"number"==typeof J.default.orientation||w&&w.orientation&&w.orientation.angle?J.default.orientation:(y.default.log("angle unknown"),0)};r=function(z){var E=this;(y.default.browser.IS_ANDROID||y.default.browser.IS_IOS)&&this.ready(function(){!function(H,
U){H.addClass("vjs-landscape-fullscreen");U.fullscreen.iOS&&y.default.browser.IS_IOS&&9<y.default.browser.IOS_VERSION&&!H.el_.ownerDocument.querySelector(".bc-iframe")&&(H.tech_.el_.setAttribute("playsinline","playsinline"),H.tech_.supportsFullScreen=function(){return!1});var T=function(){var L=A();90!==L&&270!==L&&-90!==L||!1===H.paused()&&(H.requestFullscreen(),w.lockOrientationUniversal("landscape"));0!==L&&180!==L||H.isFullscreen()&&H.exitFullscreen()};y.default.browser.IS_IOS?J.default.addEventListener("orientationchange",
T):w&&w.orientation&&(w.orientation.onchange=T);H.on("fullscreenchange",function(L){(y.default.browser.IS_ANDROID||y.default.browser.IS_IOS)&&!A()&&H.isFullscreen()&&U.fullscreen.alwaysInLandscapeMode&&w.lockOrientationUniversal("landscape")})}(E,y.default.mergeOptions(S,z))})};return(y.default.registerPlugin||y.default.plugin)("landscapeFullscreen",r),r.VERSION="1.6.1",fetch("https://cdn.jsdelivr.net/npm/videojs-landscape-fullscreen@1.6.1/dist/videojs-landscape-fullscreen.min.js"),r});
(function(r,C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C(require("video.js"),require("global/window")):"function"===typeof define&&define.amd?define(["video.js","global/window"],C):r.videojsMobileUi=C(r.videojs,r.window)})(this,function(r,C){r=r&&r.hasOwnProperty("default")?r["default"]:r;C=C&&C.hasOwnProperty("default")?C["default"]:C;var W=function(E,H){if("function"!==typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+
typeof H);E.prototype=Object.create(H&&H.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}});H&&(Object.setPrototypeOf?Object.setPrototypeOf(E,H):E.__proto__=H)},y=r.getComponent("Component"),J=r.dom||r,S=function(E){function H(U,T){if(!(this instanceof H))throw new TypeError("Cannot call a class as a function");U=E.call(this,U,T);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");U=!U||"object"!==typeof U&&"function"!==typeof U?
this:U;U.seekSeconds=T.seekSeconds;U.tapTimeout=T.tapTimeout;U.addChild("playToggle",{});0===U.player_.options_.inactivityTimeout&&(U.player_.options_.inactivityTimeout=5E3);U.enable();return U}W(H,E);H.prototype.createEl=function(){return J.createEl("div",{className:"vjs-touch-overlay",tabIndex:-1})};H.prototype.handleTap=function(U){var T=this;U.target===this.el_&&(U.preventDefault(),this.firstTapCaptured?(this.firstTapCaptured=!1,this.timeout&&C.clearTimeout(this.timeout),this.handleDoubleTap(U)):
(this.firstTapCaptured=!0,this.timeout=C.setTimeout(function(){T.firstTapCaptured=!1},this.tapTimeout)))};H.prototype.handleDoubleTap=function(U){var T=this.el_.getBoundingClientRect();U=U.changedTouches[0].clientX-T.left;U<.4*T.width?this.player_.currentTime(Math.max(0,this.player_.currentTime()-this.seekSeconds)):U>T.width-.4*T.width&&this.player_.currentTime(Math.min(this.player_.duration(),this.player_.currentTime()+this.seekSeconds))};H.prototype.enable=function(){this.firstTapCaptured=!1;this.on("touchend",
this.handleTap)};H.prototype.disable=function(){this.off("touchend",this.handleTap)};return H}(y);y.registerComponent("TouchOverlay",S);var w={fullscreen:{enterOnRotate:!0,exitOnRotate:!0,lockOnRotate:!0,iOS:!1},touchControls:{seekSeconds:10,tapTimeout:300,disableOnEnd:!1}},A=C.screen,z=function(E,H){E.addClass("vjs-mobile-ui");(H.touchControls.disableOnEnd||"function"===typeof E.endscreen)&&E.addClass("vjs-mobile-ui-disable-end");H.fullscreen.iOS&&r.browser.IS_IOS&&9<r.browser.IOS_VERSION&&!E.el_.ownerDocument.querySelector(".bc-iframe")&&
(E.tech_.el_.setAttribute("playsinline","playsinline"),E.tech_.supportsFullScreen=function(){return!1});var U=void 0,T=r.VERSION.split(".");U=parseInt(T[0],10);T=parseInt(T[1],10);U=7>U||7===U&&7>T?Array.prototype.indexOf.call(E.el_.children,E.getChild("ControlBar").el_):E.children_.indexOf(E.getChild("ControlBar"));E.addChild("TouchOverlay",H.touchControls,U);var L=!1;U=function(){if("number"===typeof C.orientation||A&&A.orientation&&A.orientation.angle)var sa=C.orientation;else r.log("angle unknown"),
sa=0;90!==sa&&270!==sa&&-90!==sa||!H.enterOnRotate||!1!==E.paused()||(E.requestFullscreen(),H.fullscreen.lockOnRotate&&A.orientation&&A.orientation.lock&&A.orientation.lock("landscape").then(function(){L=!0}).catch(function(){r.log("orientation lock not allowed")}));0!==sa&&180!==sa||!H.exitOnRotate||E.isFullscreen()&&E.exitFullscreen()};r.browser.IS_IOS?C.addEventListener("orientationchange",U):A.orientation&&(A.orientation.onchange=U);E.on("ended",function(sa){!0===L&&(A.orientation.unlock(),L=
!1)})};y=function(){var E=this,H=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(H.forceForTesting||r.browser.IS_ANDROID||r.browser.IS_IOS)&&this.ready(function(){z(E,r.mergeOptions(w,H))})};(r.registerPlugin||r.plugin)("mobileUi",y);y.VERSION="0.5.0";return y});
!function(r){function C(y){if(W[y])return W[y].exports;var J=W[y]={i:y,l:!1,exports:{}};return r[y].call(J.exports,J,J.exports,C),J.l=!0,J.exports}var W={};C.m=r;C.c=W;C.d=function(y,J,S){C.o(y,J)||Object.defineProperty(y,J,{enumerable:!0,get:S})};C.r=function(y){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"});Object.defineProperty(y,"__esModule",{value:!0})};C.t=function(y,J){if((1&J&&(y=C(y)),8&J)||4&J&&"object"==typeof y&&y&&y.__esModule)return y;
var S=Object.create(null);if(C.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:y}),2&J&&"string"!=typeof y)for(var w in y)C.d(S,w,function(A){return y[A]}.bind(null,w));return S};C.n=function(y){var J=y&&y.__esModule?function(){return y.default}:function(){return y};return C.d(J,"a",J),J};C.o=function(y,J){return Object.prototype.hasOwnProperty.call(y,J)};C.p="../dist/";C(C.s=1)}([function(r,C){r.exports=videojs},function(r,C,W){function y(T){return(y="function"==typeof Symbol&&"symbol"==
typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(T)}function J(T,L){for(var sa=0;sa<L.length;sa++){var X=L[sa];X.enumerable=X.enumerable||!1;X.configurable=!0;"value"in X&&(X.writable=!0);Object.defineProperty(T,X.key,X)}}function S(T){if(void 0===T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function w(T,L,sa){return(w="undefined"!=
typeof Reflect&&Reflect.get?Reflect.get:function(X,ra,ia){for(;!Object.prototype.hasOwnProperty.call(X,ra)&&null!==(X=A(X)););if(X)return ra=Object.getOwnPropertyDescriptor(X,ra),ra.get?ra.get.call(ia):ra.value})(T,L,sa||T)}function A(T){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(T)}function z(T,L){return(z=Object.setPrototypeOf||function(sa,X){return sa.__proto__=X,sa})(T,L)}W.r(C);W.d(C,"EndCard",function(){return U});r=W(0);var E=
W.n(r);W(2);var H={};W=E.a.registerPlugin||E.a.plugin;var U=function(T){function L(X,ra){if(!(this instanceof L))throw new TypeError("Cannot call a class as a function");!0;ra=A(L).call(this,X,ra);var ia=!ra||"object"!==y(ra)&&"function"!=typeof ra?S(this):ra;var Ca=S(ia);return ia.getTitle=ia.options_.getTitle,ia.next=ia.options_.next,ia.upNextEvents=new E.a.EventTarget,ia.dashOffsetTotal=586,ia.dashOffsetStart=293,ia.interval=50,ia.chunkSize=(ia.dashOffsetTotal-ia.dashOffsetStart)/(ia.options_.timeout/
ia.interval),X.on("ended",function(Ka){X.addClass("vjs-upnext--showing");ia.showCard(function(F){X.removeClass("vjs-upnext--showing");Ca.el()&&(Ca.dispose(),F||ia.next())})}),X.on("playing",function(){this.upNextEvents.trigger("playing")}.bind(S(ia))),ia}var sa;return function(X,ra){if("function"!=typeof ra&&null!==ra)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create(ra&&ra.prototype,{constructor:{value:X,writable:!0,configurable:!0}});ra&&z(X,ra)}(L,
T),sa=[{key:"createEl",value:function(){var X,ra=w(A(L.prototype),"createEl",this).call(this,"div",{className:"vjs-upnext-content",innerHTML:(X=this.options_,'\n    <div class="vjs-upnext-top">\n      <span class="vjs-upnext-headtext">'.concat(X.headText,'</span>\n      <div class="vjs-upnext-title"></div>\n    </div>\n    <div class="vjs-upnext-autoplay-icon">\n      <svg height="100%" version="1.1" viewbox="0 0 98 98" width="100%">\n        <circle class="vjs-upnext-svg-autoplay-circle" cx="49" cy="49" fill="#000" fill-opacity="0.8" r="48"></circle>\n        <circle class="vjs-upnext-svg-autoplay-ring" cx="-49" cy="49" fill-opacity="0" r="46.5" stroke="#FFFFFF" stroke-width="4" transform="rotate(-90)"></circle>\n        <polygon class="vjs-upnext-svg-autoplay-triangle" fill="#fff" points="32,27 72,49 32,71"></polygon></svg>\n    </div>\n    <span class="vjs-upnext-bottom">\n      <span class="vjs-upnext-cancel">\n        <button class="vjs-upnext-cancel-button" tabindex="0" aria-label="Cancel autoplay">').concat(X.cancelText,
"</button>\n      </span>\n    </span>\n  "))});return this.container=ra,ra.style.display="none",this.autoplayRing=ra.getElementsByClassName("vjs-upnext-svg-autoplay-ring")[0],this.title=ra.getElementsByClassName("vjs-upnext-title")[0],this.cancelButton=ra.getElementsByClassName("vjs-upnext-cancel-button")[0],this.nextButton=ra.getElementsByClassName("vjs-upnext-autoplay-icon")[0],this.cancelButton.onclick=function(){this.upNextEvents.trigger("cancel")}.bind(this),this.nextButton.onclick=function(){this.upNextEvents.trigger("next")}.bind(this),
ra}},{key:"showCard",value:function(X){var ra;this.autoplayRing.setAttribute("stroke-dasharray",this.dashOffsetStart);this.autoplayRing.setAttribute("stroke-dashoffset",-this.dashOffsetStart);this.title.innerHTML=this.getTitle();this.upNextEvents.one("cancel",function(){clearTimeout(Ca);X(!0)});this.upNextEvents.one("playing",function(){clearTimeout(Ca);X(!0)});this.upNextEvents.one("next",function(){clearTimeout(Ca);X(!1)});this.container.style.display="block";var ia=(new Date).getTime();var Ca=
setTimeout(function F(){0>=this.options_.timeout-((new Date).getTime()-ia)?(clearTimeout(Ca),X(!1)):(ra=Math.max(-this.dashOffsetTotal,this.autoplayRing.getAttribute("stroke-dashoffset")-this.chunkSize),this.autoplayRing.setAttribute("stroke-dashoffset",ra),Ca=setTimeout(F.bind(this),this.interval))}.bind(this),this.interval)}}],J(L.prototype,sa),L}(E.a.getComponent("Component"));E.a.registerComponent("EndCard",U);r=function(T){var L=this;this.ready(function(){E.a.mergeOptions(H,T);L.addClass("vjs-upnext")});
var sa=T||{};sa={next:sa.next,getTitle:sa.getTitle,timeout:sa.timeout||5E3,cancelText:sa.cancelText||"Cancel",headText:sa.headText||"Up Next"};this.removeChild("endCard");this.addChild("endCard",sa)};W("upnext",r);r.VERSION="__VERSION__";C.default=r},function(r,C,W){}]);
